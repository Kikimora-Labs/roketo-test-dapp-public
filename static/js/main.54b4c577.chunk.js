(this["webpackJsonproketo-dapp"]=this["webpackJsonproketo-dapp"]||[]).push([[0],{100:function(e,t,a){e.exports={root:"styles_root__37pAo",label:"styles_label__1Z1u2",description:"styles_description__3HMUq",error:"styles_error__iK_dp",required:"styles_required__eL5Iv"}},101:function(e,t,a){e.exports={root:"styles_root__2b5hR",description:"styles_description__256I8",checkbox:"styles_checkbox__JfL1O",error:"styles_error__3vxG-",disabled:"styles_disabled__3pqPt"}},102:function(e,t,a){e.exports={dropdownWrapper:"styles_dropdownWrapper__1mfn5",dropdownOpener:"styles_dropdownOpener__xnUU_",tokenOption:"styles_tokenOption__2nenl",withHover:"styles_withHover__17YXX",dropdownMenu:"styles_dropdownMenu__1M_bV"}},103:function(e,t,a){e.exports={root:"styles_root__1Ickw",controls:"styles_controls__35vzk",name:"styles_name__26X88",comment:"styles_comment__z2oIA",withMarginRight:"styles_withMarginRight__20A25"}},119:function(e,t,a){e.exports={root:"styles_root__1_66R",radio:"styles_radio__3I1ek",radioActive:"styles_radioActive__2fx8l",text:"styles_text__21Txd"}},12:function(e,t,a){e.exports={wrapper:"styles_wrapper__CegNU",root:"styles_root__1apvt",centeredFlex:"styles_centeredFlex__1HZSf",infoRow:"styles_infoRow__2vMrz",numericProgress:"styles_numericProgress__2AuoP",breadbrumbs:"styles_breadbrumbs__BUT8d",streamsLink:"styles_streamsLink__L0U7w",breadbrumb:"styles_breadbrumb__NNWx2",id:"styles_id__16P2T",stream:"styles_stream__3Fr_5",left:"styles_left__1kdhS",right:"styles_right__vZBRd",tile:"styles_tile__2fhhc",remaining:"styles_remaining__2iHJj",blockTitle:"styles_blockTitle__TMhpt",main:"styles_main__18lFE",closeBadge:"styles_closeBadge__oSZpP",tokenIcon:"styles_tokenIcon__2BgHM",buttons:"styles_buttons__kZcO7",divider:"styles_divider__hCiPy",speed:"styles_speed__3klLg",commentBody:"styles_commentBody__1ywdK",copyTitle:"styles_copyTitle__2hQ0e",copyButton:"styles_copyButton__10iJH",linkIcon:"styles_linkIcon__1XYWy",link:"styles_link__24b3y",infoTile:"styles_infoTile__2Te2a",blockHeader:"styles_blockHeader__1zEQa",sectionHeader:"styles_sectionHeader__2S7fb",dropdownOpener:"styles_dropdownOpener__374xe",infoTitle:"styles_infoTitle__wuj-6",font16:"styles_font16__3CMGR",name:"styles_name__16kMm",font14:"styles_font14__2T9bM",font12:"styles_font12__eO0Tl",streamID:"styles_streamID__2QzEw",grey:"styles_grey__3NsWF",modalContent:"styles_modalContent__2SlZf",modalOverlay:"styles_modalOverlay__1e4y6",modalHeader:"styles_modalHeader__3KM3Z",modalButtons:"styles_modalButtons__3_5n3",modalButton:"styles_modalButton__2sR4n",modalSecondary:"styles_modalSecondary__37FKH",dueDate:"styles_dueDate__2sJ5G",dueDateLabel:"styles_dueDateLabel__2wyIH",dueDateValue:"styles_dueDateValue__1rWbE"}},120:function(e,t,a){e.exports={root:"styles_root__HwxLP",dropdownWrapper:"styles_dropdownWrapper__32byB",dropdownMenu:"styles_dropdownMenu__1RS3q",dropdownInactive:"styles_dropdownInactive__34nZF"}},147:function(e,t,a){e.exports={root:"authorization_root__3Nfgj",name:"authorization_name__GjBzW",logoutButton:"authorization_logoutButton__2sCaP"}},148:function(e,t,a){e.exports={root:"styles_root__9Q_y8",arrow:"styles_arrow__dmtxI",rotate:"styles_rotate__3bkvh"}},149:function(e,t,a){e.exports={menu:"styles_menu__oG1pK",menuDivider:"styles_menuDivider__3rvtk",hidden:"styles_hidden__3JyX9"}},15:function(e,t,a){e.exports={wrapper:"styles_wrapper__waQWy",root:"styles_root__19PW7",centeredFlex:"styles_centeredFlex__idtVt",infoRow:"styles_infoRow__DynnT",numericProgress:"styles_numericProgress__3WX9j",breadbrumbs:"styles_breadbrumbs__3R-VX",streamsLink:"styles_streamsLink__z_oX2",breadbrumb:"styles_breadbrumb__35lMb",id:"styles_id__3U16x",stream:"styles_stream__15zYj",left:"styles_left__2Gn-B",right:"styles_right__2t6b3",tile:"styles_tile__2S_fe",remaining:"styles_remaining__2xbtE",blockTitle:"styles_blockTitle__AVORE",main:"styles_main__EZ9Ad",tokenIcon:"styles_tokenIcon__1ECAS",buttons:"styles_buttons__1knN9",divider:"styles_divider__LJnOh",speed:"styles_speed__16A6R",commentBody:"styles_commentBody__1f5OU",copyTitle:"styles_copyTitle__5Y0V9",copyButton:"styles_copyButton__LRE-Z",linkIcon:"styles_linkIcon__2jhgt",link:"styles_link__3w_CQ",infoTile:"styles_infoTile__3vchd",blockHeader:"styles_blockHeader__2hHfE",sectionHeader:"styles_sectionHeader__3bPFB",dropdownOpener:"styles_dropdownOpener__2WSze",infoTitle:"styles_infoTitle__1j4ai",font16:"styles_font16__1E8_k",font14:"styles_font14__34e9m",font12:"styles_font12__2Fhe5",streamID:"styles_streamID__bjGsg",grey:"styles_grey__1goqK"}},150:function(e,t,a){e.exports={root:"styles_root__2IVIz",sort:"styles_sort__2oMly",active:"styles_active__3vMTz"}},151:function(e,t,a){e.exports={root:"styles_root__12V-i",filtersWrapper:"styles_filtersWrapper__3lX2U",sortWithOrder:"styles_sortWithOrder__2gTJ0"}},152:function(e,t,a){e.exports={flexCenter:"styles_flexCenter__1ROiJ",name:"styles_name__HgeGm",nameLabel:"styles_nameLabel__1iFRt"}},153:function(e,t,a){e.exports={root:"styles_root__1_PXp",sort:"styles_sort__3sdm0",active:"styles_active__2U1h-"}},154:function(e,t,a){e.exports={root:"styles_root__1C2L3",filtersWrapper:"styles_filtersWrapper__3sIgz",sortWithOrder:"styles_sortWithOrder__2yZvk"}},155:function(e,t,a){e.exports={card:"styles_card__chYY0",title:"styles_title__cc9o3",finance:"styles_finance__wsZi_"}},156:function(e,t,a){e.exports={badge:"styles_badge__2AKuG",blue:"styles_blue__3vwgm",orange:"styles_orange__23CY5"}},157:function(e,t,a){e.exports={notAllowed:"styles_notAllowed__3rC0O",small:"styles_small__2wTWz",hasntPassedCliff:"styles_hasntPassedCliff__3QI54"}},158:function(e,t,a){e.exports={block:"styles_block__3xJQm",hint:"styles_hint__2cJLP",content:"styles_content__10idn"}},188:function(e,t,a){e.exports={defaultOverlay:"styles_defaultOverlay__3nR8o",defaultIcon:"styles_defaultIcon__hJLMj"}},189:function(e,t,a){e.exports={wrapper:"styles_wrapper__oqa_T",spinner:"styles_spinner__3Ptbo",spin:"styles_spin__1Vf_l"}},190:function(e,t,a){e.exports={root:"styles_root__3OdL8",linkButton:"styles_linkButton__oY6_t"}},191:function(e,t,a){e.exports={root:"styles_root__2s9Jd",pageLink:"styles_pageLink__3rg8i"}},192:function(e,t,a){e.exports={input:"styles_input__KeAvj",error:"styles_error__1dP_7"}},193:function(e,t,a){e.exports={profileForm:"ProfileForm_profileForm__6KCp0",loaderWrapper:"ProfileForm_loaderWrapper__1tIAk",label:"ProfileForm_label__3P7Uk",inputName:"ProfileForm_inputName__3fFmI"}},194:function(e,t,a){e.exports={textarea:"styles_textarea__1lPSs",error:"styles_error__3C3Rv"}},195:function(e,t,a){e.exports={formfield:"styles_formfield__2DZrP",textLimitCounter:"styles_textLimitCounter__2B7mB"}},198:function(e,t,a){e.exports={flexCenter:"styles_flexCenter__B0Jt1",name:"styles_name__25-53"}},199:function(e,t,a){e.exports={root:"styles_root__2iwP4",linkButton:"styles_linkButton__1laX_"}},24:function(e,t,a){e.exports={relative:"styles_relative__yWBD-",controlButton:"styles_controlButton__1sUCZ",statusPadded:"styles_statusPadded__3delP",button:"styles_button__18c-7",modalContent:"styles_modalContent__1ddyy",modalOverlay:"styles_modalOverlay__1UpG0",modalHeader:"styles_modalHeader__1wI_9",modalButtons:"styles_modalButtons__3ze2c",modalButton:"styles_modalButton__2LWw5",modalSecondary:"styles_modalSecondary__3V_0f",modalWarning:"styles_modalWarning__1UbkD",modalDanger:"styles_modalDanger__3abDR",controlsMenu:"styles_controlsMenu__2Z6nr",dropdownOpener:"styles_dropdownOpener__2fJW3",start:"styles_start__1Jd1k",active:"styles_active__1vNpj",pause:"styles_pause__jEqEC",stop:"styles_stop__19ozh"}},25:function(e,t,a){e.exports={relative:"styles_relative__2QiFJ",controlButton:"styles_controlButton__1vq4p",statusPadded:"styles_statusPadded__3UL71",button:"styles_button__1UW_h",modalContent:"styles_modalContent__3f34e",modalOverlay:"styles_modalOverlay__ZnuwA",modalHeader:"styles_modalHeader__2-Oti",modalButtons:"styles_modalButtons__367QE",modalButton:"styles_modalButton__uHmah",modalSecondary:"styles_modalSecondary__1y73P",modalWarning:"styles_modalWarning__aeSV8",modalDanger:"styles_modalDanger__2FJKr",controlsMenu:"styles_controlsMenu__h4rsZ",dropdownOpener:"styles_dropdownOpener__KpUjE",notAllowed:"styles_notAllowed__AgwS0",start:"styles_start__AVZHt",active:"styles_active__1J1qI",pause:"styles_pause__AS7EK",stop:"styles_stop__IMPS5"}},252:function(e,t,a){e.exports={layout:"styles_layout__2ac3i"}},258:function(e,t,a){e.exports={rotate:"styles_rotate__ZjzwB"}},259:function(e,t,a){e.exports={container:"styles_container__1AC1F",logo:"styles_logo__3ciI3"}},263:function(e,t,a){e.exports={error:"styles_error__sGMTb",maxWidth:"styles_maxWidth__2ZM3Z"}},267:function(e,t,a){e.exports={root:"styles_root__20iY_"}},28:function(e,t,a){e.exports={root:"styles_root__3FXzU",text:"styles_text__3Ccy_",status:"styles_status__2XG4U",grey:"styles_grey__6V1Y1",overlay:"styles_overlay__vPDRx",tooltip:"styles_tooltip__17_8O",innerStatus:"styles_innerStatus__294En",smaller:"styles_smaller__35jwv",speed:"styles_speed__2gSeJ",remained:"styles_remained__2GAOw",clock:"styles_clock__1TglA",progress:"styles_progress__lFlGb",streamed:"styles_streamed__3msIw",withdrawn:"styles_withdrawn__28DlC"}},29:function(e,t,a){e.exports={root:"styles_root__38B64",text:"styles_text__11atI",status:"styles_status__3b_ey",grey:"styles_grey__36o2c",overlay:"styles_overlay__3rasY",tooltip:"styles_tooltip__23VN9",innerStatus:"styles_innerStatus__132Fk",smaller:"styles_smaller__HXT1f",speed:"styles_speed__1i2og",remained:"styles_remained__2-6rd",clock:"styles_clock__2q7yf",progress:"styles_progress__YG-x-",streamed:"styles_streamed__2mtn0",withdrawn:"styles_withdrawn__SfaXK"}},305:function(e,t){},31:function(e,t,a){e.exports={root:"styles_root__1XQku",dropdownOpener:"styles_dropdownOpener__3kQgF",dropdownMenu:"styles_dropdownMenu___vHNq",container:"styles_container__aPnlt",loader:"styles_loader__3dO2x",header:"styles_header__1d9ir",date:"styles_date__2TpB4",divider:"styles_divider__KqyfJ",notification:"styles_notification__3Zr3E",unread:"styles_unread__3ngZd",icon:"styles_icon__3IYnm",notificationBody:"styles_notificationBody__3G1w8",primaryText:"styles_primaryText__3lpJr",secondaryText:"styles_secondaryText__30aDU",time:"styles_time__1xidu",compact:"styles_compact__1AVk6",mainText:"styles_mainText__1Fr7u"}},315:function(e,t){},333:function(e,t){},362:function(e,t,a){},38:function(e,t,a){e.exports={root:"styles_root__1zlKm",title:"styles_title__39adN",description:"styles_description__12RAl",form:"styles_form__1ud4S",row:"styles_row__Pz5Iu",rowItem:"styles_rowItem__TexQO",checkboxes:"styles_checkboxes__OfA8Y",submitError:"styles_submitError__1B7Gd",actionButtonsWrapper:"styles_actionButtonsWrapper__1E6yB",feeDisclaimer:"styles_feeDisclaimer__WNlqw",feeDisclaimerRow:"styles_feeDisclaimerRow__11c8e",amount:"styles_amount__1l7_V",subDescription:"styles_subDescription__1OTIx"}},483:function(e,t,a){},484:function(e,t,a){"use strict";a.r(t);var n,r,s=a(1),c=a.n(s),o=a(40),i=a.n(o),l=a(46),u=a.n(l),d=(a(204),a(13)),j=a(26),m=a(30),b=a(5),f=a(8),p=a(3),h=a.n(p),_=a(10),O=a(23),v={ACCOUNT_SUFFIX:"testnet",NEAR_NETWORK_ID:"testnet",NEAR_NODE_URL:"https://rpc.testnet.near.org",ROKETO_CONTRACT_NAME:"streaming-r-v2.dcversus.testnet",WALLET_URL:"https://wallet.testnet.near.org",PUBLIC_URL:"",PRICE_ORACLE_CONTRACT_NAME:"priceoracle.testnet",PRICE_ORACLE_SOURCE_ID:"oracle-1.testnet",WNEAR_ID:"wrap.testnet",WEB_API_URL:"https://api.test.roke.to",COMMIT_HASH:null!==(n=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ROKETO_CONTRACT_NAME:"streaming-r-v2.dcversus.testnet",REACT_APP_ROKETO_LEGACY_CONTRACT_NAME:"dev-1635510732093-17387698050424",REACT_APP_WALLET_URL:"https://wallet.testnet.near.org",REACT_APP_NEAR_NETWORK_ID:"testnet",REACT_APP_NEAR_ACCOUNT_SUFFIX:"testnet",REACT_APP_NEAR_NODE_URL:"https://rpc.testnet.near.org",REACT_APP_PRICE_ORACLE_CONTRACT_NAME:"priceoracle.testnet",REACT_APP_PRICE_ORACLE_SOURCE_ID:"oracle-1.testnet",REACT_APP_WNEAR_ID:"wrap.testnet",REACT_APP_WEB_API_URL:"https://api.test.roke.to"}).COMMIT_HASH)&&void 0!==n?n:"development",BUILD_TIME:null!==(r=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ROKETO_CONTRACT_NAME:"streaming-r-v2.dcversus.testnet",REACT_APP_ROKETO_LEGACY_CONTRACT_NAME:"dev-1635510732093-17387698050424",REACT_APP_WALLET_URL:"https://wallet.testnet.near.org",REACT_APP_NEAR_NETWORK_ID:"testnet",REACT_APP_NEAR_ACCOUNT_SUFFIX:"testnet",REACT_APP_NEAR_NODE_URL:"https://rpc.testnet.near.org",REACT_APP_PRICE_ORACLE_CONTRACT_NAME:"priceoracle.testnet",REACT_APP_PRICE_ORACLE_SOURCE_ID:"oracle-1.testnet",REACT_APP_WNEAR_ID:"wrap.testnet",REACT_APP_WEB_API_URL:"https://api.test.roke.to"}).BUILD_TIME)&&void 0!==r?r:null},x="200000000000000";function y(){return g.apply(this,arguments)}function g(){return(g=Object(f.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new O.keyStores.BrowserLocalStorageKeyStore,e.next=3,Object(O.connect)({nodeUrl:v.NEAR_NODE_URL,walletUrl:v.WALLET_URL,networkId:v.NEAR_NETWORK_ID,keyStore:t,headers:{}});case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return N.apply(this,arguments)}function N(){return N=Object(f.a)(h.a.mark((function e(t){var a,n,r,s,c,o,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=function(){return(i=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.signOut();case 2:window.location.reload();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},o=function(){return i.apply(this,arguments)},c=function(){return(c=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"Roketo Token Streaming Service",e.next=3,t.requestSignIn(v.ROKETO_CONTRACT_NAME,"Roketo Token Streaming Service");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},s=function(){return c.apply(this,arguments)},e.next=6,t.getAccountId();case 6:return a=e.sent,e.next=9,t.account();case 9:if(n=e.sent,!a){e.next=14;break}return e.next=13,n.getAccountBalance();case 13:r=e.sent;case 14:return e.abrupt("return",{balance:r,account:n,signedIn:!!a,accountId:a,login:s,logout:o});case 15:case"end":return e.stop()}}),e)}))),N.apply(this,arguments)}var k=a(17),C=a(18),S=a(19),A=a.n(S),I=a(488),L={xYears:"{{count}} years",xMonths:"{{count}} months",xDays:"{{count}}d",xSeconds:"{{count}}s",xMinutes:"{{count}}m",xHours:"{{count}}h"},R={formatDistance:function(e,t){return L[e].replace("{{count}}",t)}};var T="Initialized",E="Active",B="Paused",M="Finished",P=function(e){return e.status===E};function F(e){return e.status===T||e.status===B}function D(e){return"object"===typeof(null===e||void 0===e?void 0:e.status)&&M in e.status}function H(e){if(F(e)||!function(e){return!e.cliff||Date.now()>e.cliff/1e6}(e))return new A.a(0);var t,a=Object(I.a)(Date.now())-(t=e.last_action,Number(t)/1e3/1e3/1e3);return A.a.minimum(e.balance,Number(e.tokens_per_sec)*a)}var V=function(){function e(t){var a=t.contract,n=t.account;Object(k.a)(this,e),this.contract=void 0,this.account=void 0,this.contract=a,this.account=n}return Object(C.a)(e,[{key:"getAccount",value:function(){var e=Object(f.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.account.accountId){e.next=2;break}return e.abrupt("return",{active_incoming_streams:0,active_outgoing_streams:0,deposit:"0",inactive_incoming_streams:0,inactive_outgoing_streams:0,is_cron_allowed:!0,last_created_stream:"any",stake:"0",total_incoming:{},total_outgoing:{},total_received:{}});case 2:return e.prev=2,e.next=5,this.contract.get_account({account_id:this.account.accountId});case 5:return t=e.sent,e.abrupt("return",t);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",{active_incoming_streams:0,active_outgoing_streams:0,deposit:"0",inactive_incoming_streams:0,inactive_outgoing_streams:0,is_cron_allowed:!0,last_created_stream:"any",stake:"0",total_incoming:{},total_outgoing:{},total_received:{}});case 12:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"getAccountIncomingStreams",value:function(){var e=Object(f.a)(h.a.mark((function e(t){var a,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.from,n=t.limit,e.prev=1,e.next=4,this.contract.get_account_incoming_streams({account_id:this.account.accountId,from:a,limit:n});case 4:return r=e.sent,e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getAccountOutgoingStreams",value:function(){var e=Object(f.a)(h.a.mark((function e(t){var a,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.from,n=t.limit,e.prev=1,e.next=4,this.contract.get_account_outgoing_streams({account_id:this.account.accountId,from:a,limit:n});case 4:return r=e.sent,e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getStream",value:function(){var e=Object(f.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.streamId,e.next=3,this.contract.get_stream({stream_id:a});case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getDao",value:function(){var e=Object(f.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contract.get_dao();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createStream",value:function(){var e=Object(f.a)(h.a.mark((function e(t){var a,n,r,s,c,o,i,l,u,d,j,m,b,f,p;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.comment,n=t.deposit,r=t.receiverId,s=t.tokenAccountId,c=t.commissionOnCreate,o=t.tokensPerSec,i=t.cliffPeriodSec,l=t.delayed,u=void 0!==l&&l,d=t.isExpirable,j=t.isLocked,m=t.callbackUrl,b=t.handleTransferStream,f=new A.a(n).plus(c).toFixed(),p={description:JSON.stringify({comment:a}),balance:n,owner_id:this.account.accountId,receiver_id:r,token_name:s,tokens_per_sec:BigInt(o),cliff_period_sec:i,is_locked:j,is_auto_start_enabled:!u,is_expirable:d},e.abrupt("return",b(p,f,m));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"startStream",value:function(){var e=Object(f.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.streamId,e.next=3,this.contract.start_stream({stream_id:a},x,"1");case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"pauseStream",value:function(){var e=Object(f.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.streamId,e.next=3,this.contract.pause_stream({stream_id:a},x,"1");case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"stopStream",value:function(){var e=Object(f.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.streamId,e.next=3,this.contract.stop_stream({stream_id:a},x,"1");case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=Object(f.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.streamIds,e.next=3,this.contract.withdraw({stream_ids:a},x,"1");case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function W(e){return U.apply(this,arguments)}function U(){return(U=Object(f.a)(h.a.mark((function e(t){var a,n,r,s,c,o,i,l,u;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.account,n=new O.Contract(a,v.ROKETO_CONTRACT_NAME,{viewMethods:["get_stats","get_dao","get_token","get_stream","get_account","get_account_incoming_streams","get_account_outgoing_streams","get_account_ft"],changeMethods:["start_stream","pause_stream","stop_stream","withdraw"]}),r=new V({contract:n,account:a}),s=r.getAccount(),c=r.getDao(),e.next=7,Promise.all([s,c]);case 7:return o=e.sent,i=Object(b.a)(o,2),l=i[0],u=i[1],e.abrupt("return",{api:r,dao:u,account:l});case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Z,q,K=a(6),Y=a(80),z={baseServer:new Y.ServerConfiguration(v.WEB_API_URL,{})},J=function(){function e(){Object(k.a)(this,e),this.initialized=!1,this.token=null,this.authApiClient=new Y.AuthApi(Object(Y.createConfiguration)(Object(K.a)({},z)))}return Object(C.a)(e,[{key:"getToken",value:function(){return this.token||(this.token=this.getRefreshedToken()),this.token}},{key:"refreshToken",value:function(){this.token=this.getRefreshedToken()}},{key:"getRefreshedToken",value:function(){var e=Object(f.a)(h.a.mark((function e(){var t,a,n,r,s,c,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getAccountIdAndNear();case 3:if(t=e.sent,a=t.accountId,"roketoApiAccessToken",n="".concat("roketoApiAccessToken",":").concat(a),this.initialized){e.next=12;break}if(this.initialized=!0,!(r=localStorage[n]||null)||this.containsUnicode(r)){e.next=12;break}return e.abrupt("return",r);case 12:return delete localStorage[n],e.next=15,this.generateLoginParams();case 15:return s=e.sent,e.next=18,this.authApiClient.login(s);case 18:return c=e.sent,o=c.accessToken,localStorage[n]=o,e.abrupt("return",o);case 24:throw e.prev=24,e.t0=e.catch(0),this.token=null,e.t0;case 28:case"end":return e.stop()}}),e,this,[[0,24]])})));return function(){return e.apply(this,arguments)}}()},{key:"getAccountIdAndNear",value:function(){var e=Object(f.a)(h.a.mark((function e(){var t,a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:return t=e.sent,a=new O.WalletConnection(t,v.ROKETO_CONTRACT_NAME),n=a.getAccountId(),e.abrupt("return",{accountId:n,near:t});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"generateLoginParams",value:function(){var e=Object(f.a)(h.a.mark((function e(){var t,a,n,r,s,c,o,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAccountIdAndNear();case 2:return t=e.sent,a=t.accountId,n=t.near,e.next=7,n.config.keyStore.getKey(n.config.networkId,a);case 7:return r=e.sent,s=Date.now(),c=r.sign((new TextEncoder).encode(String(s))),o=c.signature,i=Array.from(o),e.abrupt("return",{accountId:a,timestamp:s,signature:i});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"containsUnicode",value:function(e){return e!==encodeURIComponent(e)}}]),e}(),X=new J,G=Object(Y.createConfiguration)(Object(K.a)(Object(K.a)({},z),{},{authMethods:{bearer:{tokenProvider:X}}})),Q=new Y.UsersApi(G),$=new Y.NotificationsApi(G),ee=a(7),te=a(51),ae=a.n(te),ne=3600,re=86400,se=604800,ce=2419200,oe=29030400;!function(e){e.Second="second",e.Minute="minute",e.Hour="hour",e.Day="day"}(q||(q={}));var ie=(Z={},Object(ee.a)(Z,q.Hour,"/h"),Object(ee.a)(Z,q.Day,"/d"),Object(ee.a)(Z,q.Minute,"/m"),Object(ee.a)(Z,q.Second,"/s"),Z),le={signInButton:"signInButton",signOutButton:"signOutButton",availableForWithdrawalCaption:"availableForWithdrawalCaption",withdrawAllButton:"withdrawAllButton",createStreamButton:"createStreamButton",withdrawButton:"withdrawButton",withdrawTooltip:"withdrawTooltip",withdrawLoadingCaption:"withdrawLoadingCaption",streamProgressCaption:"streamProgressCaption",streamControlsDropdown:"streamControlsDropdown",streamStartButton:"streamStartButton",streamPauseButton:"streamPauseButton",streamStopButton:"streamStopButton",createStreamReceiverInput:"createStreamReceiverInput",createStreamAmountInput:"createStreamAmountInput",createStreamMonthsInput:"createStreamMonthsInput",createStreamDaysInput:"createStreamDaysInput",createStreamHoursInput:"createStreamHoursInput",createStreamMinutesInput:"createStreamMinutesInput",createStreamCommentInput:"createStreamCommentInput",createStreamDelayedCheckbox:"createStreamDelayedCheckbox",createStreamLockedCheckbox:"createStreamLockedCheckbox",createStreamCancelButton:"createStreamCancelButton",createStreamSubmitButton:"createStreamSubmitButton",openNotificationsButton:"openNotificationsButton",notificationsLoader:"notificationsLoader",notificationElement:"notificationElement",notificationPrimaryCaption:"notificationPrimaryCaption",notificationSecondaryCaption:"notificationSecondaryCaption"},ue=(Object.keys(le).reduce((function(e,t){return Object(K.a)(Object(K.a)({},e),{},Object(ee.a)({},t,'[data-testid="'.concat(le[t],'"]')))}),{}),function(){function e(t){Object(k.a)(this,e),this.tokenDecimals=void 0,this.MP=void 0,this.tokenDecimals=t,this.MP=Math.pow(10,t)}return Object(C.a)(e,[{key:"amount",value:function(e){var t=ae()(e).divide(this.MP).value(),a=ae()(t).format({mantissa:3,trimMantissa:!0,optionalMantissa:!0,average:!0});return 0===t?"0":0!==e&&t<.001?"<0.001":a}},{key:"toYocto",value:function(e){return ae()(e).multiply(this.MP).format({mantissa:0})}},{key:"toHumanReadableValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return ae()(e).divide(this.MP).format({mantissa:t,trimMantissa:!0,optionalMantissa:!0})}},{key:"tokensPerMeaningfulPeriod",value:function(t){var a,n=this,r=[1,60,ne,re,se,ce,oe],s=(a={1:"second"},Object(ee.a)(a,60,"minute"),Object(ee.a)(a,ne,"hour"),Object(ee.a)(a,re,"day"),Object(ee.a)(a,se,"week"),Object(ee.a)(a,ce,"month"),Object(ee.a)(a,oe,"year"),a),c=r.find((function(e){return ae()(t).multiply(e).divide(n.MP).value()>.1}))||oe,o=ae()(t).multiply(c).divide(this.MP).value();return{formattedValue:e.formatSmartly(o),unit:s[c]}}}],[{key:"formatSmartly",value:function(e){return 0===e?"0":e<.001?"<0.001":ae()(e).format({mantissa:3,trimMantissa:!0,optionalMantissa:!0,average:!0})}}]),e}()),de=a(251),je=a.n(de);function me(e){return e===v.WNEAR_ID}var be=function(){function e(t,a){var n=this;Object(k.a)(this,e),this.contract=void 0,this.tokenAccountId=void 0,this.account=void 0,this.addFunds=function(e,t,a){var r=[O.transactions.functionCall("ft_transfer_call",{receiver_id:v.ROKETO_CONTRACT_NAME,amount:e,memo:"Roketo transfer",msg:JSON.stringify({Deposit:{stream_id:t}})},"100000000000000","1")];return me(n.tokenAccountId)&&r.unshift(O.transactions.functionCall("near_deposit",{},"30000000000000",e)),n.account.signAndSendTransaction({receiverId:n.tokenAccountId,walletCallbackUrl:a,actions:r})},this.transfer=function(){var e=Object(f.a)(h.a.mark((function e(t,a,r){var s,c,o,i,l,u,d,j;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.getIsRegistered(t.owner_id),n.getIsRegistered(t.receiver_id)]);case 2:return s=e.sent,c=Object(b.a)(s,2),o=c[0],i=c[1],l=[O.transactions.functionCall("ft_transfer_call",{receiver_id:v.ROKETO_CONTRACT_NAME,amount:new A.a(a).toFixed(),memo:"Roketo transfer",msg:je.a.stringify({Create:{request:t}})},"100000000000000",1)],u=new A.a(0),d=O.utils.format.parseNearAmount("0.00125"),o||(l.unshift(O.transactions.functionCall("storage_deposit",{account_id:t.owner_id},"30000000000000",d)),u=u.plus(d)),i||(l.unshift(O.transactions.functionCall("storage_deposit",{account_id:t.receiver_id},"30000000000000",d)),u=u.plus(d)),me(n.tokenAccountId)&&l.unshift(O.transactions.functionCall("near_deposit",{},"30000000000000",new A.a(a).plus(u).toFixed())),j=n.account.signAndSendTransaction({receiverId:n.tokenAccountId,walletCallbackUrl:r,actions:l}),e.abrupt("return",j);case 14:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),this.tokenAccountId=a,this.account=t,this.contract=new O.Contract(t,a,{viewMethods:["ft_balance_of","ft_metadata","storage_balance_of"],changeMethods:["ft_transfer_call","storage_deposit","near_deposit"]})}return Object(C.a)(e,[{key:"getMetadata",value:function(){var e=Object(f.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contract.ft_metadata();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getBalance",value:function(){var e=Object(f.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.account.accountId){e.next=2;break}return e.abrupt("return","0");case 2:return e.next=4,this.contract.ft_balance_of({account_id:this.account.accountId});case 4:return t=e.sent,e.abrupt("return",t);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getIsRegistered",value:function(){var e=Object(f.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contract.storage_balance_of({account_id:t});case 2:return a=e.sent,e.abrupt("return",a&&"0"!==a.total);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function fe(e){return pe.apply(this,arguments)}function pe(){return pe=Object(f.a)(h.a.mark((function e(t){var a,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.account,n=t.tokens,r={},e.next=4,Promise.all(Object.keys(n).map(function(){var e=Object(f.a)(h.a.mark((function e(t){var s,c,o,i,l,u;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=new be(a,t),e.next=3,Promise.all([s.getMetadata(),s.getBalance()]);case 3:c=e.sent,o=Object(b.a)(c,2),i=o[0],l=o[1],u=new ue(i.decimals),r[t]={api:s,formatter:u,roketoMeta:n[t],meta:i,balance:l};case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:return e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)}))),pe.apply(this,arguments)}var he=Math.pow(10,24),_e=Math.pow(10,18),Oe={"wrap.testnet":he,"dai.fakes.testnet":_e,"wrap.near":he,"dai.bridge.near":_e},ve=["get_assets","get_asset","get_price_data"],xe=[],ye=function(e,t){return e.reduce((function(e,a){var n=Object(b.a)(a,2),r=n[0],s=n[1].reports.find((function(e){return e.oracle_id===t}));return s?Object(K.a)(Object(K.a)({},e),{},Object(ee.a)({},r,s.price)):e}),{})},ge=function(e,t){return function(a,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,s=e[a],c=t[a];if(!s||!c)return"0";var o=s.multiplier,i=s.decimals;return ae()(n).multiply(c).multiply(Number(o)).divide(Math.pow(10,i)).format({mantissa:r,trimMantissa:!0})}},we=function(){var e=Object(f.a)(h.a.mark((function e(t){var a,n,r,s,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.account,n=new O.Contract(a,v.PRICE_ORACLE_CONTRACT_NAME,{viewMethods:ve,changeMethods:xe}),e.next=4,n.get_assets({});case 4:return r=e.sent,s=ye(r,v.PRICE_ORACLE_SOURCE_ID),c=ge(s,Oe),e.abrupt("return",{getPriceInUsd:c});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Ne(e){return ke.apply(this,arguments)}function ke(){return(ke=Object(f.a)(h.a.mark((function e(t){var a,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=3,r=0;case 2:if(!(r<=a)){e.next=20;break}if(e.prev=3,!(r>0)){e.next=7;break}return e.next=7,X.refreshToken();case 7:return e.next=9,t();case 9:return e.abrupt("return",e.sent);case 12:if(e.prev=12,e.t0=e.catch(3),e.t0.message.startsWith("HTTP-Code: 401")){e.next=16;break}throw e.t0;case 16:n=e.t0;case 17:r+=1,e.next=2;break;case 20:throw n;case 21:case"end":return e.stop()}}),e,null,[[3,12]])})))).apply(this,arguments)}var Ce=Object(_.e)(),Se=Object(_.g)(null),Ae=Object(_.g)(null),Ie=Object(_.g)({}),Le=Object(_.g)({getPriceInUsd:function(){return"0"}}),Re=Object(_.g)({inputs:[],outputs:[],streamsLoaded:!1}),Te=Se.map((function(e){var t;return null!==(t=null===e||void 0===e?void 0:e.auth.signedIn)&&void 0!==t&&t})),Ee=Se.map((function(e){var t;return null!==(t=null===e||void 0===e?void 0:e.auth.accountId)&&void 0!==t?t:null})),Be=Object(_.g)({name:null,email:null}),Me=Object(_.g)([]),Pe=Object(_.d)(function(){var e=Object(f.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ne((function(){return Q.findOne(t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Fe=Object(_.d)(Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ne((function(){return $.findAll()})));case 1:case"end":return e.stop()}}),e)})))),De=Object(_.a)({source:Ee,effect:function(e,t){return Object(f.a)(h.a.mark((function a(){var n,r;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=t.name,r=t.email,e){a.next=3;break}return a.abrupt("return");case 3:return a.next=5,Q.update(e,{name:n,email:r});case 5:case"end":return a.stop()}}),a)})))()}}),He=Object(_.e)(),Ve=Object(_.d)(Object(f.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:return t=e.sent,e.next=5,w(new O.WalletConnection(t,v.ROKETO_CONTRACT_NAME));case 5:return a=e.sent,e.abrupt("return",{near:t,auth:a});case 7:case"end":return e.stop()}}),e)})))),We=Object(_.d)(function(){var e=Object(f.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W({account:t});case 2:return a=e.sent,e.next=5,fe({account:t,tokens:a.dao.tokens});case 5:return n=e.sent,e.abrupt("return",{roketo:a,tokens:n});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ue=Object(_.g)(!0),Ze=Object(_.d)((function(e){return we({account:e})})),qe=Object(_.d)(function(){var e=Object(f.a)(h.a.mark((function e(t){var a,n,r,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.api.getAccountIncomingStreams({from:0,limit:100}),t.api.getAccountOutgoingStreams({from:0,limit:100})]);case 2:return a=e.sent,n=Object(b.a)(a,2),r=n[0],s=n[1],e.abrupt("return",{inputs:r,outputs:s});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ke=Object(_.d)((function(){return new Promise((function(e){setTimeout(e,3e4)}))}));Object(_.j)({clock:Ae,filter:Boolean,fn:function(e){return e.roketo.account.last_created_stream},target:He}),Object(_.j)({clock:[We.doneData,Ke.doneData],target:Ke}),Object(_.j)({clock:[He,Ke.doneData],source:Ae,filter:Boolean,fn:function(e){return e.roketo},target:qe}),Object(_.j)({clock:qe.doneData,fn:function(e){return{inputs:e.inputs,outputs:e.outputs,streamsLoaded:!0}},target:Re}),Object(_.j)({clock:Ee,filter:Boolean,target:[Pe,Fe]}),Object(_.j)({clock:[Pe.doneData,De.done.map((function(e){return e.params}))],target:Be}),Object(_.j)({clock:Fe.doneData,target:Me});var Ye=Object(_.d)((function(){return new Promise((function(e){setTimeout(e,5e3)}))}));Object(_.j)({clock:Fe.done,target:Ye}),Object(_.j)({clock:Ye.done,target:Fe}),Object(_.j)({clock:[We.doneData,Ke.doneData],target:Ke}),Object(_.j)({clock:Ee,filter:function(e){return!e},fn:function(){return{name:null,email:null}},target:Be}),Object(_.j)({clock:Ee,filter:function(e){return!e},fn:function(){return[]},target:Me}),Object(_.j)({clock:Ce,target:Ve}),Object(_.j)({clock:Ve.doneData,fn:function(e){return e.auth.account},target:[We,Ze]}),Object(_.j)({clock:Ve.doneData,target:Se}),Object(_.j)({clock:We.doneData,target:Ae}),Object(_.j)({clock:We.doneData,fn:function(e){return e.tokens},target:Ie}),Object(_.j)({clock:Ze.doneData,target:Le}),Object(_.j)({clock:[We.finally],fn:function(){return!1},target:Ue});var ze=a(4),Je=a.n(ze),Xe={root:{path:"/"},authorize:{path:"/authorize",title:"Authorize"},streams:{path:"/streams",title:"Streams"},stream:{path:"/streams/:id",title:"Stream"}};function Ge(e){return"".concat(window.location.origin,"/#/streams/").concat(e)}var Qe,$e,et=a(0);!function(e){e.COLORED="colored",e.CURRENT_COLOR="current-color"}($e||($e={}));var tt,at,nt=(Qe={},Object(ee.a)(Qe,$e.COLORED,(function(e){var t=e.className;return Object(et.jsxs)("svg",{width:"85",height:"37",viewBox:"0 0 85 37",fill:"none",className:t,children:[Object(et.jsx)("path",{d:"M27.2243 21.6559L25.1382 26.3574C24.9976 26.6743 25.3083 27.0039 25.6314 26.8807L33.2506 23.9755C37.4638 22.3691 42.9334 16.8281 42.9334 13.7051C42.9334 10.8974 37.5108 4.89742 33.3857 3.5349L22.7464 0.0207055C22.3964 -0.0949031 22.0975 0.297465 22.3004 0.606068L24.4608 3.89078C24.7026 4.2583 24.4683 4.75193 24.0316 4.79531L11.5321 6.03692C11.1728 6.07261 11.0519 6.5378 11.3481 6.74504L14.751 9.12589C15.0895 9.36266 15.0825 9.86755 14.7377 10.0948L9.62698 13.4638C9.35407 13.6437 9.03165 13.7328 8.70543 13.7185L0.406475 13.3549C-0.00343963 13.337 -0.157883 13.8858 0.200859 14.0857L9.40222 19.2108C9.74603 19.4023 10.1494 19.456 10.5311 19.361L14.6051 18.3475C15.1342 18.2159 15.6933 18.3718 16.0787 18.7586L19.1812 21.8717C19.5854 22.2774 20.179 22.4277 20.7267 22.2631L26.291 20.5912C26.9277 20.3999 27.4946 21.0466 27.2243 21.6559Z",fill:"url(#paint0_linear_25_2458)"}),Object(et.jsx)("path",{d:"M40.6818 26.4196V36.3357C40.6818 36.6675 40.9498 36.9364 41.2804 36.9364H51.0314C51.362 36.9364 51.63 36.6675 51.63 36.3357V26.4213C51.63 26.0896 51.898 25.8207 52.2286 25.8207L64.6597 25.8207C64.8659 25.8207 65.0576 25.9271 65.167 26.1025L71.793 36.7182C71.9025 36.8935 72.0942 37 72.3004 37H84.4004C84.8768 37 85.1623 36.4688 84.9006 36.0694L76.5735 23.3575C76.5713 23.3541 76.5701 23.3502 76.5701 23.3462C76.5701 23.3349 76.5793 23.3257 76.5905 23.3256C80.5584 23.293 84.2732 19.6259 84.2732 13.0961C84.2732 5.84535 77.8859 1.84441 73.0585 1.84397L73.0559 1.84319V1.82211C73.0559 1.81792 73.0525 1.81451 73.0483 1.81451H41.2804C41.036 1.81451 40.8258 1.96149 40.7328 2.17217C41.1621 5.93024 44.6468 10.0091 52.2641 10.0091L67.8871 10.0098C69.5984 10.0098 71.8625 11.4284 71.8625 13.9989C71.8625 16.3234 70.5333 17.6246 69.1201 17.6254L52.2641 17.6254V17.6315C43.9975 17.6315 40.5981 22.4353 40.6889 26.4196H40.6818Z",fill:"#2B313B"}),Object(et.jsx)("defs",{children:Object(et.jsxs)("linearGradient",{id:"paint0_linear_25_2458",x1:"1.29563",y1:"14.7557",x2:"38.3082",y2:"14.3339",gradientUnits:"userSpaceOnUse",children:[Object(et.jsx)("stop",{offset:"0",stopColor:"#E61A11"}),Object(et.jsx)("stop",{offset:"0.554808",stopColor:"#E9712E"}),Object(et.jsx)("stop",{offset:"1",stopColor:"#FFD231"})]})})]})})),Object(ee.a)(Qe,$e.CURRENT_COLOR,(function(e){var t=e.className;return Object(et.jsxs)("svg",{viewBox:"0 0 57 25",fill:"none",className:t,children:[Object(et.jsx)("path",{d:"M17.9487 14.2217L16.5734 17.3093C16.4807 17.5174 16.6855 17.7338 16.8986 17.6529L21.9219 15.7451C24.6995 14.6901 28.3056 11.0512 28.3056 9.00033C28.3056 7.15649 24.7306 3.2162 22.0109 2.32141L14.9965 0.0135976C14.7657 -0.0623242 14.5687 0.195349 14.7025 0.398013L16.1268 2.55513C16.2862 2.79648 16.1317 3.12066 15.8438 3.14914L7.60302 3.96452C7.36611 3.98797 7.2864 4.29346 7.48169 4.42956L9.72523 5.99309C9.94834 6.14858 9.94376 6.48015 9.71643 6.62942L6.34698 8.84184C6.16706 8.95998 5.95449 9.01851 5.73941 9.00912L0.267985 8.77036C-0.00226772 8.75857 -0.104091 9.11902 0.132424 9.25024L6.1988 12.616C6.42547 12.7418 6.6914 12.777 6.94303 12.7147L9.629 12.049C9.97782 11.9626 10.3465 12.065 10.6006 12.319L12.646 14.3634C12.9125 14.6298 13.3038 14.7286 13.6649 14.6205L17.3334 13.5225C17.7532 13.3969 18.127 13.8216 17.9487 14.2217Z",fill:"currentColor"}),Object(et.jsx)("path",{d:"M26.8203 17.3502V23.8622C26.8203 24.0801 26.997 24.2567 27.215 24.2567H33.6438C33.8617 24.2567 34.0384 24.0801 34.0384 23.8622V17.3513C34.0384 17.1334 34.2151 16.9568 34.4331 16.9568L42.6288 16.9568C42.7647 16.9568 42.8911 17.0267 42.9632 17.1419L47.3317 24.1134C47.4039 24.2285 47.5302 24.2984 47.6662 24.2984H55.6437C55.9577 24.2984 56.1459 23.9496 55.9734 23.6873L50.4834 15.3392C50.482 15.337 50.4812 15.3344 50.4812 15.3318C50.4812 15.3244 50.4872 15.3184 50.4946 15.3183C53.1107 15.2969 55.5598 12.8886 55.5598 8.60041C55.5598 3.83876 51.3486 1.21128 48.166 1.211L48.1643 1.21048V1.19664C48.1643 1.19388 48.162 1.19165 48.1593 1.19165H27.215C27.0538 1.19165 26.9152 1.28817 26.8539 1.42653C27.137 3.89451 29.4344 6.57314 34.4564 6.57314L44.7565 6.5736C45.8848 6.5736 47.3775 7.50521 47.3775 9.19332C47.3775 10.7199 46.5012 11.5744 45.5694 11.5749L34.4564 11.5749V11.5789C29.0064 11.5789 26.7651 14.7336 26.825 17.3502H26.8203Z",fill:"currentColor"})]})})),Qe),rt=function(e){var t=e.type,a=void 0===t?$e.COLORED:t,n=e.className,r=nt[a];return Object(et.jsx)(r,{className:n})},st=a(252),ct=a.n(st),ot=function(e){var t=e.children,a=e.className;return Object(et.jsx)("div",{className:Je()(ct.a.layout,a),children:t})},it=a(20),lt=a(98),ut=a.n(lt),dt=["type","displayMode","disabled","link","children","className","onClick","testId"];!function(e){e.button="button",e.submit="submit"}(tt||(tt={})),function(e){e.primary="primary",e.simple="simple",e.secondary="secondary",e.action="action",e.invisible="invisible"}(at||(at={}));var jt=function(e){var t,a=e.type,n=void 0===a?tt.button:a,r=e.displayMode,s=void 0===r?at.action:r,c=e.disabled,o=void 0!==c&&c,i=e.link,l=e.children,u=e.className,d=e.onClick,m=e.testId,b=Object(it.a)(e,dt),f=Je()(ut.a.root,(t={},Object(ee.a)(t,ut.a.primary,s===at.primary),Object(ee.a)(t,ut.a.secondary,s===at.secondary),Object(ee.a)(t,ut.a.action,s===at.action),Object(ee.a)(t,ut.a.simple,s===at.simple),t),u),p=Object(et.jsx)("button",Object(K.a)(Object(K.a)({type:n,className:f,onClick:d,disabled:o},b),{},{"data-testid":m,children:l}));return i?Object(et.jsx)(j.b,{to:i,children:p}):p},mt=function(e){var t=e.className;return Object(et.jsx)("svg",{className:t,width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",children:Object(et.jsx)("path",{d:"M7.09 12.59L8.5 14L13.5 9L8.5 4L7.09 5.41L9.67 8H0V10H9.67L7.09 12.59ZM16 0H2C0.89 0 0 0.9 0 2V6H2V2H16V16H2V12H0V16C0 17.1 0.89 18 2 18H16C17.1 18 18 17.1 18 16V2C18 0.9 17.1 0 16 0Z",fill:"currentColor"})})},bt=a(147),ft=a.n(bt),pt=function(){var e=Object(d.c)(Se);return Object(d.c)(Te)?Object(et.jsx)("button",{type:"button",onClick:null===e||void 0===e?void 0:e.auth.logout,className:ft.a.logoutButton,"data-testid":le.signOutButton,children:Object(et.jsx)(mt,{})}):Object(et.jsxs)(jt,{onClick:null===e||void 0===e?void 0:e.auth.login,className:ft.a.root,testId:le.signInButton,children:[Object(et.jsx)("span",{className:ft.a.name,children:"Sign in with NEAR Wallet"}),Object(et.jsx)(mt,{})]})},ht={legacyStreams:{path:"/streams/legacy",title:"Streams (legacy)"},legacyStream:{path:"/streams/legacy/:id"}};function _t(e){return"".concat(window.location.origin,"/#/streams/legacy/").concat(e)}var Ot=a(72),vt=a.n(Ot),xt=a(493),yt=a(490),gt=function(e){var t=e.width,a=void 0===t?10:t,n=e.height,r=void 0===n?20:n,s=e.className;return Object(et.jsx)("svg",{className:s,width:a,height:r,viewBox:"0 0 10 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(et.jsx)("path",{d:"M10 15L10 11L8 11L8 15C8 16.65 6.65 18 5 18C3.35 18 2 16.65 2 15L2 11L-4.80825e-07 11L-6.55671e-07 15C-7.76314e-07 17.76 2.24 20 5 20C7.76 20 10 17.76 10 15ZM2 9L2 5C2 3.35 3.35 2 5 2C6.65 2 8 3.35 8 5L8 9L10 9L10 5C10 2.24 7.76 -9.79135e-08 5 -2.18557e-07C2.24 -3.392e-07 -9.79135e-08 2.24 -2.18557e-07 5L-3.93402e-07 9L2 9ZM6 6L6 14L4 14L4 6L6 6Z",fill:"currentColor"})})},wt=(a(362),["icon","children","className","size","loading","disabled","loadingText","color","variant"]),Nt="main",kt="filled",Ct="outlined";function St(e){var t=e.icon,a=e.children,n=e.className,r=e.size,s=e.loading,c=e.disabled,o=e.loadingText,i=e.color,l=void 0===i?"light":i,u=e.variant,d=void 0===u?"outlined":u,m=Object(it.a)(e,wt),b="",f="",p="";d===Nt?(b="Button--main",f="normal"===r?"px-5 py-4  rounded-2xl font-semibold":"big"===r?"px-12 py-6 rounded-3xl font-bold":""):d===Ct?(b="border-solid border font-semibold rounded-lg ",p="light"===l?"border-blue hover:bg-blue":"dark"===l?"border-border hover:bg-hover hover:border-hover":""):d===kt&&(b="bg-dark hover:bg-hover font-semibold rounded-lg active:bg-transparent");var h={disabled:s||c,className:Je()("inline-flex items-center justify-center p-3  whitespace-nowrap",b,f,p,c?"Button--disabled":"","transition-all",n)},_=s?o:Object(et.jsxs)(et.Fragment,{children:[t?Object(et.jsx)("div",{className:"mr-2",children:t}):null,a]});return m.link?Object(et.jsx)(j.b,Object(K.a)(Object(K.a)(Object(K.a)({},h),m),{},{children:_})):Object(et.jsx)("button",Object(K.a)(Object(K.a)(Object(K.a)({},h),m),{},{type:"button"===m.type?"button":"submit",children:_}))}var At=a.p+"static/media/RUSSIANS_HACK.83d68466.gif",It=a.p+"static/media/crab.3fbdb8f2.gif";function Lt(e){var t=e.message,a=e.onRetry,n=e.className,r=c.a.useRef(Math.random());return Object(et.jsxs)("div",{className:Je()("text-center",n),children:[r.current>.5?Object(et.jsx)("img",{src:At,className:"mx-auto",alt:"funny hackers gif with bird dancing around"}):Object(et.jsx)("img",{src:It,className:"mx-auto",alt:"crab with a knife tries to hurt people"}),Object(et.jsx)("h1",{className:"text-4xl font-semibold mb-6 mt-10",children:"Something is broken."}),Object(et.jsx)("p",{className:"text-gray mb-4",children:"Finally we have something to fix"}),t&&Object(et.jsx)("code",{className:"p-4 border-special-inactive border block text-special-inactive text-xs mb-4",children:t}),Object(et.jsx)(St,{variant:"outlined",color:"dark",className:"mt-10",onClick:a,type:"button",children:"Try again"}),Object(et.jsx)("p",{className:"text-xs text-gray mt-2",children:"(that probably wont help)"})]})}var Rt=function(e){var t=e.width,a=void 0===t?8:t,n=e.height,r=void 0===n?6:n,s=e.className;return Object(et.jsx)("div",{className:s,children:Object(et.jsx)("svg",{width:a,height:r,viewBox:"0 0 8 6",fill:"none",children:Object(et.jsx)("path",{d:"M7.06 0.726562L4 3.7799L0.94 0.726562L0 1.66656L4 5.66656L8 1.66656L7.06 0.726562Z",fill:"currentColor"})})})},Tt=a(148),Et=a.n(Tt),Bt=["opened","className","children","onChange","testId"];function Mt(e){var t=e.opened,a=e.className,n=e.children,r=e.onChange,s=e.testId,c=Object(it.a)(e,Bt),o=Je()(Et.a.arrow,Object(ee.a)({},Et.a.rotate,t));return Object(et.jsxs)("button",Object(K.a)(Object(K.a)({type:"button",onClick:function(){return r(!t)},className:Je()(Et.a.root,a),"data-testid":s},c),{},{children:[n,Object(et.jsx)(Rt,{className:o})]}))}var Pt=a(268),Ft=a(254),Dt=function(e,t){if(e<=0)return"none";var a=t.formatter,n=t.meta,r=a.tokensPerMeaningfulPeriod(e),s=r.formattedValue,c=r.unit;return"".concat(s," ").concat(n.symbol," / ").concat(c)},Ht=function(e,t){var a=new A.a(e),n=new A.a(t);return a.isEqualTo(0)||n.isEqualTo(0)?new A.a(0):a.dividedBy(n).multipliedBy(100)},Vt=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Ht(e,t).dp(a)},Wt=a(52),Ut=a.n(Wt),Zt=function(e){var t,a=e.total,n=e.streamed,r=e.withdrawn,s=e.className,c=e.cliffPercent,o=e.withBigCliffMark,i=void 0!==o&&o,l=Vt(n,a),u=Vt(r,n);return Object(et.jsxs)("div",{className:Je()(Ut.a.progressBar,s),children:[Object(et.jsx)("div",{className:Je()(Ut.a.progress,Ut.a.streamed),style:{width:"".concat(l,"%")},children:Object(et.jsx)("div",{className:Je()(Ut.a.progress,Ut.a.withdrawn),style:{width:"".concat(u,"%")}})}),"number"===typeof c&&Object(et.jsx)("div",{title:"Cliff",className:Ut.a.cliffMarkContainer,style:{left:"".concat(c,"%")},children:Object(et.jsx)("div",{className:Je()(Ut.a.cliffMark,(t={},Object(ee.a)(t,Ut.a.cliffMarkBig,i),Object(ee.a)(t,Ut.a.cliffMarkPassed,l.toNumber()>c),t))})})]})},qt=["tokenAccountId","className"];function Kt(e){return Object(et.jsx)("svg",Object(K.a)(Object(K.a)({version:"1.0",xmlns:"http://www.w3.org/2000/svg",width:"20pt",height:"20pt",viewBox:"0 0 864.000000 864.000000",preserveAspectRatio:"xMidYMid meet"},e),{},{children:Object(et.jsx)("g",{transform:"translate(0.000000,864.000000) scale(0.100000,-0.100000)",fill:"#FFFFFF",stroke:"none",children:Object(et.jsx)("path",{d:"M2490 6461 c-164 -53 -265 -156 -314 -320 -14 -49 -16 -226 -16 -1821 0 -1595 2 -1772 16 -1821 25 -85 62 -148 118 -205 179 -178 476 -178 650 0 30 30 249 347 519 749 518 772 502 742 438 799 -21 19 -42 28 -66 28 -40 0 -6 28 -555 -449 -283 -246 -411 -351 -425 -349 -20 3 -20 11 -20 1238 l0 1235 21 3 c16 2 286 -315 1376 -1621 746 -892 1372 -1637 1392 -1654 94 -83 187 -113 351 -113 169 0 275 39 371 134 56 57 93 120 118 205 14 49 16 226 16 1821 0 1595 -2 1772 -16 1821 -25 85 -62 148 -118 205 -179 178 -476 178 -650 0 -30 -30 -249 -347 -519 -749 -518 -772 -502 -742 -438 -799 21 -19 42 -28 66 -28 40 0 6 -28 555 449 283 246 411 351 425 349 20 -3 20 -11 20 -1238 l0 -1235 -21 -3 c-16 -2 -286 315 -1376 1621 -746 892 -1372 1637 -1392 1654 -95 85 -187 113 -356 112 -82 0 -131 -5 -170 -18z"})})}))}function Yt(e){return Object(et.jsx)("svg",Object(K.a)(Object(K.a)({version:"1.0",xmlns:"http://www.w3.org/2000/svg",width:"20pt",height:"20pt",viewBox:"0 0 864.000000 864.000000",preserveAspectRatio:"xMidYMid meet"},e),{},{children:Object(et.jsx)("g",{transform:"translate(0.000000,864.000000) scale(0.100000,-0.100000)",fill:"#FFFFFF",stroke:"none",children:Object(et.jsx)("path",{d:"M2490 6461 c-164 -53 -265 -156 -314 -320 -14 -49 -16 -226 -16 -1821 0 -1595 2 -1772 16 -1821 25 -85 62 -148 118 -205 179 -178 476 -178 650 0 30 30 249 347 519 749 518 772 502 742 438 799 -21 19 -42 28 -66 28 -40 0 -6 28 -555 -449 -283 -246 -411 -351 -425 -349 -20 3 -20 11 -20 1238 l0 1235 21 3 c16 2 286 -315 1376 -1621 746 -892 1372 -1637 1392 -1654 94 -83 187 -113 351 -113 169 0 275 39 371 134 56 57 93 120 118 205 14 49 16 226 16 1821 0 1595 -2 1772 -16 1821 -25 85 -62 148 -118 205 -179 178 -476 178 -650 0 -30 -30 -249 -347 -519 -749 -518 -772 -502 -742 -438 -799 21 -19 42 -28 66 -28 40 0 6 -28 555 449 283 246 411 351 425 349 20 -3 20 -11 20 -1238 l0 -1235 -21 -3 c-16 -2 -286 315 -1376 1621 -746 892 -1372 1637 -1392 1654 -95 85 -187 113 -356 112 -82 0 -131 -5 -170 -18z"})})}))}var zt={"wrap.testnet":Kt,"wrap.near":Kt};function Jt(e){var t=e.tokenAccountId,a=e.className,n=Object(it.a)(e,qt),r=Object(d.d)({store:Ie,keys:[t],fn:function(e){var a,n,r;return null!==(a=null===(n=e[t])||void 0===n||null===(r=n.meta)||void 0===r?void 0:r.icon)&&void 0!==a?a:null}});if(r)return Object(et.jsx)("img",Object(K.a)({src:r,alt:t,className:a},n));var s=t in zt?zt[t]:Yt;return Object(et.jsx)(s,Object(K.a)({className:a},n))}function Xt(e){var t=e.tokenAccountId,a=e.size,n=void 0===a?8:a,r=e.className;return Object(et.jsx)("div",{className:Je()("p-1 flex-shrink-0 rounded-full bg-black inline-flex items-center justify-center","w-".concat(n," h-").concat(n),r),children:Object(et.jsx)(Jt,{className:"w-full h-full rounded-full",tokenAccountId:t})})}var Gt="INITIALIZED",Qt="ACTIVE",$t="PAUSED",ea="FINISHED",ta="INTERRUPTED",aa="in",na="out",ra="factory.bridge.near",sa=["get_account","get_stream","get_stream_history","get_status"],ca=["create_stream","deposit","update_account","start_stream","pause_stream","stop_stream","change_auto_deposit","start_cron"],oa=a(149),ia=a.n(oa),la=["children","className"];function ua(e){var t=e.opened,a=e.children,n=e.className,r=e.onClose,s=c.a.useRef(null);return function(e,t){var a=function(a){var n=a.target;e.current&&n instanceof HTMLElement&&!e.current.contains(n)&&t()};c.a.useEffect((function(){return document.addEventListener("click",a),function(){document.removeEventListener("click",a)}}))}(s,(function(){t&&r()})),Object(et.jsx)("div",{ref:s,className:Je()(ia.a.menu,Object(ee.a)({},ia.a.hidden,!t),n),children:a})}function da(e){var t=e.children,a=e.className,n=Object(it.a)(e,la);return Object(et.jsx)("div",Object(K.a)(Object(K.a)({className:a},n),{},{children:t}))}function ja(){return Object(et.jsx)("div",{className:ia.a.menuDivider})}function ma(e){var t=c.a.useState(e),a=Object(b.a)(t,2),n=a[0],r=a[1];return{on:n,off:!n,toggle:function(){return r(!n)},turnOff:function(){return r(!1)},turnOn:function(){return r(!0)},setOn:r}}function ba(){return fa.apply(this,arguments)}function fa(){return(fa=Object(f.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new O.keyStores.BrowserLocalStorageKeyStore,e.next=3,Object(O.connect)({nodeUrl:v.NEAR_NODE_URL,walletUrl:v.WALLET_URL,networkId:v.NEAR_NETWORK_ID,keyStore:t,headers:{}});case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pa(e){var t=e.getAccountId();function a(){return(a=Object(f.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"Roketo Token Streaming Service",t.next=3,e.requestSignIn("dev-1635510732093-17387698050424","Roketo Token Streaming Service");case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function n(){return(n=Object(f.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.signOut();case 2:window.location.reload();case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return{account:e.account(),signedIn:!!t,accountId:t,login:function(){return a.apply(this,arguments)},logout:function(){return n.apply(this,arguments)}}}var ha=["ft_balance_of"],_a=["ft_transfer","ft_transfer_call"],Oa="dev-1635510732093-17387698050424",va="200000000000000",xa=1e9;function ya(e){return e.status===ea||e.status===ta}function ga(e){return e.status===Qt}var wa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"any";return{account_id:e,dynamic_inputs:[],dynamic_outputs:[],static_streams:[],last_action:null,ready_to_withdraw:[],total_incoming:[],total_outgoing:[],total_received:[],is_external_update_enabled:!1,cron_task:null}};function Na(e){var t=e.contract,a=e.ft,n=e.walletConnection,r=e.account,s=e.operationalCommission,c=e.tokens,o=function(){var e=Object(f.a)(h.a.mark((function e(a){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=wa(a),e.prev=1,e.next=4,t.get_account({account_id:a});case 4:return r=e.sent,e.abrupt("return",r||n);case 8:e.prev=8,e.t0=e.catch(1),console.debug("[RoketoContractApi]: nearerror",e.t0);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return{getCurrentAccount:function(){return o(n.getAccountId())},updateAccount:function(){var e=Object(f.a)(h.a.mark((function e(a){var n,c,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.tokensWithoutStorage,c=void 0===n?0:n,e.next=3,t.update_account({account_id:r.accountId},va,new A.a(1e22).multipliedBy(c).plus(s).toFixed());case 3:return o=e.sent,e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getAccount:o,createStream:function(){var e=Object(f.a)(h.a.mark((function e(r){var s,o,i,l,u,d,j,m,b,f,p,_,O=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=r.deposit,o=r.receiverId,i=r.token,l=r.speed,u=r.description,d=r.isAutoStartEnabled,j=void 0===d||d,m=O.length>1&&void 0!==O[1]?O[1]:{},b=m.callbackUrl,p=c[i].commission_on_create,e.prev=3,"NEAR"!==i){e.next=10;break}return e.next=7,t.create_stream({args:{owner_id:n.getAccountId(),receiver_id:o,token_name:i,tokens_per_tick:l,description:u,is_auto_deposit_enabled:!1,is_auto_start_enabled:j},gas:va,amount:new A.a(s).plus(p).toFixed(),callbackUrl:b});case 7:f=e.sent,e.next=14;break;case 10:return _=a[i].contract,e.next=13,_.ft_transfer_call({args:{receiver_id:t.contractId,amount:new A.a(s).plus(p).toFixed(),memo:"Roketo transfer",msg:JSON.stringify({Create:{description:u,owner_id:n.getAccountId(),receiver_id:o,token_name:i,tokens_per_tick:l,balance:s,is_auto_deposit_enabled:!1,is_auto_start_enabled:j}})},gas:va,amount:1,callbackUrl:b});case 13:f=e.sent;case 14:return e.abrupt("return",f);case 17:throw e.prev=17,e.t0=e.catch(3),console.debug(e.t0),e.t0;case 21:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(t){return e.apply(this,arguments)}}(),depositStream:function(){var e=Object(f.a)(h.a.mark((function e(n){var r,s,c,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.streamId,s=n.token,c=n.deposit,"NEAR"!==s){e.next=6;break}return e.next=4,t.deposit({stream_id:r},va,c);case 4:e.next=9;break;case 6:return o=a[s].contract,e.next=9,o.ft_transfer_call({receiver_id:t.contractId,amount:c,msg:JSON.stringify({Deposit:r})},va,1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pauseStream:function(){var e=Object(f.a)(h.a.mark((function e(a){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.streamId,e.next=3,t.pause_stream({stream_id:n},va,s);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),startStream:function(){var e=Object(f.a)(h.a.mark((function e(a){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.streamId,e.next=3,t.start_stream({stream_id:n},va,s);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),stopStream:function(){var e=Object(f.a)(h.a.mark((function e(a){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.streamId,e.next=3,t.stop_stream({stream_id:n},va,s);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getStream:function(){var e=Object(f.a)(h.a.mark((function e(a){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.streamId,e.next=3,t.get_stream({stream_id:n});case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getStatus:function(){var e=Object(f.a)(h.a.mark((function e(){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get_status({});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getStreamHistory:function(){var e=Object(f.a)(h.a.mark((function e(a){var n,r,s,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.streamId,r=a.from,s=a.to,e.next=3,t.get_stream_history({stream_id:n,from:r,to:s});case 3:return c=e.sent,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}var ka=function(e){var t={};return e.forEach((function(e){t[e.ticker]=e})),t};function Ca(e){return Sa.apply(this,arguments)}function Sa(){return(Sa=Object(f.a)(h.a.mark((function e(t){var a,n,r,s,c,o,i,l,u;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.walletConnection,e.next=3,a.account();case 3:n=e.sent,e.next=6;break;case 6:return r=new O.Contract(n,Oa,{viewMethods:sa,changeMethods:ca}),e.next=9,r.get_status({});case 9:return s=e.sent,c={},o=ka(s.tokens),s.tokens.forEach((function(e){c[e.ticker]={name:e.ticker,address:e.account_id,contract:new O.Contract(n,e.account_id,{viewMethods:ha,changeMethods:_a})}})),i=Na({contract:r,ft:c,walletConnection:a,account:n,operationalCommission:s.operational_commission,tokens:o}),l=function(e){return s.tokens.find((function(t){return t.ticker===e}))},u=function(e){var t=l(e);return Boolean(null===t||void 0===t?void 0:t.account_id.endsWith(ra))},e.abrupt("return",{api:i,status:s,tokenMeta:l,isBridged:u});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Aa=Object(C.a)((function e(t){var a=t.ticker,n=t.metadata;Object(k.a)(this,e),this.ticker=void 0,this.metadata=void 0,this.ticker=a,this.metadata=n}));var Ia=new Aa({ticker:"NEAR",metadata:{spec:null,name:"Near Protocol",symbol:"NEAR",icon:"",reference:null,reference_hash:null,decimals:24}}),La=function(){function e(t){var a=this,n=t.tokens,r=t.account;Object(k.a)(this,e),this.__tokens=void 0,this.__account=void 0,this.__contracts=void 0,this.tokens=void 0,this.__tokens=n,this.__account=r,this.__contracts={},this.tokens={},n&&r&&n.forEach((function(e){a.__contracts[e.ticker]=function(e,t){return new O.Contract(e,t,{viewMethods:["ft_balance_of","ft_metadata","storage_balance_of"],changeMethods:["ft_transfer","ft_transfer_call"]})}(r,e.account_id)}))}return Object(C.a)(e,[{key:"tickers",get:function(){return Object.keys(this.tokens)}},{key:"contract",value:function(e){return this.__contracts[e]}},{key:"get",value:function(e){return this.tokens[e]||new Aa({ticker:e,metadata:{spec:null,name:e,symbol:e,icon:"",reference:null,reference_hash:null,decimals:24}})}},{key:"init",value:function(){var e=Object(f.a)(h.a.mark((function e(){var t=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(this.__tokens.map(function(){var e=Object(f.a)(h.a.mark((function e(a){var n,r,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("NEAR"!==a.ticker){e.next=4;break}n=Ia,e.next=15;break;case 4:if(a.account_id){e.next=8;break}n=new Aa({ticker:a.ticker,metadata:{spec:null,name:a.ticker,symbol:a.ticker,icon:"",reference:null,reference_hash:null,decimals:24}}),e.next=15;break;case 8:return r=t.contract(a.ticker),e.next=11,r.ft_metadata();case 11:if(!((s=e.sent).decimals<8)){e.next=14;break}return e.abrupt("return");case 14:n=new Aa({ticker:a.ticker,metadata:s});case 15:t.tokens[a.ticker]=n;case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"balance",value:function(){var e=Object(f.a)(h.a.mark((function e(t){var a,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("NEAR"!==t){e.next=5;break}return e.next=3,this.__account.getAccountBalance();case 3:return a=e.sent,e.abrupt("return",a.total);case 5:return n=this.contract(t),e.next=8,n.ft_balance_of({account_id:this.__account.accountId});case 8:return r=e.sent,e.abrupt("return",r);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ftStorageBalance",value:function(){var e=Object(f.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.contract(t),e.next=3,a.storage_balance_of({account_id:this.__account.accountId});case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Ra=c.a.createContext(null);function Ta(e){var t=e.children,a=Object(s.useState)(null),n=Object(b.a)(a,2),r=n[0],c=n[1];return Object(s.useEffect)((function(){var e=function(){var e=Object(f.a)(h.a.mark((function e(){var t,a,n,r,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ba();case 2:return t=e.sent,a=new O.WalletConnection(t,v.ROKETO_CONTRACT_NAME),n=pa(a),e.next=7,Ca({walletConnection:a});case 7:return r=e.sent,s=new La({account:a.account(),tokens:r.status.tokens}),e.next=11,s.init();case 11:c({auth:n,near:t,roketo:r,walletConnection:a,tokens:s});case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(et.jsx)(Ra.Provider,{value:r,children:r?t:null})}var Ea,Ba=new Error("Near context is not found");function Ma(){var e=Object(s.useContext)(Ra);if(!e)throw Ba;return e}var Pa=(Ea={},Object(ee.a)(Ea,Gt,{label:"Initialized"}),Object(ee.a)(Ea,Qt,{label:"Active"}),Object(ee.a)(Ea,$t,{label:"Paused"}),Object(ee.a)(Ea,ea,{label:"Finished"}),Object(ee.a)(Ea,ta,{label:"Finished"}),Ea);function Fa(e){var t=e.stream,a=e.className,n=Pa[t.status];return Object(et.jsx)("div",{className:Je()(a),children:n.label})}var Da=a(24),Ha=a.n(Da);function Va(){return Object(et.jsx)("svg",{width:"8",height:"10",viewBox:"0 0 8 10",fill:"none",children:Object(et.jsx)("path",{d:"M1.66634 2.76016L5.17968 5.00016L1.66634 7.24016V2.76016ZM0.333008 0.333496V9.66683L7.66634 5.00016L0.333008 0.333496Z",fill:"currentColor"})})}function Wa(){return Object(et.jsx)("svg",{width:"8",height:"10",viewBox:"0 0 8 10",fill:"none",children:Object(et.jsx)("path",{d:"M0 9.66659H2.66667V0.333252H0V9.66659ZM5.33333 0.333252V9.66659H8V0.333252H5.33333Z",fill:"currentColor"})})}function Ua(){return Object(et.jsx)("svg",{width:"8",height:"8",viewBox:"0 0 8 8",fill:"none",children:Object(et.jsx)("path",{d:"M6.66667 1.33333V6.66667H1.33333V1.33333H6.66667ZM8 0H0V8H8V0Z",fill:"currentColor"})})}function Za(e){var t=e.modalControl,a=e.onConfirm;return Object(et.jsxs)(u.a,{isOpen:t.on,onRequestClose:t.turnOff,className:Ha.a.modalContent,overlayClassName:Ha.a.modalOverlay,children:[Object(et.jsx)("h2",{className:Ha.a.modalHeader,children:"Are you sure?"}),Object(et.jsx)("p",{children:"As a stream receiver, you will not be able to resume stream. Only stream owners can resume streams."}),Object(et.jsxs)("div",{className:Ha.a.modalButtons,children:[Object(et.jsx)("button",{type:"button",onClick:t.turnOff,className:Je()(Ha.a.modalButton,Ha.a.modalSecondary),children:"Cancel"}),Object(et.jsx)("button",{type:"button",onClick:function(){t.turnOff(),a()},className:Je()(Ha.a.modalButton,Ha.a.modalWarning),children:"Pause"})]})]})}function qa(e){var t=e.modalControl,a=e.onConfirm;return Object(et.jsxs)(u.a,{isOpen:t.on,onRequestClose:t.turnOff,className:Ha.a.modalContent,overlayClassName:Ha.a.modalOverlay,children:[Object(et.jsx)("h2",{className:Ha.a.modalHeader,children:"Stop stream"}),Object(et.jsx)("p",{children:"This action will completely shut down the stream. After that, it can't be turned on."}),Object(et.jsxs)("div",{className:Ha.a.modalButtons,children:[Object(et.jsx)("button",{type:"button",onClick:t.turnOff,className:Je()(Ha.a.modalButton,Ha.a.modalSecondary),children:"Cancel"}),Object(et.jsx)("button",{type:"button",onClick:function(){t.turnOff(),a()},className:Je()(Ha.a.modalButton,Ha.a.modalDanger),children:"Stop"})]})]})}function Ka(e){var t,a=e.stream,n=e.className,r=Ma(),c=r.auth,o=r.roketo,i=ma(!1),l=ma(!1),u=Object(s.useState)(!1),d=Object(b.a)(u,2),j=d[0],m=d[1],p=Object(s.useState)(!1),_=Object(b.a)(p,2),O=_[0],v=_[1],x=c.accountId===a.owner_id,y=c.accountId===a.receiver_id,g=!x&&!y,w=function(){var e=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.next=3,o.api.pauseStream({streamId:a.id});case 3:m(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.next=3,o.api.startStream({streamId:a.id});case 3:m(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.next=3,o.api.stopStream({streamId:a.id});case 3:m(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(ya(a)||g)return Object(et.jsx)(Fa,{className:n,stream:a});var C=O&&!j,S=a.status!==Qt&&x,A=a.status===Qt,I=(t={},Object(ee.a)(t,Ha.a.active,ga(a)),Object(ee.a)(t,Ha.a.pause,function(e){return e.status===$t}(a)),Object(ee.a)(t,Ha.a.stop,ya(a)),t);return Object(et.jsxs)("div",{className:Je()(Ha.a.relative,n),children:[Object(et.jsx)(Za,{modalControl:i,onConfirm:w}),Object(et.jsx)(qa,{modalControl:l,onConfirm:k}),Object(et.jsx)(Mt,{opened:C,onChange:v,className:Je()(Ha.a.dropdownOpener,I),children:j?"Loading...":Object(et.jsx)(Fa,{stream:a,className:Ha.a.statusPadded})}),Object(et.jsxs)(ua,{onClose:function(){return v(!1)},opened:C,className:Ha.a.controlsMenu,children:[S&&Object(et.jsx)(da,{children:Object(et.jsxs)("button",{type:"button",onClick:N,className:Je()(Ha.a.controlButton,Ha.a.start),children:[Object(et.jsx)(Va,{}),Object(et.jsx)("span",{children:"Start"})," "]})}),A&&Object(et.jsx)(da,{children:Object(et.jsxs)("button",{type:"button",onClick:function(){v(!1),y?i.turnOn():w()},className:Je()(Ha.a.controlButton,Ha.a.pause),children:[Object(et.jsx)(Wa,{}),Object(et.jsx)("span",{children:"Pause"})]})}),(S||A)&&Object(et.jsx)(ja,{}),Object(et.jsx)(da,{children:Object(et.jsxs)("button",{type:"button",onClick:function(){v(!1),l.turnOn()},className:Je()(Ha.a.controlButton,Ha.a.stop),children:[Object(et.jsx)(Ua,{}),Object(et.jsx)("span",{children:"Stop"})]})})]})]})}var Ya="in",za="out";function Ja(e){var t=Ma().auth;return e.receiver_id===t.accountId?Ya:e.owner_id===t.accountId?za:null}var Xa=a(16),Ga=a(79),Qa=a(255),$a=a(494),en=a(489);function tn(e,t){return e.map((function(e){return Object(K.a)(Object(K.a)({},e),{},{direction:e.owner_id===t?na:e.receiver_id===t?aa:null})}))}function an(){var e=Ma(),t=e.auth,a=e.roketo;return Object(Ga.a)(["account",t.accountId],a.api.getCurrentAccount,{errorRetryInterval:250})}function nn(e,t,a){if(!ga(e))return e;var n=Object(Qa.a)(Date.now(),a);return Object(K.a)(Object(K.a)({},e),{},{available_to_withdraw:String(Math.min(Number(t)+Number(e.tokens_per_tick)*xa*n,Number(e.balance)))})}var rn={values:{},cachedAt:0};function sn(e){var t=e.account,a=Ma(),n=a.auth,r=a.roketo,o=Object(s.useRef)(rn),i=Object(s.useRef)(0),l=Object(Ga.a)((function(){return!!t&&["streams",t.account_id,t.last_action]}),Object(f.a)(h.a.mark((function e(){var a,s,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[].concat(Object(Xa.a)((null===t||void 0===t?void 0:t.dynamic_inputs)||[]),Object(Xa.a)((null===t||void 0===t?void 0:t.dynamic_outputs)||[]),Object(Xa.a)((null===t||void 0===t?void 0:t.static_streams)||[])),e.next=3,Promise.all(a.map((function(e){return r.api.getStream({streamId:e})})));case 3:return s=e.sent,c=tn(s,n.accountId).filter((function(e){return!ya(e)})),o.current={values:c.reduce((function(e,t){return Object.assign(e,Object(ee.a)({},t.id,t.available_to_withdraw))}),{}),cachedAt:Date.now()},i.current=29,e.abrupt("return",{inputs:c.filter((function(e){return e.direction===aa})),outputs:c.filter((function(e){return e.direction===na}))});case 8:case"end":return e.stop()}}),e)}))));return c.a.useEffect((function(){var e=setTimeout((function(){if(!l.data||i.current<=0)l.mutate();else{i.current-=1;var e=function(e){return nn(e,o.current.values[e.id],o.current.cachedAt)};l.mutate({inputs:l.data.inputs.map(e),outputs:l.data.outputs.map(e)},{revalidate:!1})}}),1e3);return function(){return clearTimeout(e)}}),[l]),l}var cn={value:"",cachedAt:0};function on(e,t){if(function(e){return e.status===Gt||e.status===$t}(e))return null;var a=new A.a(e.tokens_per_tick).multipliedBy(1e6);return Number(e.timestamp_created)/1e6+t.dividedBy(a).toNumber()}function ln(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=290304e5,n=t?new A.a(e.available_to_withdraw):new A.a(0),r=A.a.minimum(a,new A.a(e.balance).minus(n).dividedBy(e.tokens_per_tick).dividedBy(xa).toFixed()).toNumber(),s=Object($a.a)({start:0,end:1e3*r});(s.days||s.weeks||s.months||s.years)&&(s.seconds=0);var c=Object(en.a)(s,{locale:R}),o=new A.a(e.balance),i=o.plus(e.tokens_total_withdrawn),l=new A.a(e.tokens_total_withdrawn),u=l.plus(n),d=i.minus(u),j=[l.dividedBy(i).toNumber(),u.dividedBy(i).toNumber()],m={left:i.minus(u).dividedBy(i).toNumber(),streamed:u.dividedBy(i).toNumber(),withdrawn:l.dividedBy(i).toNumber(),available:n.dividedBy(i).toNumber()};return{secondsLeft:r,progresses:j,isDead:ya(e),percentages:m,timeLeft:c,streamEndInfo:on(e,o),progress:{full:i.toFixed(),withdrawn:l.toFixed(),streamed:u.toFixed(),left:d.toFixed(),available:n.toFixed()}}}function un(e){var t=e.className;return Object(et.jsx)("svg",{className:t,width:"8",height:"12",viewBox:"0 0 8 12",fill:"none",children:Object(et.jsx)("path",{d:"M0.895051 11.6285C0.745051 11.6285 0.603384 11.5702 0.495051 11.4535C0.295051 11.2285 0.311718 10.8869 0.528384 10.6869L5.836 5.90328L0.495028 1.27828C0.270028 1.07828 0.261695 0.736613 0.461695 0.511613C0.661695 0.294947 1.00336 0.27828 1.22836 0.47828L6.97766 5.46995C7.23599 5.70328 7.23599 6.10328 6.97766 6.33662L1.26172 11.4869C1.15338 11.5869 1.02838 11.6285 0.895051 11.6285Z",fill:"currentColor"})})}var dn=a(15),jn=a.n(dn),mn=a(96),bn=(a(425),a(188)),fn=a.n(bn);function pn(e){var t=e.placement,a=void 0===t?"top":t,n=e.children,r=e.overlay,s=e.align,c=e.overlayClassName;return Object(et.jsx)(mn.a,{align:s,placement:a,overlay:r,overlayClassName:Je()(fn.a.defaultOverlay,c),children:n||Object(et.jsx)("span",{className:fn.a.defaultIcon,children:"?"})})}function hn(e){console.assert(e,"Provide stream id to use stream methods")}function _n(e){var t=Ma().tokens.get(e);return new ue(t.metadata.decimals)}var On=["NEAR"];function vn(e){var t=e.ticker,a=e.balance,n=e.className,r=_n(t).amount(a);return Object(et.jsxs)("div",{className:Je()("inline-flex items-center p-2 rounded-lg border",n),style:{borderColor:"#A7B0BE"},children:[Object(et.jsx)(Xt,{tokenAccountId:t,className:"mr-2"})," ",Object(et.jsxs)("div",{children:[Object(et.jsxs)("div",{children:[Object(et.jsx)("span",{className:"font-semibold",children:r})," ",Object(et.jsx)("span",{className:"text-gray",children:t})]}),Object(et.jsx)("div",{children:t})]})]})}function xn(e){var t=Ma().auth,a=function(e){var t=Ma().roketo,a=c.a.useState(!1),n=Object(b.a)(a,2),r=n[0],s=n[1];function o(){return(o=Object(f.a)(h.a.mark((function e(a){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.tokensWithoutStorage,r=void 0===n?0:n,e.next=3,t.api.updateAccount({tokensWithoutStorage:r});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function i(){return(i=Object(f.a)(h.a.mark((function a(n){var r,s;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=n.token,s=n.deposit,hn(e),a.next=4,t.api.depositStream({token:r,deposit:s,streamId:e});case 4:case"end":return a.stop()}}),a)})))).apply(this,arguments)}function l(){return(l=Object(f.a)(h.a.mark((function a(){var n;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return hn(e),console.debug("pausing",e),a.next=4,t.api.pauseStream({streamId:e});case 4:n=a.sent,console.debug("pausing res",n);case 6:case"end":return a.stop()}}),a)})))).apply(this,arguments)}function u(){return(u=Object(f.a)(h.a.mark((function a(){var n;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return hn(e),console.debug("restarting",e),a.next=4,t.api.startStream({streamId:e});case 4:n=a.sent,console.debug("restarting res",n);case 6:case"end":return a.stop()}}),a)})))).apply(this,arguments)}function d(){return(d=Object(f.a)(h.a.mark((function a(){var n;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return hn(e),console.debug("Stop called stopping",e),a.next=4,t.api.stopStream({streamId:e});case 4:n=a.sent,console.debug("stopping res",n);case 6:case"end":return a.stop()}}),a)})))).apply(this,arguments)}function j(e){return Object(f.a)(h.a.mark((function t(){var a=arguments;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=2;break}return t.abrupt("return");case 2:return s(!0),t.prev=3,t.next=6,e.apply(void 0,a);case 6:return t.prev=6,s(!1),t.finish(6);case 9:case"end":return t.stop()}}),t,null,[[3,,6,9]])})))}return{loading:r,updateAllAndWithdraw:j((function(e){return o.apply(this,arguments)})),pause:j((function(){return l.apply(this,arguments)})),restart:j((function(){return u.apply(this,arguments)})),stop:j((function(){return d.apply(this,arguments)})),deposit:j((function(e){return i.apply(this,arguments)}))}}(),n=Object(Ga.b)().mutate,r=ma(!1),o=function(){var e=Ma(),t=e.roketo,a=e.tokens,n=an(),r=sn({account:n.data}),c=Object(s.useMemo)((function(){var e={};return n.data&&r.data&&(n.data.ready_to_withdraw.forEach((function(t){var a=Object(b.a)(t,2),n=a[0],r=a[1];e[n]=e[n]||0,e[n]+=Number(r)})),r.data.inputs.forEach((function(t){e[t.ticker]=e[t.ticker]||0,e[t.ticker]+=Number(t.available_to_withdraw)}))),e}),[n.data,r.data]),o=Object(Ga.a)((function(){c.NEAR;var e=Object(it.a)(c,On),t=Object.keys(e);return t.sort(),JSON.stringify(t)}),(function(e){var t=JSON.parse(e);return Promise.all(t.map(function(){var e=Object(f.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.t1=Boolean,e.next=4,a.ftStorageBalance(t);case 4:return e.t2=e.sent,e.t3=(0,e.t1)(e.t2),e.abrupt("return",{ticker:e.t0,hasStorageBalance:e.t3});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}),{refreshInterval:5e3}),i=!n.data||!r.data||!o.data,l=(o.data||[]).filter((function(e){return!e.hasStorageBalance})),u=l.filter((function(e){var a=e.ticker;return t.isBridged(a)})),d=0===u.length&&o.data;return{balances:Object.entries(c),loading:i,tokensRequireManualDeposit:u,notRegisteredTokens:l,isSafeToWithdraw:d}}(),i=o.balances,l=o.loading,d=o.isSafeToWithdraw,j=o.notRegisteredTokens;function m(){return(m=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.updateAllAndWithdraw({tokensWithoutStorage:j.length});case 2:n(["account",t.accountId]);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.setOn(!0);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _=Object(et.jsxs)(u.a,{isOpen:r.on,onRequestClose:r.turnOff,className:"ModalContent",overlayClassName:"ModalOverlay",children:[Object(et.jsx)("h2",{className:"text-2xl mb-6",children:"Restricted withdrawal"}),Object(et.jsxs)("p",{children:["Due to NEP-141 issues you are required to do storage deposit before withdrawing. You can do it by buying any amount of"," ",j.map((function(e){return e.ticker})).join(", ")," ","tokens at any DEX"]})]}),O=l?function(){}:function(){d?function(){m.apply(this,arguments)}():function(){p.apply(this,arguments)}()};return Object(et.jsxs)(et.Fragment,{children:[Object(et.jsx)(pn,{placement:"bottom",align:{offset:[0,20]},overlay:Object(et.jsxs)("div",{className:"text-left",children:[Object(et.jsx)("p",{className:"mb-4 text-gray",children:"Move all received tokens to your wallet. With Roketo you can only withdraw from all your legacy streams simultaneously."}),Object(et.jsx)("div",{className:"text-left",children:l?Object(et.jsx)("p",{className:"font-semibold text-center",children:"Loading balances..."}):i.length?Object(et.jsxs)(et.Fragment,{children:[Object(et.jsx)("p",{className:"font-semibold mb-2",children:"Available balances:"}),Object(et.jsx)("div",{children:i.map((function(e){var t=Object(b.a)(e,2),a=t[0],n=t[1];return Object(et.jsx)(vn,{ticker:a,balance:n,className:"w-full mb-2"},a)}))})]}):Object(et.jsx)("p",{className:"font-semibold text-center",children:"You have nothing to withdraw"})})]}),children:Object(et.jsx)(jt,Object(K.a)(Object(K.a)({},e),{},{onClick:O,displayMode:at.action}))}),r.on?_:null]})}function yn(e){var t=e.stream,a=_n(t.ticker),n=ln(t).progress,r=n.streamed,s=n.withdrawn,c=n.full;return Object(et.jsxs)("div",{children:[Object(et.jsxs)("div",{className:jn.a.numericProgress,children:[Object(et.jsx)(Xt,{tokenAccountId:t.ticker,className:jn.a.tokenIcon}),Object(et.jsx)("span",{children:"".concat(t.ticker," ").concat(a.amount(r)," of ").concat(a.amount(c))})]}),Object(et.jsx)(Zt,{total:c,streamed:r,withdrawn:s})]})}function gn(e){var t=e.stream,a=ln(t).isDead,n=Ja(t);return a?null:Object(et.jsxs)("div",{className:jn.a.buttons,children:[Object(et.jsx)(Ka,{stream:t}),n===Ya&&t.status===Qt&&"0"!==t.available_to_withdraw&&Object(et.jsx)(xn,{children:"Withdraw all"})]})}function wn(e){var t=e.stream,a=_n(t.ticker);return Object(et.jsxs)("div",{children:[Object(et.jsx)("span",{className:jn.a.blockTitle,children:"Speed"}),Object(et.jsx)("div",{className:jn.a.speed,children:Dt(Number(t.tokens_per_tick)*xa,{formatter:a,meta:{symbol:t.ticker}})})]})}function Nn(e){var t=e.stream,a="";try{a=JSON.parse(t.description).comment}catch(n){a=t.description}return""===a?null:Object(et.jsxs)("div",{children:[Object(et.jsx)("span",{className:jn.a.blockTitle,children:"Comment"}),Object(et.jsx)("div",{className:jn.a.commentBody,children:a})]})}function kn(e){var t=e.stringToCopy;return Object(et.jsx)("button",{type:"button",className:jn.a.copyButton,onClick:function(){return vt()(t)},children:Object(et.jsx)(gt,{className:jn.a.linkIcon})})}function Cn(e){var t=_t(e.stream.id);return Object(et.jsxs)("div",{children:[Object(et.jsxs)("div",{className:Je()(jn.a.blockTitle,jn.a.copyTitle),children:["Public link to view the stream",Object(et.jsx)(kn,{stringToCopy:t})]}),Object(et.jsx)("div",{className:jn.a.link,children:t})]})}function Sn(e){var t=e.title,a=e.children;return Object(et.jsxs)("div",{className:jn.a.infoRow,children:[Object(et.jsx)("span",{className:jn.a.infoTitle,children:t}),a]})}function An(e){var t=e.stream,a=Ja(t),n=Ma().tokens,r=ln(t),c=r.streamEndInfo,o=r.timeLeft,i=r.progress,l=i.streamed,u=i.left,d=i.full,j=_n(t.ticker),m=n.get(t.ticker).metadata,f=Vt(l,d).toNumber(),p=Vt(u,d).toNumber(),h=Number(t.available_to_withdraw),_=Object(s.useState)(!1),O=Object(b.a)(_,2),v=O[0],x=O[1];return Object(et.jsxs)("div",{className:Je()(jn.a.tile,jn.a.infoTile),children:[Object(et.jsx)("div",{className:jn.a.blockHeader,children:"Stream info"}),Object(et.jsx)(Sn,{title:"Sender",children:Object(et.jsx)("span",{className:jn.a.font16,children:a===za?"You":t.owner_id})}),Object(et.jsx)(Sn,{title:"Receiver",children:Object(et.jsx)("span",{className:jn.a.font16,children:a===Ya?"You":t.receiver_id})}),Object(et.jsx)(Sn,{title:"Amount",children:Object(et.jsxs)("span",{className:jn.a.font14,children:[j.amount(d),"\xa0",Object(et.jsx)("span",{className:jn.a.font12,children:m.symbol})]})}),Object(et.jsx)(Sn,{title:"Stream Created",children:Object(et.jsx)("span",{className:jn.a.font14,children:Object(xt.a)(new Date(Number(t.timestamp_created)/1e6),"PP 'at' p")})}),null!==c&&Object(et.jsx)(Sn,{title:Object(yt.a)(c)?"Stream Ended":"Stream Ends",children:Object(et.jsx)("span",{className:jn.a.font14,children:Object(xt.a)(new Date(c),"PP 'at' p")})}),Object(et.jsx)(Sn,{title:"Token",children:Object(et.jsxs)("span",{className:jn.a.font14,children:[m.name,",\xa0",Object(et.jsx)("span",{className:jn.a.font12,children:m.symbol})]})}),Object(et.jsx)("div",{className:jn.a.divider}),Object(et.jsx)(Mt,{className:jn.a.dropdownOpener,opened:v,onChange:function(e){x(e)},children:Object(et.jsx)("h3",{className:jn.a.sectionHeader,children:"Other info"})}),v&&Object(et.jsxs)(et.Fragment,{children:[Object(et.jsx)(Sn,{title:"Stream ID",children:Object(et.jsxs)("div",{className:jn.a.centeredFlex,children:[Object(et.jsx)("span",{className:Je()(jn.a.font14,jn.a.streamID),children:t.id}),Object(et.jsx)(kn,{stringToCopy:t.id})]})}),Object(et.jsx)(Sn,{title:"Remaining",children:Object(et.jsx)("span",{className:jn.a.font14,children:o||"Finished"})}),Object(et.jsx)(Sn,{title:"Tokens Transferred",children:Object(et.jsxs)("span",{className:jn.a.font14,children:[j.amount(l),"\xa0",Object(et.jsxs)("span",{className:jn.a.font12,children:[m.symbol," ",Object(et.jsxs)("span",{className:jn.a.grey,children:["(",f,"%)"]})]})]})}),Object(et.jsx)(Sn,{title:"Tokens Left",children:Object(et.jsxs)("span",{className:jn.a.font14,children:[j.amount(u),"\xa0",Object(et.jsxs)("span",{className:jn.a.font12,children:[m.symbol," ",Object(et.jsxs)("span",{className:jn.a.grey,children:["(",p,"%)"]})]})]})}),Object(et.jsx)(Sn,{title:"Tokens Available",children:Object(et.jsxs)("span",{className:jn.a.font14,children:[j.amount(h),"\xa0",Object(et.jsx)("span",{className:jn.a.font12,children:m.symbol})]})})]})]})}function In(){var e=Object(m.h)().id,t=function(e,t){var a=Ma().roketo,n=Object(s.useRef)(cn),r=Object(s.useRef)(0),o=Object(Ga.a)((function(){return!!t&&["stream",e,t.account_id,t.last_action]}),Object(f.a)(h.a.mark((function t(){var s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.api.getStream({streamId:e});case 2:return s=t.sent,n.current={value:s.available_to_withdraw,cachedAt:Date.now()},r.current=9,t.abrupt("return",s);case 6:case"end":return t.stop()}}),t)}))),{errorRetryInterval:2e3,errorRetryCount:3}),i=o.data||{balance:null,available_to_withdraw:null,status:null},l=i.balance===i.available_to_withdraw;return c.a.useEffect((function(){if(i.status===Qt&&!l){var e=setTimeout((function(){!o.data||r.current<=0?o.mutate():(r.current-=1,o.mutate(nn(o.data,n.current.value,n.current.cachedAt),{revalidate:!1}))}),1e3);return function(){return clearTimeout(e)}}}),[i.status,l,o]),o}(e,an().data),a=t.data,n=t.error;return Object(et.jsx)("div",{className:jn.a.root,children:Object(et.jsxs)(ot,{children:[Object(et.jsxs)("div",{className:jn.a.breadbrumbs,children:[Object(et.jsx)(j.b,{to:ht.legacyStreams.path,className:jn.a.streamsLink,children:"Streams (legacy)"}),Object(et.jsx)(un,{className:jn.a.breadbrumb}),Object(et.jsx)("span",{className:jn.a.id,children:e})]}),n&&Object(et.jsx)(Lt,{className:"max-w-2xl mx-auto py-32",message:n.message,onRetry:function(){t.mutate()}}),!n&&!a&&Object(et.jsx)("div",{className:"py-32 text-center text-gray text-2xl",children:"Loading..."}),!n&&a&&Object(et.jsxs)("main",{className:jn.a.stream,children:[Object(et.jsxs)("div",{className:jn.a.left,children:[Object(et.jsxs)("div",{className:Je()(jn.a.tile,jn.a.remaining),children:[Object(et.jsx)("span",{className:jn.a.blockTitle,children:"Remaining"}),Object(et.jsx)("span",{children:ln(a).timeLeft||"Finished"})]}),Object(et.jsxs)("div",{className:Je()(jn.a.tile,jn.a.main),children:[Object(et.jsx)(yn,{stream:a}),Object(et.jsx)(gn,{stream:a}),Object(et.jsx)(wn,{stream:a}),Object(et.jsx)("div",{className:jn.a.divider}),Object(et.jsx)(Nn,{stream:a}),Object(et.jsx)(Cn,{stream:a})]})]}),Object(et.jsx)("div",{className:jn.a.right,children:Object(et.jsx)(An,{stream:a})})]})]})})}var Ln,Rn=a(258),Tn=a.n(Rn);!function(e){e.asc="ascending",e.desc="descending"}(Ln||(Ln={}));var En=function(e){var t=e.width,a=void 0===t?24:t,n=e.height,r=void 0===n?24:n,s=e.type,c=void 0===s?Ln.desc:s,o=e.className;return Object(et.jsx)("div",{className:Je()(Object(ee.a)({},Tn.a.rotate,c===Ln.asc),o),children:Object(et.jsx)("svg",{width:a,height:r,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(et.jsx)("path",{d:"M3 18H9V16H3V18ZM3 6V8H21V6H3ZM3 13H15V11H3V13Z",fill:"#2B313B"})})})},Bn=a(119),Mn=a.n(Bn);function Pn(e){var t=e.active,a=e.label,n=e.value,r=e.onChange;return Object(et.jsxs)("label",{className:Mn.a.root,children:[Object(et.jsx)("input",{type:"radio",className:"invisible w-0 h-0 absolute",checked:t,onChange:function(){return r(n)}}),Object(et.jsx)("div",{className:Je()(Mn.a.radio,Object(ee.a)({},Mn.a.radioActive,t))}),Object(et.jsx)("div",{className:Mn.a.text,children:a})]})}var Fn=a(120),Dn=a.n(Fn);function Hn(e){var t=e.count,a=e.option;return Object(et.jsxs)("span",{children:[a," ",Object(et.jsx)("span",{className:"text-gray font-normal",children:t})]})}function Vn(e){var t=e.label,a=e.options,n=e.renderOption,r=e.renderActive,c=e.active,o=e.onChange,i=e.className,l=e.isDisabled,u=Object(s.useState)(!1),d=Object(b.a)(u,2),j=d[0],m=d[1];return Object(et.jsxs)("div",{className:Je()(Dn.a.root,i),children:[t&&Object(et.jsx)("div",{className:"text-gray mr-2",children:t}),Object(et.jsxs)("div",{className:Dn.a.dropdownWrapper,children:[Object(et.jsx)(Mt,{className:Je()(l&&Dn.a.dropdownInactive,l&&"text-gray"),opened:!l&&j,onChange:m,children:r?r(c):c}),Object(et.jsx)(ua,{opened:!l&&j,className:Dn.a.dropdownMenu,onClose:function(){m(!1)},children:a.map((function(e){return Object(et.jsx)(Pn,{label:n?n(e,c===e):e,active:c===e,value:e,onChange:o},JSON.stringify(e))}))})]})]})}var Wn,Un=a(150),Zn=a.n(Un),qn=function(e){var t=e.directions,a=e.activeDirection,n=e.onDirectionClick,r=e.isInactive;return Object(et.jsx)("div",{className:Zn.a.root,children:t.map((function(e){return Object(et.jsx)(jt,{className:Je()(Zn.a.sort,Object(ee.a)({},Zn.a.active,e===a)),onClick:function(){return n(e)},disabled:r,children:e},e)}))})};function Kn(e){var t=e.options,a=Object(s.useMemo)((function(){return Object.keys(t)}),[t]),n=Object(s.useState)(a[0]),r=Object(b.a)(n,2),c=r[0],o=r[1];return Object(s.useMemo)((function(){var e=t[c];return{option:c,selectOption:o,options:t,optionsArray:a,currentFilterFunction:e}}),[t,c,a])}var Yn="All",zn="Incoming",Jn="Outgoing",Xn=(Wn={ALL:"All"},Object(ee.a)(Wn,Gt,"Initialized"),Object(ee.a)(Wn,Qt,"Active"),Object(ee.a)(Wn,$t,"Paused"),Wn);function Gn(e){var t=Ma().auth,a=Object(s.useMemo)((function(){var e;return e={},Object(ee.a)(e,Xn.ALL,(function(){return!0})),Object(ee.a)(e,Xn[Gt],(function(e){return e.status===Gt})),Object(ee.a)(e,Xn[Qt],(function(e){return e.status===Qt})),Object(ee.a)(e,Xn[$t],(function(e){return e.status===$t})),e}),[]),n=Object(s.useMemo)((function(){var e;return e={},Object(ee.a)(e,Yn,(function(){return!0})),Object(ee.a)(e,zn,(function(e){return t.accountId===e.receiver_id})),Object(ee.a)(e,Jn,(function(e){return t.accountId===e.owner_id})),e}),[t.accountId]),r=Kn({options:a}),c=Kn({options:n}),o=function(e){var t=e.items,a=e.filters,n=Object(s.useState)(void 0),r=Object(b.a)(n,2),c=r[0],o=r[1],i=Object(s.useState)([]),l=Object(b.a)(i,2),u=l[0],d=l[1];return Object(s.useEffect)((function(){var e=t,n=[];a.forEach((function(t){var a={};Object.keys(t.options).forEach((function(n){var r;a[n]=null===(r=e)||void 0===r?void 0:r.filter(t.options[n])}));var r={};Object.keys(a).forEach((function(e){r[e]=(a[e]||[]).length})),n.push(r),e=a[t.option]})),d(n),o(e)}),[t,a]),{filterCounts:u,filteredItems:c}}({items:e,filters:Object(s.useMemo)((function(){return[c,r]}),[c,r])});return{statusFilter:r,directionFilter:c,result:o}}var Qn=a(151),$n=a.n(Qn);function er(e,t,a){return Number(t[a])-Number(e[a])}var tr={bigBalanceFirst:{label:"With high amount",order:Ln.desc,fn:function(e,t){return er(e,t,"balance")}},highSpeedFirst:{label:"With high speed",order:Ln.desc,fn:function(e,t){return er(e,t,"tokens_per_tick")}},highSpeedLast:{label:"With low speed",order:Ln.asc,fn:function(e,t){return-1*er(e,t,"tokens_per_tick")}},mostRecent:{label:"Most recent",order:Ln.desc,fn:function(e,t){return er(e,t,"timestamp_created")}}};function ar(e){var t=e.items,a=e.onFilterDone,n=e.className,r=Gn(t),c=r.result.filteredItems,o=Object(s.useState)(tr.mostRecent),i=Object(b.a)(o,2),l=i[0],u=i[1],d=Object.values(tr),j=!t||0===t.length;return Object(s.useEffect)((function(){if(c){var e=Object(Xa.a)(c);e.sort(l.fn),a(e)}else a(c)}),[c,a,l.fn]),Object(et.jsxs)("div",{className:Je()($n.a.root,n),children:[Object(et.jsx)(qn,{directions:r.directionFilter.optionsArray,activeDirection:r.directionFilter.option,onDirectionClick:r.directionFilter.selectOption,isInactive:j}),Object(et.jsxs)("div",{className:$n.a.filtersWrapper,children:[Object(et.jsx)(Vn,{options:r.statusFilter.optionsArray,label:"Status:",active:r.statusFilter.option,onChange:r.statusFilter.selectOption,isDisabled:j,renderOption:function(e){var t=r.result.filterCounts[1];return Object(et.jsx)(Hn,{option:e,count:t?t[e]:""},e)}}),Object(et.jsx)(Vn,{options:d,label:"Show first:",active:l,onChange:u,isDisabled:j,renderOption:function(e){return Object(et.jsx)("span",{children:e.label})},renderActive:function(e){return Object(et.jsxs)("div",{className:$n.a.sortWithOrder,children:[e.order&&Object(et.jsx)(En,{type:e.order}),Object(et.jsx)("span",{children:e.label})]})}})]})]})}var nr=a(189),rr=a.n(nr),sr=function(e){var t=e.wrapperClassName,a=e.spinnerClassName,n=e.testId;return Object(et.jsx)("div",{className:Je()(rr.a.wrapper,t),"data-testid":n,children:Object(et.jsx)("div",{className:Je()(rr.a.spinner,a)})})},cr=a(152),or=a.n(cr),ir=function(e){var t=e.name,a=e.label;return Object(et.jsxs)("div",{className:or.a.flexCenter,children:[Object(et.jsx)("span",{className:or.a.name,children:t}),a&&Object(et.jsx)("span",{className:or.a.nameLabel,children:a})]})};function lr(e){var t=e.className;return Object(et.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",className:t,children:Object(et.jsx)("path",{d:"M8.99169 0.666504C4.39169 0.666504 0.666687 4.39984 0.666687 8.99984C0.666687 13.5998 4.39169 17.3332 8.99169 17.3332C13.6 17.3332 17.3334 13.5998 17.3334 8.99984C17.3334 4.39984 13.6 0.666504 8.99169 0.666504ZM9.00002 15.6665C5.31669 15.6665 2.33335 12.6832 2.33335 8.99984C2.33335 5.3165 5.31669 2.33317 9.00002 2.33317C12.6834 2.33317 15.6667 5.3165 15.6667 8.99984C15.6667 12.6832 12.6834 15.6665 9.00002 15.6665ZM9.41669 4.83317H8.16669V9.83317L12.5417 12.4582L13.1667 11.4332L9.41669 9.20817V4.83317Z",fill:"black"})})}var ur=a(28),dr=a.n(ur),jr={points:["tl","bc"],offset:[-24,10]},mr=function(e){var t=e.stream,a=e.className,n=t.ticker,r=t.tokens_per_tick,s=Number(r)*xa,c=ln(t),o=c.progress,i=c.timeLeft,l=_n(n),u=Number(l.amount(o.streamed)),d=Number(l.amount(o.withdrawn)),j=Number(l.amount(o.full)),m=ue.formatSmartly(u),b=ue.formatSmartly(d),f=Vt(u,j,1),p=Vt(d,u,1),h="".concat(m," of ").concat(j),_=l.tokensPerMeaningfulPeriod(s),O=_.formattedValue,v=_.unit;return Object(et.jsx)(mn.a,{overlayClassName:dr.a.overlay,destroyTooltipOnHide:!0,align:jr,placement:"bottom",overlay:Object(et.jsxs)("div",{className:Je()(dr.a.tooltip,dr.a.text),children:[Object(et.jsxs)("div",{className:dr.a.innerStatus,children:[Object(et.jsx)("span",{children:h})," ",Object(et.jsx)("span",{className:Je()(dr.a.grey,dr.a.smaller),children:n})]}),Object(et.jsx)(Zt,{total:o.full,streamed:o.streamed,withdrawn:o.withdrawn}),Object(et.jsxs)("div",{className:Je()(dr.a.status,dr.a.speed),children:[O," ",Object(et.jsxs)("span",{className:Je()(dr.a.grey,dr.a.smaller),children:[n," / ",v]})]}),i&&Object(et.jsxs)("div",{className:dr.a.remained,children:[Object(et.jsx)(lr,{className:dr.a.clock}),i]}),Object(et.jsxs)("div",{className:Je()(dr.a.progress,dr.a.streamed),children:["Streamed: ",m," ",Object(et.jsx)("span",{className:Je()(dr.a.grey,dr.a.smaller),children:"".concat(f,"%")})]}),Object(et.jsxs)("div",{className:Je()(dr.a.progress,dr.a.withdrawn),children:["Withdrawn: ",b," ",Object(et.jsx)("span",{className:Je()(dr.a.grey,dr.a.smaller),children:"".concat(p,"%")})]})]}),children:Object(et.jsxs)("div",{className:Je()(dr.a.root,dr.a.text,a),children:[Object(et.jsxs)("div",{className:dr.a.status,children:[Object(et.jsx)("span",{children:h})," ",Object(et.jsx)("span",{className:dr.a.grey,children:n})]}),Object(et.jsx)(Zt,{total:o.full,streamed:o.streamed,withdrawn:o.withdrawn})]})})},br=a(190),fr=a.n(br),pr=function(e){var t=e.onCLick;return Object(et.jsx)("button",{className:fr.a.linkButton,type:"button",onClick:t,children:Object(et.jsx)(gt,{})})},hr=function(e){var t=e.className,a=e.stream,n=a.id,r=Object(s.useCallback)((function(e){e.preventDefault();var t=_t(n);vt()(t)}),[n]);return Object(et.jsxs)("div",{className:Je()(fr.a.root,t),children:[Object(et.jsx)(Ka,{stream:a}),Object(et.jsx)(pr,{onCLick:r})]})},_r=a(99),Or=a.n(_r),vr=function(e){var t=e.stream,a=e.className,n=t.id,r=t.description,s="";try{s=JSON.parse(r).comment}catch(u){s=r}var c=Ja(t)===Ya,o=c?t.owner_id:t.receiver_id,i=c?void 0:"Sending",l=Object(m.f)(ht.legacyStream.path,{id:n});return Object(et.jsxs)("div",{className:Je()(Or.a.root,a),children:[Object(et.jsx)(j.b,{to:l,className:Or.a.name,children:Object(et.jsx)(ir,{name:o,label:i})}),Object(et.jsx)(mr,{stream:t,className:Or.a.withMarginRight}),Object(et.jsx)(j.b,{to:l,className:"col-span-2 grow-0",children:Object(et.jsx)("p",{className:Or.a.comment,children:s})}),Object(et.jsx)(hr,{stream:t,className:Je()(Or.a.controls,"col-span-2 grow-0")})]})},xr=a(53),yr=a.n(xr),gr=function(e){var t=e.children;return Object(et.jsx)("div",{className:yr.a.emptyState,children:t})},wr=function(e){var t,a=e.className,n=e.displayingStreams,r=e.onCreateStreamClick,s=sn({account:an().data}).data,c=s||{},o=c.inputs,i=void 0===o?[]:o,l=c.outputs,u=void 0===l?[]:l,d=[].concat(Object(Xa.a)(i),Object(Xa.a)(u)).length,j=null!==(t=null===n||void 0===n?void 0:n.length)&&void 0!==t?t:0;return s?s&&0===d?Object(et.jsxs)(gr,{children:[Object(et.jsx)("div",{children:"You don't have any streams yet."}),Object(et.jsx)(jt,{onClick:r,children:"Create First Stream"})]}):s&&0!==d&&0===j?Object(et.jsx)(gr,{children:Object(et.jsx)("div",{children:"No streams matching your filters. Try selecting different ones"})}):Object(et.jsx)("div",{className:Je()(yr.a.container,a),children:Object(et.jsxs)("section",{className:yr.a.flexColumn,children:[Object(et.jsxs)("div",{className:Je()(yr.a.withPaddings,"grid grid-cols-6 gap-x-10"),children:[Object(et.jsx)("h3",{className:yr.a.title,children:"Wallet address"}),Object(et.jsx)("h3",{className:yr.a.title,children:"Amount to stream"}),Object(et.jsx)("h3",{className:yr.a.title,children:"Comment"})]}),null===n||void 0===n?void 0:n.map((function(e){return Object(et.jsx)(vr,{stream:e,className:Je()(yr.a.withPaddings,"grid grid-cols-6 gap-x-10")},e.id)}))]})}):Object(et.jsx)(gr,{children:Object(et.jsx)(sr,{wrapperClassName:yr.a.loader})})},Nr=a(63),kr=a.n(Nr),Cr=function(){var e=sn({account:an().data}).data||{},t=e.inputs,a=e.outputs,n=Object(s.useMemo)((function(){return(t||a)&&[].concat(Object(Xa.a)(t||[]),Object(Xa.a)(a||[]))}),[t,a]),r=Object(s.useState)([]),c=Object(b.a)(r,2),o=c[0],i=c[1],l=Object(s.useState)(!1),u=Object(b.a)(l,2),d=u[0],j=u[1],m=Object(s.useCallback)((function(){return j(!d)}),[j,d]);return Object(et.jsx)("div",{className:kr.a.root,children:Object(et.jsxs)(ot,{children:[Object(et.jsxs)("section",{className:Je()(kr.a.flex,kr.a.header),children:[Object(et.jsx)("h1",{className:kr.a.title,children:"Streams (legacy)"}),Object(et.jsx)("div",{className:Je()(kr.a.flex,kr.a.buttonsWrapper),children:Object(et.jsx)(xn,{children:"Withdraw all"})})]}),Object(et.jsx)(ar,{items:n,onFilterDone:i,className:kr.a.streamFilters}),Object(et.jsx)(wr,{displayingStreams:o,className:kr.a.section,onCreateStreamClick:m})]})})};var Sr=function(e){var t,a;return null!==(t=null===(a=window)||void 0===a?void 0:a.matchMedia(e).matches)&&void 0!==t&&t};function Ar(e){var t=Object(s.useState)((function(){return Sr(e)})),a=Object(b.a)(t,2),n=a[0],r=a[1];return Object(s.useEffect)((function(){var t=window.matchMedia(e);function a(){r(Sr(e))}return a(),t.addListener?t.addListener(a):t.addEventListener("change",a),function(){t.removeListener?t.removeListener(a):t.removeEventListener("change",a)}}),[e,r]),n}var Ir,Lr,Rr=function(e){var t=e.to,a=e.className,n=e.children,r=e.onClick;return Object(et.jsx)(j.b,{to:t,className:a,onClick:r,children:n})},Tr=a(191),Er=a.n(Tr),Br=function(e){var t=e.pageRoutes,a=void 0===t?[]:t;return 0===a.length?null:Object(et.jsx)("ul",{className:Er.a.root,children:a.map((function(e){return Object(et.jsx)("li",{className:Er.a.pageLink,children:Object(et.jsx)(Rr,{to:e.path,children:e.title})},e.path)}))})},Mr=function(e){var t=e.width,a=void 0===t?17:t,n=e.height,r=void 0===n?16:n,s=e.className;return Object(et.jsx)("div",{className:s,children:Object(et.jsx)("svg",{width:a,height:r,viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(et.jsx)("path",{d:"M15.5 4.06667V2.16667C15.5 1.25 14.75 0.5 13.8333 0.5H2.16667C1.24167 0.5 0.5 1.25 0.5 2.16667V13.8333C0.5 14.75 1.24167 15.5 2.16667 15.5H13.8333C14.75 15.5 15.5 14.75 15.5 13.8333V11.9333C15.9917 11.6417 16.3333 11.1167 16.3333 10.5V5.5C16.3333 4.88333 15.9917 4.35833 15.5 4.06667ZM14.6667 5.5V10.5H8.83333V5.5H14.6667ZM2.16667 13.8333V2.16667H13.8333V3.83333H8.83333C7.91667 3.83333 7.16667 4.58333 7.16667 5.5V10.5C7.16667 11.4167 7.91667 12.1667 8.83333 12.1667H13.8333V13.8333H2.16667Z",fill:"#626F84"})})})},Pr=function(e){var t=e.width,a=void 0===t?20:t,n=e.height,r=void 0===n?16:n,s=e.className;return Object(et.jsx)("div",{className:s,children:Object(et.jsx)("svg",{width:a,height:r,viewBox:"0 0 20 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(et.jsx)("path",{d:"M17.5 0.508362H2.49998C1.58331 0.508362 0.833313 1.25836 0.833313 2.17503V5.50003H2.49998V2.15836H17.5V13.85H2.49998V10.5H0.833313V13.8417C0.833313 14.7584 1.58331 15.4917 2.49998 15.4917H17.5C18.4166 15.4917 19.1666 14.7584 19.1666 13.8417V2.17503C19.1666 1.25003 18.4166 0.508362 17.5 0.508362ZM9.16665 11.3334L12.5 8.00003L9.16665 4.6667V7.1667H0.833313V8.83336H9.16665V11.3334ZM17.5 0.508362H2.49998C1.58331 0.508362 0.833313 1.25836 0.833313 2.17503V5.50003H2.49998V2.15836H17.5V13.85H2.49998V10.5H0.833313V13.8417C0.833313 14.7584 1.58331 15.4917 2.49998 15.4917H17.5C18.4166 15.4917 19.1666 14.7584 19.1666 13.8417V2.17503C19.1666 1.25003 18.4166 0.508362 17.5 0.508362ZM9.16665 11.3334L12.5 8.00003L9.16665 4.6667V7.1667H0.833313V8.83336H9.16665V11.3334Z",fill:"#626F84"})})})},Fr=function(e){var t=e.width,a=void 0===t?17:t,n=e.height,r=void 0===n?16:n,s=e.className;return Object(et.jsx)("div",{className:s,children:Object(et.jsxs)("svg",{width:a,height:r,viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(et.jsx)("path",{d:"M12.1667 12.1666L16.3333 7.99998L12.1667 3.83331L10.9917 5.00831L13.1417 7.16665H5.5V8.83331H13.1417L10.9917 10.9916L12.1667 12.1666Z",fill:"#626F84"}),Object(et.jsx)("path",{d:"M13.8333 13.8333H2.16667V2.16667H13.8333V3.83333H15.5V2.16667C15.5 1.25 14.7583 0.5 13.8333 0.5H2.16667C1.25 0.5 0.5 1.25 0.5 2.16667V13.8333C0.5 14.75 1.25 15.5 2.16667 15.5H13.8333C14.7583 15.5 15.5 14.75 15.5 13.8333V12.1667H13.8333V13.8333Z",fill:"#626F84"})]})})};function Dr(e){var t=Object(d.c)(Ie);return me(e)&&(t[e].meta.symbol="NEAR"),t[e]}function Hr(e){var t,a,n,r=e.tokenAccountId,s=e.className,c=e.mode,o=void 0===c?Ir.CRYPTO:c,i=Object(d.c)(Le),l=Object(d.c)(Se),u=Dr(r),j=u.balance,m=u.formatter,b=u.meta,f=me(r)?null!==(t=null===l||void 0===l||null===(a=l.auth.balance)||void 0===a?void 0:a.available)&&void 0!==t?t:"0":j,p=m.amount(f),h=o===Ir.USD,_=h?null!==(n=i.getPriceInUsd(r,p))&&void 0!==n?n:0:p,O=h?"$":b.symbol;return Object(et.jsx)("span",{className:s,children:"Balance: ".concat(O," ").concat(_)})}!function(e){e.USD="USD",e.CRYPTO="CRYPTO",e.BOTH="BOTH"}(Ir||(Ir={})),function(e){e.income="total_incoming",e.outcome="total_outgoing"}(Lr||(Lr={}));var Vr=Object(_.c)(Ae,Le,(function(e,t){var a,n;if(!e||!t)return a={},Object(ee.a)(a,Lr.income,0),Object(ee.a)(a,Lr.outcome,0),a;var r=e.roketo,s=e.tokens,c=t.getPriceInUsd;function o(e){var t=r.account[e];return Object.keys(t).reduce((function(e,a){var n=s[a].formatter,r=function(e,t){var a=new A.a(e);switch(t){case q.Minute:return a.multipliedBy(60);case q.Hour:return a.multipliedBy(ne);case q.Day:return a.multipliedBy(re);default:return a}}(t[a],q.Hour).toFixed(),o=n.toHumanReadableValue(r,3),i=c(a,o);return e+Number(i)}),0)}return n={},Object(ee.a)(n,Lr.income,o(Lr.income)),Object(ee.a)(n,Lr.outcome,o(Lr.income)),n})),Wr=a(74),Ur=a.n(Wr),Zr=function(e){var t=e.type,a=e.className,n=Object(d.d)({store:Vr,keys:[t],fn:function(e){return e[t]}});return Object(et.jsx)("div",{className:a,children:"".concat(n," $ ").concat(ie[q.Hour])})},qr=function(e){var t=e.className;return Object(et.jsxs)("div",{className:Je()(Ur.a.root,t),children:[Object(et.jsxs)("div",{className:Ur.a.wrapper,children:[Object(et.jsx)(Fr,{}),Object(et.jsx)(Zr,{className:Ur.a.balance,type:Lr.outcome})]}),Object(et.jsxs)("div",{className:Ur.a.wrapper,children:[Object(et.jsx)(Pr,{}),Object(et.jsx)(Zr,{className:Ur.a.balance,type:Lr.income})]}),Object(et.jsxs)("div",{className:Ur.a.wrapper,children:[Object(et.jsx)(Mr,{}),Object(et.jsx)(Hr,{className:Ur.a.balance,tokenAccountId:v.WNEAR_ID,mode:Ir.USD})]})]})},Kr=a(192),Yr=a.n(Kr),zr=["className","hasError"],Jr=function(e){var t=e.className,a=e.hasError,n=void 0!==a&&a,r=Object(it.a)(e,zr);return Object(et.jsx)("input",Object(K.a)({className:Je()(Yr.a.input,Object(ee.a)({},Yr.a.error,n),t)},r))},Xr=a(100),Gr=a.n(Xr),Qr=["children","isRequired","label","description","error","className"],$r=function(e){var t=e.children,a=e.isRequired,n=void 0!==a&&a,r=e.label,s=e.description,c=e.error,o=e.className,i=Object(it.a)(e,Qr);return Object(et.jsxs)("div",Object(K.a)(Object(K.a)({className:Je()(Gr.a.root,o)},i),{},{children:[r&&Object(et.jsx)("label",{className:Je()(Gr.a.label,Object(ee.a)({},Gr.a.required,n)),children:r}),t,s&&Object(et.jsx)("div",{className:Gr.a.description,children:s}),c&&Object(et.jsx)("div",{className:Gr.a.error,children:c})]}))},es=a(193),ts=a.n(es),as="nameInput",ns="emailInput";function rs(){var e=Object(d.c)(Be),t=Object(s.useState)(""),a=Object(b.a)(t,2),n=a[0],r=a[1],c=Object(s.useState)(""),o=Object(b.a)(c,2),i=o[0],l=o[1],u=Object(d.c)(De.pending);Object(s.useEffect)((function(){var t,a;r(null!==(t=e.name)&&void 0!==t?t:""),l(null!==(a=e.email)&&void 0!==a?a:"")}),[e]);var j=Object(s.useRef)(null);return Object(et.jsxs)("form",{className:ts.a.profileForm,onSubmit:function(e){var t,a;e.preventDefault(),De({name:null===(t=j.current)||void 0===t?void 0:t.nameInput.value,email:null===(a=j.current)||void 0===a?void 0:a.emailInput.value})},ref:j,children:[u&&Object(et.jsx)(sr,{wrapperClassName:ts.a.loaderWrapper}),Object(et.jsx)($r,{label:"User name",children:Object(et.jsx)(Jr,{placeholder:"Name",name:as,value:n,onChange:function(e){return r(e.target.value)},disabled:u})}),Object(et.jsx)($r,{label:"Email",description:"Email address is used for notifications",children:Object(et.jsx)(Jr,{placeholder:"Email",name:ns,value:i,onChange:function(e){return l(e.target.value)},disabled:u})}),Object(et.jsx)(jt,{type:tt.submit,disabled:u,children:"Save"})]})}var ss=a(81),cs=a.n(ss),os=function(){var e=Object(s.useState)(!1),t=Object(b.a)(e,2),a=t[0],n=t[1],r=Object(s.useState)(!1),c=Object(b.a)(r,2),o=c[0],i=c[1],l=Object(d.c)(Ee),u=Object(d.c)(Be),j=u.name,m=u.email;return Object(et.jsxs)("div",{className:cs.a.profile,children:[Object(et.jsxs)(Mt,{onChange:n,className:cs.a.dropdownOpener,opened:a,children:[Object(et.jsx)("span",{className:cs.a.name,children:j||l}),o||!l?Object(et.jsx)("svg",{className:cs.a.avatar}):Object(et.jsx)("img",{className:cs.a.avatar,src:"".concat(v.WEB_API_URL,"/users/").concat(l,"/avatar?email=").concat(m),alt:"",onError:function(){return i(!0)}})]}),Object(et.jsx)(ua,{opened:a,onClose:function(){return n(!1)},className:cs.a.dropdownMenu,children:Object(et.jsx)(rs,{})})]})},is=a(141),ls=a(491),us=a(492),ds="in",js="out";function ms(e){var t=Object(d.c)(Ee);return e.receiver_id===t?ds:e.owner_id===t?js:null}function bs(e){if(F(e))return null;var t=new A.a(e.tokens_per_sec).dividedBy(1e3);return e.last_action/1e6+new A.a(e.balance).dividedBy(t).toNumber()}function fs(e){if(!e.cliff)return null;var t=bs(e);return t?(e.cliff-e.timestamp_created)/1e6/(t-e.timestamp_created/1e6)*100:null}function ps(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=290304e5,n=t?H(e):new A.a(0),r=new A.a(e.balance),s=A.a.minimum(a,r.minus(n).dividedBy(e.tokens_per_sec).toFixed()).toNumber(),c=Object($a.a)({start:0,end:1e3*s});(c.days||c.weeks||c.months||c.years)&&(c.seconds=0);var o=Object(en.a)(c,{locale:R}),i=r.plus(e.tokens_total_withdrawn),l=new A.a(e.tokens_total_withdrawn),u=l.plus(n),d=i.minus(u),j=[l.dividedBy(i).toNumber(),u.dividedBy(i).toNumber()],m={left:i.minus(u).multipliedBy(100).dividedBy(i).toNumber(),streamed:u.multipliedBy(100).dividedBy(i).toNumber(),withdrawn:l.multipliedBy(100).dividedBy(i).toNumber(),available:n.multipliedBy(100).dividedBy(i).toNumber(),cliff:fs(e)};return{progresses:j,isDead:D(e),percentages:m,timeLeft:o,streamEndTimestamp:bs(e),cliffEndTimestamp:e.cliff?e.cliff/1e6:null,progress:{full:i.toFixed(),withdrawn:l.toFixed(),streamed:u.toFixed(),left:d.toFixed(),available:n.toFixed()}}}var hs=a(31),_s=a.n(hs);function Os(e){var t=e.className,a=e.withBadge;return Object(et.jsxs)("svg",{className:t,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[Object(et.jsx)("path",{d:"M15.375 17.5556H8.625M15.375 17.5556H21L19.4194 15.9944C19.2071 15.7848 19.0387 15.5358 18.9239 15.2619C18.809 14.9879 18.75 14.6943 18.75 14.3978V10.8889C18.7502 9.50993 18.3175 8.16482 17.5116 7.03876C16.7057 5.91271 15.5662 5.06107 14.25 4.60111V4.22222C14.25 3.63285 14.0129 3.06762 13.591 2.65087C13.169 2.23413 12.5967 2 12 2C11.4033 2 10.831 2.23413 10.409 2.65087C9.98705 3.06762 9.75 3.63285 9.75 4.22222V4.60111C7.12875 5.51667 5.25 7.98667 5.25 10.8889V14.3989C5.25 14.9967 5.00925 15.5711 4.58063 15.9944L3 17.5556H8.625H15.375ZM15.375 17.5556V18.6667C15.375 19.5507 15.0194 20.3986 14.3865 21.0237C13.7536 21.6488 12.8951 22 12 22C11.1049 22 10.2464 21.6488 9.61351 21.0237C8.98058 20.3986 8.625 19.5507 8.625 18.6667V17.5556H15.375Z",stroke:a?"#3E65F2":"#2B313B",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),a&&Object(et.jsx)("circle",{cx:"19",cy:"5",r:"5",fill:"#D80A1F",stroke:"white",strokeWidth:"2"})]})}function vs(e){var t=e.className;return Object(et.jsxs)("svg",{className:t,width:"44",height:"44",viewBox:"0 0 44 44",fill:"none",children:[Object(et.jsx)("rect",{width:"44",height:"44",rx:"22",fill:"#F1F6FE"}),Object(et.jsx)("path",{d:"M22 14.9167V19.5M14.5 29.5V26.1667V29.5ZM14.5 26.1667V16.1667C14.5 15.7246 14.6756 15.3007 14.9882 14.9882C15.3007 14.6756 15.7246 14.5 16.1667 14.5H21.5833L22.4167 15.3333H29.5L27 20.3333L29.5 25.3333H22.4167L21.5833 24.5H16.1667C15.7246 24.5 15.3007 24.6756 14.9882 24.9882C14.6756 25.3007 14.5 25.7246 14.5 26.1667V26.1667Z",stroke:"#3E65F2",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}function xs(e){var t=e.className;return Object(et.jsxs)("svg",{className:t,width:"44",height:"44",viewBox:"0 0 44 44",fill:"none",children:[Object(et.jsx)("rect",{width:"44",height:"44",rx:"22",fill:"#F2FCF5"}),Object(et.jsx)("path",{d:"M28.3128 19.7147L20.9824 15.0357C20.6368 14.815 20.235 14.6883 19.82 14.6692C19.405 14.6501 18.9923 14.7393 18.6262 14.9273C18.26 15.1153 17.9541 15.3949 17.7411 15.7364C17.5281 16.0779 17.4161 16.4683 17.417 16.866V26.2217C17.4169 26.6191 17.5296 27.0089 17.7429 27.3498C17.9562 27.6906 18.2622 27.9697 18.6282 28.1571C18.9942 28.3446 19.4065 28.4334 19.8211 28.4141C20.2358 28.3948 20.6371 28.2682 20.9824 28.0477L28.3128 23.3687C28.6268 23.1683 28.8843 22.8968 29.0624 22.5783C29.2405 22.2597 29.3337 21.904 29.3337 21.5428C29.3337 21.1815 29.2405 20.8258 29.0624 20.5073C28.8843 20.1888 28.6268 19.9173 28.3128 19.7169V19.7147Z",stroke:"#1EBA52",strokeWidth:"2.75",strokeLinecap:"round",strokeLinejoin:"round"})]})}function ys(e){var t=e.className;return Object(et.jsxs)("svg",{className:t,width:"44",height:"44",viewBox:"0 0 44 44",fill:"none",children:[Object(et.jsx)("rect",{width:"44",height:"44",rx:"22",fill:"#FFF7EE"}),Object(et.jsx)("path",{d:"M18.333 16.5V27.5M25.6663 16.5V27.5",stroke:"#FF8C19",strokeWidth:"3.66667",strokeLinecap:"round",strokeLinejoin:"round"})]})}function gs(e){var t=e.className;return Object(et.jsxs)("svg",{width:"44",height:"44",viewBox:"0 0 44 44",fill:"none",className:t,children:[Object(et.jsx)("rect",{width:"44",height:"44",rx:"22",fill:"#FFEEF0"}),Object(et.jsx)("path",{d:"M20.5833 24.3833H23.9167V13.425H20.5833V24.3833ZM22.125 31.3C22.6806 31.3 23.1319 31.1264 23.4792 30.7792C23.8264 30.4319 24 29.9806 24 29.425C24 28.8972 23.8264 28.4458 23.4792 28.0708C23.1319 27.6958 22.6806 27.5083 22.125 27.5083C21.5694 27.5083 21.1181 27.6958 20.7708 28.0708C20.4236 28.4458 20.25 28.8972 20.25 29.425C20.25 29.9806 20.4236 30.4319 20.7708 30.7792C21.1181 31.1264 21.5694 31.3 22.125 31.3Z",fill:"#D80A1F"})]})}var ws=Object(_.e)(),Ns=Object(_.a)({source:Me,effect:function(e){return Object(f.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0===e.length){t.next=3;break}return t.next=3,$.markAllRead();case 3:case"end":return t.stop()}}),t)})))()}});function ks(e){var t=e.type,a=function(){switch(t){case"StreamStarted":case"StreamContinued":return xs;case"StreamPaused":return ys;case"StreamFinished":return vs;case"StreamIsDue":case"StreamCliffPassed":return gs;default:throw new Error("This should never happen")}}();return Object(et.jsx)(a,{className:_s.a.icon})}Object(_.j)({clock:ws,target:Ns}),Object(_.j)({clock:ws,source:Me,fn:function(e){return e.map((function(e){return e.isRead?e:Object(K.a)(Object(K.a)({},e),{},{isRead:!0})}))},target:Me});function Cs(e){var t=e.children;return Object(et.jsx)("div",{className:_s.a.primaryText,"data-testid":le.notificationPrimaryCaption,children:t})}function Ss(e){var t=e.children;return Object(et.jsx)("div",{className:_s.a.secondaryText,"data-testid":le.notificationSecondaryCaption,children:t})}function As(e){var t=e.notification,a=t.type,n=t.payload,r=Object(d.c)(Ie),s=ms(n),c=ps(n,false),o=c.progress,i=o.full,l=o.streamed,u=o.left,j=c.timeLeft,m=r[n.token_account_id],b=m.meta.symbol,f=m.formatter;switch(a){case"StreamStarted":return Object(et.jsxs)("div",{className:_s.a.notificationBody,children:[Object(et.jsx)(Cs,{children:s===ds?Object(et.jsxs)(et.Fragment,{children:[n.owner_id," ",Object(et.jsx)("strong",{children:"started"})," a stream for you to receive."]}):Object(et.jsxs)(et.Fragment,{children:["You\u2019ve successfully ",Object(et.jsx)("strong",{children:"started"})," a stream to ",n.receiver_id,"."]})}),Object(et.jsxs)(Ss,{children:["Total streaming amount: ",Object(et.jsxs)("strong",{children:[f.amount(i),"\xa0",b]})]}),Object(et.jsxs)(Ss,{children:["Stream duration: ",Object(et.jsx)("strong",{children:j})]})]});case"StreamPaused":return Object(et.jsxs)("div",{className:_s.a.notificationBody,children:[Object(et.jsxs)(Cs,{children:["The stream ",s===ds?"from ".concat(n.owner_id):"to ".concat(n.receiver_id)," is ",Object(et.jsx)("strong",{children:"paused"}),"."]}),Object(et.jsxs)(Ss,{children:["Already streamed: ",Object(et.jsxs)("strong",{children:[f.amount(l),"\xa0",b]})]}),Object(et.jsxs)(Ss,{children:["Amount left: ",Object(et.jsxs)("strong",{children:[f.amount(u),"\xa0",b]})]})]});case"StreamFinished":return Object(et.jsxs)("div",{className:_s.a.notificationBody,children:[Object(et.jsxs)(Cs,{children:["The stream ",s===ds?"from ".concat(n.owner_id):"to ".concat(n.receiver_id)," has ",Object(et.jsx)("strong",{children:"ended"}),"."]}),Object(et.jsxs)(Ss,{children:["Total amount streamed: ",Object(et.jsxs)("strong",{children:[f.amount(i),"\xa0",b]})]})]});case"StreamIsDue":return Object(et.jsxs)("div",{className:_s.a.notificationBody,children:[Object(et.jsxs)(Cs,{children:["The stream from ",n.owner_id," is ",Object(et.jsx)("strong",{children:"due"}),"."]}),Object(et.jsxs)(Ss,{children:["Available for withdrawal: ",Object(et.jsxs)("strong",{children:[f.amount(u),"\xa0",b]})]})]});case"StreamContinued":return Object(et.jsxs)("div",{className:_s.a.notificationBody,children:[Object(et.jsx)(Cs,{children:s===ds?Object(et.jsxs)(et.Fragment,{children:[n.owner_id," has ",Object(et.jsx)("strong",{children:"continued"})," the stream."]}):Object(et.jsxs)(et.Fragment,{children:["The stream to ",n.receiver_id," was ",Object(et.jsx)("strong",{children:"continued"}),"."]})}),Object(et.jsxs)(Ss,{children:["Amount left: ",Object(et.jsxs)("strong",{children:[f.amount(u),"\xa0",b]})]}),Object(et.jsxs)(Ss,{children:["Time left: ",Object(et.jsx)("strong",{children:j})]})]});case"StreamCliffPassed":return Object(et.jsxs)("div",{className:_s.a.notificationBody,children:[Object(et.jsxs)(Cs,{children:["The stream ",s===ds?"from ".concat(n.owner_id):"to ".concat(n.receiver_id)," has ",Object(et.jsx)("strong",{children:"passed the cliff period"}),"."]}),Object(et.jsxs)(Ss,{children:["Available for withdrawal: ",Object(et.jsxs)("strong",{children:[f.amount(u),"\xa0",b]})]})]});default:throw new Error("This should never happen")}}function Is(){var e,t=Ar("(max-width: 645px)"),a=Object(s.useState)(!1),n=Object(b.a)(a,2),r=n[0],o=n[1],i=Object(d.c)(Me),l=Object(s.useCallback)((function(){o(!1),ws()}),[]),u=null!==(e=i.some((function(e){return!e.isRead})))&&void 0!==e&&e;return Object(et.jsxs)("div",{className:_s.a.root,children:[Object(et.jsx)(Mt,{onChange:o,className:_s.a.dropdownOpener,opened:r,testId:le.openNotificationsButton,children:Object(et.jsx)(Os,{withBadge:u})}),Object(et.jsx)(ua,{opened:r,onClose:l,className:Je()(_s.a.dropdownMenu,t&&_s.a.compact),children:Object(et.jsxs)("div",{className:_s.a.container,children:[Object(et.jsx)("header",{className:_s.a.header,children:"Notifications"}),0===i.length&&Object(et.jsx)("h3",{className:"text-3xl text-center my-12 mx-auto",children:"Your notifications will be displayed here."}),i.map((function(e,t){return Object(et.jsxs)(c.a.Fragment,{children:[0!==t&&Object(et.jsx)("div",{className:_s.a.divider}),(0===t||!Object(is.a)(i[t-1].createdAt,e.createdAt))&&Object(et.jsx)("div",{className:_s.a.date,children:Object(ls.a)(e.createdAt)?"Today":Object(us.a)(e.createdAt)?"Yesterday":Object(xt.a)(e.createdAt,"PP")}),Object(et.jsxs)(j.b,{to:Object(m.f)(Xe.stream.path,{id:e.payload.id}),className:Je()(_s.a.notification,!e.isRead&&_s.a.unread),onClick:l,"data-testid":le.notificationElement,children:[Object(et.jsx)(ks,{type:e.type}),Object(et.jsx)(As,{notification:e}),Object(et.jsx)("div",{className:_s.a.time,children:Object(xt.a)(new Date(e.createdAt),"HH:mm")})]})]},e.id)}))]})})]})}var Ls,Rs,Ts,Es=a(49),Bs=a.n(Es),Ms=[Xe.streams],Ps=function(){var e=Object(d.c)(Te),t=!Ar("(min-width: 1280px)"),a=function(){var e=sn({account:an().data}).data;return e&&(e.inputs.length>0||e.outputs.length>0)}();return Object(et.jsxs)(et.Fragment,{children:[Object(et.jsx)("div",{className:Bs.a.wrapper,children:Object(et.jsxs)(ot,{className:Bs.a.root,children:[Object(et.jsxs)("div",{className:Bs.a.left,children:[Object(et.jsx)(j.b,{to:"/",className:Bs.a.unshrinkable,children:Object(et.jsx)(rt,{className:Bs.a.logo})}),e&&Object(et.jsx)(Br,{pageRoutes:a?[].concat(Ms,[ht.legacyStreams]):Ms})]}),Object(et.jsxs)("div",{className:Bs.a.right,children:[e&&!t&&Object(et.jsx)(qr,{className:Bs.a.marginRight}),e&&Object(et.jsx)(os,{}),e&&!t&&Object(et.jsx)(Is,{}),!t&&Object(et.jsx)(pt,{})]})]})}),e&&t&&Object(et.jsx)("div",{className:Bs.a.secondWrapper,children:Object(et.jsxs)(ot,{className:Bs.a.secondRoot,children:[Object(et.jsx)(qr,{className:Bs.a.marginRight}),Object(et.jsxs)("div",{className:Bs.a.right,children:[Object(et.jsx)(Is,{}),Object(et.jsx)(pt,{})]})]})})]})},Fs=a(259),Ds=a.n(Fs);function Hs(){return Object(et.jsx)("div",{className:Je()("py-4 px-6","absolute w-full pt-8","flex justify-center"),children:Object(et.jsx)(rt,{className:Ds.a.logo})})}function Vs(){return Object(m.i)(Xe.authorize.path)?Object(et.jsx)(Hs,{}):Object(et.jsx)(Ps,{})}function Ws(e){var t=e.children,a=e.allowed,n=e.redirect,r=e.path,s=e.exact,c=void 0!==s&&s;return Object(et.jsx)(m.b,{exact:c,path:r,render:function(){return a?t:n}})}var Us=["title","titleId"];function Zs(){return Zs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Zs.apply(this,arguments)}function qs(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Ks(e,t){var a=e.title,n=e.titleId,r=qs(e,Us);return s.createElement("svg",Zs({width:"auto",height:"auto",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},r),a?s.createElement("title",{id:n},a):null,Ls||(Ls=s.createElement("path",{d:"M8.14141 20.601C7.50192 20.601 7.61064 20.3595 7.39007 19.7506L5.50977 13.5625L19.9838 4.97559",fill:"currentColor"})),Rs||(Rs=s.createElement("path",{d:"M8.14062 20.6012C8.63406 20.6012 8.85199 20.3755 9.12749 20.1078L11.7591 17.5488L8.47649 15.5693",fill:"#8E909C"})),Ts||(Ts=s.createElement("path",{d:"M8.47667 15.5697L16.4308 21.4463C17.3386 21.9471 17.9935 21.6877 18.2197 20.6037L21.4574 5.34624C21.7888 4.01726 20.9508 3.41429 20.0824 3.80854L1.07041 11.1395C-0.227316 11.66 -0.219585 12.3841 0.833894 12.7066L5.71279 14.2295L17.008 7.10352C17.5412 6.78015 18.0307 6.95384 17.629 7.31043",fill:"currentColor"})))}var Ys,zs=s.forwardRef(Ks),Js=(a.p,function(e){var t=e.className;return Object(et.jsx)("div",{className:t,children:Object(et.jsx)(zs,{})})}),Xs=["title","titleId"];function Gs(){return Gs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Gs.apply(this,arguments)}function Qs(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function $s(e,t){var a=e.title,n=e.titleId,r=Qs(e,Xs);return s.createElement("svg",Gs({width:"auto",height:"auto",viewBox:"0 0 24 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},r),a?s.createElement("title",{id:n},a):null,Ys||(Ys=s.createElement("path",{d:"M7.57758 21.9092C16.5744 21.9092 21.4944 13.5154 21.4944 6.2365C21.4944 5.99809 21.4901 5.76075 21.4806 5.52449C22.4356 4.74696 23.2657 3.77667 23.9204 2.67212C23.044 3.11083 22.1009 3.40615 21.1115 3.53932C22.1214 2.85737 22.8966 1.77862 23.2624 0.492616C22.3174 1.12355 21.2708 1.58212 20.1565 1.8297C19.2639 0.759024 17.9932 0.0893555 16.5862 0.0893555C13.885 0.0893555 11.6946 2.55622 11.6946 5.59697C11.6946 6.02922 11.7376 6.44967 11.8215 6.85297C7.75628 6.62261 4.15156 4.4307 1.73908 1.09777C1.31902 1.91181 1.0768 2.8574 1.0768 3.86636C1.0768 5.77743 1.94032 7.46453 3.25344 8.4515C2.45096 8.42358 1.69712 8.1755 1.03824 7.76257C1.03752 7.78568 1.03752 7.80822 1.03752 7.83292C1.03752 10.5006 2.72352 12.7279 4.9616 13.2326C4.55059 13.3588 4.11816 13.4264 3.67184 13.4264C3.35715 13.4264 3.05056 13.3916 2.75256 13.3271C3.37526 15.5158 5.18096 17.1084 7.32176 17.1529C5.64768 18.6307 3.5388 19.5108 1.2468 19.5108C0.852482 19.5108 0.462934 19.4855 0.0800781 19.4345C2.2448 20.9971 4.8152 21.9089 7.57784 21.9089",fill:"currentColor"})))}var ec,tc=s.forwardRef($s),ac=(a.p,function(e){var t=e.className;return Object(et.jsx)("div",{className:t,children:Object(et.jsx)(tc,{})})}),nc=["title","titleId"];function rc(){return rc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},rc.apply(this,arguments)}function sc(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function cc(e,t){var a=e.title,n=e.titleId,r=sc(e,nc);return s.createElement("svg",rc({width:"auto",height:"auto",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},r),a?s.createElement("title",{id:n},a):null,ec||(ec=s.createElement("path",{d:"M12.0001 0C5.3735 0 0 5.50144 0 12.2881C0 17.7173 3.43839 22.3234 8.2064 23.9482C8.80613 24.062 9.0263 23.6817 9.0263 23.3571C9.0263 23.0641 9.01518 22.0961 9.01001 21.0693C5.67157 21.8127 4.96712 19.6195 4.96712 19.6195C4.42125 18.1992 3.63473 17.8215 3.63473 17.8215C2.54596 17.0588 3.7168 17.0745 3.7168 17.0745C4.92181 17.1612 5.55632 18.3408 5.55632 18.3408C6.6266 20.2194 8.36359 19.6763 9.04836 19.3623C9.15607 18.5681 9.46706 18.026 9.81024 17.7191C7.14486 17.4084 4.34295 16.3548 4.34295 11.6463C4.34295 10.3047 4.81172 9.20855 5.57937 8.34801C5.45477 8.0385 5.04402 6.78869 5.69562 5.0961C5.69562 5.0961 6.70331 4.76584 8.9965 6.35568C9.95372 6.08341 10.9803 5.94687 12.0001 5.94219C13.0199 5.94687 14.0473 6.08341 15.0063 6.35568C17.2967 4.76584 18.303 5.0961 18.303 5.0961C18.9562 6.78869 18.5452 8.0385 18.4206 8.34801C19.1901 9.20855 19.6557 10.3047 19.6557 11.6463C19.6557 16.366 16.8484 17.4052 14.1762 17.7094C14.6067 18.0907 14.9902 18.8385 14.9902 19.985C14.9902 21.6291 14.9763 22.9524 14.9763 23.3571C14.9763 23.6841 15.1923 24.0673 15.8006 23.9466C20.566 22.32 24 17.7155 24 12.2881C24 5.50144 18.6273 0 12.0001 0ZM4.49443 17.5047C4.468 17.5657 4.3742 17.584 4.28876 17.5421C4.20172 17.502 4.15283 17.4188 4.18105 17.3575C4.20688 17.2947 4.30088 17.2772 4.38772 17.3193C4.47495 17.3594 4.52463 17.4434 4.49443 17.5047ZM5.0847 18.044C5.02747 18.0983 4.91559 18.0731 4.83968 17.9872C4.76119 17.9016 4.74648 17.787 4.80451 17.7318C4.86353 17.6775 4.97203 17.7029 5.05072 17.7886C5.12921 17.8753 5.14451 17.9891 5.0847 18.044ZM5.48965 18.734C5.41612 18.7863 5.2959 18.7373 5.22158 18.628C5.14805 18.5188 5.14805 18.3877 5.22317 18.3352C5.29769 18.2827 5.41612 18.3299 5.49144 18.4384C5.56476 18.5495 5.56476 18.6805 5.48965 18.734ZM6.1745 19.5332C6.10873 19.6075 5.96863 19.5876 5.86609 19.4862C5.76117 19.3871 5.73196 19.2465 5.79793 19.1722C5.8645 19.0978 6.00539 19.1187 6.10873 19.2193C6.21285 19.3181 6.24465 19.4598 6.1745 19.5332ZM7.05961 19.803C7.0306 19.8993 6.89567 19.943 6.75975 19.9021C6.62402 19.86 6.5352 19.7473 6.56262 19.65C6.59084 19.5531 6.72636 19.5076 6.86328 19.5513C6.9988 19.5932 7.08783 19.7052 7.05961 19.803ZM8.0669 19.9175C8.07028 20.0188 7.95502 20.1028 7.81235 20.1047C7.66887 20.1079 7.55282 20.0259 7.55123 19.9262C7.55123 19.8239 7.6639 19.7406 7.80738 19.7382C7.95006 19.7353 8.0669 19.8167 8.0669 19.9175ZM9.05645 19.8786C9.07354 19.9775 8.97438 20.0791 8.8327 20.1061C8.6934 20.1322 8.56443 20.0711 8.54674 19.973C8.52945 19.8717 8.6304 19.7702 8.7695 19.7439C8.91139 19.7187 9.03837 19.7781 9.05645 19.8786Z",fill:"currentColor"})))}var oc=s.forwardRef(cc),ic=(a.p,function(e){var t=e.className;return Object(et.jsx)("div",{className:t,children:Object(et.jsx)(oc,{})})}),lc=a.p+"static/media/Privacy_policy.d5afb133.pdf",uc=a(54),dc=a.n(uc),jc=function(){return Object(et.jsx)("footer",{className:dc.a.root,children:Object(et.jsxs)(ot,{className:dc.a.layout,children:[Object(et.jsxs)("section",{className:dc.a.section,children:[Object(et.jsx)(rt,{className:dc.a.logo,type:$e.CURRENT_COLOR}),Object(et.jsxs)("div",{className:dc.a.links,children:[Object(et.jsx)("a",{href:"https://www.roke.to/#page-top",target:"_blank",rel:"noreferrer",children:"About"}),Object(et.jsx)("a",{href:"https://www.roke.to/#how-work",target:"_blank",rel:"noreferrer",children:"Features"}),Object(et.jsx)("a",{href:"https://www.roke.to/#used-technologies",target:"_blank",rel:"noreferrer",children:"Docs"}),Object(et.jsx)("a",{href:"https://www.roke.to/#team",target:"_blank",rel:"noreferrer",children:"Team"}),Object(et.jsx)("a",{href:"https://www.roke.to/#blog",target:"_blank",rel:"noreferrer",children:"Blog"}),Object(et.jsx)("a",{href:"https://kikimora-labs.notion.site/Jobs-68acb030fcac42a18ae7c62a56779d5b",target:"_blank",rel:"noreferrer",children:"Jobs"})]})]}),Object(et.jsxs)("section",{className:dc.a.section,children:[Object(et.jsxs)("div",{className:dc.a.legal,children:[Object(et.jsx)("a",{href:lc,target:"_blank",rel:"noreferrer",children:"Privacy Policy"}),Object(et.jsx)("a",{href:"https://uploads-ssl.webflow.com/6136222580031d054842f5d6/617993de0d09ef005611beac_Cookie_Policy_of_Roketo.pdf",target:"_blank",rel:"noreferrer",children:"Cookie Policy"})]}),Object(et.jsxs)("div",{className:dc.a.socials,children:[Object(et.jsx)("a",{href:"https://twitter.com/roketostream",target:"_blank",rel:"noreferrer",children:Object(et.jsx)(ac,{})}),Object(et.jsx)("a",{href:"https://t.me/roketochat",target:"_blank",rel:"noreferrer",children:Object(et.jsx)(Js,{})}),Object(et.jsx)("a",{href:"https://github.com/roke-to",target:"_blank",rel:"noreferrer",children:Object(et.jsx)(ic,{})})]})]}),Object(et.jsxs)("section",{className:dc.a.jurInfo,children:["ROKETO LABS LTD",Object(et.jsx)("br",{}),"Registered address: Intershore Chambers, Road Town, Tortola, British Virgin Islands",Object(et.jsx)("br",{}),"Registration number: 2089289",Object(et.jsx)("br",{}),"Build info: ",v.COMMIT_HASH," ",v.BUILD_TIME]})]})})},mc=a(82),bc=a.n(mc),fc=function(e){var t=e.title,a=e.children,n=e.isOpen,r=void 0===n||n,s=e.onCloseModal;return Object(et.jsx)(u.a,{isOpen:r,onRequestClose:s,className:bc.a.content,overlayClassName:bc.a.overlay,bodyOpenClassName:bc.a.bodyOverflowHidden,children:Object(et.jsxs)("div",{children:[Object(et.jsx)("span",{className:bc.a.close,onClick:s}),Object(et.jsx)("h2",{className:bc.a.title,children:t}),Object(et.jsx)("div",{className:bc.a.contentContainer,children:a})]})})},pc=a(50),hc=a.n(pc),_c=a(61),Oc=Object(_.e)(),vc=Object(_.a)({source:Ae,effect:function(e,t){return Object(f.a)(h.a.mark((function a(){return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,null===e||void 0===e?void 0:e.roketo.api.withdraw({streamIds:t});case 2:case"end":return a.stop()}}),a)})))()}}),xc=Object(_.g)({tokenData:[],streamIds:[]}),yc=xc.map((function(e){return e.tokenData}));function gc(){var e=Object(d.d)({store:Re,keys:[],fn:function(e){return e.streamsLoaded}}),t=Object(d.c)(yc);return Object(et.jsx)(pn,{placement:"bottom",align:{offset:[0,20]},overlay:Object(et.jsxs)("div",{className:hc.a.root,children:[Object(et.jsx)("p",{className:hc.a.description,children:"Move all received tokens to your wallet."}),Object(et.jsxs)("div",{className:hc.a.preparedTokensWrapper,"data-testid":le.withdrawTooltip,children:[!e&&Object(et.jsx)("p",{className:hc.a.description,"data-testid":le.withdrawLoadingCaption,children:"Loading..."}),0!==t.length&&t.map((function(e){return Object(et.jsxs)("div",{className:hc.a.preparedToken,children:[Object(et.jsx)(Xt,{tokenAccountId:e.tokenAccountId}),Object(et.jsxs)("div",{className:hc.a.info,children:[Object(et.jsx)("span",{className:hc.a.amount,children:e.amount}),Object(et.jsx)("span",{className:hc.a.symbol,children:e.symbol})]})]},e.tokenAccountId)})),e&&0===t.length&&Object(et.jsx)("p",{className:hc.a.description,children:"You have nothing to withdraw"})]})]}),children:Object(et.jsx)(jt,{onClick:function(){return Oc()},testId:le.withdrawAllButton,displayMode:0!==t.length?at.action:at.secondary,className:0!==t.length?void 0:hc.a.notAllowed,children:"Withdraw tokens"})})}Object(_.j)({clock:Oc,source:xc.map((function(e){return e.streamIds})),filter:function(e){return e.length>0},target:vc}),Object(_.j)({source:{tokens:Ie,streams:Re},target:xc,fn:function(e){var t,a=e.tokens,n=e.streams.inputs.filter(P),r={},s=[],c=Object(_c.a)(n);try{for(c.s();!(t=c.n()).done;){var o=t.value,i=o.token_account_id,l=H(o);"0"!==l.toFixed()&&s.push(o.id),r[i]?r[i].available=r[i].available.plus(l):r[i]={available:l,tokenAccountId:i}}}catch(u){c.e(u)}finally{c.f()}return{tokenData:Object.values(r).map((function(e){var t=a[e.tokenAccountId];return{tokenAccountId:e.tokenAccountId,amount:t.formatter.amount(e.available.toFixed()),symbol:t.meta.symbol}})),streamIds:s}}});var wc,Nc,kc=a(153),Cc=a.n(kc),Sc=function(e){var t=e.directions,a=e.activeDirection,n=e.onDirectionClick,r=e.isInactive;return Object(et.jsx)("div",{className:Cc.a.root,children:t.map((function(e){return Object(et.jsx)(jt,{className:Je()(Cc.a.sort,Object(ee.a)({},Cc.a.active,e===a)),onClick:function(){return n(e)},disabled:r,children:e},e)}))})};function Ac(e){var t=e.options,a=Object(s.useMemo)((function(){return Object.keys(t)}),[t]),n=Object(s.useState)(a[0]),r=Object(b.a)(n,2),c=r[0],o=r[1];return Object(s.useMemo)((function(){var e=t[c];return{option:c,selectOption:o,options:t,optionsArray:a,currentFilterFunction:e}}),[t,c,a])}var Ic="All",Lc="Incoming",Rc="Outgoing",Tc=(wc={ALL:"All"},Object(ee.a)(wc,T,"Initialized"),Object(ee.a)(wc,E,"Active"),Object(ee.a)(wc,B,"Paused"),wc),Ec=(Nc={},Object(ee.a)(Nc,Tc.ALL,(function(){return!0})),Object(ee.a)(Nc,Tc[T],(function(e){return e.status===T})),Object(ee.a)(Nc,Tc[E],(function(e){return e.status===E})),Object(ee.a)(Nc,Tc[B],(function(e){return e.status===B})),Nc);function Bc(e){var t=Object(d.d)({store:Ee,keys:[],fn:function(e){var t;return t={},Object(ee.a)(t,Ic,(function(){return!0})),Object(ee.a)(t,Lc,(function(t){return e===t.receiver_id})),Object(ee.a)(t,Rc,(function(t){return e===t.owner_id})),t}}),a=Ac({options:Ec}),n=Ac({options:t}),r=function(e){var t=e.items,a=e.filters,n=Object(s.useState)(void 0),r=Object(b.a)(n,2),c=r[0],o=r[1],i=Object(s.useState)([]),l=Object(b.a)(i,2),u=l[0],d=l[1];return Object(s.useEffect)((function(){var e=t,n=[];a.forEach((function(t){var a={};Object.keys(t.options).forEach((function(n){var r;a[n]=null===(r=e)||void 0===r?void 0:r.filter(t.options[n])}));var r={};Object.keys(a).forEach((function(e){r[e]=(a[e]||[]).length})),n.push(r),e=a[t.option]})),d(n),o(e)}),[t,a]),{filterCounts:u,filteredItems:c}}({items:e,filters:Object(s.useMemo)((function(){return[n,a]}),[n,a])});return{statusFilter:a,directionFilter:n,result:r}}var Mc=a(154),Pc=a.n(Mc);function Fc(e,t,a){return Number(t[a])-Number(e[a])}var Dc={bigBalanceFirst:{label:"With high amount",order:Ln.desc,fn:function(e,t){return Fc(e,t,"balance")}},highSpeedFirst:{label:"With high speed",order:Ln.desc,fn:function(e,t){return Fc(e,t,"tokens_per_sec")}},highSpeedLast:{label:"With low speed",order:Ln.asc,fn:function(e,t){return-1*Fc(e,t,"tokens_per_sec")}},mostRecent:{label:"Most recent",order:Ln.desc,fn:function(e,t){return Fc(e,t,"timestamp_created")}}};function Hc(e){var t=e.items,a=e.onFilterDone,n=e.className,r=Bc(t),c=r.result.filteredItems,o=Object(s.useState)(Dc.mostRecent),i=Object(b.a)(o,2),l=i[0],u=i[1],d=Object.values(Dc),j=!t||0===t.length;return Object(s.useEffect)((function(){if(c){var e=Object(Xa.a)(c);e.sort(l.fn),a(e)}else a(c)}),[c,a,l.fn]),Object(et.jsxs)("div",{className:Je()(Pc.a.root,n),children:[Object(et.jsx)(Sc,{directions:r.directionFilter.optionsArray,activeDirection:r.directionFilter.option,onDirectionClick:r.directionFilter.selectOption,isInactive:j}),Object(et.jsxs)("div",{className:Pc.a.filtersWrapper,children:[Object(et.jsx)(Vn,{options:r.statusFilter.optionsArray,label:"Status:",active:r.statusFilter.option,onChange:r.statusFilter.selectOption,isDisabled:j,renderOption:function(e){var t=r.result.filterCounts[1];return Object(et.jsx)(Hn,{option:e,count:t?t[e]:""},e)}}),Object(et.jsx)(Vn,{options:d,label:"Show first:",active:l,onChange:u,isDisabled:j,renderOption:function(e){return Object(et.jsx)("span",{children:e.label})},renderActive:function(e){return Object(et.jsxs)("div",{className:Pc.a.sortWithOrder,children:[e.order&&Object(et.jsx)(En,{type:e.order}),Object(et.jsx)("span",{children:e.label})]})}})]})]})}var Vc=a(56),Wc=function(e){var t=e.width,a=void 0===t?20:t,n=e.height,r=void 0===n?20:n,s=e.className;return Object(et.jsx)("div",{className:s,children:Object(et.jsx)("svg",{width:a,height:r,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(et.jsx)("path",{d:"M10 0C4.48 0 0 4.48 0 10C0 15.52 4.48 20 10 20C15.52 20 20 15.52 20 10C20 4.48 15.52 0 10 0ZM11 15H9V13H11V15ZM11 11H9V5H11V11Z",fill:"#D80A1F"})})})},Uc=["placeholder","description","isRequired","className","field","form","label"],Zc=function(e){var t=e.placeholder,a=e.description,n=e.isRequired,r=e.className,s=e.field,c=e.form,o=e.label,i=Object(it.a)(e,Uc),l=c.errors[s.name];return Object(et.jsx)($r,{isRequired:n,className:r,description:a,label:o,error:l,children:Object(et.jsx)(Jr,Object(K.a)(Object(K.a)({required:n,hasError:Boolean(l),placeholder:t},s),i))})},qc=a(101),Kc=a.n(qc),Yc=["description","className","hasError","disabled","value"],zc=function(e){var t=e.description,a=e.className,n=e.hasError,r=void 0!==n&&n,s=e.disabled,c=void 0!==s&&s,o=e.value,i=Object(it.a)(e,Yc);return Object(et.jsxs)("label",{className:Je()(Kc.a.root,c&&Kc.a.disabled,a),children:[Object(et.jsx)("input",Object(K.a)(Object(K.a)({type:"checkbox",className:Je()(Kc.a.checkbox,Object(ee.a)({},Kc.a.error,r)),disabled:c},i),{},{checked:!c&&Boolean(o)})),t&&Object(et.jsx)("div",{className:Kc.a.description,children:t})]})},Jc=["description","isRequired","className","label","field","form"],Xc=function(e){var t=e.description,a=e.isRequired,n=e.className,r=e.label,s=e.field,c=e.form,o=Object(it.a)(e,Jc),i=c.errors[s.name];return Object(et.jsx)($r,{isRequired:a,className:n,label:r,error:i,children:Object(et.jsx)(zc,Object(K.a)(Object(K.a)({description:t,required:a,hasError:Boolean(i)},s),o))})},Gc=a(194),Qc=a.n(Gc),$c=["className","hasError"],eo=function(e){var t=e.className,a=e.hasError,n=void 0!==a&&a,r=Object(it.a)(e,$c);return Object(et.jsx)("textarea",Object(K.a)({className:Je()(Qc.a.textarea,Object(ee.a)({},Qc.a.error,n),t)},r))},to=a(195),ao=a.n(to),no=["placeholder","description","isRequired","className","maxLength","field","label","form"],ro=function(e){var t,a=e.placeholder,n=e.description,r=e.isRequired,s=e.className,c=e.maxLength,o=e.field,i=e.label,l=e.form,u=Object(it.a)(e,no),d=l.errors[o.name];return Object(et.jsxs)($r,{isRequired:r,className:Je()(ao.a.formfield,s),description:n,label:i,error:d,children:[Object(et.jsx)(eo,Object(K.a)(Object(K.a)({required:r,hasError:Boolean(d),placeholder:a,maxLength:c},o),u)),c&&Object(et.jsx)("span",{className:ao.a.textLimitCounter,children:"".concat((null===o||void 0===o||null===(t=o.value)||void 0===t?void 0:t.length)||0,"/").concat(c)})]})};var so=/^[0-9]+$/,co=a(65),oo=a.n(co),io=function(e){var t=e.className,a=e.value,n=e.onChange,r=e.label,s=e.testId;return Object(et.jsxs)("div",{className:Je()(oo.a.speedInput,t),children:[Object(et.jsx)(Jr,{placeholder:"0",value:a,onChange:n,className:oo.a.input,"data-testid":s}),Object(et.jsx)("label",{className:oo.a.label,children:r})]})},lo=function(e){var t=e.form,a=e.field,n=e.label,r=e.deposit,c=e.className,o=e.isRequired,i=e.description,l=e.onSpeedChange,u=e.tokenAccountId,j=Object(d.c)(Ie)[u],m=j.formatter,f=t.errors[a.name],p=a.value,h=Object(s.useState)(0),_=Object(b.a)(h,2),O=_[0],v=_[1],x=Object(s.useState)(0),y=Object(b.a)(x,2),g=y[0],w=y[1],N=Object(s.useState)(0),k=Object(b.a)(N,2),C=k[0],S=k[1],I=Object(s.useState)(0),L=Object(b.a)(I,2),R=L[0],T=L[1],E=m.toYocto(r),B=function(e,t,a,n){return(Object(Pt.a)(Object(Ft.a)(new Date,e),new Date)+t)*re+60*n+a*ne}(O,g,R,C),M=function(e,t){var a=new A.a(e).dividedToIntegerBy(t).toFixed();return"Infinity"!==a&&"NaN"!==a?a:"0"}(E,B),P=function(e){var t=Object(s.useRef)(e);return Object(s.useEffect)((function(){t.current=e}),[e]),t.current}(M);Object(s.useEffect)((function(){P!==M&&l(M)}),[M,l,P]);var F=function(e,t){return function(a){var n,r=a.target.value||"0";n=r,so.test(n)&&Number(r)<=t&&e(Number(r))}},D=Dt(p,j),H=Object(et.jsxs)("div",{className:oo.a.formLabel,children:[n,Object(et.jsx)("span",{className:Je()(oo.a.speed,oo.a.label),children:"Streaming speed: ".concat(D)})]});return Object(et.jsx)($r,{isRequired:o,className:Je()(oo.a.formField,c),description:i,label:H,error:f,children:Object(et.jsxs)("div",{className:oo.a.wrapper,children:[Object(et.jsx)(io,{value:O,onChange:F(v,12),label:"Months, max: 12",testId:le.createStreamMonthsInput}),Object(et.jsx)(io,{value:g,onChange:F(w,31),label:"Days, max: 31",testId:le.createStreamDaysInput}),Object(et.jsx)(io,{value:R,onChange:F(T,24),label:"Hours, max: 24",testId:le.createStreamHoursInput}),Object(et.jsx)(io,{value:C,onChange:F(S,60),label:"Minutes, max: 60",testId:le.createStreamMinutesInput})]})})},uo=a(102),jo=a.n(uo),mo=function(e){var t=e.token,a=e.onClick,n=e.className,r=Je()(jo.a.tokenOption,n),s=Object(et.jsxs)(et.Fragment,{children:[Object(et.jsx)(Xt,{tokenAccountId:t.roketoMeta.account_id}),Object(et.jsx)("span",{children:"".concat(t.meta.name,", ").concat(t.meta.symbol)})]});return a?Object(et.jsx)("button",{type:"button",className:r,onClick:a,children:s}):Object(et.jsx)("div",{className:r,children:s})},bo=function(e){var t=e.form,a=e.label,n=e.field,r=e.className,c=e.isRequired,o=e.description,i=e.onTokenChoose,l=e.activeTokenAccountId,u=Object(d.c)(Ie),j=Object(s.useState)(!1),m=Object(b.a)(j,2),f=m[0],p=m[1],h=Object.values(u),_=u[l],O=t.errors[n.name];return Object(et.jsx)($r,{isRequired:c,className:r,description:o,label:a,error:O,children:Object(et.jsxs)("div",{className:jo.a.dropdownWrapper,children:[Object(et.jsx)(Mt,{onChange:p,className:jo.a.dropdownOpener,opened:f,children:Object(et.jsx)(mo,{token:_})}),Object(et.jsx)(ua,{opened:f,onClose:function(){return p(!1)},className:jo.a.dropdownMenu,children:h.map((function(e){return Object(et.jsx)(mo,{token:e,onClick:function(){return function(e){p(!1),i(e.roketoMeta.account_id)}(e)},className:jo.a.withHover},e.meta.name)}))})]})})},fo=a(262),po=a.n(fo),ho=a(263),_o=a.n(ho),Oo=function(e){var t=e.form,a=e.label,n=e.field,r=e.className,s=e.onCliffDateTimeChange,c=t.errors[n.name];return Object(et.jsx)($r,{className:r,label:a,error:c,children:Object(et.jsx)(po.a,{className:_o.a.maxWidth,amPmAriaLabel:"Select AM/PM",calendarAriaLabel:"Toggle calendar",clearAriaLabel:"Clear value",dayAriaLabel:"Day",hourAriaLabel:"Hour",maxDetail:"second",minuteAriaLabel:"Minute",monthAriaLabel:"Month",nativeInputAriaLabel:"Date and time",onChange:s,secondAriaLabel:"Second",value:t.values[n.name],yearAriaLabel:"Year"})})},vo={receiver:"",streamName:"",token:v.WNEAR_ID,speed:0,deposit:0,delayed:!1,comment:"",isLocked:!1,cliffDateTime:null},xo=a(67),yo=Object(_.a)({source:Ee,effect:function(e,t){return!!e&&t!==e}}),go=Object(_.a)({source:Se,effect:function(e,t){return Object(f.a)(h.a.mark((function a(){var n;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e&&t){a.next=2;break}return a.abrupt("return",!1);case 2:return a.prev=2,a.next=5,e.near.connection.provider.query({request_type:"view_account",finality:"final",account_id:t});case 5:return n=a.sent,a.abrupt("return",Boolean(n));case 9:return a.prev=9,a.t0=a.catch(2),a.abrupt("return",!1);case 12:case"end":return a.stop()}}),a,null,[[2,9]])})))()}}),wo=xo.c().shape({receiver:xo.d().required("Receiver is required").test("receiver-not-equal-owner","Receiver can not be the same as the owner",yo).test("receiver-is-valida-address","Address does not exists",go),streamName:xo.d().max(100,"Stream name must be less or equal 100 symbols"),token:xo.d().required(),deposit:xo.b().required("Deposit is required").moreThan(0,"Deposit should be more than 0"),speed:xo.b().required("Stream duration is required").moreThan(0,"Choose stream duration"),autoStart:xo.a(),comment:xo.d().max(80)}),No=a(38),ko=a.n(No),Co=function(e){var t=e.children,a=e.className;return Object(et.jsx)("div",{className:Je()(ko.a.row,a),children:t})},So=Object(et.jsxs)("div",{children:["Delayed start",Object(et.jsxs)("div",{className:ko.a.subDescription,children:["Select this if you want the stream not to start immediately,",Object(et.jsx)("br",{}),"you'll need to start it manually from stream page",Object(et.jsx)("br",{}),"(streams with cliff cannot be delayed)"]})]}),Ao=Object(et.jsxs)("div",{children:["Uneditable stream",Object(et.jsxs)("div",{className:ko.a.subDescription,children:["If you select this field, you will not be able",Object(et.jsx)("br",{}),"to carry out any actions on the stream"]})]}),Io=function(e){var t=e.onFormCancel,a=e.onFormSubmit,n=Object(d.c)(Ie),r=Object(s.useState)(null),c=Object(b.a)(r,2),o=c[0],i=c[1];return Object(et.jsxs)("div",{className:ko.a.root,children:[Object(et.jsx)("h2",{className:ko.a.title,children:"Create Stream"}),Object(et.jsx)(Vc.b,{initialValues:vo,onSubmit:function(e){a(e).catch((function(e){return i(e)}))},validateOnBlur:!0,validationSchema:wo,validateOnChange:!1,validateOnMount:!1,children:function(e){var a=e.values,r=e.handleSubmit,s=e.setFieldValue,c=e.setFieldTouched,i=e.validateField,l=a.token,u=n[l],d=u.meta,j=u.formatter,m=u.roketoMeta;return Object(et.jsxs)("form",{onSubmit:r,className:ko.a.form,children:[Object(et.jsxs)(Co,{children:[Object(et.jsx)(Vc.a,{isRequired:!0,name:"receiver",label:"Receiver:",component:Zc,placeholder:"receiver.".concat(v.ACCOUNT_SUFFIX),className:ko.a.rowItem,"data-testid":le.createStreamReceiverInput}),Object(et.jsx)(Vc.a,{isRequired:!0,name:"token",label:"Token",activeTokenAccountId:a.token,onTokenChoose:function(){var e=Object(f.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s("token",t,!1);case 2:return e.next=4,c("token",!0,!1);case 4:i("token");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),component:bo,className:ko.a.rowItem})]}),Object(et.jsxs)(Co,{className:ko.a.amount,children:[Object(et.jsx)(Vc.a,{isRequired:!0,name:"deposit",label:"Amount to stream:",component:Zc,placeholder:"Amount to stream",className:ko.a.rowItem,description:Object(et.jsx)(Hr,{tokenAccountId:l,mode:Ir.CRYPTO}),"data-testid":le.createStreamAmountInput}),Object(et.jsx)(Vc.a,{name:"cliffDateTime",label:"Cliff period",component:Oo,onCliffDateTimeChange:function(){var e=Object(f.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s("cliffDateTime",t,!1);case 2:return e.next=4,c("cliffDateTime",!0,!1);case 4:i("cliffDateTime");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),className:ko.a.rowItem})]}),Object(et.jsx)(Co,{children:Object(et.jsx)(Vc.a,{tokenAccountId:l,isRequired:!0,name:"speed",label:"Stream duration:",deposit:a.deposit,component:lo,onSpeedChange:function(){var e=Object(f.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s("speed",t,!1);case 2:return e.next=4,c("speed",!0,!1);case 4:i("speed");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),className:ko.a.rowItem})}),Object(et.jsx)(Co,{children:Object(et.jsx)(Vc.a,{maxLength:80,name:"comment",label:"Comment:",placeholder:"Enter comment",component:ro,className:ko.a.rowItem,"data-testid":le.createStreamCommentInput})}),Object(et.jsxs)(Co,{className:ko.a.checkboxes,children:[Object(et.jsx)(Vc.a,{name:"delayed",disabled:Boolean(a.cliffDateTime),description:So,type:"checkbox",component:Xc,"data-testid":le.createStreamDelayedCheckbox}),Object(et.jsx)(Vc.a,{name:"isLocked",description:Ao,type:"checkbox",component:Xc,"data-testid":le.createStreamLockedCheckbox})]}),Object(et.jsx)(Co,{children:d&&Object(et.jsx)("div",{className:ko.a.feeDisclaimer,children:"You will be charged \n                      ".concat(j.amount(m.commission_on_create)," \n                      ").concat(d.symbol," fee for the stream")})}),Object(et.jsxs)("div",{className:ko.a.actionButtonsWrapper,children:[o&&Object(et.jsxs)("div",{className:ko.a.submitError,children:[Object(et.jsx)(Wc,{}),Object(et.jsx)("span",{children:o.message})]}),Object(et.jsx)(jt,{displayMode:at.simple,onClick:t,testId:le.createStreamCancelButton,children:"Cancel"}),Object(et.jsx)(jt,{type:tt.submit,displayMode:at.action,testId:le.createStreamSubmitButton,children:"Create"})]})]})}})]})},Lo=a(155),Ro=a.n(Lo),To=function(e){var t=e.title,a=e.total,n=e.streamed,r=void 0===n?0:n,s=e.withdrawn,c=void 0===s?0:s,o=e.withProgressBar,i=void 0===o||o,l=e.testId,u=r?"$ ".concat(r," of ").concat(a):"$ ".concat(a);return Object(et.jsxs)("div",{className:Ro.a.card,children:[Object(et.jsx)("h3",{className:Ro.a.title,children:t}),Object(et.jsx)("span",{className:Ro.a.finance,"data-testid":l,children:u}),i&&Object(et.jsx)(Zt,{total:String(a),streamed:String(r),withdrawn:String(c)})]})},Eo=new A.a(0),Bo=function(e,t,a){var n=e.reduce((function(e,n){var r=n.token_account_id,s=t[r].formatter,c=H(n).toFixed(),o=s.toHumanReadableValue(c,3),i=a.getPriceInUsd(r,o);return e.plus(i)}),Eo);return Number(n.toFixed(0))},Mo=function(e,t,a){var n={total:Eo,streamed:Eo,withdrawn:Eo},r=e.reduce((function(e,n){var r=n.token_account_id,s=t[r].formatter,c=ps(n).progress,o=s.toHumanReadableValue(c.streamed,3),i=a.getPriceInUsd(r,o),l=s.toHumanReadableValue(c.full,3),u=a.getPriceInUsd(r,l),d=s.toHumanReadableValue(c.withdrawn,3),j=a.getPriceInUsd(r,d);return{total:e.total.plus(u),streamed:e.streamed.plus(i),withdrawn:e.withdrawn.plus(j)}}),n);return{total:Number(r.total.toFixed(0)),streamed:Number(r.streamed.toFixed(0)),withdrawn:Number(r.withdrawn.toFixed(0))}},Po=Object(_.g)({outcomeAmountInfo:{total:0,streamed:0,withdrawn:0},incomeAmountInfo:{total:0,streamed:0,withdrawn:0},availableForWithdrawal:0});Object(_.j)({source:{tokens:Ie,streams:Re,priceOracle:Le},fn:function(e){var t=e.tokens,a=e.streams,n=a.inputs,r=a.outputs,s=e.priceOracle,c=n.filter(P),o=r.filter(P);return{outcomeAmountInfo:Mo(o,t,s),incomeAmountInfo:Mo(c,t,s),availableForWithdrawal:Bo(c,t,s)}},target:Po});var Fo=a(267),Do=a.n(Fo),Ho=function(e){var t=e.className,a=Object(d.c)(Po),n=a.outcomeAmountInfo,r=a.incomeAmountInfo,s=a.availableForWithdrawal;return Object(et.jsxs)("section",{className:Je()(Do.a.root,t),children:[Object(et.jsx)(To,{title:"Sending",total:n.total,streamed:n.streamed,withdrawn:n.withdrawn}),Object(et.jsx)(To,{title:"Receiving",total:r.total,streamed:r.streamed,withdrawn:r.withdrawn}),Object(et.jsx)(To,{title:"Available for withdrawal",total:s,withProgressBar:!1,testId:le.availableForWithdrawalCaption})]})};function Vo(e,t){var a=Object(s.useReducer)((function(e){return!e}),!1),n=Object(b.a)(a,2)[1];Object(s.useEffect)((function(){if(t){var a=setInterval(n,e);return function(){return clearInterval(a)}}}),[t,e])}var Wo=a(156),Uo=a.n(Wo);function Zo(e){var t=e.isOrange,a=e.children,n=e.className;return Object(et.jsx)("span",{className:Je()(Uo.a.badge,t?Uo.a.orange:Uo.a.blue,n),children:a})}var qo,Ko=a(198),Yo=a.n(Ko),zo=function(e){var t=e.name,a=e.isOutgoing,n=e.isLocked;return Object(et.jsxs)("div",{className:Yo.a.flexCenter,children:[Object(et.jsx)("span",{className:Yo.a.name,children:t}),a&&Object(et.jsx)(Zo,{children:"Sending"}),n&&Object(et.jsx)(Zo,{isOrange:!0,children:"Locked"})]})},Jo=a(29),Xo=a.n(Jo),Go={points:["tl","bc"],offset:[-24,10]},Qo=function(e){var t=e.stream,a=e.className,n=t.token_account_id,r=t.tokens_per_sec,s=ps(t),c=s.progress,o=s.timeLeft,i=s.percentages,l=Dr(n),u=l.formatter,d=l.meta.symbol,j=Number(u.toHumanReadableValue(c.streamed,3)),m=Number(u.toHumanReadableValue(c.withdrawn,3)),b=Number(u.toHumanReadableValue(c.full,3)),f=ue.formatSmartly(j),p=ue.formatSmartly(m),h=Vt(c.streamed,c.full,1),_=Vt(c.withdrawn,c.streamed,1),O="".concat(f," of ").concat(b),v=u.tokensPerMeaningfulPeriod(r),x=v.formattedValue,y=v.unit;return Object(et.jsx)(mn.a,{overlayClassName:Xo.a.overlay,destroyTooltipOnHide:!0,align:Go,placement:"bottom",overlay:Object(et.jsxs)("div",{className:Je()(Xo.a.tooltip,Xo.a.text),children:[Object(et.jsxs)("div",{className:Xo.a.innerStatus,children:[Object(et.jsx)("span",{children:O})," ",Object(et.jsx)("span",{className:Je()(Xo.a.grey,Xo.a.smaller),children:d})]}),Object(et.jsx)(Zt,{total:c.full,streamed:c.streamed,withdrawn:c.withdrawn,cliffPercent:i.cliff}),Object(et.jsxs)("div",{className:Je()(Xo.a.status,Xo.a.speed),children:[x," ",Object(et.jsxs)("span",{className:Je()(Xo.a.grey,Xo.a.smaller),children:[d," / ",y]})]}),o&&Object(et.jsxs)("div",{className:Xo.a.remained,children:[Object(et.jsx)(lr,{className:Xo.a.clock}),o]}),Object(et.jsxs)("div",{className:Je()(Xo.a.progress,Xo.a.streamed),children:["Streamed: ",f," ",Object(et.jsx)("span",{className:Je()(Xo.a.grey,Xo.a.smaller),children:"".concat(h,"%")})]}),Object(et.jsxs)("div",{className:Je()(Xo.a.progress,Xo.a.withdrawn),children:["Withdrawn: ",p," ",Object(et.jsx)("span",{className:Je()(Xo.a.grey,Xo.a.smaller),children:"".concat(_,"%")})]})]}),children:Object(et.jsxs)("div",{className:Je()(Xo.a.root,Xo.a.text,a),children:[Object(et.jsxs)("div",{className:Xo.a.status,children:[Object(et.jsx)("span",{"data-testid":le.streamProgressCaption,children:O})," ",Object(et.jsx)("span",{className:Xo.a.grey,children:d})]}),Object(et.jsx)(Zt,{total:c.full,streamed:c.streamed,withdrawn:c.withdrawn,cliffPercent:i.cliff})]})})},$o=a(157),ei=a.n($o),ti=["stream","small"];function ai(e){var t,a=e.stream,n=e.small,r=void 0!==n&&n,s=Object(it.a)(e,ti),c=Object(d.c)(Ie),o=Object(d.c)(Ae),i=H(a),l=ps(a).percentages,u=l.cliff,j=l.streamed,m=c[a.token_account_id].formatter.amount(i.toFixed()),b=!u||j>u,f=Object(et.jsx)(jt,Object(K.a)(Object(K.a)({disabled:0===Number(m),type:tt.button,displayMode:b?at.primary:at.secondary,className:Je()((t={},Object(ee.a)(t,ei.a.notAllowed,!b),Object(ee.a)(t,ei.a.small,r),t)),onClick:b?function(e){e.preventDefault(),null===o||void 0===o||o.roketo.api.withdraw({streamIds:[a.id]})}:void 0,testId:le.withdrawButton},s),{},{children:"Withdraw"}));return b?f:Object(et.jsx)(pn,{placement:"bottom",align:{offset:[0,20]},overlay:Object(et.jsx)("div",{className:ei.a.hasntPassedCliff,children:"Cliff period isn't passed yet."}),children:f})}function ni(e){var t=c.a.useState(e),a=Object(b.a)(t,2),n=a[0],r=a[1];return{on:n,off:!n,toggle:function(){return r(!n)},turnOff:function(){return r(!1)},turnOn:function(){return r(!0)},setOn:r}}var ri=(qo={},Object(ee.a)(qo,T,{label:"Initialized"}),Object(ee.a)(qo,E,{label:"Active"}),Object(ee.a)(qo,B,{label:"Paused"}),Object(ee.a)(qo,M,{label:"Finished"}),qo);function si(e){var t=e.stream,a=e.className,n="string"===typeof t.status?ri[t.status]:ri[M];return Object(et.jsx)("div",{className:Je()(a),children:n.label})}var ci=Object(_.a)({source:Ae,effect:function(e,t){return Object(f.a)(h.a.mark((function a(){var n,r;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=t.command,r=t.streamId,e){a.next=3;break}return a.abrupt("return",null);case 3:a.t0=n,a.next="start"===a.t0?6:"pause"===a.t0?7:"stop"===a.t0?8:9;break;case 6:return a.abrupt("return",e.roketo.api.startStream({streamId:r}));case 7:return a.abrupt("return",e.roketo.api.pauseStream({streamId:r}));case 8:return a.abrupt("return",e.roketo.api.stopStream({streamId:r}));case 9:return a.abrupt("return",null);case 10:case"end":return a.stop()}}),a)})))()}}),oi=ci.pending,ii=ci.prepend((function(e){return{streamId:e,command:"start"}})),li=ci.prepend((function(e){return{streamId:e,command:"pause"}})),ui=ci.prepend((function(e){return{streamId:e,command:"stop"}}));function di(){return Object(et.jsx)("svg",{width:"8",height:"10",viewBox:"0 0 8 10",fill:"none",children:Object(et.jsx)("path",{d:"M1.66634 2.76016L5.17968 5.00016L1.66634 7.24016V2.76016ZM0.333008 0.333496V9.66683L7.66634 5.00016L0.333008 0.333496Z",fill:"currentColor"})})}function ji(){return Object(et.jsx)("svg",{width:"8",height:"10",viewBox:"0 0 8 10",fill:"none",children:Object(et.jsx)("path",{d:"M0 9.66659H2.66667V0.333252H0V9.66659ZM5.33333 0.333252V9.66659H8V0.333252H5.33333Z",fill:"currentColor"})})}function mi(){return Object(et.jsx)("svg",{width:"8",height:"8",viewBox:"0 0 8 8",fill:"none",children:Object(et.jsx)("path",{d:"M6.66667 1.33333V6.66667H1.33333V1.33333H6.66667ZM8 0H0V8H8V0Z",fill:"currentColor"})})}var bi=a(25),fi=a.n(bi);function pi(e){var t=e.modalControl,a=e.onConfirm,n=e.header,r=e.buttonText,s=e.className,c=e.children;return Object(et.jsxs)(u.a,{isOpen:t.on,onRequestClose:t.turnOff,className:fi.a.modalContent,overlayClassName:fi.a.modalOverlay,children:[Object(et.jsx)("h2",{className:fi.a.modalHeader,children:n}),Object(et.jsx)("p",{children:c}),Object(et.jsxs)("div",{className:fi.a.modalButtons,children:[Object(et.jsx)("button",{type:"button",onClick:t.turnOff,className:Je()(fi.a.modalButton,fi.a.modalSecondary),children:"Cancel"}),Object(et.jsx)("button",{type:"button",onClick:function(){t.turnOff(),a()},className:Je()(fi.a.modalButton,s),children:r})]})]})}function hi(e){var t,a=e.stream,n=e.className,r=ni(!1),c=ni(!1),o=Object(d.c)(oi),i=Object(s.useState)(!1),l=Object(b.a)(i,2),u=l[0],j=l[1],m=Object(d.d)({store:Ee,keys:[a],fn:function(e){var t=e===a.owner_id,n=e===a.receiver_id;return{isOutgoing:t,isIncoming:n,isExternal:!t&&!n}}}),f=m.isOutgoing,p=m.isIncoming,h=m.isExternal;if(D(a)||h)return Object(et.jsx)(si,{className:n,stream:a});var _=u&&!o,O=a.status!==E&&f,v=a.status===E&&!function(e){return Boolean(null===e||void 0===e?void 0:e.cliff)}(a),x=(t={},Object(ee.a)(t,fi.a.active,P(a)),Object(ee.a)(t,fi.a.pause,function(e){return e.status===B}(a)),Object(ee.a)(t,fi.a.stop,D(a)),t);return function(e){var t=e.is_locked,a=e.status;return t&&a!==T}(a)?Object(et.jsx)("div",{className:Je()(fi.a.relative,n),children:Object(et.jsx)("button",{type:"button",className:Je()(fi.a.dropdownOpener,fi.a.notAllowed),children:Object(et.jsx)(si,{stream:a})})}):Object(et.jsxs)("div",{className:Je()(fi.a.relative,n),children:[Object(et.jsx)(pi,{modalControl:r,onConfirm:function(){return li(a.id)},header:"Are you sure?",buttonText:"Pause",className:fi.a.modalWarning,children:"As a stream receiver, you will not be able to resume stream. Only stream owners can resume streams."}),Object(et.jsx)(pi,{modalControl:c,onConfirm:function(){return ui(a.id)},header:"Stop stream",buttonText:"Stop",className:fi.a.modalDanger,children:"This action will completely shut down the stream. After that, it can't be turned on."}),Object(et.jsx)(Mt,{opened:_,onChange:j,className:Je()(fi.a.dropdownOpener,x),testId:le.streamControlsDropdown,children:o?"Loading...":Object(et.jsx)(si,{stream:a,className:fi.a.statusPadded})}),Object(et.jsxs)(ua,{onClose:function(){return j(!1)},opened:_,className:fi.a.controlsMenu,children:[O&&Object(et.jsx)(da,{children:Object(et.jsxs)("button",{type:"button",onClick:function(){return ii(a.id)},className:Je()(fi.a.controlButton,fi.a.start),"data-testid":le.streamStartButton,children:[Object(et.jsx)(di,{}),Object(et.jsx)("span",{children:"Start"})," "]})}),v&&Object(et.jsx)(da,{children:Object(et.jsxs)("button",{type:"button",onClick:function(){j(!1),p?r.turnOn():li(a.id)},className:Je()(fi.a.controlButton,fi.a.pause),"data-testid":le.streamPauseButton,children:[Object(et.jsx)(ji,{}),Object(et.jsx)("span",{children:"Pause"})]})}),(O||v)&&Object(et.jsx)(ja,{}),Object(et.jsx)(da,{children:Object(et.jsxs)("button",{type:"button",onClick:function(){j(!1),c.turnOn()},className:Je()(fi.a.controlButton,fi.a.stop),"data-testid":le.streamStopButton,children:[Object(et.jsx)(mi,{}),Object(et.jsx)("span",{children:"Stop"})]})})]})]})}var _i=a(199),Oi=a.n(_i),vi=function(e){var t=e.onCLick;return Object(et.jsx)("button",{className:Oi.a.linkButton,type:"button",onClick:t,children:Object(et.jsx)(gt,{})})},xi=function(e){var t=e.className,a=e.stream,n=a.id,r=Object(s.useCallback)((function(e){e.preventDefault();var t=Ge(n);vt()(t)}),[n]),c=ms(a)===ds&&P(a);return Object(et.jsxs)("div",{className:Je()(Oi.a.root,t),children:[c&&Object(et.jsx)(ai,{stream:a,small:!0}),Object(et.jsx)(hi,{stream:a}),Object(et.jsx)(vi,{onCLick:r})]})},yi=a(103),gi=a.n(yi),wi=function(e){var t=e.stream,a=e.className,n=t.id,r=t.description,s="";try{s=JSON.parse(r).comment}catch(l){s=r}var c=ms(t)===ds,o=c?t.owner_id:t.receiver_id,i=Object(m.f)(Xe.stream.path,{id:n});return Object(et.jsxs)("div",{className:Je()(gi.a.root,a),children:[Object(et.jsx)(j.b,{to:i,className:gi.a.name,children:Object(et.jsx)(zo,{name:o,isOutgoing:!c,isLocked:t.is_locked})}),Object(et.jsx)(Qo,{stream:t,className:gi.a.withMarginRight}),Object(et.jsx)(j.b,{to:i,className:"col-span-2 grow-0",children:Object(et.jsx)("p",{className:gi.a.comment,children:s})}),Object(et.jsx)(xi,{stream:t,className:Je()(gi.a.controls,"col-span-2 grow-0")})]})},Ni=a(55),ki=a.n(Ni),Ci=function(e){var t=e.children;return Object(et.jsx)("div",{className:ki.a.emptyState,children:t})},Si=function(e){var t,a=e.className,n=e.displayingStreams,r=e.onCreateStreamClick,s=Object(d.d)(Re,(function(e){return{loading:!e.streamsLoaded,hasStreams:e.inputs.length+e.outputs.length>0}})),c=s.loading,o=s.hasStreams,i=(null!==(t=null===n||void 0===n?void 0:n.length)&&void 0!==t?t:0)>0;return Vo(1e3,i),c?Object(et.jsx)(Ci,{children:Object(et.jsx)(sr,{wrapperClassName:ki.a.loader})}):o?i?Object(et.jsx)("div",{className:Je()(ki.a.container,a),children:Object(et.jsxs)("section",{className:ki.a.flexColumn,children:[Object(et.jsxs)("div",{className:Je()(ki.a.withPaddings,"grid grid-cols-6 gap-x-10"),children:[Object(et.jsx)("h3",{className:ki.a.title,children:"Wallet address"}),Object(et.jsx)("h3",{className:ki.a.title,children:"Amount to stream"}),Object(et.jsx)("h3",{className:ki.a.title,children:"Comment"})]}),null===n||void 0===n?void 0:n.map((function(e){return Object(et.jsx)(wi,{stream:e,className:Je()(ki.a.withPaddings,"grid grid-cols-6 gap-x-10")},e.id)}))]})}):Object(et.jsx)(Ci,{children:Object(et.jsx)("div",{children:"No streams matching your filters. Try selecting different ones"})}):Object(et.jsxs)(Ci,{children:[Object(et.jsx)("div",{children:"You don't have any streams yet."}),Object(et.jsx)(jt,{onClick:r,children:"Create First Stream"})]})},Ai=Object(m.f)(Xe.streams.path),Ii="".concat(window.location.origin,"/#").concat(Ai),Li=Object(_.a)({source:Ae,effect:function(e,t){return Object(f.a)(h.a.mark((function a(){var n,r,s,c,o,i,l,u,d,j,m,b,f,p;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e){a.next=2;break}throw Error("no roketo wallet exists");case 2:return n=e.roketo,r=e.tokens,s=t.receiver,c=t.delayed,o=t.comment,i=t.deposit,l=t.speed,u=t.token,d=t.isLocked,j=t.cliffDateTime,m=r[u],b=m.formatter,f=m.api,p=m.roketoMeta,a.next=7,n.api.createStream({deposit:b.toYocto(i),comment:o,receiverId:s,tokenAccountId:u,commissionOnCreate:p.commission_on_create,tokensPerSec:l,delayed:c,callbackUrl:Ii,handleTransferStream:f.transfer,isLocked:d,cliffPeriodSec:j?Math.floor((j.getTime()-Date.now())/1e3):void 0});case 7:case"end":return a.stop()}}),a)})))()}}),Ri=a(66),Ti=a.n(Ri),Ei=function(){var e=Object(d.d)({store:Re,keys:[],fn:function(e){var t=e.inputs,a=e.outputs;return[].concat(Object(Xa.a)(t),Object(Xa.a)(a))}}),t=Object(s.useState)([]),a=Object(b.a)(t,2),n=a[0],r=a[1],c=Object(s.useState)(!1),o=Object(b.a)(c,2),i=o[0],l=o[1],u=Object(s.useCallback)((function(){return l(!i)}),[l,i]);return Object(et.jsx)("div",{className:Ti.a.root,children:Object(et.jsxs)(ot,{children:[Object(et.jsxs)("section",{className:Je()(Ti.a.flex,Ti.a.header),children:[Object(et.jsx)("h1",{className:Ti.a.title,children:"Streams"}),Object(et.jsxs)("div",{className:Je()(Ti.a.flex,Ti.a.buttonsWrapper),children:[Object(et.jsx)(gc,{}),Object(et.jsx)(jt,{onClick:u,testId:le.createStreamButton,children:"Create a stream"}),Object(et.jsx)(fc,{isOpen:i,onCloseModal:u,children:Object(et.jsx)(Io,{onFormCancel:u,onFormSubmit:Li})})]})]}),Object(et.jsx)(Ho,{}),Object(et.jsx)(Hc,{items:e,onFilterDone:r,className:Ti.a.streamFilters}),Object(et.jsx)(Si,{displayingStreams:n,className:Ti.a.section,onCreateStreamClick:u})]})})},Bi=a(158),Mi=a.n(Bi);function Pi(){return Object(et.jsx)("div",{className:"flex h-screen mx-3",children:Object(et.jsx)("div",{className:Je()("lg:m-auto mx-auto my-auto lg:w-2/5 bg-gray-90 rounded-3xl p-5",Mi.a.block),children:Object(et.jsxs)("div",{className:Je()("my-24",Mi.a.content),children:[Object(et.jsxs)("h1",{className:"text-3xl mb-4 font-semibold",children:[" ","Login via NEAR Network"," "]}),Object(et.jsx)("p",{className:Je()("mb-4",Mi.a.hint),children:"Click button below to login or create new account"}),Object(et.jsx)(pt,{})]})})})}var Fi=a(12),Di=a.n(Fi);function Hi(e){var t=e.className;return Object(et.jsx)("svg",{className:t,width:"8",height:"12",viewBox:"0 0 8 12",fill:"none",children:Object(et.jsx)("path",{d:"M0.895051 11.6285C0.745051 11.6285 0.603384 11.5702 0.495051 11.4535C0.295051 11.2285 0.311718 10.8869 0.528384 10.6869L5.836 5.90328L0.495028 1.27828C0.270028 1.07828 0.261695 0.736613 0.461695 0.511613C0.661695 0.294947 1.00336 0.27828 1.22836 0.47828L6.97766 5.46995C7.23599 5.70328 7.23599 6.10328 6.97766 6.33662L1.26172 11.4869C1.15338 11.5869 1.02838 11.6285 0.895051 11.6285Z",fill:"currentColor"})})}var Vi=Object(d.a)({defaultState:null}),Wi=Object(_.g)(null),Ui=Object(_.g)(null),Zi=Object(_.a)({source:Ae,effect:function(e,t){return Object(f.a)(h.a.mark((function a(){return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",t&&(null===e||void 0===e?void 0:e.roketo.api.getStream({streamId:t})));case 1:case"end":return a.stop()}}),a)})))()}}),qi=Object(_.c)(Wi,Ui,(function(e,t){return!e&&!t})),Ki=Object(_.d)((function(){return new Promise((function(e){setTimeout(e,1e4)}))}));function Yi(e){var t=e.stream,a=Object(d.c)(Ie)[t.token_account_id],n=a.meta,r=a.formatter,s=ps(t),c=s.progress,o=c.streamed,i=c.withdrawn,l=c.full,u=s.percentages;return Object(et.jsxs)("div",{children:[Object(et.jsxs)("div",{className:Di.a.numericProgress,children:[Object(et.jsx)(Xt,{tokenAccountId:t.token_account_id,className:Di.a.tokenIcon}),Object(et.jsx)("span",{children:"".concat(n.symbol," ").concat(r.amount(o)," of ").concat(r.amount(l))})]}),Object(et.jsx)(Zt,{total:l,streamed:o,withdrawn:i,cliffPercent:u.cliff,withBigCliffMark:!0})]})}function zi(e){var t=e.stream,a=Object(d.d)({store:Ie,keys:[t.token_account_id],fn:function(e){return e[t.token_account_id]}}),n=ps(t),r=n.isDead,c=n.streamEndTimestamp,o=n.percentages.left,i=ms(t),l=ni(!1),j=Object(s.useState)(""),m=Object(b.a)(j,2),p=m[0],_=m[1],O=null,v=0===o,x=""!==p&&!Number.isNaN(+p),y=i===js;if(y&&x&&c){var g=+new A.a(a.formatter.toYocto(p)).dividedBy(t.tokens_per_sec).multipliedBy(1e3).plus(c).toFixed();Number.isNaN(g)||(O=Object(xt.a)(g,"PP 'at' p"))}return r?null:Object(et.jsxs)("div",{className:Di.a.buttons,children:[Object(et.jsx)(u.a,{isOpen:!v&&l.on,onRequestClose:l.turnOff,className:Di.a.modalContent,overlayClassName:Di.a.modalOverlay,children:Object(et.jsxs)("form",{autoComplete:"off",onSubmit:function(){var e=Object(f.a)(h.a.mark((function e(n){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),l.turnOff(),_(""),x){e.next=5;break}return e.abrupt("return");case 5:return r=a.formatter.toYocto(p),e.next=8,a.api.addFunds(r,t.id,window.location.href);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(et.jsx)("h2",{className:Di.a.modalHeader,children:"Amount to deposit"}),Object(et.jsxs)("p",{children:[Object(et.jsx)(Jr,{required:!0,name:"deposit",placeholder:"0.00 NEAR",value:null!==p&&void 0!==p?p:"",onChange:function(e){var t=e.currentTarget.value;0===t.length?_(""):Number.isNaN(+t)||_(t)}}),O&&Object(et.jsxs)("div",{className:Di.a.dueDate,children:[Object(et.jsx)("span",{className:Di.a.dueDateLabel,children:"New due date:"}),Object(et.jsx)("span",{className:Di.a.dueDateValue,children:O})]})]}),Object(et.jsxs)("div",{className:Di.a.modalButtons,children:[Object(et.jsx)("button",{type:"button",onClick:l.turnOff,className:Je()(Di.a.modalButton,Di.a.modalSecondary),children:"Cancel"}),Object(et.jsx)(jt,{type:tt.submit,className:Di.a.modalButton,disabled:!x,children:"Add funds"})]})]})}),!v&&y&&Object(et.jsx)(jt,{onClick:l.turnOn,children:"Add funds"}),Object(et.jsx)(hi,{stream:t}),i===ds&&t.status===E&&Object(et.jsx)(ai,{stream:t})]})}function Ji(e){var t=e.stream,a=Object(d.c)(Ie);return Object(et.jsxs)("div",{children:[Object(et.jsx)("span",{className:Di.a.blockTitle,children:"Speed"}),Object(et.jsx)("div",{className:Di.a.speed,children:Dt(Number(t.tokens_per_sec),a[t.token_account_id])})]})}function Xi(e){var t=e.stream,a="";try{a=JSON.parse(t.description).comment}catch(n){a=t.description}return""===a?null:Object(et.jsxs)("div",{children:[Object(et.jsx)("span",{className:Di.a.blockTitle,children:"Comment"}),Object(et.jsx)("div",{className:Di.a.commentBody,children:a})]})}function Gi(e){var t=e.stringToCopy;return Object(et.jsx)("button",{type:"button",className:Di.a.copyButton,onClick:function(){return vt()(t)},children:Object(et.jsx)(gt,{className:Di.a.linkIcon})})}function Qi(e){var t=Ge(e.stream.id);return Object(et.jsxs)("div",{children:[Object(et.jsxs)("div",{className:Je()(Di.a.blockTitle,Di.a.copyTitle),children:["Public link to view the stream",Object(et.jsx)(Gi,{stringToCopy:t})]}),Object(et.jsx)("div",{className:Di.a.link,children:t})]})}function $i(e){var t=e.title,a=e.children;return Object(et.jsxs)("div",{className:Di.a.infoRow,children:[Object(et.jsx)("span",{className:Di.a.infoTitle,children:t}),a]})}function el(e){var t=e.stream,a=ms(t),n=Object(d.c)(Ie),r=ps(t),c=r.streamEndTimestamp,o=r.cliffEndTimestamp,i=r.timeLeft,l=r.progress,u=l.streamed,j=l.left,m=l.full,f=Vt(u,m).toNumber(),p=Vt(j,m).toNumber(),h=H(t).toNumber(),_=n[t.token_account_id],O=_.meta,v=_.formatter,x=Object(s.useState)(!1),y=Object(b.a)(x,2),g=y[0],w=y[1];return Object(et.jsxs)("div",{className:Je()(Di.a.tile,Di.a.infoTile),children:[Object(et.jsx)("div",{className:Di.a.blockHeader,children:"Stream info"}),Object(et.jsx)($i,{title:"Sender",children:Object(et.jsx)("span",{className:Je()(Di.a.font16,Di.a.name),children:a===js?"You":t.owner_id})}),Object(et.jsx)($i,{title:"Receiver",children:Object(et.jsx)("span",{className:Je()(Di.a.font16,Di.a.name),children:a===ds?"You":t.receiver_id})}),Object(et.jsx)($i,{title:"Amount",children:Object(et.jsxs)("span",{className:Di.a.font14,children:[v.amount(m),"\xa0",Object(et.jsx)("span",{className:Di.a.font12,children:O.symbol})]})}),Object(et.jsx)($i,{title:"Stream Created",children:Object(et.jsx)("span",{className:Di.a.font14,children:Object(xt.a)(new Date(Number(t.timestamp_created)/1e6),"PP 'at' p")})}),o&&Object(et.jsx)($i,{title:Object(yt.a)(o)?"Cliff Period Ended":"Cliff Period Ends",children:Object(et.jsx)("span",{className:Di.a.font14,children:Object(xt.a)(o,"PP 'at' p")})}),c&&Object(et.jsx)($i,{title:Object(yt.a)(c)?"Stream Ended":"Stream Ends",children:Object(et.jsx)("span",{className:Di.a.font14,children:Object(xt.a)(c,"PP 'at' p")})}),Object(et.jsx)($i,{title:"Token",children:Object(et.jsxs)("span",{className:Di.a.font14,children:[O.name,",\xa0",Object(et.jsx)("span",{className:Di.a.font12,children:O.symbol})]})}),Object(et.jsx)("div",{className:Di.a.divider}),Object(et.jsx)(Mt,{className:Di.a.dropdownOpener,opened:g,onChange:function(e){w(e)},children:Object(et.jsx)("h3",{className:Di.a.sectionHeader,children:"Other info"})}),g&&Object(et.jsxs)(et.Fragment,{children:[Object(et.jsx)($i,{title:"Stream ID",children:Object(et.jsxs)("div",{className:Di.a.centeredFlex,children:[Object(et.jsx)("span",{className:Je()(Di.a.font14,Di.a.streamID),children:t.id}),Object(et.jsx)(Gi,{stringToCopy:t.id})]})}),Object(et.jsx)($i,{title:"Remaining",children:Object(et.jsx)("span",{className:Di.a.font14,children:i||"Finished"})}),Object(et.jsx)($i,{title:"Tokens Transferred",children:Object(et.jsxs)("span",{className:Di.a.font14,children:[v.amount(u),"\xa0",Object(et.jsxs)("span",{className:Di.a.font12,children:[O.symbol," ",Object(et.jsxs)("span",{className:Di.a.grey,children:["(",f,"%)"]})]})]})}),t.timestamp_created!==t.last_action&&Object(et.jsx)($i,{title:"Latest Withdrawal",children:Object(et.jsx)("span",{className:Di.a.font14,children:Object(xt.a)(new Date(Number(t.last_action)/1e6),"PP 'at' p")})}),Object(et.jsx)($i,{title:"Tokens Left",children:Object(et.jsxs)("span",{className:Di.a.font14,children:[v.amount(j),"\xa0",Object(et.jsxs)("span",{className:Di.a.font12,children:[O.symbol," ",Object(et.jsxs)("span",{className:Di.a.grey,children:["(",p,"%)"]})]})]})}),Object(et.jsx)($i,{title:"Tokens Available",children:Object(et.jsxs)("span",{className:Di.a.font14,children:[v.amount(h),"\xa0",Object(et.jsx)("span",{className:Di.a.font12,children:O.symbol})]})})]})]})}function tl(){var e=Object(m.h)().id;Object(d.b)(Vi,e);var t=Object(d.c)(qi),a=Object(d.c)(Wi),n=Object(d.c)(Ui);return Vo(1e3,Boolean(a&&!F(a)&&ps(a).percentages.left>0)),Object(et.jsx)("div",{className:Di.a.root,children:Object(et.jsxs)(ot,{children:[Object(et.jsxs)("div",{className:Di.a.breadbrumbs,children:[Object(et.jsx)(j.b,{to:Xe.streams.path,className:Di.a.streamsLink,children:"Streams"}),Object(et.jsx)(Hi,{className:Di.a.breadbrumb}),Object(et.jsx)("span",{className:Di.a.id,children:e})]}),n&&Object(et.jsx)(Lt,{className:"max-w-2xl mx-auto py-32",message:n,onRetry:function(){}}),t&&Object(et.jsx)("div",{className:"py-32 text-center text-gray text-2xl",children:"Loading..."}),!n&&a&&Object(et.jsxs)("main",{className:Di.a.stream,children:[Object(et.jsxs)("div",{className:Di.a.left,children:[Object(et.jsxs)("div",{className:Je()(Di.a.tile,Di.a.remaining),children:[Object(et.jsx)("span",{className:Di.a.blockTitle,children:"Remaining"}),Object(et.jsx)("span",{children:ps(a).timeLeft||"Finished"})]}),Object(et.jsxs)("div",{className:Je()(Di.a.tile,Di.a.main),children:[a.is_locked&&Object(et.jsx)(Zo,{isOrange:!0,className:Di.a.closeBadge,children:"Locked"}),Object(et.jsx)(Yi,{stream:a}),Object(et.jsx)(zi,{stream:a}),Object(et.jsx)(Ji,{stream:a}),Object(et.jsx)("div",{className:Di.a.divider}),Object(et.jsx)(Xi,{stream:a}),Object(et.jsx)(Qi,{stream:a})]})]}),Object(et.jsx)("div",{className:Di.a.right,children:Object(et.jsx)(el,{stream:a})})]})]})})}Object(_.j)({clock:[He,Vi.state,Ki.doneData],source:Vi.state,filter:Vi.status,target:Zi}),Object(_.j)({clock:[Vi.open,Ki.doneData],filter:Vi.status,target:Ki}),Object(_.j)({clock:Zi.doneData,filter:Boolean,target:Wi}),Object(_.j)({clock:Vi.close,fn:function(){return null},target:Wi}),Object(_.j)({clock:Zi.failData,fn:function(e){return e.message},target:Ui}),Object(_.j)({clock:Zi.doneData,fn:function(){return null},target:Ui});var al=a(83),nl=a.n(al);function rl(){return Object(et.jsxs)("div",{className:nl.a.root,children:[Object(et.jsxs)("div",{className:nl.a.big404,children:["4",Object(et.jsx)("span",{className:nl.a.big0,children:"0"}),"4"]}),Object(et.jsx)("div",{className:nl.a.pageNotFound,children:"Page not found"}),Object(et.jsxs)("div",{className:nl.a.weAreSorry,children:["We're sorry the page",Object(et.jsx)("br",{}),"you requested was not found."]}),Object(et.jsx)(jt,{className:nl.a.backButton,displayMode:at.action,onClick:function(){return window.history.back()},children:"Back"})]})}var sl=["transactionHashes","errorCode","errorMessage"];function cl(){Object(s.useEffect)((function(){var e=new URL(window.location.href);sl.forEach((function(t){e.searchParams.has(t)&&e.searchParams.delete(t)})),window.history.replaceState(null,"",e)}));var e=Object(d.c)(Te),t=Xe.root,a=Xe.stream,n=Xe.streams,r=Xe.authorize,c=ht.legacyStream,o=ht.legacyStreams;return Object(et.jsxs)(j.a,{basename:v.PUBLIC_URL,children:[Object(et.jsx)(Vs,{}),Object(et.jsxs)(m.d,{children:[Object(et.jsx)(Ws,{exact:!0,redirect:Object(et.jsx)(m.a,{to:n.path}),allowed:!e,path:t.path,children:Object(et.jsx)(m.a,{to:r.path})}),Object(et.jsx)(Ws,{exact:!0,redirect:Object(et.jsx)(m.a,{to:n.path}),allowed:!e,path:r.path,children:Object(et.jsx)(Pi,{})}),Object(et.jsx)(m.b,{exact:!0,path:c.path,children:Object(et.jsx)(In,{})}),Object(et.jsx)(Ws,{exact:!0,redirect:Object(et.jsx)(m.a,{to:r.path}),allowed:e,path:o.path,children:Object(et.jsx)(Cr,{})}),Object(et.jsx)(m.b,{exact:!0,path:a.path,children:Object(et.jsx)(tl,{})}),Object(et.jsx)(Ws,{exact:!0,redirect:Object(et.jsx)(m.a,{to:r.path}),allowed:e,path:n.path,children:Object(et.jsx)(Ei,{})}),Object(et.jsx)(m.b,{render:rl})]}),Object(et.jsx)(jc,{})]})}a(483);var ol=function(){Object(s.useEffect)((function(){Ce()}),[]);var e=Object(d.c)(Ue);return Object(et.jsx)(Ta,{children:e?null:Object(et.jsx)(cl,{})})},il=document.getElementById("root");u.a.setAppElement(il),i.a.render(Object(et.jsx)(ol,{}),il)},49:function(e,t,a){e.exports={wrapper:"styles_wrapper__2vwX1",secondWrapper:"styles_secondWrapper__20xn3",root:"styles_root__3L49I",secondRoot:"styles_secondRoot__3T4F3",unshrinkable:"styles_unshrinkable__1q8kB",logo:"styles_logo__1dFWz",left:"styles_left__fS0Yp",right:"styles_right__19YK4",marginRight:"styles_marginRight__3EZCk"}},50:function(e,t,a){e.exports={root:"styles_root__2_gZI",description:"styles_description__9SwXr",preparedTokensWrapper:"styles_preparedTokensWrapper__1n7o-",preparedToken:"styles_preparedToken__3wMsS",info:"styles_info__OjsX3",amount:"styles_amount__2Pqv4",symbol:"styles_symbol__HcQ7S",notAllowed:"styles_notAllowed__2nGW_"}},52:function(e,t,a){e.exports={progressBar:"styles_progressBar__WfqVp",streamed:"styles_streamed__2JSLG",progress:"styles_progress__1Vfwm",withdrawn:"styles_withdrawn__2eocI",cliffMarkContainer:"styles_cliffMarkContainer__n0scP",cliffMark:"styles_cliffMark__1jJk_",cliffMarkBig:"styles_cliffMarkBig__1-8_i",cliffMarkPassed:"styles_cliffMarkPassed__18H3L"}},53:function(e,t,a){e.exports={container:"styles_container__2hqfN",flexColumn:"styles_flexColumn__2kzF4",withPaddings:"styles_withPaddings__3uH1h",title:"styles_title__1uH5S",emptyState:"styles_emptyState__2YAVd",loader:"styles_loader__FohDd"}},54:function(e,t,a){e.exports={root:"styles_root__1wORt",layout:"styles_layout__3xx--",section:"styles_section__2r57z",logo:"styles_logo__w4rz3",links:"styles_links__2CP2p",legal:"styles_legal__1I5Mf",socials:"styles_socials__pFfwm",jurInfo:"styles_jurInfo__p5KY0"}},55:function(e,t,a){e.exports={container:"styles_container__2E2rA",flexColumn:"styles_flexColumn__vggyT",withPaddings:"styles_withPaddings__3K5aA",title:"styles_title__284Zv",emptyState:"styles_emptyState__3rrQX",loader:"styles_loader__xExeF"}},63:function(e,t,a){e.exports={root:"styles_root__14vNy",section:"styles_section__2FRx-",flex:"styles_flex__2TXuX",header:"styles_header__UtN1L",buttonsWrapper:"styles_buttonsWrapper__ANSH3",title:"styles_title__3qFk7",streamFilters:"styles_streamFilters__3D0RW"}},65:function(e,t,a){e.exports={wrapper:"styles_wrapper__TAkqw",speedInput:"styles_speedInput__pndxz",input:"styles_input__2-TTa",label:"styles_label__1NoFr",formLabel:"styles_formLabel__2w0iu",formField:"styles_formField__GA6eY",speed:"styles_speed__M079a"}},66:function(e,t,a){e.exports={root:"styles_root__2UE9y",section:"styles_section__2YjD4",flex:"styles_flex__5E-Gn",header:"styles_header__2fhvP",buttonsWrapper:"styles_buttonsWrapper__KUQAt",title:"styles_title__1SNWA",streamFilters:"styles_streamFilters__ZRc30"}},74:function(e,t,a){e.exports={root:"styles_root__3Kyti",wrapper:"styles_wrapper__P7W3S",balance:"styles_balance__o5yA-"}},81:function(e,t,a){e.exports={profile:"profile_profile__Dw7tT",dropdownOpener:"profile_dropdownOpener__rb_O7",name:"profile_name__2iGU9",avatar:"profile_avatar__20etB",dropdownMenu:"profile_dropdownMenu__2a3bk"}},82:function(e,t,a){e.exports={overlay:"styles_overlay__2aFDm",bodyOverflowHidden:"styles_bodyOverflowHidden__1QZAq",content:"styles_content__2Cjkl",title:"styles_title__1w-yg",close:"styles_close__1xZ3p"}},83:function(e,t,a){e.exports={root:"styles_root__17WVD",big404:"styles_big404__1ZrOC",big0:"styles_big0__1G3uC",pageNotFound:"styles_pageNotFound__2_Tlm",weAreSorry:"styles_weAreSorry__-XpXJ",backButton:"styles_backButton__2uRdQ"}},98:function(e,t,a){e.exports={root:"styles_root__2eQAJ",primary:"styles_primary__F4Fip",action:"styles_action__ZCYgS",simple:"styles_simple__2Db_y",secondary:"styles_secondary__3blHx"}},99:function(e,t,a){e.exports={root:"styles_root__gqzta",controls:"styles_controls__1VcAv",name:"styles_name__1n32K",comment:"styles_comment__1PgxT",withMarginRight:"styles_withMarginRight__2dPrt"}}},[[484,1,2]]]);
//# sourceMappingURL=main.54b4c577.chunk.js.map