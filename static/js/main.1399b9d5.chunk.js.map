{"version":3,"sources":["shared/kit/RadioButton/styles.module.scss","shared/kit/Filter/styles.module.scss","shared/ui/components/Checkbox/styles.module.scss","pages/stream/styles.module.scss","features/authorization/index.module.scss","shared/kit/DropdownOpener/styles.module.scss","shared/kit/DropdownMenu/styles.module.scss","features/filtering/DirectionSorts/styles.module.scss","features/filtering/StreamFilters/styles.module.scss","widgets/financialStatus/ui/FinancialInfo/styles.module.scss","widgets/streamsList/ui/Name/styles.module.scss","pages/authorize/styles.module.scss","widgets/header/ui/PagesList/styles.module.scss","shared/ui/components/Input/styles.module.scss","shared/ui/components/Spinner/styles.module.scss","widgets/profile/ProfileForm/index.module.scss","shared/kit/Tooltip/styles.module.scss","shared/ui/components/TextArea/styles.module.scss","shared/components/FormikTextArea/styles.module.scss","widgets/streamsList/ui/Controls/styles.module.scss","widgets/streamsList/ui/StreamProgress/styles.module.scss","features/stream-control/StreamControls/styles.module.scss","shared/ui/components/Layout/styles.module.scss","shared/components/Header/styles.module.scss","shared/ui/icons/Sort/styles.module.scss","widgets/financialStatus/ui/FinancialStatus/styles.module.scss","widgets/notifications/styles.module.scss","features/create-stream/CreateStream/styles.module.scss","widgets/header/styles.module.scss","shared/config.ts","shared/api/near/index.ts","shared/helpers/date.ts","shared/api/roketo/constants.ts","shared/api/roketo/helpers.ts","shared/api/roketo/contract-api.ts","shared/api/roketo/index.ts","shared/constants.ts","shared/api/roketo-client.ts","shared/api/ft/token-formatter.ts","shared/helpers/isWNearTokenId.ts","shared/api/ft/ft-api.ts","shared/api/ft/index.ts","shared/api/price-oracle/constants.ts","shared/api/price-oracle/index.ts","services/wallet.ts","shared/helpers/routing.ts","shared/ui/icons/Logo/index.tsx","shared/ui/components/Button/index.tsx","shared/ui/icons/Logo/ColoredLogo.tsx","shared/ui/icons/Logo/BlackLogo.tsx","shared/ui/components/Layout/index.tsx","shared/ui/icons/LogOut/index.tsx","features/authorization/ui.tsx","shared/hooks/useMatchQuery.ts","shared/components/NavigationLink/index.tsx","shared/components/Balance/index.tsx","widgets/header/streamType.ts","widgets/header/ui/PagesList/index.tsx","shared/ui/icons/Wallet/index.tsx","shared/ui/icons/Income/index.tsx","shared/ui/icons/Outcome/index.tsx","shared/hooks/useToken.ts","shared/helpers/speed.ts","widgets/header/model.ts","widgets/header/ui/FinancialActivity/index.tsx","shared/ui/icons/ArrowDown/index.tsx","shared/kit/DropdownOpener/DropdownOpener.tsx","shared/hooks/useOutsideClick.ts","shared/kit/DropdownMenu/DropdownMenu.tsx","shared/ui/components/Input/index.tsx","shared/ui/components/FormField/index.tsx","shared/ui/components/Spinner/index.tsx","widgets/profile/ProfileForm/index.tsx","widgets/profile/index.tsx","shared/hooks/useGetStreamDirection.ts","features/roketo-resource/index.ts","widgets/notifications/BellIcon.tsx","widgets/notifications/FinishIcon.tsx","widgets/notifications/StartIcon.tsx","widgets/notifications/PauseIcon.tsx","widgets/notifications/BangIcon.tsx","widgets/notifications/model.ts","widgets/notifications/index.tsx","shared/ui/icons/Telegram/logo-telegram.svg","widgets/header/Header.tsx","shared/components/Header/index.tsx","shared/components/PrivateRoute.tsx","shared/ui/icons/Twitter/logo-twitter.svg","shared/ui/icons/Telegram/index.tsx","shared/ui/icons/Github/logo-git.svg","shared/ui/icons/Twitter/index.tsx","shared/ui/icons/Github/index.tsx","widgets/footer/assets/Privacy_policy.pdf","widgets/footer/index.tsx","shared/components/Modal/index.tsx","shared/kit/Tooltip/Tooltip.tsx","shared/icons/Tokens.tsx","shared/kit/TokenImage/index.tsx","features/stream-control/WithdrawAllButton/model.ts","features/stream-control/WithdrawAllButton/index.tsx","shared/ui/icons/Sort/index.tsx","shared/kit/RadioButton/RadioButton.tsx","shared/kit/Filter/Filter.tsx","features/filtering/DirectionSorts/index.tsx","features/filtering/lib.ts","features/filtering/useStreamFilters.ts","features/filtering/StreamFilters/index.tsx","shared/ui/icons/ErrorSign/index.tsx","shared/components/FormikInput/index.tsx","shared/ui/components/Checkbox/index.tsx","shared/components/FormikCheckbox/index.tsx","shared/ui/components/TextArea/index.tsx","shared/components/FormikTextArea/index.tsx","shared/helpers/validation.ts","features/create-stream/lib.ts","features/create-stream/StreamSpeedCalcField/index.tsx","shared/hooks/usePrev.ts","features/create-stream/TokenSelector/index.tsx","features/create-stream/constants.ts","features/create-stream/CreateStream/model.ts","features/create-stream/CreateStream/index.tsx","shared/helpers/math.ts","shared/ui/components/ProgressBar/index.tsx","widgets/financialStatus/ui/FinancialInfo/index.tsx","widgets/financialStatus/lib.ts","widgets/financialStatus/ui/FinancialStatus/model.ts","widgets/financialStatus/ui/FinancialStatus/index.tsx","widgets/streamsList/ui/Name/index.tsx","shared/icons/Clock.tsx","widgets/streamsList/ui/StreamProgress/index.tsx","shared/ui/icons/Link/index.tsx","features/stream-control/WithdrawButton.tsx","shared/hooks/useBool.ts","features/stream-control/StreamStatus.tsx","features/stream-control/StreamControls/model.ts","features/stream-control/StreamControls/StartIcon.tsx","features/stream-control/StreamControls/PauseIcon.tsx","features/stream-control/StreamControls/StopIcon.tsx","features/stream-control/StreamControls/index.tsx","widgets/streamsList/ui/Controls/index.tsx","widgets/streamsList/ui/StreamCard/index.tsx","widgets/streamsList/ui/StreamsList/index.tsx","pages/streams/model.ts","pages/streams/index.tsx","pages/authorize/index.tsx","shared/kit/Button/Button.tsx","shared/images/RUSSIANS_HACK.gif","shared/images/crab.gif","shared/components/PageError.tsx","pages/stream/BreadcrumbIcon.tsx","pages/stream/model.ts","pages/stream/index.tsx","pages/not-found/index.tsx","pages/index.tsx","app/index.tsx","index.tsx","widgets/footer/styles.module.scss","widgets/streamsList/ui/StreamsList/styles.module.scss","features/stream-control/WithdrawAllButton/styles.module.scss","features/create-stream/StreamSpeedCalcField/styles.module.scss","pages/streams/styles.module.scss","widgets/header/ui/FinancialActivity/styles.module.scss","widgets/profile/index.module.scss","shared/components/Modal/styles.module.scss","pages/not-found/styles.module.scss","shared/ui/components/FormField/styles.module.scss","features/create-stream/TokenSelector/styles.module.scss","shared/ui/components/ProgressBar/styles.module.scss","widgets/streamsList/ui/StreamCard/styles.module.scss","shared/ui/components/Button/styles.module.scss"],"names":["module","exports","env","process","GAS_SIZE","createNearInstance","a","keyStore","keyStores","BrowserLocalStorageKeyStore","connect","nodeUrl","walletUrl","networkId","headers","near","getNearAuth","walletConnection","login","logout","signOut","window","location","reload","requestSignIn","getAccountId","accountId","account","getAccountBalance","balance","signedIn","formatDistanceLocale","xYears","xMonths","xDays","xSeconds","xMinutes","xHours","shortEnLocale","formatDistance","token","count","replace","STREAM_STATUS","isActiveStream","stream","status","isIdling","isDead","getAvailableToWithdraw","BigNumber","value","period","millisecondsToSeconds","Date","now","last_action","Number","minimum","tokens_per_sec","RoketoContractApi","contract","this","active_incoming_streams","active_outgoing_streams","deposit","inactive_incoming_streams","inactive_outgoing_streams","is_cron_allowed","last_created_stream","stake","total_incoming","total_outgoing","total_received","get_account","account_id","from","limit","get_account_incoming_streams","res","get_account_outgoing_streams","streamId","get_stream","stream_id","console","log","get_dao","comment","receiverId","tokenAccountId","commissionOnCreate","tokensPerSec","cliffPeriodSec","isAutoStart","isExpirable","isLocked","callbackUrl","handleTransferStream","totalAmount","plus","toFixed","transferPayload","description","JSON","stringify","owner_id","receiver_id","token_name","BigInt","cliff_period_sec","is_locked","is_auto_start_enabled","is_expirable","start_stream","pause_stream","stop_stream","streamIds","withdraw","stream_ids","initRoketo","nearAPI","viewMethods","changeMethods","api","roketoUserAccountPromise","getAccount","daoPromise","getDao","Promise","all","roketoUserAccount","dao","TimePeriod","serverConfig","baseServer","ServerConfiguration","TokenProvider","initialized","authApiClient","AuthApi","createConfiguration","getRefreshedToken","getAccountIdAndNear","key","savedToken","localStorage","containsUnicode","generateLoginParams","loginParams","accessToken","WalletConnection","config","getKey","keyPair","timestamp","sign","TextEncoder","encode","String","Uint8Signature","signature","Array","encodeURIComponent","tokenProvider","apiConfig","authMethods","bearer","usersApiClient","UsersApi","notificationsApiClient","NotificationsApi","SECONDS_IN_HOUR","SECONDS_IN_MINUTE","SECONDS_IN_DAY","SECONDS_IN_WEEK","SECONDS_IN_MONTH","SECONDS_IN_YEAR","TIME_PERIOD_SIGNS","Hour","Day","Minute","Second","testIds","signInButton","availableForWithdrawalCaption","withdrawAllButton","createStreamButton","withdrawButton","streamControlsDropdown","streamStartButton","streamPauseButton","streamStopButton","createStreamReceiverInput","createStreamAmountInput","createStreamMonthsInput","createStreamDaysInput","createStreamHoursInput","createStreamMinutesInput","createStreamCommentInput","createStreamAutostartCheckbox","createStreamCancelButton","createStreamSubmitButton","openNotificationsButton","notificationElement","notificationPrimaryCaption","notificationSecondaryCaption","TokenFormatter","Object","keys","reduce","selectors","tokenDecimals","MP","amount","numbro","divide","formatted","format","mantissa","trimMantissa","optionalMantissa","average","multiply","decimals","multipliers","unit","firstGoodLookingMultiplier","find","multiplier","formattedValue","formatSmartly","isWNearTokenId","FTApi","transfer","payload","getIsRegistered","isRegisteredSender","isRegisteredReceiver","actions","transactions","functionCall","memo","msg","JSONbig","Create","request","depositSumm","depositAmmount","utils","parseNearAmount","unshift","signAndSendTransaction","walletCallbackUrl","Contract","ft_metadata","ft_balance_of","storage_balance_of","total","initFT","tokens","richTokens","map","getMetadata","getBalance","meta","formatter","roketoMeta","NEAR_MULTIPLIER","DAI_MULTIPLIER","TOKEN_MULTIPLIER_MAP","CONTRACT_VIEW_METHODS_LIST","CONTRACT_CHANGE_METHODS_LIST","convertRawPriceToTokenMap","tokenPrices","relyingSourceOracleId","accumulatorMap","priceToken","tokenId","desiredSourceOracle","reports","oracle_id","price","convertTokenToUsdFactory","priceTokenMap","tokenToMultiplierMap","shownDecimals","tokenPrice","tokenMultiplier","initPriceOracle","priceOracleContract","get_assets","rawAssets","tokenMap","getPriceInUsd","retry","cb","retryCount","i","refreshToken","message","startsWith","error","initWallets","createEvent","$nearWallet","createStore","$roketoWallet","$tokens","$priceOracle","$accountStreams","inputs","outputs","streamsLoaded","$isSignedIn","wallet","auth","$accountId","$user","name","email","$notifications","getUserFx","createEffect","findOne","getNotificationsFx","findAll","updateUserFx","attach","source","effect","update","lastCreatedStreamUpdated","createNearWalletFx","createRoketoWalletFx","roketo","$appLoading","createPriceOracleFx","requestAccountStreamsFx","getAccountIncomingStreams","getAccountOutgoingStreams","streamsRevalidationTimerFx","rs","setTimeout","sample","clock","filter","Boolean","fn","target","doneData","done","params","id","finally","ROUTES_MAP","root","path","authorize","title","streams","getStreamLink","origin","DisplayType","ButtonType","DisplayMode","DISPLAY_TYPE_TO_LOGO_MAP","COLORED","className","width","height","viewBox","fill","d","x1","y1","x2","y2","gradientUnits","offset","stopColor","CURRENT_COLOR","Logo","props","type","ChosenLogo","Layout","children","cn","styles","layout","Button","button","displayMode","action","disabled","link","onClick","testId","restTooltipProps","buttonClassName","primary","simple","to","LogoutIcon","Authorization","nearWallet","useStore","logoutButton","getMatches","query","matchMedia","matches","useMediaQuery","useState","setMatches","useEffect","handleChange","addListener","addEventListener","removeListener","removeEventListener","StreamType","NavigationLink","PageList","pageRoutes","length","route","pageLink","WalletIcon","xmlns","IncomeIcon","OutcomeIcon","useToken","symbol","Balance","mode","CRYPTO","priceOracle","actualCryptoBalance","available","displayedCryptoAmount","showInUSD","USD","currencySymbol","$totalUSDAmountPerHour","combine","income","outcome","calculateTotalAmount","tokensBalanceMap","balancePerDesiredPeriod","balancePerSecond","balanceSpeedPerSecond","multipliedBy","getBalancePerDesiredPeriod","formattedBalance","toHumanReadableValue","usdAmount","TokenAmountSpeed","totalAmountInUSD","useStoreMap","store","totalAmounts","FinancialActivity","classNames","wrapper","ArrowDown","DropdownOpener","opened","onChange","rest","arrowClassName","arrow","rotate","DropdownMenu","onClose","ref","React","useRef","callback","handleClick","current","HTMLElement","contains","document","useOutsideClick","menu","hidden","DropdownMenuItem","DropdownMenuDivider","menuDivider","Input","hasError","input","FormField","isRequired","label","required","Spinner","wrapperClassName","spinnerClassName","spinner","NAME_INPUT","EMAIL_INPUT","ProfileForm","user","setName","setEmail","isMutating","pending","formRef","profileForm","onSubmit","e","preventDefault","loaderWrapper","placeholder","submit","Profile","isDropdownOpened","setIsDropdownOpened","needFallback","setNeedFallback","profile","dropdownOpener","avatar","src","alt","onError","dropdownMenu","STREAM_DIRECTION","useGetStreamDirection","calculateEndInfo","tokensPerMs","dividedBy","toNumber","streamViewData","withExtrapolation","MAX_SEC","availableToWithdraw","secondsLeft","minus","duration","intervalToDuration","start","end","days","weeks","months","years","seconds","timeLeft","formatDuration","locale","full","tokens_total_withdrawn","withdrawn","streamed","left","progresses","percentages","streamEndInfo","progress","BellIcon","withBadge","stroke","strokeWidth","strokeLinecap","strokeLinejoin","cx","cy","r","FinishIcon","rx","StartIcon","PauseIcon","BangIcon","markAllReadFx","notifications","markAllRead","NotificationIcon","IconComponent","Error","icon","PrimaryText","primaryText","SecondaryText","secondaryText","NotificationBody","notification","direction","token_account_id","notificationBody","Notifications","compact","closeDropdown","useCallback","hasUnreadNotifications","some","isRead","container","header","index","Fragment","divider","isSameDay","createdAt","date","isToday","isYesterday","generatePath","unread","time","_path","_path2","_path3","ROUTES_TO_DISPLAY","Header","withSecondFloor","unshrinkable","logo","right","marginRight","secondWrapper","secondRoot","MinifiedHeader","useRouteMatch","PrivateRoute","allowed","redirect","exact","render","_extends","assign","arguments","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgLogoTelegram","_ref","svgRef","titleId","ForwardRef","TelegramLogo","SvgLogoTwitter","TwitterLogo","SvgLogoGit","GithubLogo","Footer","section","links","href","rel","legal","PrivacyPolicyDoc","socials","jurInfo","Modal","isOpen","onCloseModal","onRequestClose","content","overlayClassName","overlay","bodyOpenClassName","bodyOverflowHidden","close","contentContainer","Tooltip","placement","align","defaultOverlay","defaultIcon","NearTokenImage","version","preserveAspectRatio","transform","FallbackTokenImage","currentTokens","TokenIcon","image","Component","TokenImage","size","triggerWithdrawAll","withdrawAllFx","$activeTokensInfo","tokenData","$tokenData","WithdrawAllButton","preparedTokenData","preparedTokensWrapper","data","preparedToken","info","activeInputs","tokensData","push","values","OrderType","SortIcon","desc","asc","RadioButton","active","checked","radio","radioActive","text","FilterOptionWithCounter","option","Filter","options","renderOption","renderActive","isDisabled","setOpened","dropdownWrapper","dropdownInactive","DirectionSorts","directions","activeDirection","onDirectionClick","isInactive","sort","useFilter","useMemo","selectOption","currentFilterFunction","optionsArray","STREAM_TYPE_FILTER","STREAM_STATUS_FILTER","ALL","statusOptions","useStreamFilters","directionOptions","statusFilter","directionFilter","result","items","filters","undefined","filteredItems","setFilteredItems","filterCounts","setFilterCounts","filteredItemsValue","filterCountsValue","forEach","filterRunResult","currentFilterCount","useFilters","compareBy","b","sorts","bigBalanceFirst","order","highSpeedFirst","highSpeedLast","mostRecent","StreamFilters","onFilterDone","sorting","setSorting","sortOptions","isEmptyList","sortedStreams","filtersWrapper","counts","sortWithOrder","ErrorSign","FormikInput","field","form","errors","Checkbox","checkbox","FormikCheckbox","TextArea","textarea","FormikTextArea","maxLength","formfield","textLimitCounter","NUMBER_PATTERN","getStreamingSpeed","speedInSeconds","tokensPerMeaningfulPeriod","SpeedInput","speedInput","StreamSpeedCalcField","onSpeedChange","currentStreamingSpeed","setMonths","setDays","minutes","setMinutes","hours","setHours","depositInYocto","toYocto","durationInSeconds","differenceInDays","addMonths","getDurationInSeconds","dividedToIntegerBy","getTokensPerSecondCount","prevSpeed","usePrev","handleInputChangeFactory","setValue","valueLimit","event","stringLikeNumber","safeValue","test","meaningfulSpeed","labelWithStreamingSpeed","formLabel","speed","formField","TokenOption","tokenOption","TokenSelector","onTokenChoose","activeTokenAccountId","allAvailableTokens","activeToken","handleChooseTokenOptions","withHover","INITIAL_FORM_VALUES","receiver","streamName","autoStart","isReceiverNotEqualOwnerFx","isAddressNotExistsFx","connection","provider","request_type","finality","formValidationSchema","Yup","shape","max","moreThan","Row","row","CreateStream","onFormCancel","onFormSubmit","submitError","setError","initialValues","formValues","catch","validateOnBlur","validationSchema","validateOnChange","validateOnMount","handleSubmit","setFieldValue","setFieldTouched","tokenMeta","component","rowItem","feeDisclaimer","commission_on_create","actionButtonsWrapper","ButtonDisplayMode","getExactPercentageRatio","aBN","bBN","isEqualTo","getRoundedPercentageRatio","roundRatio","dp","ProgressBar","streamedToTotalPercentageRatio","withdrawnToStreamedPercentageRatio","progressBar","style","FinancialInfo","withProgressBar","financialContent","card","finance","INITIAL_VALUE","countTotalUSDWithdrawal","availableForWithdrawal","withdrawalSum","inputStream","withdrawal","amountForDisplay","amountInUSD","collectTotalFinancialAmountInfo","initialInfo","totalFinancialInfo","financialInfoAccumulator","streamedAmountForDisplay","streamedUSD","fullAmountForDisplay","fullUSD","withdrawnAmountForDisplay","withdrawnUSD","$financialStatus","outcomeAmountInfo","incomeAmountInfo","activeInputStreams","activeOutputStreams","FinancialStatus","Name","flexCenter","nameLabel","ClockIcon","TOOLTIP_ALIGN","points","StreamProgress","streamedText","withdrawnText","streamedPercentage","withdrawnPercentage","progressText","speedFormattedValue","speedUnit","destroyTooltipOnHide","tooltip","innerStatus","grey","smaller","remained","LinkIcon","WithdrawButton","useBool","initial","on","setOn","off","toggle","turnOff","turnOn","bindings","StreamStatus","binding","modifyStreamFx","command","startStream","pauseStream","stopStream","$loading","prepend","StopIcon","ConfirmModal","modalControl","onConfirm","buttonText","modalContent","modalOverlay","modalHeader","modalButtons","modalButton","modalSecondary","StreamControls","pauseModalControl","stopModalControl","loading","menuOpened","setMenuOpened","outgoing","incoming","isOutgoing","isIncoming","isExternal","shouldShowStartButton","shouldShowPauseButton","statusClassName","pause","isPausedStream","stop","relative","modalWarning","modalDanger","statusPadded","controlsMenu","controlButton","StreamLinkButton","onCLick","linkButton","Controls","handleLinkClick","streamLink","copy","showWithdraw","StreamCard","parse","isIncomingStream","streamPageLink","withMarginRight","controls","EmptyState","emptyState","StreamsList","displayingStreams","onCreateStreamClick","hasStreams","hasDisplayedStreams","loader","flexColumn","withPaddings","redirectUrl","returnPath","handleCreateStreamFx","createStream","StreamsPage","allStreams","setFiltered","isModalOpened","setIsModalOpened","toggleModal","flex","buttonsWrapper","streamFilters","AuthorizePage","block","hint","variants","loadingText","color","variant","restProps","variantStyles","sizeStyles","colorStyles","commonProps","PageError","onRetry","rand","Math","random","hackImage","crabImage","BreadcrumbIcon","pageGate","createGate","defaultState","$stream","$pageError","requestStreamFx","getStream","streamRevalidationTimerFx","numericProgress","tokenIcon","StreamButtons","buttons","StreamSpeed","blockTitle","StreamComment","commentBody","CopyButton","stringToCopy","copyButton","linkIcon","StreamCopyUrlBlock","copyTitle","InfoRow","infoRow","infoTitle","StreamData","leftToTotalPercentageRatio","showOtherInfo","setShowOtherInfo","tile","infoTile","blockHeader","font16","font14","font12","timestamp_created","isPast","sectionHeader","centeredFlex","streamID","StreamPage","useParams","useGate","pageError","breadbrumbs","streamsLink","breadbrumb","remaining","main","state","open","failData","NotFoundPage","big404","big0","pageNotFound","weAreSorry","backButton","history","back","TRASH_QUERY_PARAMS","Routing","url","URL","param","searchParams","has","delete","replaceState","basename","App","rootEl","getElementById","setAppElement","ReactDOM"],"mappings":"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","file":"static/js/main.1399b9d5.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"styles_root__1_66R\",\"radio\":\"styles_radio__3I1ek\",\"radioActive\":\"styles_radioActive__2fx8l\",\"text\":\"styles_text__21Txd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"styles_root__HwxLP\",\"dropdownWrapper\":\"styles_dropdownWrapper__32byB\",\"dropdownMenu\":\"styles_dropdownMenu__1RS3q\",\"dropdownInactive\":\"styles_dropdownInactive__34nZF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"styles_root__2b5hR\",\"description\":\"styles_description__256I8\",\"checkbox\":\"styles_checkbox__JfL1O\",\"error\":\"styles_error__3vxG-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"styles_wrapper__CegNU\",\"root\":\"styles_root__1apvt\",\"centeredFlex\":\"styles_centeredFlex__1HZSf\",\"infoRow\":\"styles_infoRow__2vMrz\",\"numericProgress\":\"styles_numericProgress__2AuoP\",\"breadbrumbs\":\"styles_breadbrumbs__BUT8d\",\"streamsLink\":\"styles_streamsLink__L0U7w\",\"breadbrumb\":\"styles_breadbrumb__NNWx2\",\"id\":\"styles_id__16P2T\",\"stream\":\"styles_stream__3Fr_5\",\"left\":\"styles_left__1kdhS\",\"right\":\"styles_right__vZBRd\",\"tile\":\"styles_tile__2fhhc\",\"remaining\":\"styles_remaining__2iHJj\",\"blockTitle\":\"styles_blockTitle__TMhpt\",\"main\":\"styles_main__18lFE\",\"tokenIcon\":\"styles_tokenIcon__2BgHM\",\"buttons\":\"styles_buttons__kZcO7\",\"divider\":\"styles_divider__hCiPy\",\"speed\":\"styles_speed__3klLg\",\"commentBody\":\"styles_commentBody__1ywdK\",\"copyTitle\":\"styles_copyTitle__2hQ0e\",\"copyButton\":\"styles_copyButton__10iJH\",\"linkIcon\":\"styles_linkIcon__1XYWy\",\"link\":\"styles_link__24b3y\",\"infoTile\":\"styles_infoTile__2Te2a\",\"blockHeader\":\"styles_blockHeader__1zEQa\",\"sectionHeader\":\"styles_sectionHeader__2S7fb\",\"dropdownOpener\":\"styles_dropdownOpener__374xe\",\"infoTitle\":\"styles_infoTitle__wuj-6\",\"font16\":\"styles_font16__3CMGR\",\"font14\":\"styles_font14__2T9bM\",\"font12\":\"styles_font12__eO0Tl\",\"streamID\":\"styles_streamID__2QzEw\",\"grey\":\"styles_grey__3NsWF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"authorization_root__3Nfgj\",\"name\":\"authorization_name__GjBzW\",\"logoutButton\":\"authorization_logoutButton__2sCaP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"styles_root__9Q_y8\",\"arrow\":\"styles_arrow__dmtxI\",\"rotate\":\"styles_rotate__3bkvh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menu\":\"styles_menu__oG1pK\",\"menuDivider\":\"styles_menuDivider__3rvtk\",\"hidden\":\"styles_hidden__3JyX9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"styles_root__1_PXp\",\"sort\":\"styles_sort__3sdm0\",\"active\":\"styles_active__2U1h-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"styles_root__1C2L3\",\"filtersWrapper\":\"styles_filtersWrapper__3sIgz\",\"sortWithOrder\":\"styles_sortWithOrder__2yZvk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"styles_card__chYY0\",\"title\":\"styles_title__cc9o3\",\"finance\":\"styles_finance__wsZi_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"flexCenter\":\"styles_flexCenter__B0Jt1\",\"name\":\"styles_name__25-53\",\"nameLabel\":\"styles_nameLabel__3d_tt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"block\":\"styles_block__3xJQm\",\"hint\":\"styles_hint__2cJLP\",\"content\":\"styles_content__10idn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"styles_root__2s9Jd\",\"pageLink\":\"styles_pageLink__3rg8i\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"input\":\"styles_input__KeAvj\",\"error\":\"styles_error__1dP_7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"styles_wrapper__oqa_T\",\"spinner\":\"styles_spinner__3Ptbo\",\"spin\":\"styles_spin__1Vf_l\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profileForm\":\"ProfileForm_profileForm__6KCp0\",\"loaderWrapper\":\"ProfileForm_loaderWrapper__1tIAk\",\"label\":\"ProfileForm_label__3P7Uk\",\"inputName\":\"ProfileForm_inputName__3fFmI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"defaultOverlay\":\"styles_defaultOverlay__3nR8o\",\"defaultIcon\":\"styles_defaultIcon__hJLMj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"textarea\":\"styles_textarea__1lPSs\",\"error\":\"styles_error__3C3Rv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formfield\":\"styles_formfield__2DZrP\",\"textLimitCounter\":\"styles_textLimitCounter__2B7mB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"styles_root__2iwP4\",\"linkButton\":\"styles_linkButton__1laX_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"styles_root__38B64\",\"text\":\"styles_text__11atI\",\"status\":\"styles_status__3b_ey\",\"grey\":\"styles_grey__36o2c\",\"overlay\":\"styles_overlay__3rasY\",\"tooltip\":\"styles_tooltip__23VN9\",\"innerStatus\":\"styles_innerStatus__132Fk\",\"smaller\":\"styles_smaller__HXT1f\",\"speed\":\"styles_speed__1i2og\",\"remained\":\"styles_remained__2-6rd\",\"clock\":\"styles_clock__2q7yf\",\"progress\":\"styles_progress__YG-x-\",\"streamed\":\"styles_streamed__2mtn0\",\"withdrawn\":\"styles_withdrawn__SfaXK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"relative\":\"styles_relative__2QiFJ\",\"controlButton\":\"styles_controlButton__1vq4p\",\"statusPadded\":\"styles_statusPadded__3UL71\",\"button\":\"styles_button__1UW_h\",\"modalContent\":\"styles_modalContent__3f34e\",\"modalOverlay\":\"styles_modalOverlay__ZnuwA\",\"modalHeader\":\"styles_modalHeader__2-Oti\",\"modalButtons\":\"styles_modalButtons__367QE\",\"modalButton\":\"styles_modalButton__uHmah\",\"modalSecondary\":\"styles_modalSecondary__1y73P\",\"modalWarning\":\"styles_modalWarning__aeSV8\",\"modalDanger\":\"styles_modalDanger__2FJKr\",\"controlsMenu\":\"styles_controlsMenu__h4rsZ\",\"dropdownOpener\":\"styles_dropdownOpener__KpUjE\",\"start\":\"styles_start__AVZHt\",\"active\":\"styles_active__1J1qI\",\"pause\":\"styles_pause__AS7EK\",\"stop\":\"styles_stop__IMPS5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"layout\":\"styles_layout__2ac3i\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__1AC1F\",\"logo\":\"styles_logo__3ciI3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"rotate\":\"styles_rotate__ZjzwB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"styles_root__20iY_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"styles_root__1XQku\",\"dropdownOpener\":\"styles_dropdownOpener__3kQgF\",\"dropdownMenu\":\"styles_dropdownMenu___vHNq\",\"container\":\"styles_container__aPnlt\",\"loader\":\"styles_loader__3dO2x\",\"header\":\"styles_header__1d9ir\",\"date\":\"styles_date__2TpB4\",\"divider\":\"styles_divider__KqyfJ\",\"notification\":\"styles_notification__3Zr3E\",\"unread\":\"styles_unread__3ngZd\",\"icon\":\"styles_icon__3IYnm\",\"notificationBody\":\"styles_notificationBody__3G1w8\",\"primaryText\":\"styles_primaryText__3lpJr\",\"secondaryText\":\"styles_secondaryText__30aDU\",\"time\":\"styles_time__1xidu\",\"compact\":\"styles_compact__1AVk6\",\"mainText\":\"styles_mainText__1Fr7u\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"styles_root__1zlKm\",\"title\":\"styles_title__39adN\",\"description\":\"styles_description__12RAl\",\"form\":\"styles_form__1ud4S\",\"row\":\"styles_row__Pz5Iu\",\"rowItem\":\"styles_rowItem__TexQO\",\"submitError\":\"styles_submitError__1B7Gd\",\"actionButtonsWrapper\":\"styles_actionButtonsWrapper__1E6yB\",\"feeDisclaimer\":\"styles_feeDisclaimer__WNlqw\",\"feeDisclaimerRow\":\"styles_feeDisclaimerRow__11c8e\",\"amount\":\"styles_amount__1l7_V\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"styles_wrapper__2vwX1\",\"secondWrapper\":\"styles_secondWrapper__20xn3\",\"root\":\"styles_root__3L49I\",\"secondRoot\":\"styles_secondRoot__3T4F3\",\"unshrinkable\":\"styles_unshrinkable__1q8kB\",\"logo\":\"styles_logo__1dFWz\",\"left\":\"styles_left__fS0Yp\",\"right\":\"styles_right__19YK4\",\"marginRight\":\"styles_marginRight__3EZCk\"};","type EnvType = {\n  ACCOUNT_SUFFIX: string;\n  NEAR_NETWORK_ID: string;\n  NEAR_NODE_URL: string;\n  ROKETO_CONTRACT_NAME: string;\n  WALLET_URL: string;\n  PUBLIC_URL: string;\n  PRICE_ORACLE_CONTRACT_NAME: string,\n  PRICE_ORACLE_SOURCE_ID: string,\n  WNEAR_ID: string;\n  WEB_API_URL: string;\n}\n\nexport const env = {\n  ACCOUNT_SUFFIX: process.env.REACT_APP_NEAR_ACCOUNT_SUFFIX,\n  NEAR_NETWORK_ID: process.env.REACT_APP_NEAR_NETWORK_ID,\n  NEAR_NODE_URL: process.env.REACT_APP_NEAR_NODE_URL,\n  ROKETO_CONTRACT_NAME: process.env.REACT_APP_ROKETO_CONTRACT_NAME,\n  WALLET_URL: process.env.REACT_APP_WALLET_URL,\n  PUBLIC_URL: process.env.PUBLIC_URL,\n  PRICE_ORACLE_CONTRACT_NAME: process.env.REACT_APP_PRICE_ORACLE_CONTRACT_NAME,\n  PRICE_ORACLE_SOURCE_ID: process.env.REACT_APP_PRICE_ORACLE_SOURCE_ID,\n  WNEAR_ID: process.env.REACT_APP_WNEAR_ID,\n  WEB_API_URL: process.env.REACT_APP_WEB_API_URL,\n} as EnvType;\n\nexport const GAS_SIZE = \"200000000000000\";\n","import { connect, keyStores, WalletConnection, ConnectedWalletAccount,  } from 'near-api-js';\nimport { AccountBalance } from 'near-api-js/lib/account';\n\nimport { env } from 'shared/config';\n\nexport async function createNearInstance() {\n  const keyStore = new keyStores.BrowserLocalStorageKeyStore();\n  const near = await connect({\n    nodeUrl: env.NEAR_NODE_URL,\n    walletUrl: env.WALLET_URL,\n    networkId: env.NEAR_NETWORK_ID,\n    keyStore,\n    headers: {},\n  });\n\n  return near;\n}\n\nexport type NearAuth = {\n  balance?: AccountBalance;\n  account: ConnectedWalletAccount;\n  signedIn: boolean;\n  accountId: string;\n  login: () => void,\n  logout: () => void,\n}\n\nexport async function getNearAuth(walletConnection: WalletConnection): Promise<NearAuth> {\n  const accountId = await walletConnection.getAccountId();\n  const account = await walletConnection.account();\n\n  let balance;\n\n  if (accountId) {\n    balance = await account.getAccountBalance();\n  }\n\n  async function login() {\n    const appTitle = 'Roketo Token Streaming Service';\n  \n    await walletConnection.requestSignIn(\n      env.ROKETO_CONTRACT_NAME,\n      appTitle,\n    );\n  }\n  \n  async function logout() {\n    await walletConnection.signOut();\n\n    window.location.reload(); \n  }\n\n  return {\n    balance,\n    account,\n    signedIn: !!accountId,\n    accountId,\n    login,\n    logout,\n  }\n}\n\n\n\n","const formatDistanceLocale = {\n  xYears: '{{count}} years',\n  xMonths: '{{count}} months',\n  xDays: '{{count}}d',\n  xSeconds: '{{count}}s',\n  xMinutes: '{{count}}m',\n  xHours: '{{count}}h',\n} as const;\n\ntype TokenType = keyof typeof formatDistanceLocale;\n\nexport const shortEnLocale = {\n  formatDistance: (token: TokenType, count: string) => formatDistanceLocale[token].replace('{{count}}', count),\n};\n\nexport function fromNanosecToSec(value: number | string) {\n  return Number(value) / 1000 / 1000 / 1000;\n}\n","export const STREAM_STATUS = {\n  Initialized: 'Initialized',\n  Active: 'Active',\n  Paused: 'Paused',\n  Finished: 'Finished'\n} as const;\n","import BigNumber from 'bignumber.js';\nimport { millisecondsToSeconds } from 'date-fns';\n\nimport { fromNanosecToSec } from 'shared/helpers/date';\n\nimport { STREAM_STATUS } from './constants';\nimport { RoketoStream, RoketoAccount } from './interfaces/entities';\n\nexport const isActiveStream = (stream: RoketoStream) => stream.status === STREAM_STATUS.Active;\nexport const isPausedStream = (stream: RoketoStream) => stream.status === STREAM_STATUS.Paused;\n\nexport function isIdling(stream: RoketoStream) {\n  return (\n    stream.status === STREAM_STATUS.Initialized\n    || stream.status === STREAM_STATUS.Paused\n  );\n}\n\nexport function isDead(stream?: RoketoStream) {\n  return typeof stream?.status === 'object' && STREAM_STATUS.Finished in stream.status;\n}\n\nexport function getAvailableToWithdraw(stream: RoketoStream): BigNumber {\n  if (isIdling(stream)) {\n    return new BigNumber(0);\n  }\n\n  const nowSec = millisecondsToSeconds(Date.now());\n  const lastActionSec = fromNanosecToSec(stream.last_action);\n  const period = nowSec - lastActionSec;\n\n  return BigNumber.minimum(\n    stream.balance, \n    Number(stream.tokens_per_sec) * period\n  );\n}\n\nexport const getEmptyAccount = (): RoketoAccount => ({\n  active_incoming_streams: 0,\n  active_outgoing_streams: 0,\n  deposit: \"0\",\n  inactive_incoming_streams: 0,\n  inactive_outgoing_streams: 0,\n  is_cron_allowed: true,\n  last_created_stream: \"any\",\n  stake: \"0\",\n  total_incoming: {},\n  total_outgoing: {},\n  total_received: {}\n});\n","import { Account } from 'near-api-js';\nimport BigNumber from 'bignumber.js';\n\nimport { GAS_SIZE } from 'shared/config';\nimport { RoketoContract } from './interfaces/contracts';\nimport { RoketoAccount, RoketoStream } from './interfaces/entities';\nimport { CreateStreamApiProps, RoketoApi, StreamsProps } from './interfaces/roketo-api';\nimport { getEmptyAccount } from './helpers';\n\ntype NewRoketoApiProps = {\n  account: Account;\n  contract: RoketoContract;\n}\n\nexport class RoketoContractApi implements RoketoApi {\n  contract: RoketoContract;\n\n  account: Account;\n\n  constructor({\n    contract,\n    account,\n  }: NewRoketoApiProps) {\n    this.contract = contract;\n\n    this.account = account;\n  }\n\n  async getAccount(): Promise<RoketoAccount> {\n    if (!this.account.accountId) {\n      return getEmptyAccount();\n    }\n\n    try {\n      const account = await this.contract.get_account({ account_id: this.account.accountId });\n  \n      return account;\n    } catch {\n      return getEmptyAccount();\n    }\n  }\n\n  async getAccountIncomingStreams({ from, limit }: StreamsProps): Promise<RoketoStream[]> {\n    try {\n      const res = await this.contract.get_account_incoming_streams({ account_id: this.account.accountId, from, limit });\n\n      return res;\n    } catch {\n      return [];\n    }\n  }\n\n  async getAccountOutgoingStreams({ from, limit }: StreamsProps): Promise<RoketoStream[]> {\n    try {\n      const res = await this.contract.get_account_outgoing_streams({ account_id: this.account.accountId, from, limit });\n      \n      return res;\n    } catch {\n      return [];\n    }\n  }\n\n  async getStream({ streamId }: { streamId: string }) {\n    const res = await this.contract.get_stream({\n      stream_id: streamId,\n    });\n    console.log('res', res)\n\n    return res;\n  }\n\n  async getDao() {\n    const res = await this.contract.get_dao();\n    console.log('res', res)\n\n    return res;\n  }\n\n  async createStream({\n    comment,\n    deposit,\n    receiverId,\n    tokenAccountId,\n    commissionOnCreate,\n    tokensPerSec,\n    cliffPeriodSec,\n    isAutoStart = true,\n    isExpirable,\n    isLocked,\n    callbackUrl,\n    handleTransferStream,\n  }: CreateStreamApiProps) {\n    const totalAmount = new BigNumber(deposit).plus(commissionOnCreate).toFixed();\n    const transferPayload = {\n      description: JSON.stringify({ comment }),\n      balance: deposit,\n      owner_id: this.account.accountId,\n      receiver_id: receiverId,\n      token_name: tokenAccountId,\n      tokens_per_sec: BigInt(tokensPerSec),\n      cliff_period_sec: cliffPeriodSec,\n      is_locked: isLocked,\n      is_auto_start_enabled: isAutoStart,\n      is_expirable: isExpirable,\n    };\n\n    return handleTransferStream(\n      transferPayload,\n      totalAmount,\n      callbackUrl\n    );\n  }\n\n  async startStream({ streamId }: { streamId: string }) {\n    const res = await this.contract.start_stream(\n      { stream_id: streamId },\n      GAS_SIZE,\n      '1'\n    );\n\n    return res;\n  }\n\n  async pauseStream({ streamId }: { streamId: string }) {\n    const res = await this.contract.pause_stream(\n      { stream_id: streamId },\n      GAS_SIZE,\n      '1'\n    );\n\n    return res;\n  }\n\n  async stopStream({ streamId }: { streamId: string }) {\n    const res = await this.contract.stop_stream(\n      { stream_id: streamId },\n      GAS_SIZE,\n      '1'\n    );\n    return res;\n  }\n\n  async withdraw({ streamIds }: { streamIds: string[] }) {\n    const res = await this.contract.withdraw(\n      { stream_ids: streamIds },\n      GAS_SIZE,\n      '1'\n    );\n    return res;\n  }\n}\n","import * as nearAPI from \"near-api-js\";\nimport { Account } from \"near-api-js\";\n\nimport { env } from \"shared/config\";\n\nimport { RoketoContract } from './interfaces/contracts';\nimport { RoketoContractApi } from \"./contract-api\";\nimport { RoketoAccount, RoketoDao } from \"./interfaces/entities\";\n\nexport interface Roketo {\n  api: RoketoContractApi;\n  dao: RoketoDao;\n  account: RoketoAccount;\n}\n\nexport async function initRoketo({\n  account,\n}: {\n  account: Account;\n}): Promise<Roketo> {\n  const contract = new nearAPI.Contract(account, env.ROKETO_CONTRACT_NAME, {\n    viewMethods: [\n      \"get_stats\",\n      \"get_dao\",\n      \"get_token\",\n      \"get_stream\",\n      \"get_account\",\n      \"get_account_incoming_streams\",\n      \"get_account_outgoing_streams\",\n      \"get_account_ft\",\n    ],\n    changeMethods: [\n      \"start_stream\",\n      \"pause_stream\",\n      \"stop_stream\",\n      \"withdraw\",\n    ],\n  }) as RoketoContract;\n\n  // create high level api for outside usage\n  const api = new RoketoContractApi({\n    contract,\n    account,\n  });\n\n  const roketoUserAccountPromise = api.getAccount();\n\n  const daoPromise = api.getDao();\n\n  const [\n    roketoUserAccount,\n    dao\n  ] = await Promise.all([\n    roketoUserAccountPromise,\n    daoPromise,\n  ]);\n\n  return {\n    api,\n    dao,\n    account: roketoUserAccount,\n  };\n}\n","\nexport const SECONDS_IN_MINUTE = 60;\nexport const SECONDS_IN_HOUR = SECONDS_IN_MINUTE * 60;\nexport const SECONDS_IN_DAY = SECONDS_IN_HOUR * 24;\nexport const SECONDS_IN_WEEK = SECONDS_IN_DAY * 7;\nexport const SECONDS_IN_MONTH = SECONDS_IN_WEEK * 4;\nexport const SECONDS_IN_YEAR = SECONDS_IN_MONTH * 12;\n\nexport enum TimePeriod {\n  Second = 'second',\n  Minute = 'minute',\n  Hour = 'hour',\n  Day = 'day',\n}\n\nexport const TIME_PERIOD_SIGNS = {\n  [TimePeriod.Hour]: '/h',\n  [TimePeriod.Day]: '/d',\n  [TimePeriod.Minute]: '/m',\n  [TimePeriod.Second]: '/s',\n}\n\nexport const testIds = {\n  signInButton: 'signInButton',\n  availableForWithdrawalCaption: 'availableForWithdrawalCaption',\n  withdrawAllButton: 'withdrawAllButton',\n  createStreamButton: 'createStreamButton',\n  withdrawButton: 'withdrawButton',\n  streamControlsDropdown: 'streamControlsDropdown',\n  streamStartButton: 'streamStartButton',\n  streamPauseButton: 'streamPauseButton',\n  streamStopButton: 'streamStopButton',\n  createStreamReceiverInput: 'createStreamReceiverInput',\n  createStreamAmountInput: 'createStreamAmountInput',\n  createStreamMonthsInput: 'createStreamMonthsInput',\n  createStreamDaysInput: 'createStreamDaysInput',\n  createStreamHoursInput: 'createStreamHoursInput',\n  createStreamMinutesInput: 'createStreamMinutesInput',\n  createStreamCommentInput: 'createStreamCommentInput',\n  createStreamAutostartCheckbox: 'createStreamAutostartCheckbox',\n  createStreamCancelButton: 'createStreamCancelButton',\n  createStreamSubmitButton: 'createStreamSubmitButton',\n  openNotificationsButton: 'openNotificationsButton',\n  notificationElement: 'notificationElement',\n  notificationPrimaryCaption: 'notificationPrimaryCaption',\n  notificationSecondaryCaption: 'notificationSecondaryCaption',\n} as const;\n\nconst testIdsKeys = Object.keys(testIds) as Array<keyof typeof testIds>;\n\nexport const testSelectors = testIdsKeys.reduce(\n  (selectors, key) => ({ ...selectors, [key]: `[data-testid=\"${testIds[key]}\"]` }),\n  {} as Record<keyof typeof testIds, string>\n);\n","import {\n  ServerConfiguration,\n  AuthApi,\n  UsersApi,\n  NotificationsApi,\n  createConfiguration,\n  LoginDto,\n} from '@roketo/api-client';\nimport {WalletConnection} from 'near-api-js';\n\nimport {env} from 'shared/config';\nimport {createNearInstance} from './near';\n\nconst serverConfig = {baseServer: new ServerConfiguration(env.WEB_API_URL, {})};\n\nclass TokenProvider {\n  private initialized: boolean = false;\n\n  private token: null | Promise<string> = null;\n\n  private readonly authApiClient = new AuthApi(\n    createConfiguration({...serverConfig}),\n  );\n\n  getToken() {\n    if (!this.token) {\n      this.token = this.getRefreshedToken();\n    }\n\n    return this.token;\n  }\n\n  refreshToken() {\n    this.token = this.getRefreshedToken();\n  }\n\n  private async getRefreshedToken(): Promise<string> {\n    try {\n      const {accountId} = await this.getAccountIdAndNear();\n\n      const ROKETO_API_ACCESS_TOKEN_KEY_PREFIX = 'roketoApiAccessToken';\n\n      const key = `${ROKETO_API_ACCESS_TOKEN_KEY_PREFIX}:${accountId}`;\n\n      if (!this.initialized) {\n        this.initialized = true;\n\n        const savedToken = localStorage[key] || null;\n\n        if (savedToken && !this.containsUnicode(savedToken)) {\n          return savedToken;\n        }\n      }\n\n      delete localStorage[key];\n\n      const loginParams = await this.generateLoginParams();\n\n      const {accessToken} = await this.authApiClient.login(loginParams);\n\n      localStorage[key] = accessToken;\n\n      return accessToken;\n    } catch (e) {\n      // TODO: Think of better handling of failing login.\n      this.token = null;\n\n      throw e;\n    }\n  }\n\n  private async getAccountIdAndNear() {\n    const near = await createNearInstance();\n    const walletConnection = new WalletConnection(\n      near,\n      env.ROKETO_CONTRACT_NAME,\n    );\n    const accountId = walletConnection.getAccountId();\n\n    return {accountId, near};\n  }\n\n  private async generateLoginParams(): Promise<LoginDto> {\n    const {accountId, near} = await this.getAccountIdAndNear();\n\n    const keyPair = await near.config.keyStore.getKey(\n      near.config.networkId,\n      accountId,\n    );\n\n    const timestamp = Date.now();\n\n    const {signature: Uint8Signature} = keyPair.sign(\n      new TextEncoder().encode(String(timestamp)),\n    ); // TODO: Polyfill TextEncoder?\n\n    const signature: number[] = Array.from(Uint8Signature);\n\n    return {\n      accountId,\n      timestamp,\n      signature,\n    };\n  }\n\n  private containsUnicode(token: string) {\n    return token !== encodeURIComponent(token);\n  }\n}\n\nexport const tokenProvider = new TokenProvider();\n\nconst apiConfig = createConfiguration({\n  ...serverConfig,\n  authMethods: {bearer: {tokenProvider}},\n});\n\nexport const usersApiClient = new UsersApi(apiConfig);\n\nexport const notificationsApiClient = new NotificationsApi(apiConfig);\n","\nimport numbro from 'numbro';\n\nimport {\n  SECONDS_IN_YEAR,\n  SECONDS_IN_MONTH,\n  SECONDS_IN_WEEK,\n  SECONDS_IN_DAY,\n  SECONDS_IN_HOUR,\n  SECONDS_IN_MINUTE\n} from 'shared/constants';\n\nexport class TokenFormatter {\n  tokenDecimals: number;\n\n  MP: number;\n\n  constructor(tokenDecimals: number ) {\n    this.tokenDecimals = tokenDecimals;\n    this.MP = 10 ** tokenDecimals;\n  }\n\n  static formatSmartly(value: number) {\n    if (value === 0) {\n      return '0';\n    }\n\n    if (value < 0.001) {\n      return '<0.001';\n    }\n\n    return numbro(value).format({\n     mantissa: 3,\n     trimMantissa: true,\n     optionalMantissa: true,\n     average: true,\n   })\n  }\n\n  // for display purposes, converts from yocto values\n  amount(amount: number | string) {\n    const value = numbro(amount).divide(this.MP).value();\n\n    const formatted = numbro(value).format({\n      mantissa: 3,\n      trimMantissa: true,\n      optionalMantissa: true,\n      average: true,\n    });\n\n    if (value === 0) {\n      return '0';\n    }\n\n    if (amount !== 0 && value < 0.001) {\n      return '<0.001';\n    }\n\n    return formatted;\n  }\n\n  toYocto(value: number | string) {\n    return numbro(value)\n      .multiply(this.MP)\n      .format({ mantissa: 0 });\n  }\n\n  toHumanReadableValue(amount: number | string, decimals: number = 0): string {\n    return numbro(amount)\n      .divide(this.MP)\n      .format({\n        mantissa: decimals,\n        trimMantissa: true,\n        optionalMantissa: true,\n      });\n  }\n\n  // tries to find the best interval for display\n  // to avoid 0.0000000000000000000000000009839248 tokens per sec\n  tokensPerMeaningfulPeriod(tokensPerSec: number | string) {\n    const multipliers = [\n      1,\n      SECONDS_IN_MINUTE,\n      SECONDS_IN_HOUR,\n      SECONDS_IN_DAY,\n      SECONDS_IN_WEEK,\n      SECONDS_IN_MONTH,\n      SECONDS_IN_YEAR,\n    ];\n    const unit = {\n      1: 'second',\n      [SECONDS_IN_MINUTE]: 'minute',\n      [SECONDS_IN_HOUR]: 'hour',\n      [SECONDS_IN_DAY]: 'day',\n      [SECONDS_IN_WEEK]: 'week',\n      [SECONDS_IN_MONTH]: 'month',\n      [SECONDS_IN_YEAR]: 'year',\n    };\n\n    const firstGoodLookingMultiplier = multipliers.find((multiplier) => {\n      const value = numbro(tokensPerSec)\n        .multiply(multiplier)\n        .divide(this.MP)\n        .value();\n\n      const isOk = value > 0.1;\n      return isOk;\n    }) || SECONDS_IN_YEAR;\n\n    const value = numbro(tokensPerSec)\n      .multiply(firstGoodLookingMultiplier)\n      .divide(this.MP)\n      .value();\n\n    return {\n      formattedValue: TokenFormatter.formatSmartly(value),\n      unit: unit[firstGoodLookingMultiplier],\n    };\n  }\n}\n","import { env } from \"shared/config\";\n\nexport function isWNearTokenId(tokenAccountId: string) {\n  return tokenAccountId === env.WNEAR_ID;\n}","import { Account, Contract, utils, transactions } from 'near-api-js';\nimport BigNumber from 'bignumber.js';\nimport JSONbig from 'json-bigint';\n\nimport { isWNearTokenId } from 'shared/helpers/isWNearTokenId';\nimport { env } from 'shared/config';\n\nimport { TokenMetadata } from './types';\nimport { RoketoCreateRequest } from '../roketo/interfaces/entities';\n\ntype FTContract = Contract & {\n  ft_balance_of: (options: { account_id: string }) => Promise<string>;\n  storage_balance_of: (options: { account_id: string }) => Promise<{ total: string, available: string }>;\n  ft_metadata: () => Promise<TokenMetadata>;\n  near_deposit: (options: { }, gas: string, deposit: string) => Promise<never>;\n  storage_deposit: (options: { }, gas: string, deposit: string | null) => Promise<never>;\n  ft_transfer_call: ({ args, gas, callbackUrl, amount }: { args: any, gas: string, callbackUrl: string, amount: number }) => Promise<never>\n};\n\nexport class FTApi {\n  contract: FTContract;\n\n  tokenAccountId: string;\n\n  account: Account;\n\n  constructor(account: Account, tokenAccountId: string) {\n    this.tokenAccountId = tokenAccountId;\n    this.account = account;\n\n    this.contract = new Contract(account, tokenAccountId, {\n      viewMethods: ['ft_balance_of', 'ft_metadata', 'storage_balance_of'],\n      changeMethods: ['ft_transfer_call', 'storage_deposit', 'near_deposit'],\n    }) as FTContract;\n  }\n\n  async getMetadata(): Promise<TokenMetadata> {\n    const res = await this.contract.ft_metadata();\n\n    return res;\n  }\n\n  async getBalance(): Promise<string> {\n    if (!this.account.accountId) {\n      return '0';\n    }\n\n    const res = await this.contract.ft_balance_of({ account_id: this.account.accountId });\n\n    return res;\n  }\n\n  async getIsRegistered(accountId: string): Promise<boolean> {\n    const res = await this.contract.storage_balance_of({ account_id: accountId });\n\n    return res && res.total !== '0';\n  }\n\n  transfer = async (payload: RoketoCreateRequest, amount: string, callbackUrl?: string) => {\n    const [ isRegisteredSender, isRegisteredReceiver ] = await Promise.all([\n      this.getIsRegistered(payload.owner_id),\n      this.getIsRegistered(payload.receiver_id)\n    ]);\n\n    const actions = [\n      transactions.functionCall(\n        'ft_transfer_call',\n        {\n          receiver_id: env.ROKETO_CONTRACT_NAME,\n          amount: new BigNumber(amount).toFixed(),\n          memo: 'Roketo transfer',\n          msg: JSONbig.stringify({\n            Create: {\n              request: payload\n            }\n          }),\n        },\n        '100000000000000',\n        1\n      )\n    ];\n\n    let depositSumm = new BigNumber(0);\n    const depositAmmount =  utils.format.parseNearAmount('0.00125') as string; // account creation costs 0.00125 NEAR for storage\n\n    if (!isRegisteredSender) {\n      actions.unshift(\n        transactions.functionCall(\n          \"storage_deposit\",\n          { account_id: payload.owner_id },\n          '30000000000000',\n          depositAmmount\n        )\n      )\n\n      depositSumm = depositSumm.plus(depositAmmount);\n    }\n\n    if (!isRegisteredReceiver) {\n      actions.unshift(\n        transactions.functionCall(\n          \"storage_deposit\",\n          { account_id: payload.receiver_id },\n          '30000000000000',\n          depositAmmount\n        )\n      )\n\n      depositSumm = depositSumm.plus(depositAmmount);\n    }\n\n    if(isWNearTokenId(this.tokenAccountId)) {\n      actions.unshift(\n        transactions.functionCall(\n          \"near_deposit\",\n          {},\n          '30000000000000',\n          new BigNumber(amount).plus(depositSumm).toFixed()\n        ),\n      )\n    }\n\n    // @ts-ignore\n    const res = this.account.signAndSendTransaction({\n      receiverId: this.tokenAccountId,\n      walletCallbackUrl: callbackUrl,\n      actions\n    });\n\n    return res;\n  }\n}\n","import { Account } from 'near-api-js';\n\nimport { RoketoDao, RoketoTokenMeta } from 'shared/api/roketo/interfaces/entities';\n\nimport { TokenMetadata } from './types';\nimport { TokenFormatter } from './token-formatter';\nimport { FTApi } from './ft-api';\n\nexport type RichToken = {\n  api: FTApi;\n  roketoMeta: RoketoTokenMeta;\n  formatter: TokenFormatter;\n  meta: TokenMetadata;\n  balance: string;\n};\n\nexport type RichTokens = {\n  [tokenAccountId: string]: RichToken,\n}\n\ntype InitFRProps = {\n  account: Account;\n  tokens: RoketoDao['tokens'];\n}\n\nexport async function initFT({ account, tokens }: InitFRProps) {\n  const richTokens: RichTokens = {};\n\n  await Promise.all(Object.keys(tokens).map(async (tokenAccountId: string) => {\n    const api = new FTApi(account, tokenAccountId);\n    const [ meta, balance ] = await Promise.all([\n      api.getMetadata(),\n      api.getBalance(),\n    ])\n    const formatter = new TokenFormatter(meta.decimals);\n\n    richTokens[tokenAccountId] = {\n      api,\n      formatter,\n      roketoMeta: tokens[tokenAccountId],\n      meta,\n      balance\n    };\n  }));\n\n  return richTokens;\n}\n","const NEAR_MULTIPLIER = 10 ** 24;\nconst DAI_MULTIPLIER = 10 ** 18;\n\nexport const TOKEN_MULTIPLIER_MAP = {\n  // TestNet\n  'wrap.testnet': NEAR_MULTIPLIER,\n  'dai.fakes.testnet': DAI_MULTIPLIER,\n\n  // MainNet\n  'wrap.near': NEAR_MULTIPLIER,\n  'dai.bridge.near': DAI_MULTIPLIER,\n};\n\nexport const CONTRACT_VIEW_METHODS_LIST = [\n  'get_assets',\n  'get_asset',\n  'get_price_data',\n];\nexport const CONTRACT_CHANGE_METHODS_LIST = [];\n","import numbro from 'numbro';\nimport * as nearAPI from 'near-api-js';\n\nimport {env} from 'shared/config';\n\nimport {TokenAccountId, TokenMultiplierMap, TokenPriceCollection, TokenPriceRaw} from './interfaces/entites';\nimport {PriceOracleContract} from './interfaces/contract';\nimport {CONTRACT_CHANGE_METHODS_LIST, CONTRACT_VIEW_METHODS_LIST, TOKEN_MULTIPLIER_MAP,} from './constants';\n\nexport interface PriceOracle {\n  getPriceInUsd: (tokenId: TokenAccountId, amount: number | string, shownDecimals?: number) => string,\n}\n\nconst convertRawPriceToTokenMap = (\n  tokenPrices: TokenPriceRaw[], relyingSourceOracleId: string\n): TokenPriceCollection => {\n  const priceTokenMap = tokenPrices.reduce((accumulatorMap, priceToken) => {\n    const [tokenId, {reports}] = priceToken;\n\n    const desiredSourceOracle = reports.find(\n      ({oracle_id}) => oracle_id === relyingSourceOracleId\n    );\n    if (!desiredSourceOracle) {\n      return accumulatorMap;\n    }\n\n    return {\n      ...accumulatorMap,\n      [tokenId]: desiredSourceOracle.price,\n    };\n  }, {});\n\n  return priceTokenMap;\n};\n\n\n/**\n * 5 NEAR = 5 * 10**24 \"wrap.near\"\n * 50 DAI = 50 * 10**18 \"dai.bridge.near\"\n *\n * Price NEAR { multiplier: 1000, decimals: 26 }\n * 5 NEAR in USD = 5 * 10**24 * 1000 / 10**(26 - 18) = 50 * 10**18\n * Price DAI { multiplier: 101, decimals: 20 }\n * 50 DAI in USD = 50 * 10**18 * 101 / 10**(20 - 18) = 505 * 10**17\n *\n * more: https://github.com/NearDeFi/price-oracle/blob/c2a10765a629dd013eeaa0f49d5631cbc0470b76/src/utils.rs#L18\n */\nconst convertTokenToUsdFactory = (\n  priceTokenMap: TokenPriceCollection,\n  tokenToMultiplierMap: TokenMultiplierMap,\n) => (\n  tokenAccountId: TokenAccountId,\n  amount: number | string,\n  shownDecimals: number = 3\n) => {\n  const tokenPrice = priceTokenMap[tokenAccountId];\n  const tokenMultiplier = tokenToMultiplierMap[tokenAccountId];\n\n  if (!tokenPrice || !tokenMultiplier) {\n    return '0';\n  }\n\n  const {multiplier, decimals} = tokenPrice;\n\n  return numbro(amount)\n    .multiply(tokenMultiplier)\n    .multiply(Number(multiplier))\n    .divide(10 ** decimals)\n    .format({\n      mantissa: shownDecimals,\n      trimMantissa: true,\n    });\n};\n\nexport const initPriceOracle = async (\n  {account}: {account: nearAPI.ConnectedWalletAccount}\n): Promise<PriceOracle> => {\n  const priceOracleContract = new nearAPI.Contract(account, env.PRICE_ORACLE_CONTRACT_NAME, {\n    viewMethods: CONTRACT_VIEW_METHODS_LIST,\n    changeMethods: CONTRACT_CHANGE_METHODS_LIST,\n  }) as PriceOracleContract;\n\n  const rawAssets = await priceOracleContract.get_assets({});\n  const tokenMap = convertRawPriceToTokenMap(rawAssets, env.PRICE_ORACLE_SOURCE_ID);\n\n  const getPriceInUsd = convertTokenToUsdFactory(tokenMap, TOKEN_MULTIPLIER_MAP);\n\n  return {\n    getPriceInUsd,\n  };\n};\n","import {createStore, createEffect, createEvent, sample, attach} from 'effector';\nimport {ConnectedWalletAccount, Near, WalletConnection} from 'near-api-js';\nimport type {Notification} from '@roketo/api-client';\n\nimport {env} from 'shared/config';\nimport {createNearInstance, getNearAuth, NearAuth} from 'shared/api/near';\nimport {initRoketo, Roketo} from 'shared/api/roketo';\nimport {\n  tokenProvider,\n  usersApiClient,\n  notificationsApiClient,\n} from 'shared/api/roketo-client';\nimport type {RoketoStream} from 'shared/api/roketo/interfaces/entities';\nimport {initFT, RichTokens} from 'shared/api/ft';\nimport {initPriceOracle, PriceOracle} from 'shared/api/price-oracle';\n\nasync function retry<T>(cb: () => Promise<T>) {\n  const retryCount = 3;\n  let error: unknown;\n  for (let i = 0; i <= retryCount; i += 1) {\n    try {\n      if (i > 0) {\n        // eslint-disable-next-line no-await-in-loop\n        await tokenProvider.refreshToken();\n      }\n      // eslint-disable-next-line no-await-in-loop\n      return await cb();\n    } catch (err: any) {\n      if (!err.message.startsWith('HTTP-Code: 401')) throw err;\n      error = err;\n    }\n  }\n  throw error;\n}\n\nexport const initWallets = createEvent();\n\nexport const $nearWallet = createStore<null | {near: Near; auth: NearAuth}>(\n  null,\n);\nexport const $roketoWallet = createStore<null | {\n  roketo: Roketo;\n  tokens: RichTokens;\n}>(null);\nexport const $tokens = createStore<RichTokens>({});\nexport const $priceOracle = createStore<PriceOracle>({\n  getPriceInUsd: () => '0',\n});\nexport const $accountStreams = createStore<{\n  inputs: RoketoStream[];\n  outputs: RoketoStream[];\n  streamsLoaded: boolean;\n}>({\n  inputs: [],\n  outputs: [],\n  streamsLoaded: false,\n});\n\nexport const $isSignedIn = $nearWallet.map(\n  (wallet) => wallet?.auth.signedIn ?? false,\n);\n\nexport const $accountId = $nearWallet.map(\n  (wallet) => wallet?.auth.accountId ?? null,\n);\n\nexport const $user = createStore<{name: string | null; email: string | null}>({\n  name: null,\n  email: null,\n});\n\nexport const $notifications = createStore<Notification[]>([]);\n\n// eslint-disable-next-line arrow-body-style\nconst getUserFx = createEffect(async (accountId: string) => {\n  return retry(() => usersApiClient.findOne(accountId));\n});\n\n// eslint-disable-next-line arrow-body-style\nconst getNotificationsFx = createEffect(async () => {\n  return retry(() => notificationsApiClient.findAll());\n});\n\nexport const updateUserFx = attach({\n  source: $accountId,\n  async effect(accountId, {name, email}: {name: string; email: string}) {\n    if (!accountId) return;\n    await usersApiClient.update(accountId, {name, email});\n  },\n});\n\nexport const lastCreatedStreamUpdated = createEvent<string>();\n\nconst createNearWalletFx = createEffect(async () => {\n  const near = await createNearInstance();\n  const auth = await getNearAuth(\n    new WalletConnection(near, env.ROKETO_CONTRACT_NAME),\n  );\n  return {near, auth};\n});\nconst createRoketoWalletFx = createEffect(\n  async (account: ConnectedWalletAccount) => {\n    const roketo = await initRoketo({account});\n    const tokens = await initFT({\n      account,\n      tokens: roketo.dao.tokens,\n    });\n    return {roketo, tokens};\n  },\n);\nexport const $appLoading = createStore(true);\nconst createPriceOracleFx = createEffect((account: ConnectedWalletAccount) =>\n  initPriceOracle({account}),\n);\nconst requestAccountStreamsFx = createEffect(async (roketo: Roketo) => {\n  const [inputs, outputs] = await Promise.all([\n    roketo.api.getAccountIncomingStreams({from: 0, limit: 100}),\n    roketo.api.getAccountOutgoingStreams({from: 0, limit: 100}),\n  ]);\n  return {inputs, outputs};\n});\nconst streamsRevalidationTimerFx = createEffect(\n  () =>\n    new Promise<void>((rs) => {\n      setTimeout(rs, 30000);\n    }),\n);\nsample({\n  clock: $roketoWallet,\n  filter: Boolean,\n  fn: (wallet) => wallet.roketo.account.last_created_stream,\n  target: lastCreatedStreamUpdated,\n});\n/**\n * when roketo wallet becomes available or revalidation timer ends\n * start revalidation timer again\n * */\nsample({\n  clock: [createRoketoWalletFx.doneData, streamsRevalidationTimerFx.doneData],\n  target: streamsRevalidationTimerFx,\n});\n/**\n * when last_created_stream is changed or revalidation timer ends\n * read roketo wallet\n * check whether it exists\n * extract Roketo object from it\n * and start requesting account streams with it\n * */\nsample({\n  clock: [lastCreatedStreamUpdated, streamsRevalidationTimerFx.doneData],\n  source: $roketoWallet,\n  filter: Boolean,\n  fn: (wallet) => wallet.roketo,\n  target: requestAccountStreamsFx,\n});\n/**\n * when account streams successfully requested\n * save them to store $accountStreams\n */\nsample({\n  clock: requestAccountStreamsFx.doneData,\n  fn: ({inputs, outputs}) => ({\n    inputs,\n    outputs,\n    streamsLoaded: true,\n  }),\n  target: $accountStreams,\n});\n\n/** when account id is exists, request user info and notifications for it */\nsample({\n  clock: $accountId,\n  filter: Boolean,\n  target: [getUserFx, getNotificationsFx],\n});\n\nsample({\n  clock: [getUserFx.doneData, updateUserFx.done.map(({params}) => params)],\n  target: $user,\n});\nsample({\n  clock: getNotificationsFx.doneData,\n  target: $notifications,\n});\n/** clear user when there is no account id */\nsample({\n  clock: $accountId,\n  filter: (id: string | null): id is null => !id,\n  fn: () => ({name: null, email: null}),\n  target: $user,\n});\n/** clear notifications when there is no account id */\nsample({\n  clock: $accountId,\n  filter: (id: string | null): id is null => !id,\n  fn: () => [],\n  target: $notifications,\n});\n\nsample({\n  clock: initWallets,\n  target: createNearWalletFx,\n});\nsample({\n  clock: createNearWalletFx.doneData,\n  fn: ({auth}) => auth.account,\n  target: [createRoketoWalletFx, createPriceOracleFx],\n});\nsample({\n  clock: createNearWalletFx.doneData,\n  target: $nearWallet,\n});\nsample({\n  clock: createRoketoWalletFx.doneData,\n  target: $roketoWallet,\n});\nsample({\n  clock: createRoketoWalletFx.doneData,\n  fn: ({tokens}) => tokens,\n  target: $tokens,\n});\n/**\n * when price oracle is initialized allow app to consume it from $priceOracle store\n */\nsample({\n  clock: createPriceOracleFx.doneData,\n  target: $priceOracle,\n});\nsample({\n  clock: [createRoketoWalletFx.finally],\n  fn: () => false,\n  target: $appLoading,\n});\n","export type Route = {\n  path: string,\n  title: String,\n}\n\nexport const ROUTES_MAP = {\n  root: {\n    path: '/',\n  },\n  authorize: {\n    path: '/authorize',\n    title: 'Authorize',\n  },\n  streams: {\n    path: '/streams',\n    title: 'Streams',\n  },\n  stream: {\n    path: '/streams/:id',\n    title: 'Stream'\n  },\n};\n\nexport function getStreamLink(streamId: string | undefined) {\n  return `${window.location.origin}/#/streams/${streamId}`;\n}\n","import React from 'react';\n\nimport { ColoredLogo } from './ColoredLogo';\nimport { BlackLogo } from './BlackLogo';\n\nexport enum DisplayType {\n  COLORED = 'colored',\n  CURRENT_COLOR = 'current-color',\n}\n\nconst DISPLAY_TYPE_TO_LOGO_MAP = {\n  [DisplayType.COLORED]: ColoredLogo,\n  [DisplayType.CURRENT_COLOR]: BlackLogo,\n};\n\ntype Props = {\n  type?: DisplayType,\n  className?: string,\n}\n\nexport const Logo = (props: Props) => {\n  const {\n    type = DisplayType.COLORED,\n    className,\n  } = props;\n\n  const ChosenLogo = DISPLAY_TYPE_TO_LOGO_MAP[type];\n\n  return (\n    <ChosenLogo className={className} />\n  );\n};\n","import React from 'react';\nimport {Link} from 'react-router-dom';\nimport cn from 'classnames';\n\nimport styles from './styles.module.scss';\n\nexport enum ButtonType {\n  button = 'button',\n  submit = 'submit',\n}\n\nexport enum DisplayMode {\n  primary = 'primary',\n  simple = 'simple',\n  action = 'action',\n  invisible = 'invisible',\n}\n\ntype Props = {\n  type?: ButtonType\n  displayMode?: DisplayMode,\n  disabled?: boolean,\n  link?: string,\n  className?: string,\n  children?: React.ReactNode;\n  onClick?: (event: any) => void;\n  testId?: string;\n}\n\nexport const Button = ({\n  type = ButtonType.button,\n  displayMode = DisplayMode.action,\n  disabled = false,\n  link,\n  children,\n  className,\n  onClick,\n  testId,\n  ...restTooltipProps\n}: Props) => {\n  const buttonClassName = cn(\n    styles.root,\n    {\n      [styles.primary]: displayMode === DisplayMode.primary,\n      [styles.action]: displayMode === DisplayMode.action,\n      [styles.simple]: displayMode === DisplayMode.simple,\n    },\n    className\n  );\n\n  const button = (\n    <button\n      // eslint-disable-next-line react/button-has-type\n      type={type}\n      className={buttonClassName}\n      onClick={onClick}\n      disabled={disabled}\n      {...restTooltipProps}\n      data-testid={testId}\n    >\n      {children}\n    </button>\n  );\n\n  if (link) {\n    return (\n      <Link to={link}>\n        {button}\n      </Link>\n    );\n  }\n\n  return button;\n};\n","export function ColoredLogo({ className }: { className?: string }) {\n  return (\n    <svg width=\"85\" height=\"37\" viewBox=\"0 0 85 37\" fill=\"none\" className={className}>\n      <path\n        d=\"M27.2243 21.6559L25.1382 26.3574C24.9976 26.6743 25.3083 27.0039 25.6314 26.8807L33.2506 23.9755C37.4638 22.3691 42.9334 16.8281 42.9334 13.7051C42.9334 10.8974 37.5108 4.89742 33.3857 3.5349L22.7464 0.0207055C22.3964 -0.0949031 22.0975 0.297465 22.3004 0.606068L24.4608 3.89078C24.7026 4.2583 24.4683 4.75193 24.0316 4.79531L11.5321 6.03692C11.1728 6.07261 11.0519 6.5378 11.3481 6.74504L14.751 9.12589C15.0895 9.36266 15.0825 9.86755 14.7377 10.0948L9.62698 13.4638C9.35407 13.6437 9.03165 13.7328 8.70543 13.7185L0.406475 13.3549C-0.00343963 13.337 -0.157883 13.8858 0.200859 14.0857L9.40222 19.2108C9.74603 19.4023 10.1494 19.456 10.5311 19.361L14.6051 18.3475C15.1342 18.2159 15.6933 18.3718 16.0787 18.7586L19.1812 21.8717C19.5854 22.2774 20.179 22.4277 20.7267 22.2631L26.291 20.5912C26.9277 20.3999 27.4946 21.0466 27.2243 21.6559Z\"\n        fill=\"url(#paint0_linear_25_2458)\"/>\n      <path\n        d=\"M40.6818 26.4196V36.3357C40.6818 36.6675 40.9498 36.9364 41.2804 36.9364H51.0314C51.362 36.9364 51.63 36.6675 51.63 36.3357V26.4213C51.63 26.0896 51.898 25.8207 52.2286 25.8207L64.6597 25.8207C64.8659 25.8207 65.0576 25.9271 65.167 26.1025L71.793 36.7182C71.9025 36.8935 72.0942 37 72.3004 37H84.4004C84.8768 37 85.1623 36.4688 84.9006 36.0694L76.5735 23.3575C76.5713 23.3541 76.5701 23.3502 76.5701 23.3462C76.5701 23.3349 76.5793 23.3257 76.5905 23.3256C80.5584 23.293 84.2732 19.6259 84.2732 13.0961C84.2732 5.84535 77.8859 1.84441 73.0585 1.84397L73.0559 1.84319V1.82211C73.0559 1.81792 73.0525 1.81451 73.0483 1.81451H41.2804C41.036 1.81451 40.8258 1.96149 40.7328 2.17217C41.1621 5.93024 44.6468 10.0091 52.2641 10.0091L67.8871 10.0098C69.5984 10.0098 71.8625 11.4284 71.8625 13.9989C71.8625 16.3234 70.5333 17.6246 69.1201 17.6254L52.2641 17.6254V17.6315C43.9975 17.6315 40.5981 22.4353 40.6889 26.4196H40.6818Z\"\n        fill=\"#2B313B\"/>\n      <defs>\n        <linearGradient id=\"paint0_linear_25_2458\" x1=\"1.29563\" y1=\"14.7557\" x2=\"38.3082\" y2=\"14.3339\"\n                        gradientUnits=\"userSpaceOnUse\">\n          <stop offset=\"0\" stopColor=\"#E61A11\"/>\n          <stop offset=\"0.554808\" stopColor=\"#E9712E\"/>\n          <stop offset=\"1\" stopColor=\"#FFD231\"/>\n        </linearGradient>\n      </defs>\n    </svg>\n  );\n}\n","export function BlackLogo({ className }: { className?: string }) {\n  return (\n    <svg viewBox=\"0 0 57 25\" fill=\"none\" className={className}>\n      <path\n        d=\"M17.9487 14.2217L16.5734 17.3093C16.4807 17.5174 16.6855 17.7338 16.8986 17.6529L21.9219 15.7451C24.6995 14.6901 28.3056 11.0512 28.3056 9.00033C28.3056 7.15649 24.7306 3.2162 22.0109 2.32141L14.9965 0.0135976C14.7657 -0.0623242 14.5687 0.195349 14.7025 0.398013L16.1268 2.55513C16.2862 2.79648 16.1317 3.12066 15.8438 3.14914L7.60302 3.96452C7.36611 3.98797 7.2864 4.29346 7.48169 4.42956L9.72523 5.99309C9.94834 6.14858 9.94376 6.48015 9.71643 6.62942L6.34698 8.84184C6.16706 8.95998 5.95449 9.01851 5.73941 9.00912L0.267985 8.77036C-0.00226772 8.75857 -0.104091 9.11902 0.132424 9.25024L6.1988 12.616C6.42547 12.7418 6.6914 12.777 6.94303 12.7147L9.629 12.049C9.97782 11.9626 10.3465 12.065 10.6006 12.319L12.646 14.3634C12.9125 14.6298 13.3038 14.7286 13.6649 14.6205L17.3334 13.5225C17.7532 13.3969 18.127 13.8216 17.9487 14.2217Z\"\n        fill=\"currentColor\"/>\n      <path\n        d=\"M26.8203 17.3502V23.8622C26.8203 24.0801 26.997 24.2567 27.215 24.2567H33.6438C33.8617 24.2567 34.0384 24.0801 34.0384 23.8622V17.3513C34.0384 17.1334 34.2151 16.9568 34.4331 16.9568L42.6288 16.9568C42.7647 16.9568 42.8911 17.0267 42.9632 17.1419L47.3317 24.1134C47.4039 24.2285 47.5302 24.2984 47.6662 24.2984H55.6437C55.9577 24.2984 56.1459 23.9496 55.9734 23.6873L50.4834 15.3392C50.482 15.337 50.4812 15.3344 50.4812 15.3318C50.4812 15.3244 50.4872 15.3184 50.4946 15.3183C53.1107 15.2969 55.5598 12.8886 55.5598 8.60041C55.5598 3.83876 51.3486 1.21128 48.166 1.211L48.1643 1.21048V1.19664C48.1643 1.19388 48.162 1.19165 48.1593 1.19165H27.215C27.0538 1.19165 26.9152 1.28817 26.8539 1.42653C27.137 3.89451 29.4344 6.57314 34.4564 6.57314L44.7565 6.5736C45.8848 6.5736 47.3775 7.50521 47.3775 9.19332C47.3775 10.7199 46.5012 11.5744 45.5694 11.5749L34.4564 11.5749V11.5789C29.0064 11.5789 26.7651 14.7336 26.825 17.3502H26.8203Z\"\n        fill=\"currentColor\"/>\n    </svg>\n  );\n}\n","import React from 'react';\nimport cn from 'classnames';\n\nimport styles from './styles.module.scss';\n\ntype LayoutProps = {\n  children?: React.ReactNode,\n  className?: string,\n}\n\nexport const Layout = ({ children, className }: LayoutProps) => (\n  <div className={cn(styles.layout, className)}>\n    {children}\n  </div>\n);\n","import React from 'react';\n\ntype Props = {\n  className?: string,\n}\n\nexport const LogoutIcon = ({className}: Props) => (\n  <svg className={className} width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\">\n    <path d=\"M7.09 12.59L8.5 14L13.5 9L8.5 4L7.09 5.41L9.67 8H0V10H9.67L7.09 12.59ZM16 0H2C0.89 0 0 0.9 0 2V6H2V2H16V16H2V12H0V16C0 17.1 0.89 18 2 18H16C17.1 18 18 17.1 18 16V2C18 0.9 17.1 0 16 0Z\" fill=\"currentColor\"/>\n  </svg>\n);\n","import {useStore} from 'effector-react';\n\nimport {$isSignedIn, $nearWallet} from 'services/wallet';\n\nimport { Button } from '@ui/components/Button';\nimport {LogoutIcon} from '@ui/icons/LogOut';\n\nimport { testIds } from 'shared/constants';\n\nimport styles from './index.module.scss';\n\nexport const Authorization = () => {\n  const nearWallet = useStore($nearWallet);\n  const signedIn = useStore($isSignedIn)\n\n  if (!signedIn) {\n    return (\n      <Button onClick={nearWallet?.auth.login} className={styles.root} testId={testIds.signInButton}>\n        <span className={styles.name}>Sign in with NEAR Wallet</span>\n        <LogoutIcon />\n      </Button>\n    )\n  }\n\n  return (\n    <button type='button' onClick={nearWallet?.auth.logout} className={styles.logoutButton}>\n      <LogoutIcon />\n    </button>\n  );\n};\n\n","import { useEffect, useState } from 'react';\n\nconst getMatches = (query: string): boolean => window?.matchMedia(query).matches ?? false;\n\nexport function useMediaQuery(query: string): boolean {\n  const [matches, setMatches] = useState<boolean>(() => getMatches(query));\n\n\n  useEffect(() => {\n    const matchMedia = window.matchMedia(query);\n\n    function handleChange() {\n      setMatches(getMatches(query));\n    }\n\n    // Triggered at the first client-side load and if query changes\n    handleChange();\n\n    // Listen matchMedia\n    if (matchMedia.addListener) {\n      matchMedia.addListener(handleChange);\n    } else {\n      matchMedia.addEventListener('change', handleChange);\n    }\n\n    return () => {\n      if (matchMedia.removeListener) {\n        matchMedia.removeListener(handleChange);\n      } else {\n        matchMedia.removeEventListener('change', handleChange);\n      }\n    };\n  }, [query, setMatches]);\n\n  return matches;\n}\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\n\ntype Props = {\n  children?: React.ReactNode,\n  className?: string,\n\n  onClick?: () => void;\n  to: string,\n}\n\nconst NavigationLink = (props: Props) => {\n  const {\n    to,\n    className,\n    children,\n    onClick,\n  } = props;\n\n  return (\n    <Link\n      to={to}\n      className={className}\n      onClick={onClick}\n    >\n      {children}\n    </Link>\n  );\n};\n\nexport default NavigationLink;\n","import {useStore} from 'effector-react';\nimport {$nearWallet, $priceOracle} from 'services/wallet';\nimport { isWNearTokenId } from 'shared/helpers/isWNearTokenId';\nimport { useToken } from 'shared/hooks/useToken';\n\nexport enum DisplayMode {\n  USD = 'USD',\n  CRYPTO = 'CRYPTO',\n  BOTH = 'BOTH',\n}\n\ntype BalanceProps = {\n  tokenAccountId: string,\n  className?: string,\n  // Display balance in USD or in Crypto currency\n  mode?: DisplayMode,\n}\n\nexport function Balance({ tokenAccountId, className, mode = DisplayMode.CRYPTO }: BalanceProps) {\n  const priceOracle = useStore($priceOracle);\n  const nearWallet = useStore($nearWallet);\n  const { balance, formatter, meta } = useToken(tokenAccountId);\n\n  const actualCryptoBalance = isWNearTokenId(tokenAccountId)\n    ? nearWallet?.auth.balance?.available ?? '0'\n    : balance;\n  const displayedCryptoAmount = formatter.amount(actualCryptoBalance);\n\n  const showInUSD = mode === DisplayMode.USD;\n\n  const amount = showInUSD\n    ? priceOracle.getPriceInUsd(tokenAccountId, displayedCryptoAmount) ?? 0\n    : displayedCryptoAmount;\n  const currencySymbol = showInUSD ? '$' : meta.symbol;\n\n  return (\n    <span className={className}>\n      {`Balance: ${currencySymbol} ${amount}`}\n    </span>\n  );\n}\n","export enum StreamType {\n  income = 'total_incoming',\n  outcome = 'total_outgoing',\n}\n","import React from 'react';\n\nimport {Route} from \"shared/helpers/routing\";\n\nimport NavigationLink from \"shared/components/NavigationLink\";\n\nimport styles from './styles.module.scss';\n\ntype PageListProps = {\n  pageRoutes: Route[],\n}\n\nexport const PageList = (props: PageListProps) => {\n  const {pageRoutes = []} = props;\n\n  if (pageRoutes.length === 0) {\n    return null;\n  }\n\n  return (\n    <ul className={styles.root}>\n      {pageRoutes.map(route => (\n        <li className={styles.pageLink} key={route.path}>\n          <NavigationLink\n            to={route.path}\n          >\n            {route.title}\n          </NavigationLink>\n        </li>\n      ))}\n    </ul>\n  );\n};\n","import React from 'react';\n\ntype Props = {\n  width?: number,\n  height?: number,\n  className?: string,\n}\n\nconst DEFAULT_WIDTH = 17;\nconst DEFAULT_HEIGHT = 16;\n\nexport const WalletIcon = ({width = DEFAULT_WIDTH, height = DEFAULT_HEIGHT, className}: Props) => (\n    <div className={className}>\n      <svg width={width} height={height} viewBox=\"0 0 17 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"M15.5 4.06667V2.16667C15.5 1.25 14.75 0.5 13.8333 0.5H2.16667C1.24167 0.5 0.5 1.25 0.5 2.16667V13.8333C0.5 14.75 1.24167 15.5 2.16667 15.5H13.8333C14.75 15.5 15.5 14.75 15.5 13.8333V11.9333C15.9917 11.6417 16.3333 11.1167 16.3333 10.5V5.5C16.3333 4.88333 15.9917 4.35833 15.5 4.06667ZM14.6667 5.5V10.5H8.83333V5.5H14.6667ZM2.16667 13.8333V2.16667H13.8333V3.83333H8.83333C7.91667 3.83333 7.16667 4.58333 7.16667 5.5V10.5C7.16667 11.4167 7.91667 12.1667 8.83333 12.1667H13.8333V13.8333H2.16667Z\" fill=\"#626F84\"/>\n      </svg>\n    </div>\n  );\n","import React from 'react';\n\ntype Props = {\n  width?: number,\n  height?: number,\n  className?: string,\n}\n\nconst DEFAULT_WIDTH = 20;\nconst DEFAULT_HEIGHT = 16;\n\nexport const IncomeIcon = ({width = DEFAULT_WIDTH, height = DEFAULT_HEIGHT, className}: Props) => (\n  <div className={className}>\n    <svg width={width} height={height} viewBox=\"0 0 20 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path d=\"M17.5 0.508362H2.49998C1.58331 0.508362 0.833313 1.25836 0.833313 2.17503V5.50003H2.49998V2.15836H17.5V13.85H2.49998V10.5H0.833313V13.8417C0.833313 14.7584 1.58331 15.4917 2.49998 15.4917H17.5C18.4166 15.4917 19.1666 14.7584 19.1666 13.8417V2.17503C19.1666 1.25003 18.4166 0.508362 17.5 0.508362ZM9.16665 11.3334L12.5 8.00003L9.16665 4.6667V7.1667H0.833313V8.83336H9.16665V11.3334ZM17.5 0.508362H2.49998C1.58331 0.508362 0.833313 1.25836 0.833313 2.17503V5.50003H2.49998V2.15836H17.5V13.85H2.49998V10.5H0.833313V13.8417C0.833313 14.7584 1.58331 15.4917 2.49998 15.4917H17.5C18.4166 15.4917 19.1666 14.7584 19.1666 13.8417V2.17503C19.1666 1.25003 18.4166 0.508362 17.5 0.508362ZM9.16665 11.3334L12.5 8.00003L9.16665 4.6667V7.1667H0.833313V8.83336H9.16665V11.3334Z\" fill=\"#626F84\"/>\n    </svg>\n  </div>\n);\n","import React from 'react';\n\ntype Props = {\n  width?: number,\n  height?: number,\n  className?: string,\n}\n\nconst DEFAULT_WIDTH = 17;\nconst DEFAULT_HEIGHT = 16;\n\nexport const OutcomeIcon = ({width = DEFAULT_WIDTH, height = DEFAULT_HEIGHT, className}: Props) => (\n  <div className={className}>\n    <svg width={width} height={height} viewBox=\"0 0 17 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path d=\"M12.1667 12.1666L16.3333 7.99998L12.1667 3.83331L10.9917 5.00831L13.1417 7.16665H5.5V8.83331H13.1417L10.9917 10.9916L12.1667 12.1666Z\" fill=\"#626F84\"/>\n      <path d=\"M13.8333 13.8333H2.16667V2.16667H13.8333V3.83333H15.5V2.16667C15.5 1.25 14.7583 0.5 13.8333 0.5H2.16667C1.25 0.5 0.5 1.25 0.5 2.16667V13.8333C0.5 14.75 1.25 15.5 2.16667 15.5H13.8333C14.7583 15.5 15.5 14.75 15.5 13.8333V12.1667H13.8333V13.8333Z\" fill=\"#626F84\"/>\n    </svg>\n  </div>\n);\n","import {useStore} from 'effector-react';\nimport { isWNearTokenId } from 'shared/helpers/isWNearTokenId';\nimport {$tokens} from 'services/wallet';\n\nexport function useToken(tokenAccountId: string) {\n  const tokens = useStore($tokens);\n\n  if (isWNearTokenId(tokenAccountId)) {\n    tokens[tokenAccountId].meta.symbol = 'NEAR';\n  }\n\n  return tokens[tokenAccountId];\n}\n","import BigNumber from 'bignumber.js';\n\nimport {\n  SECONDS_IN_DAY, SECONDS_IN_HOUR, SECONDS_IN_MINUTE,\n  TimePeriod,\n} from 'shared/constants';\n\nexport const getBalancePerDesiredPeriod = (balancePerSecond: string, period: TimePeriod) => {\n  const balanceSpeedPerSecond = new BigNumber(balancePerSecond);\n\n  switch (period) {\n    case TimePeriod.Minute:\n      return balanceSpeedPerSecond.multipliedBy(SECONDS_IN_MINUTE);\n    case TimePeriod.Hour:\n      return balanceSpeedPerSecond.multipliedBy(SECONDS_IN_HOUR);\n    case TimePeriod.Day:\n      return balanceSpeedPerSecond.multipliedBy(SECONDS_IN_DAY);\n    default:\n      return balanceSpeedPerSecond;\n  }\n};\n","import {combine} from 'effector';\nimport {$roketoWallet, $priceOracle} from 'services/wallet';\nimport {TimePeriod} from 'shared/constants';\nimport {getBalancePerDesiredPeriod} from 'shared/helpers/speed';\nimport {StreamType} from './streamType';\n\nexport const $totalUSDAmountPerHour = combine(\n  $roketoWallet,\n  $priceOracle,\n  (wallet, priceOracle) => {\n    if (!wallet || !priceOracle)\n      return {\n        [StreamType.income]: 0,\n        [StreamType.outcome]: 0,\n      };\n    const {roketo, tokens} = wallet;\n    const {getPriceInUsd} = priceOracle;\n    function calculateTotalAmount(type: StreamType) {\n      const tokensBalanceMap = roketo.account[type];\n      const tokenAccountIds = Object.keys(tokensBalanceMap);\n\n      return tokenAccountIds.reduce((total, tokenAccountId) => {\n        const {formatter} = tokens[tokenAccountId];\n\n        const balancePerSec = tokensBalanceMap[tokenAccountId];\n\n        const balancePerDesiredPeriod = getBalancePerDesiredPeriod(\n          balancePerSec,\n          TimePeriod.Hour,\n        ).toFixed();\n        const formattedBalance = formatter.toHumanReadableValue(\n          balancePerDesiredPeriod,\n          3,\n        );\n\n        const usdAmount = getPriceInUsd(tokenAccountId, formattedBalance);\n\n        return total + Number(usdAmount);\n      }, 0);\n    }\n    return {\n      [StreamType.income]: calculateTotalAmount(StreamType.income),\n      [StreamType.outcome]: calculateTotalAmount(StreamType.income),\n    };\n  },\n);\n","import classNames from 'classnames';\nimport {useStoreMap} from 'effector-react';\n\nimport {env} from 'shared/config';\nimport {TIME_PERIOD_SIGNS, TimePeriod} from 'shared/constants';\n\nimport {WalletIcon} from '@ui/icons/Wallet';\nimport {IncomeIcon} from '@ui/icons/Income';\nimport {OutcomeIcon} from '@ui/icons/Outcome';\nimport {Balance, DisplayMode} from 'shared/components/Balance';\n\nimport {StreamType} from '../../streamType';\nimport {$totalUSDAmountPerHour} from '../../model';\n\nimport styles from './styles.module.scss';\n\nconst TokenAmountSpeed = ({\n  type,\n  className,\n}: {\n  type: StreamType;\n  className: string;\n}) => {\n  const totalAmountInUSD = useStoreMap({\n    store: $totalUSDAmountPerHour,\n    keys: [type],\n    fn: (totalAmounts) => totalAmounts[type],\n  });\n\n  return (\n    <div className={className}>\n      {`${totalAmountInUSD} $ ${TIME_PERIOD_SIGNS[TimePeriod.Hour]}`}\n    </div>\n  );\n};\n\nexport const FinancialActivity = ({className}: {className: string}) => (\n  <div className={classNames(styles.root, className)}>\n    {/* Total Outcome Speed */}\n    <div className={styles.wrapper}>\n      <OutcomeIcon />\n      <TokenAmountSpeed className={styles.balance} type={StreamType.outcome} />\n    </div>\n\n    {/* Total Income Speed */}\n    <div className={styles.wrapper}>\n      <IncomeIcon />\n      <TokenAmountSpeed className={styles.balance} type={StreamType.income} />\n    </div>\n\n    {/* Balance */}\n    <div className={styles.wrapper}>\n      <WalletIcon />\n      <Balance\n        className={styles.balance}\n        tokenAccountId={env.WNEAR_ID}\n        mode={DisplayMode.USD}\n      />\n    </div>\n  </div>\n);\n","import React from 'react';\n\ntype Props = {\n  width?: number,\n  height?: number,\n  className?: string,\n}\n\nconst DEFAULT_WIDTH = 8;\nconst DEFAULT_HEIGHT = 6;\n\nexport const ArrowDown = ({width = DEFAULT_WIDTH, height = DEFAULT_HEIGHT, className}: Props) => (\n  <div className={className}>\n    <svg width={width} height={height} viewBox=\"0 0 8 6\" fill=\"none\">\n      <path d=\"M7.06 0.726562L4 3.7799L0.94 0.726562L0 1.66656L4 5.66656L8 1.66656L7.06 0.726562Z\" fill=\"currentColor\" />\n    </svg>\n  </div>\n);\n","import React from 'react';\nimport cn from 'classnames';\n\nimport {ArrowDown} from '@ui/icons/ArrowDown';\n\nimport styles from './styles.module.scss';\n\ntype DropdownOpenerProps = {\n  opened?: boolean;\n  className?: string;\n  children: React.ReactNode;\n  onChange: (state: boolean) => void;\n  testId?: string;\n};\n\nexport function DropdownOpener({\n  opened,\n  className,\n  children,\n  onChange,\n  testId,\n  ...rest\n}: DropdownOpenerProps) {\n  const arrowClassName = cn(styles.arrow, {\n      [styles.rotate]: opened,\n    });\n\n  return (\n    <button\n      type=\"button\"\n      onClick={() => onChange(!opened)}\n      className={cn(styles.root, className)}\n      data-testid={testId}\n      {...rest}\n    >\n      {children}\n\n      <ArrowDown className={arrowClassName}/>\n    </button>\n  );\n}\n","import React from 'react';\n\nexport const useOutsideClick = (ref: React.RefObject<HTMLElement>, callback: () => void) => {\n  const handleClick = ({ target }: DocumentEventMap[\"click\"]) => {\n    if (ref.current && target instanceof HTMLElement && !ref.current.contains(target)) {\n      callback();\n    }\n  };\n\n  React.useEffect(() => {\n    document.addEventListener('click', handleClick);\n\n    return () => {\n      document.removeEventListener('click', handleClick);\n    };\n  });\n};\n","import React from 'react';\nimport classNames from 'classnames';\nimport { useOutsideClick } from 'shared/hooks/useOutsideClick';\n\nimport styles from './styles.module.scss';\n\ntype DropdownMenuProps = {\n  opened: boolean;\n  children: React.ReactNode;\n  className?: string;\n  onClose: () => void;\n};\n\nexport function DropdownMenu({\n  opened,\n  children,\n  className,\n  onClose\n}: DropdownMenuProps) {\n  const ref = React.useRef<HTMLInputElement | null>(null);\n\n  useOutsideClick(ref, () => {\n    if (opened) {\n      onClose();\n    }\n  });\n\n  return (\n    <div\n      ref={ref}\n      className={classNames(\n        styles.menu,\n        {[styles.hidden]: !opened},\n        className,\n      )}\n    >\n      {children}\n    </div>\n  );\n}\n\ntype DropdownMenuItemProps = {\n  children: React.ReactNode;\n  className?: string;\n};\n\nexport function DropdownMenuItem({ children, className, ...rest }: DropdownMenuItemProps) {\n  return (\n    <div className={className} {...rest}>\n      {children}\n    </div>\n  );\n}\n\nexport function DropdownMenuDivider() {\n  return <div className={styles.menuDivider} />;\n}\n","import React, {FC, InputHTMLAttributes} from 'react';\nimport cn from 'classnames'\n\nimport styles from './styles.module.scss';\n\ninterface InputProps extends InputHTMLAttributes<HTMLInputElement> {\n  hasError?: boolean,\n  className?: string,\n}\n\nexport const Input: FC<InputProps> = ({\n  className,\n  hasError = false,\n  ...rest\n}) => (\n  <input className={cn(styles.input, {[styles.error]: hasError}, className)}  {...rest} />\n);\n","import React from 'react';\nimport cn from 'classnames';\n\nimport styles from './styles.module.scss';\n\ntype FormFieldProps = {\n  children: React.ReactNode;\n\n  label?: React.ReactNode;\n  description?: React.ReactNode,\n\n  isRequired?: boolean,\n  error?: any;\n\n  className?: string;\n};\n\nexport const FormField = ({\n  children, isRequired = false, label, description, error, className, ...rest\n}: FormFieldProps) => (\n    <div className={cn(styles.root, className)} {...rest}>\n      {label &&\n        <label className={cn(styles.label, {[styles.required]: isRequired})}>{label}</label>\n      }\n\n      {children}\n\n      {description &&\n        <div className={styles.description}>{description}</div>\n      }\n\n      {error &&\n        <div className={styles.error}>{error}</div>\n      }\n    </div>\n  )\n","import React from 'react';\nimport cn from 'classnames';\n\nimport styles from './styles.module.scss';\n\ntype Props = {\n  wrapperClassName?: string,\n  spinnerClassName?: string,\n};\n\nexport const Spinner = ({wrapperClassName, spinnerClassName}: Props) => (\n  <div className={cn(styles.wrapper, wrapperClassName)}>\n    <div className={cn(styles.spinner, spinnerClassName)}/>\n  </div>\n);\n","import {useEffect, useRef, useState} from 'react';\nimport {useStore} from 'effector-react';\n\nimport {$user, updateUserFx} from 'services/wallet';\n\nimport { Button, ButtonType } from '@ui/components/Button';\nimport { Input } from '@ui/components/Input';\nimport {FormField} from '@ui/components/FormField';\nimport {Spinner} from '@ui/components/Spinner';\n\nimport styles from './index.module.scss';\n\nconst NAME_INPUT = \"nameInput\";\nconst EMAIL_INPUT = \"emailInput\";\n\nexport function ProfileForm() {\n  const user = useStore($user);\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const isMutating = useStore(updateUserFx.pending);\n\n  useEffect(() => {\n    setName(user.name ?? '');\n    setEmail(user.email ?? '');\n  }, [user]);\n\n  const formRef = useRef<HTMLFormElement | null>(null);\n\n  return (\n    <form\n      className={styles.profileForm}\n      onSubmit={e => {\n        e.preventDefault()\n        updateUserFx({\n          name: formRef.current?.[NAME_INPUT].value,\n          email: formRef.current?.[EMAIL_INPUT].value,\n        });\n      }}\n      ref={formRef}\n    >\n      {isMutating &&\n        <Spinner wrapperClassName={styles.loaderWrapper} />\n      }\n\n      <FormField\n        label='User name'\n      >\n        <Input\n          placeholder=\"Name\"\n          name={NAME_INPUT}\n          value={name}\n          onChange={(e) => setName(e.target.value)}\n          disabled={isMutating}\n        />\n      </FormField>\n\n      <FormField\n        label='Email'\n        description='Email address is used for notifications'\n      >\n        <Input\n          placeholder=\"Email\"\n          name={EMAIL_INPUT}\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n          disabled={isMutating}\n        />\n      </FormField>\n\n      <Button\n        type={ButtonType.submit}\n        disabled={isMutating}\n      >\n        Save\n      </Button>\n    </form>\n  );\n}\n","import {useState} from 'react';\nimport {useStore} from 'effector-react';\n\nimport {$accountId, $user} from 'services/wallet';\nimport {DropdownOpener} from 'shared/kit/DropdownOpener';\nimport {DropdownMenu} from 'shared/kit/DropdownMenu';\nimport {env} from 'shared/config';\n\nimport {ProfileForm} from './ProfileForm';\n\nimport styles from './index.module.scss';\n\nexport const Profile = () => {\n  const [isDropdownOpened, setIsDropdownOpened] = useState(false);\n  const [needFallback, setNeedFallback] = useState(false);\n\n  const accountId = useStore($accountId);\n\n  const {name, email} = useStore($user);\n\n  return (\n    <div className={styles.profile}>\n      <DropdownOpener\n        onChange={setIsDropdownOpened}\n        className={styles.dropdownOpener}\n        opened={isDropdownOpened}\n      >\n        <span className={styles.name}>{name || accountId}</span>\n\n        {needFallback || !accountId ? (\n          <svg className={styles.avatar} />\n        ) : (\n          <img\n            className={styles.avatar}\n            src={`${env.WEB_API_URL}/users/${accountId}/avatar?email=${email}`}\n            alt=\"\"\n            onError={() => setNeedFallback(true)}\n          />\n        )}\n      </DropdownOpener>\n\n      <DropdownMenu\n        opened={isDropdownOpened}\n        onClose={() => setIsDropdownOpened(false)}\n        className={styles.dropdownMenu}\n      >\n        <ProfileForm />\n      </DropdownMenu>\n    </div>\n  );\n};\n","import {useStore} from 'effector-react'\nimport { RoketoStream } from 'shared/api/roketo/interfaces/entities';\nimport {$accountId} from 'services/wallet';\n\nexport const STREAM_DIRECTION = {\n  IN: 'in',\n  OUT: 'out',\n};\n\ntype StreamDirectionKeyType = keyof typeof STREAM_DIRECTION;\n\nexport function useGetStreamDirection(stream: RoketoStream): typeof STREAM_DIRECTION[StreamDirectionKeyType] | null {\n  const accountId = useStore($accountId)\n\n  if (stream.receiver_id === accountId) {\n    return STREAM_DIRECTION.IN;\n  }\n\n  if (stream.owner_id === accountId) {\n    return STREAM_DIRECTION.OUT;\n  }\n\n  return null;\n}\n","import BigNumber from 'bignumber.js';\nimport { formatDuration, intervalToDuration } from 'date-fns';\n\nimport { getAvailableToWithdraw, isDead, isIdling } from 'shared/api/roketo/helpers';\nimport type { RoketoStream } from 'shared/api/roketo/interfaces/entities';\nimport { SECONDS_IN_YEAR } from 'shared/constants';\nimport { shortEnLocale } from 'shared/helpers/date';\n\nfunction calculateEndInfo(stream: RoketoStream, balance: BigNumber) {\n  /**\n   * if stream is not started yet or paused right now\n   * then there is no way to calculate stream end time\n   * */\n  if (isIdling(stream)) return null\n  \n  const tokensPerMs = new BigNumber(stream.tokens_per_sec).dividedBy(1000)\n  const lastActionTime = stream.last_action / 1000000\n\n  const timeToCompleteEntireStream = balance.dividedBy(tokensPerMs).toNumber()\n  /**\n   * if this stream is active but 100% complete then it will be a time in the past\n   * as well as in the case of \"Finished\" stream\n   * othewise this stream is still working and this time will be in the future\n   */\n  return lastActionTime + timeToCompleteEntireStream\n}\n\nexport function streamViewData(stream: RoketoStream, withExtrapolation: boolean = true) {\n  const MAX_SEC = SECONDS_IN_YEAR * 1000;\n\n  const availableToWithdraw = withExtrapolation ? getAvailableToWithdraw(stream) : new BigNumber(0);\n\n  const secondsLeft = BigNumber.minimum(\n    MAX_SEC,\n    new BigNumber(stream.balance)\n      .minus(availableToWithdraw)\n      .dividedBy(stream.tokens_per_sec)\n      .toFixed()\n  ).toNumber();\n\n  const duration = intervalToDuration({ start: 0, end: secondsLeft * 1000 });\n\n  if (duration.days || duration.weeks || duration.months || duration.years) {\n    duration.seconds = 0;\n  }\n\n  const timeLeft = formatDuration(duration, { locale: shortEnLocale });\n\n  const balance = new BigNumber(stream.balance)\n  // progress bar calculations\n  const full = balance.plus(stream.tokens_total_withdrawn);\n  const withdrawn = new BigNumber(stream.tokens_total_withdrawn);\n  const streamed = withdrawn.plus(availableToWithdraw);\n\n  const left = full.minus(streamed);\n  const progresses = [\n    withdrawn.dividedBy(full).toNumber(),\n    streamed.dividedBy(full).toNumber()\n  ];\n\n  const percentages = {\n    left: full.minus(streamed).dividedBy(full).toNumber(),\n    streamed: streamed.dividedBy(full).toNumber(),\n    withdrawn: withdrawn.dividedBy(full).toNumber(),\n    available: availableToWithdraw.dividedBy(full).toNumber(),\n  };\n\n  \n  return {\n    progresses,\n    isDead: isDead(stream),\n    percentages,\n    timeLeft,\n    streamEndInfo: calculateEndInfo(stream, balance),\n    progress: {\n      full: full.toFixed(),\n      withdrawn: withdrawn.toFixed(),\n      streamed: streamed.toFixed(),\n      left: left.toFixed(),\n      available: availableToWithdraw.toFixed(),\n    },\n  };\n}\n","type BellIconProps = {\n  className?: string;\n  withBadge: boolean;\n};\n\nexport function BellIcon({ className, withBadge }: BellIconProps) {\n  return (\n    <svg\n      className={className}\n      width=\"24\"\n      height=\"24\"\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n    >\n      <path\n        d=\"M15.375 17.5556H8.625M15.375 17.5556H21L19.4194 15.9944C19.2071 15.7848 19.0387 15.5358 18.9239 15.2619C18.809 14.9879 18.75 14.6943 18.75 14.3978V10.8889C18.7502 9.50993 18.3175 8.16482 17.5116 7.03876C16.7057 5.91271 15.5662 5.06107 14.25 4.60111V4.22222C14.25 3.63285 14.0129 3.06762 13.591 2.65087C13.169 2.23413 12.5967 2 12 2C11.4033 2 10.831 2.23413 10.409 2.65087C9.98705 3.06762 9.75 3.63285 9.75 4.22222V4.60111C7.12875 5.51667 5.25 7.98667 5.25 10.8889V14.3989C5.25 14.9967 5.00925 15.5711 4.58063 15.9944L3 17.5556H8.625H15.375ZM15.375 17.5556V18.6667C15.375 19.5507 15.0194 20.3986 14.3865 21.0237C13.7536 21.6488 12.8951 22 12 22C11.1049 22 10.2464 21.6488 9.61351 21.0237C8.98058 20.3986 8.625 19.5507 8.625 18.6667V17.5556H15.375Z\"\n        stroke={withBadge ? '#3E65F2' : '#2B313B'}\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n      {withBadge && <circle cx=\"19\" cy=\"5\" r=\"5\" fill=\"#D80A1F\" stroke=\"white\" strokeWidth=\"2\" />}\n    </svg>\n  );\n}\n\n","export function FinishIcon({ className }: { className: string }) {\n  return (\n    <svg className={className} width=\"44\" height=\"44\" viewBox=\"0 0 44 44\" fill=\"none\">\n      <rect width=\"44\" height=\"44\" rx=\"22\" fill=\"#F1F6FE\"/>\n      <path d=\"M22 14.9167V19.5M14.5 29.5V26.1667V29.5ZM14.5 26.1667V16.1667C14.5 15.7246 14.6756 15.3007 14.9882 14.9882C15.3007 14.6756 15.7246 14.5 16.1667 14.5H21.5833L22.4167 15.3333H29.5L27 20.3333L29.5 25.3333H22.4167L21.5833 24.5H16.1667C15.7246 24.5 15.3007 24.6756 14.9882 24.9882C14.6756 25.3007 14.5 25.7246 14.5 26.1667V26.1667Z\" stroke=\"#3E65F2\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    </svg>\n  );\n}\n","export function StartIcon({ className }: { className: string }) {\n  return (\n    <svg className={className} width=\"44\" height=\"44\" viewBox=\"0 0 44 44\" fill=\"none\">\n      <rect width=\"44\" height=\"44\" rx=\"22\" fill=\"#F2FCF5\"/>\n      <path\n        d=\"M28.3128 19.7147L20.9824 15.0357C20.6368 14.815 20.235 14.6883 19.82 14.6692C19.405 14.6501 18.9923 14.7393 18.6262 14.9273C18.26 15.1153 17.9541 15.3949 17.7411 15.7364C17.5281 16.0779 17.4161 16.4683 17.417 16.866V26.2217C17.4169 26.6191 17.5296 27.0089 17.7429 27.3498C17.9562 27.6906 18.2622 27.9697 18.6282 28.1571C18.9942 28.3446 19.4065 28.4334 19.8211 28.4141C20.2358 28.3948 20.6371 28.2682 20.9824 28.0477L28.3128 23.3687C28.6268 23.1683 28.8843 22.8968 29.0624 22.5783C29.2405 22.2597 29.3337 21.904 29.3337 21.5428C29.3337 21.1815 29.2405 20.8258 29.0624 20.5073C28.8843 20.1888 28.6268 19.9173 28.3128 19.7169V19.7147Z\"\n        stroke=\"#1EBA52\" strokeWidth=\"2.75\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    </svg>\n  );\n}\n","export function PauseIcon({ className }: { className: string }) {\n  return (\n    <svg className={className} width=\"44\" height=\"44\" viewBox=\"0 0 44 44\" fill=\"none\">\n      <rect width=\"44\" height=\"44\" rx=\"22\" fill=\"#FFF7EE\"/>\n      <path d=\"M18.333 16.5V27.5M25.6663 16.5V27.5\" stroke=\"#FF8C19\" strokeWidth=\"3.66667\" strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"/>\n    </svg>\n  );\n}\n","export function BangIcon({ className }: { className: string }) {\n  return (\n    <svg width=\"44\" height=\"44\" viewBox=\"0 0 44 44\" fill=\"none\" className={className}>\n      <rect width=\"44\" height=\"44\" rx=\"22\" fill=\"#FFEEF0\"/>\n      <path\n        d=\"M20.5833 24.3833H23.9167V13.425H20.5833V24.3833ZM22.125 31.3C22.6806 31.3 23.1319 31.1264 23.4792 30.7792C23.8264 30.4319 24 29.9806 24 29.425C24 28.8972 23.8264 28.4458 23.4792 28.0708C23.1319 27.6958 22.6806 27.5083 22.125 27.5083C21.5694 27.5083 21.1181 27.6958 20.7708 28.0708C20.4236 28.4458 20.25 28.8972 20.25 29.425C20.25 29.9806 20.4236 30.4319 20.7708 30.7792C21.1181 31.1264 21.5694 31.3 22.125 31.3Z\"\n        fill=\"#D80A1F\"/>\n    </svg>\n  );\n}\n","import {attach} from 'effector';\nimport {notificationsApiClient} from 'shared/api/roketo-client';\nimport {$notifications} from 'services/wallet';\n\nexport const markAllReadFx = attach({\n  source: $notifications,\n  async effect(notifications) {\n    if (notifications.length !== 0) {\n      await notificationsApiClient.markAllRead();\n    }\n  },\n});\n","import React, { useCallback, useState } from 'react';\nimport classNames from 'classnames';\nimport {useStore} from 'effector-react';\nimport { isToday, isYesterday, isSameDay, format } from 'date-fns';\nimport { generatePath, Link } from 'react-router-dom';\nimport type {NotificationTypeEnum as NotificationType, Notification} from '@roketo/api-client'\n\nimport {$tokens, $notifications} from 'services/wallet';\n\nimport { ROUTES_MAP } from 'shared/helpers/routing';\nimport { DropdownOpener } from 'shared/kit/DropdownOpener';\nimport { DropdownMenu } from 'shared/kit/DropdownMenu';\nimport { STREAM_DIRECTION, useGetStreamDirection } from 'shared/hooks/useGetStreamDirection';\nimport { streamViewData } from 'features/roketo-resource';\nimport { useMediaQuery } from 'shared/hooks/useMatchQuery';\nimport { testIds } from 'shared/constants';\n\nimport styles from './styles.module.scss';\n\nimport { BellIcon } from './BellIcon';\nimport { FinishIcon } from './FinishIcon';\nimport { StartIcon } from './StartIcon';\nimport { PauseIcon } from './PauseIcon';\nimport { BangIcon } from './BangIcon';\nimport { markAllReadFx } from './model';\n\nfunction NotificationIcon({ type }: { type: NotificationType }) {\n  const IconComponent = (() => {\n    switch (type) {\n      case 'StreamStarted': return StartIcon;\n      case 'StreamPaused': return PauseIcon;\n      case 'StreamFinished': return FinishIcon;\n      case 'StreamIsDue': return BangIcon;\n      case 'StreamContinued': return StartIcon;\n      default: throw new Error('This should never happen');\n    }\n  })();\n\n  return <IconComponent className={styles.icon} />;\n}\n\nconst WITHOUT_EXTRAPOLATION = false;\n\nfunction PrimaryText({ children }: { children: React.ReactNode }) {\n  return (\n    <div className={styles.primaryText} data-testid={testIds.notificationPrimaryCaption}>{children}</div>\n  );\n}\n\nfunction SecondaryText({ children }: { children: React.ReactNode }) {\n  return (\n    <div className={styles.secondaryText} data-testid={testIds.notificationSecondaryCaption}>{children}</div>\n  );\n}\n\nfunction NotificationBody({ notification: { type, payload: stream } }: { notification: Notification }) {\n  const tokens = useStore($tokens);\n  const direction = useGetStreamDirection(stream);\n  const { progress: { full, streamed, left }, timeLeft } = streamViewData(stream, WITHOUT_EXTRAPOLATION);\n\n  const { meta: { symbol }, formatter } = tokens[stream.token_account_id];\n\n  switch (type) {\n    case 'StreamStarted': return (\n      <div className={styles.notificationBody}>\n        <PrimaryText>\n          {\n            direction === STREAM_DIRECTION.IN\n              ? <>{stream.owner_id} <strong>started</strong> a stream for you to receive.</>\n              : <>Youve successfully <strong>started</strong> a stream to {stream.receiver_id}.</>\n          }\n        </PrimaryText>\n        <SecondaryText>Total streaming amount: <strong>{formatter.amount(full)}&nbsp;{symbol}</strong></SecondaryText>\n        <SecondaryText>Stream duration: <strong>{timeLeft}</strong></SecondaryText>\n      </div>\n    );\n    case 'StreamPaused': return (\n      <div className={styles.notificationBody}>\n        <PrimaryText>The stream {direction === STREAM_DIRECTION.IN ? `from ${stream.owner_id}` : `to ${stream.receiver_id}`} is <strong>paused</strong>.</PrimaryText>\n\n        <SecondaryText>Already streamed: <strong>{formatter.amount(streamed)}&nbsp;{symbol}</strong></SecondaryText>\n        <SecondaryText>Amount left: <strong>{formatter.amount(left)}&nbsp;{symbol}</strong></SecondaryText>\n      </div>\n    );\n    case 'StreamFinished': return (\n      <div className={styles.notificationBody}>\n        <PrimaryText>The stream {direction === STREAM_DIRECTION.IN ? `from ${stream.owner_id}` : `to ${stream.receiver_id}`} has <strong>ended</strong>.</PrimaryText>\n        <SecondaryText>Total amount streamed: <strong>{formatter.amount(full)}&nbsp;{symbol}</strong></SecondaryText>\n      </div>\n    );\n    case 'StreamIsDue': return (\n      <div className={styles.notificationBody}>\n        <PrimaryText>The stream from {stream.owner_id} is <strong>due</strong>.</PrimaryText>\n        <SecondaryText>Available for withdrawal: <strong>{formatter.amount(left)}&nbsp;{symbol}</strong></SecondaryText>\n      </div>\n    );\n    case 'StreamContinued': return (\n      <div className={styles.notificationBody}>\n        <PrimaryText>\n          {\n            direction === STREAM_DIRECTION.IN\n              ? <>{stream.owner_id} has <strong>continued</strong> the stream.</>\n              : <>The stream to {stream.receiver_id} was <strong>continued</strong>.</>\n          }\n        </PrimaryText>\n        <SecondaryText>Amount left: <strong>{formatter.amount(left)}&nbsp;{symbol}</strong></SecondaryText>\n        <SecondaryText>Time left: <strong>{timeLeft}</strong></SecondaryText>\n      </div>\n    );\n    default: throw new Error('This should never happen');\n  }\n}\n\nexport function Notifications() {\n  const compact = useMediaQuery('(max-width: 645px)');\n\n  const [isDropdownOpened, setIsDropdownOpened] = useState(false);\n  const notifications = useStore($notifications);\n\n  const closeDropdown = useCallback(() => {\n    setIsDropdownOpened(false);\n    markAllReadFx();\n  }, []);\n\n  const hasUnreadNotifications = notifications.some(({ isRead }) => !isRead) ?? false;\n\n  return (\n    <div className={styles.root}>\n      <DropdownOpener\n        onChange={setIsDropdownOpened}\n        className={styles.dropdownOpener}\n        opened={isDropdownOpened}\n        testId={testIds.openNotificationsButton}\n      >\n        <BellIcon withBadge={hasUnreadNotifications} />\n      </DropdownOpener>\n\n      <DropdownMenu\n        opened={isDropdownOpened}\n        onClose={closeDropdown}\n        className={classNames(styles.dropdownMenu, compact && styles.compact)}\n      >\n        <div className={styles.container}>\n          <header className={styles.header} >\n            Notifications\n          </header>\n\n          {notifications.length === 0 &&\n            <h3 className=\"text-3xl text-center my-12 mx-auto\">\n              Your notifications will be displayed here.\n            </h3>\n          }\n\n          {notifications.map((notification, index) => (\n            <React.Fragment key={notification.id}>\n              {index !== 0 && <div className={styles.divider} />}\n              {(index === 0 || !isSameDay(notifications[index - 1].createdAt, notification.createdAt)) &&\n                <div className={styles.date}>\n                  {isToday(notification.createdAt)\n                    ? 'Today'\n                    : isYesterday(notification.createdAt)\n                      ? 'Yesterday'\n                      : format(notification.createdAt, 'PP')\n                  }\n                </div>\n              }\n              <Link\n                to={generatePath(ROUTES_MAP.stream.path, { id: notification.payload.id })}\n                className={classNames(\n                  styles.notification,\n                  !notification.isRead && styles.unread\n                )}\n                onClick={closeDropdown}\n                data-testid={testIds.notificationElement}\n              >\n                <NotificationIcon type={notification.type} />\n                <NotificationBody notification={notification} />\n                <div className={styles.time}>{format(new Date(notification.createdAt), 'HH:mm')}</div>\n              </Link>\n            </React.Fragment>\n          ))}\n        </div>\n      </DropdownMenu>\n    </div>\n  );\n}\n","var _path, _path2, _path3;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgLogoTelegram(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"auto\",\n    height: \"auto\",\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8.14141 20.601C7.50192 20.601 7.61064 20.3595 7.39007 19.7506L5.50977 13.5625L19.9838 4.97559\",\n    fill: \"currentColor\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8.14062 20.6012C8.63406 20.6012 8.85199 20.3755 9.12749 20.1078L11.7591 17.5488L8.47649 15.5693\",\n    fill: \"#8E909C\"\n  })), _path3 || (_path3 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8.47667 15.5697L16.4308 21.4463C17.3386 21.9471 17.9935 21.6877 18.2197 20.6037L21.4574 5.34624C21.7888 4.01726 20.9508 3.41429 20.0824 3.80854L1.07041 11.1395C-0.227316 11.66 -0.219585 12.3841 0.833894 12.7066L5.71279 14.2295L17.008 7.10352C17.5412 6.78015 18.0307 6.95384 17.629 7.31043\",\n    fill: \"currentColor\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLogoTelegram);\nexport default __webpack_public_path__ + \"static/media/logo-telegram.edbc7186.svg\";\nexport { ForwardRef as ReactComponent };","import { Link } from 'react-router-dom';\nimport {useStore} from 'effector-react';\n\nimport {$isSignedIn} from 'services/wallet';\n\nimport {Logo} from '@ui/icons/Logo';\nimport {Layout} from '@ui/components/Layout';\nimport {Authorization} from 'features/authorization';\n\nimport {ROUTES_MAP} from 'shared/helpers/routing';\nimport { useMediaQuery } from 'shared/hooks/useMatchQuery';\n\nimport {PageList} from './ui/PagesList';\nimport {FinancialActivity} from './ui/FinancialActivity';\n\nimport { Profile } from '../profile';\nimport { Notifications } from '../notifications';\n\nimport styles from './styles.module.scss';\n\nconst ROUTES_TO_DISPLAY = [ROUTES_MAP.streams];\n\nexport const Header = () => {\n  const signedIn = useStore($isSignedIn)\n  const withSecondFloor = !useMediaQuery('(min-width: 1280px)');\n\n  return (\n    <>\n      <div className={styles.wrapper}>\n        <Layout className={styles.root}>\n\n          <div className={styles.left}>\n            <Link to=\"/\" className={styles.unshrinkable}>\n              <Logo className={styles.logo}/>\n            </Link>\n            {signedIn && <PageList pageRoutes={ROUTES_TO_DISPLAY} />}\n          </div>\n\n          <div className={styles.right}>\n            {signedIn && !withSecondFloor && <FinancialActivity className={styles.marginRight} />}\n            {signedIn && <Profile />}\n            {signedIn && !withSecondFloor && <Notifications />}\n            {!withSecondFloor && <Authorization />}\n          </div>\n        </Layout>\n      </div>\n      {signedIn && withSecondFloor && (\n        <div className={styles.secondWrapper}>\n          <Layout className={styles.secondRoot}>\n            <FinancialActivity className={styles.marginRight} />\n            <div className={styles.right}>\n              <Notifications />\n              <Authorization />\n            </div>\n          </Layout>\n        </div>\n      )}\n    </>\n  );\n};\n","import React from 'react';\nimport classNames from 'classnames';\nimport { useRouteMatch } from 'react-router-dom';\n\nimport { ROUTES_MAP } from 'shared/helpers/routing';\nimport {Logo} from '@ui/icons/Logo';\nimport { Header as FullHeader } from 'widgets/header/Header';\n\nimport styles from './styles.module.scss';\n\nfunction MinifiedHeader() {\n  return (\n    <div\n      className={classNames(\n        'py-4 px-6',\n        'absolute w-full pt-8',\n        'flex justify-center',\n      )}\n    >\n      <Logo className={styles.logo} />\n    </div>\n  );\n}\n\nexport function Header() {\n  const onAuthorizePage = useRouteMatch(ROUTES_MAP.authorize.path);\n\n  if (onAuthorizePage) {\n    return <MinifiedHeader />;\n  }\n\n  return <FullHeader />;\n}\n","import { Route } from 'react-router-dom';\n\n// A wrapper for <Route> that redirects to the login\n// screen if you're not yet authenticated.\n\ntype PrivateRouteProps = {\n  children: React.ReactNode;\n  allowed: boolean;\n  redirect: React.ReactNode;\n  path: string;\n  exact: boolean;\n}\n\nexport function PrivateRoute({\n  children,\n  allowed,\n  redirect,\n  path,\n  exact = false\n}: PrivateRouteProps) {\n  return (\n    <Route\n      exact={exact}\n      path={path}\n      render={() => (allowed ? children : redirect)}\n    />\n  );\n}\n","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgLogoTwitter(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"auto\",\n    height: \"auto\",\n    viewBox: \"0 0 24 22\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M7.57758 21.9092C16.5744 21.9092 21.4944 13.5154 21.4944 6.2365C21.4944 5.99809 21.4901 5.76075 21.4806 5.52449C22.4356 4.74696 23.2657 3.77667 23.9204 2.67212C23.044 3.11083 22.1009 3.40615 21.1115 3.53932C22.1214 2.85737 22.8966 1.77862 23.2624 0.492616C22.3174 1.12355 21.2708 1.58212 20.1565 1.8297C19.2639 0.759024 17.9932 0.0893555 16.5862 0.0893555C13.885 0.0893555 11.6946 2.55622 11.6946 5.59697C11.6946 6.02922 11.7376 6.44967 11.8215 6.85297C7.75628 6.62261 4.15156 4.4307 1.73908 1.09777C1.31902 1.91181 1.0768 2.8574 1.0768 3.86636C1.0768 5.77743 1.94032 7.46453 3.25344 8.4515C2.45096 8.42358 1.69712 8.1755 1.03824 7.76257C1.03752 7.78568 1.03752 7.80822 1.03752 7.83292C1.03752 10.5006 2.72352 12.7279 4.9616 13.2326C4.55059 13.3588 4.11816 13.4264 3.67184 13.4264C3.35715 13.4264 3.05056 13.3916 2.75256 13.3271C3.37526 15.5158 5.18096 17.1084 7.32176 17.1529C5.64768 18.6307 3.5388 19.5108 1.2468 19.5108C0.852482 19.5108 0.462934 19.4855 0.0800781 19.4345C2.2448 20.9971 4.8152 21.9089 7.57784 21.9089\",\n    fill: \"currentColor\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLogoTwitter);\nexport default __webpack_public_path__ + \"static/media/logo-twitter.a8d5d590.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\n\nimport {ReactComponent as Telegram} from './logo-telegram.svg';\n\ntype Props = {\n  className?: string,\n}\n\nexport const TelegramLogo = (props: Props) => {\n  const {\n    className,\n  } = props;\n\n  return (\n    <div className={className}>\n      <Telegram />\n    </div>\n  );\n}\n","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgLogoGit(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"auto\",\n    height: \"auto\",\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12.0001 0C5.3735 0 0 5.50144 0 12.2881C0 17.7173 3.43839 22.3234 8.2064 23.9482C8.80613 24.062 9.0263 23.6817 9.0263 23.3571C9.0263 23.0641 9.01518 22.0961 9.01001 21.0693C5.67157 21.8127 4.96712 19.6195 4.96712 19.6195C4.42125 18.1992 3.63473 17.8215 3.63473 17.8215C2.54596 17.0588 3.7168 17.0745 3.7168 17.0745C4.92181 17.1612 5.55632 18.3408 5.55632 18.3408C6.6266 20.2194 8.36359 19.6763 9.04836 19.3623C9.15607 18.5681 9.46706 18.026 9.81024 17.7191C7.14486 17.4084 4.34295 16.3548 4.34295 11.6463C4.34295 10.3047 4.81172 9.20855 5.57937 8.34801C5.45477 8.0385 5.04402 6.78869 5.69562 5.0961C5.69562 5.0961 6.70331 4.76584 8.9965 6.35568C9.95372 6.08341 10.9803 5.94687 12.0001 5.94219C13.0199 5.94687 14.0473 6.08341 15.0063 6.35568C17.2967 4.76584 18.303 5.0961 18.303 5.0961C18.9562 6.78869 18.5452 8.0385 18.4206 8.34801C19.1901 9.20855 19.6557 10.3047 19.6557 11.6463C19.6557 16.366 16.8484 17.4052 14.1762 17.7094C14.6067 18.0907 14.9902 18.8385 14.9902 19.985C14.9902 21.6291 14.9763 22.9524 14.9763 23.3571C14.9763 23.6841 15.1923 24.0673 15.8006 23.9466C20.566 22.32 24 17.7155 24 12.2881C24 5.50144 18.6273 0 12.0001 0ZM4.49443 17.5047C4.468 17.5657 4.3742 17.584 4.28876 17.5421C4.20172 17.502 4.15283 17.4188 4.18105 17.3575C4.20688 17.2947 4.30088 17.2772 4.38772 17.3193C4.47495 17.3594 4.52463 17.4434 4.49443 17.5047ZM5.0847 18.044C5.02747 18.0983 4.91559 18.0731 4.83968 17.9872C4.76119 17.9016 4.74648 17.787 4.80451 17.7318C4.86353 17.6775 4.97203 17.7029 5.05072 17.7886C5.12921 17.8753 5.14451 17.9891 5.0847 18.044ZM5.48965 18.734C5.41612 18.7863 5.2959 18.7373 5.22158 18.628C5.14805 18.5188 5.14805 18.3877 5.22317 18.3352C5.29769 18.2827 5.41612 18.3299 5.49144 18.4384C5.56476 18.5495 5.56476 18.6805 5.48965 18.734ZM6.1745 19.5332C6.10873 19.6075 5.96863 19.5876 5.86609 19.4862C5.76117 19.3871 5.73196 19.2465 5.79793 19.1722C5.8645 19.0978 6.00539 19.1187 6.10873 19.2193C6.21285 19.3181 6.24465 19.4598 6.1745 19.5332ZM7.05961 19.803C7.0306 19.8993 6.89567 19.943 6.75975 19.9021C6.62402 19.86 6.5352 19.7473 6.56262 19.65C6.59084 19.5531 6.72636 19.5076 6.86328 19.5513C6.9988 19.5932 7.08783 19.7052 7.05961 19.803ZM8.0669 19.9175C8.07028 20.0188 7.95502 20.1028 7.81235 20.1047C7.66887 20.1079 7.55282 20.0259 7.55123 19.9262C7.55123 19.8239 7.6639 19.7406 7.80738 19.7382C7.95006 19.7353 8.0669 19.8167 8.0669 19.9175ZM9.05645 19.8786C9.07354 19.9775 8.97438 20.0791 8.8327 20.1061C8.6934 20.1322 8.56443 20.0711 8.54674 19.973C8.52945 19.8717 8.6304 19.7702 8.7695 19.7439C8.91139 19.7187 9.03837 19.7781 9.05645 19.8786Z\",\n    fill: \"currentColor\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLogoGit);\nexport default __webpack_public_path__ + \"static/media/logo-git.675f7b74.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\n\nimport {ReactComponent as Twitter} from './logo-twitter.svg';\n\ntype Props = {\n  className?: string,\n}\n\nexport const TwitterLogo = (props: Props) => {\n  const {\n    className,\n  } = props;\n\n  return (\n    <div className={className}>\n      <Twitter />\n    </div>\n  );\n}\n","import React from 'react';\n\nimport {ReactComponent as Github} from './logo-git.svg';\n\ntype Props = {\n  className?: string,\n}\n\nexport const GithubLogo = (props: Props) => {\n  const {\n    className,\n  } = props;\n\n  return (\n    <div className={className}>\n      <Github />\n    </div>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/Privacy_policy.d5afb133.pdf\";","import React from 'react';\n\nimport {Layout} from '@ui/components/Layout';\nimport {DisplayType, Logo} from '@ui/icons/Logo';\nimport {TelegramLogo} from '@ui/icons/Telegram';\nimport {TwitterLogo} from '@ui/icons/Twitter';\nimport {GithubLogo} from '@ui/icons/Github';\n\n// @ts-ignore\nimport PrivacyPolicyDoc from './assets/Privacy_policy.pdf';\n\nimport styles from './styles.module.scss';\n\nexport const Footer = () => (\n  <footer className={styles.root}>\n    <Layout className={styles.layout}>\n      <section className={styles.section}>\n        <Logo className={styles.logo} type={DisplayType.CURRENT_COLOR}/>\n\n        <div className={styles.links}>\n          <a\n            href=\"https://www.roke.to/#page-top\"\n            target=\"_blank\" rel=\"noreferrer\"\n          >\n            About\n          </a>\n          <a\n            href=\"https://www.roke.to/#how-work\"\n            target=\"_blank\" rel=\"noreferrer\"\n          >\n            Features\n          </a>\n          <a\n            href=\"https://www.roke.to/#used-technologies\"\n            target=\"_blank\" rel=\"noreferrer\"\n          >\n            Docs\n          </a>\n          <a\n            href=\"https://www.roke.to/#team\"\n            target=\"_blank\" rel=\"noreferrer\"\n          >\n            Team\n          </a>\n          <a\n            href=\"https://www.roke.to/#blog\"\n            target=\"_blank\" rel=\"noreferrer\"\n          >\n            Blog\n          </a>\n          <a\n            href=\"https://kikimora-labs.notion.site/Jobs-68acb030fcac42a18ae7c62a56779d5b\"\n            target=\"_blank\" rel=\"noreferrer\"\n          >\n            Jobs\n          </a>\n        </div>\n      </section>\n\n      <section className={styles.section}>\n        <div className={styles.legal}>\n          <a\n            href={PrivacyPolicyDoc}\n            target=\"_blank\" rel=\"noreferrer\"\n          >\n            Privacy Policy\n          </a>\n\n          <a\n            href=\"https://uploads-ssl.webflow.com/6136222580031d054842f5d6/617993de0d09ef005611beac_Cookie_Policy_of_Roketo.pdf\"\n            target=\"_blank\" rel=\"noreferrer\"\n          >\n            Cookie Policy\n          </a>\n        </div>\n\n        <div className={styles.socials}>\n          <a\n            href=\"https://twitter.com/roketostream\"\n            target=\"_blank\" rel=\"noreferrer\"\n          >\n            <TwitterLogo/>\n          </a>\n          <a\n            href=\"https://t.me/roketochat\"\n            target=\"_blank\" rel=\"noreferrer\"\n          >\n            <TelegramLogo/>\n          </a>\n          <a\n            href=\"https://github.com/roke-to\"\n            target=\"_blank\" rel=\"noreferrer\"\n          >\n            <GithubLogo/>\n          </a>\n        </div>\n      </section>\n\n      <section className={styles.jurInfo}>\n        ROKETO LABS LTD\n        <br/>\n        Registered address: Intershore Chambers, Road Town, Tortola, British Virgin Islands\n        <br/>\n        Registration number: 2089289\n      </section>\n    </Layout>\n  </footer>\n);\n","import React from 'react';\nimport ReactModal from 'react-modal';\n\nimport styles from './styles.module.scss';\n\ntype Props = {\n  isOpen: boolean,\n  children?: React.ReactNode,\n\n  title?: string,\n  onCloseModal?: () => void,\n};\n\n// eslint-disable-next-line react/prefer-stateless-function\nexport const Modal = (props: Props) => {\n  const {\n    title,\n    children,\n    isOpen = true,\n    onCloseModal,\n  } = props;\n\n\n  return (\n    <ReactModal\n      isOpen={isOpen}\n      onRequestClose={onCloseModal}\n      className={styles.content}\n      overlayClassName={styles.overlay}\n      bodyOpenClassName={styles.bodyOverflowHidden}\n    >\n      <div>\n        {/* eslint-disable-next-line jsx-a11y/click-events-have-key-events,jsx-a11y/no-static-element-interactions */}\n        <span className={styles.close} onClick={onCloseModal}/>\n\n        <h2 className={styles.title}>{title}</h2>\n\n        <div className={styles.contentContainer}>\n          {children}\n        </div>\n      </div>\n    </ReactModal>\n  );\n};\n","import React from 'react';\nimport RCTooltip from 'rc-tooltip';\nimport cn from 'classnames';\nimport type { TooltipProps as RCTooltipProps } from 'rc-tooltip/lib/Tooltip';\nimport 'rc-tooltip/assets/bootstrap_white.css';\n\nimport styles from './styles.module.scss';\n\ntype TooltipProps = {\n  placement?: RCTooltipProps[\"placement\"];\n  children?: React.ReactElement;\n  overlay: RCTooltipProps[\"overlay\"];\n  align?: RCTooltipProps[\"align\"];\n  overlayClassName?: RCTooltipProps[\"overlayClassName\"];\n};\n\nexport function Tooltip({\n  placement = 'top',\n  children,\n  overlay,\n  align,\n  overlayClassName\n}: TooltipProps) {\n  return (\n    <RCTooltip\n      align={align}\n      placement={placement}\n      overlay={overlay}\n      overlayClassName={cn(styles.defaultOverlay, overlayClassName)}\n    >\n      {children || <span className={styles.defaultIcon}>?</span>}\n    </RCTooltip>\n  );\n}\n","import {useStoreMap} from 'effector-react';\nimport {$tokens} from 'services/wallet';\n\ntype NearTokenImageProps = {\n  className?: string;\n};\n\nfunction NearTokenImage(props: NearTokenImageProps) {\n  return (\n    <svg\n      version=\"1.0\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"20pt\"\n      height=\"20pt\"\n      viewBox=\"0 0 864.000000 864.000000\"\n      preserveAspectRatio=\"xMidYMid meet\"\n      {...props}\n    >\n      <g\n        transform=\"translate(0.000000,864.000000) scale(0.100000,-0.100000)\"\n        fill=\"#FFFFFF\"\n        stroke=\"none\"\n      >\n        <path d=\"M2490 6461 c-164 -53 -265 -156 -314 -320 -14 -49 -16 -226 -16 -1821 0 -1595 2 -1772 16 -1821 25 -85 62 -148 118 -205 179 -178 476 -178 650 0 30 30 249 347 519 749 518 772 502 742 438 799 -21 19 -42 28 -66 28 -40 0 -6 28 -555 -449 -283 -246 -411 -351 -425 -349 -20 3 -20 11 -20 1238 l0 1235 21 3 c16 2 286 -315 1376 -1621 746 -892 1372 -1637 1392 -1654 94 -83 187 -113 351 -113 169 0 275 39 371 134 56 57 93 120 118 205 14 49 16 226 16 1821 0 1595 -2 1772 -16 1821 -25 85 -62 148 -118 205 -179 178 -476 178 -650 0 -30 -30 -249 -347 -519 -749 -518 -772 -502 -742 -438 -799 21 -19 42 -28 66 -28 40 0 6 -28 555 449 283 246 411 351 425 349 20 -3 20 -11 20 -1238 l0 -1235 -21 -3 c-16 -2 -286 315 -1376 1621 -746 892 -1372 1637 -1392 1654 -95 85 -187 113 -356 112 -82 0 -131 -5 -170 -18z\" />\n      </g>\n    </svg>\n  );\n}\n\ntype FallbackTokenImageProps = {\n  className?: string;\n};\n\nfunction FallbackTokenImage(props: FallbackTokenImageProps) {\n  return (\n    <svg\n      version=\"1.0\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"20pt\"\n      height=\"20pt\"\n      viewBox=\"0 0 864.000000 864.000000\"\n      preserveAspectRatio=\"xMidYMid meet\"\n      {...props}\n    >\n      <g\n        transform=\"translate(0.000000,864.000000) scale(0.100000,-0.100000)\"\n        fill=\"#FFFFFF\"\n        stroke=\"none\"\n      >\n        <path d=\"M2490 6461 c-164 -53 -265 -156 -314 -320 -14 -49 -16 -226 -16 -1821 0 -1595 2 -1772 16 -1821 25 -85 62 -148 118 -205 179 -178 476 -178 650 0 30 30 249 347 519 749 518 772 502 742 438 799 -21 19 -42 28 -66 28 -40 0 -6 28 -555 -449 -283 -246 -411 -351 -425 -349 -20 3 -20 11 -20 1238 l0 1235 21 3 c16 2 286 -315 1376 -1621 746 -892 1372 -1637 1392 -1654 94 -83 187 -113 351 -113 169 0 275 39 371 134 56 57 93 120 118 205 14 49 16 226 16 1821 0 1595 -2 1772 -16 1821 -25 85 -62 148 -118 205 -179 178 -476 178 -650 0 -30 -30 -249 -347 -519 -749 -518 -772 -502 -742 -438 -799 21 -19 42 -28 66 -28 40 0 6 -28 555 449 283 246 411 351 425 349 20 -3 20 -11 20 -1238 l0 -1235 -21 -3 c-16 -2 -286 315 -1376 1621 -746 892 -1372 1637 -1392 1654 -95 85 -187 113 -356 112 -82 0 -131 -5 -170 -18z\" />\n      </g>\n    </svg>\n  );\n}\n\nconst currentTokens = {\n  'wrap.testnet': NearTokenImage,\n  'wrap.near': NearTokenImage,\n};\n\nfunction isValidTokenName(tokenName: string): tokenName is keyof typeof currentTokens {\n  return tokenName in currentTokens;\n}\n\ntype TokenIconProps = {\n  tokenAccountId: string;\n  className?: string;\n};\n\nexport function TokenIcon({ tokenAccountId, className, ...rest }: TokenIconProps) {\n  const image = useStoreMap({\n    store: $tokens,\n    keys: [tokenAccountId],\n    fn: (tokens) => tokens[tokenAccountId]?.meta?.icon ?? null,\n  });\n\n  if (image) {\n    return (\n      <img src={image} alt={tokenAccountId} className={className} {...rest} />\n    );\n  }\n\n  const Component = isValidTokenName(tokenAccountId) ? currentTokens[tokenAccountId] : FallbackTokenImage;\n\n  return <Component className={className} {...rest} />;\n}\n","import React from 'react';\nimport classNames from 'classnames';\nimport { TokenIcon } from 'shared/icons/Tokens';\n\ntype TokenImageProps = {\n  tokenAccountId: string;\n  size?: number;\n  className?: string;\n};\n\nexport function TokenImage({\n  tokenAccountId,\n  size = 8,\n  className,\n}: TokenImageProps) {\n  return (\n    <div\n      className={classNames(\n        'p-1 flex-shrink-0 rounded-full bg-black inline-flex items-center justify-center',\n        `w-${size} h-${size}`,\n        className,\n      )}\n    >\n      <TokenIcon className=\"w-full h-full rounded-full\" tokenAccountId={tokenAccountId} />\n    </div>\n  );\n}\n","import {createStore, createEvent, sample, attach} from 'effector';\nimport type BigNumber from 'bignumber.js';\n\nimport {$roketoWallet, $tokens, $accountStreams} from 'services/wallet';\nimport {\n  getAvailableToWithdraw,\n  isActiveStream,\n} from 'shared/api/roketo/helpers';\n\nexport const triggerWithdrawAll = createEvent();\n\nconst withdrawAllFx = attach({\n  source: $roketoWallet,\n  async effect(wallet, streamIds: string[]) {\n    await wallet?.roketo.api.withdraw({streamIds});\n  },\n});\n\nconst $activeTokensInfo = createStore<{\n  tokenData: Array<{\n    tokenAccountId: string;\n    amount: string;\n    symbol: string;\n  }>;\n  streamIds: string[];\n}>({tokenData: [], streamIds: []});\n\nexport const $tokenData = $activeTokensInfo.map(({tokenData}) => tokenData);\n\n/**\n * when triggerWithdrawAll is called\n * read streamIds from $activeTokensInfo\n * and if streamIds is not empty\n * then trigger withdrawAllFx with it\n */\nsample({\n  clock: triggerWithdrawAll,\n  source: $activeTokensInfo.map(({streamIds}) => streamIds),\n  filter: (streamIds) => streamIds.length > 0,\n  target: withdrawAllFx,\n});\n\nsample({\n  source: {\n    tokens: $tokens,\n    streams: $accountStreams,\n  },\n  target: $activeTokensInfo,\n  fn({tokens, streams: {inputs}}) {\n    const activeInputs = inputs.filter(isActiveStream);\n    const tokensData: {\n      [tokenAccountId: string]: {\n        available: BigNumber;\n        tokenAccountId: string;\n      };\n    } = {};\n    const streamIds: string[] = [];\n\n    // eslint-disable-next-line no-restricted-syntax\n    for (const stream of activeInputs) {\n      const tokenAccountId = stream.token_account_id;\n      const available = getAvailableToWithdraw(stream);\n\n      if (available.toFixed() !== '0') {\n        streamIds.push(stream.id);\n      }\n\n      if (!tokensData[tokenAccountId]) {\n        tokensData[tokenAccountId] = {\n          available,\n          tokenAccountId,\n        };\n      } else {\n        tokensData[tokenAccountId].available =\n          tokensData[tokenAccountId].available.plus(available);\n      }\n    }\n    return {\n      tokenData: Object.values(tokensData).map((value) => {\n        const token = tokens[value.tokenAccountId];\n        return {\n          tokenAccountId: value.tokenAccountId,\n          amount: token.formatter.amount(value.available.toFixed()),\n          symbol: token.meta.symbol,\n        };\n      }),\n      streamIds,\n    };\n  },\n});\n","import React from 'react';\nimport {useStore} from 'effector-react';\n\nimport {Button} from '@ui/components/Button';\nimport { Tooltip } from 'shared/kit/Tooltip';\nimport { TokenImage } from 'shared/kit/TokenImage';\nimport { testIds } from 'shared/constants';\n\nimport styles from './styles.module.scss';\nimport {$tokenData, triggerWithdrawAll} from './model';\n\nexport function WithdrawAllButton({ children }: { children: React.ReactNode}) {\n  const preparedTokenData = useStore($tokenData)\n  return (\n    <Tooltip\n      placement=\"bottom\"\n      align={{ offset: [0, 20] }}\n      overlay={(\n        <div className={styles.root}>\n          <p className={styles.description}>\n            Move all received tokens to your wallet.\n          </p>\n\n          <div className={styles.preparedTokensWrapper}>\n            {preparedTokenData.length !== 0 && preparedTokenData.map((data) => \n              <div\n                key={data.tokenAccountId}\n                className={styles.preparedToken}\n              >\n                <TokenImage tokenAccountId={data.tokenAccountId} />\n\n                <div className={styles.info}>\n                  <span className={styles.amount}>{data.amount}</span>\n                  <span className={styles.symbol}>{data.symbol}</span>\n                </div>\n              </div>\n            )}\n\n            {preparedTokenData.length === 0 &&\n              <p className={styles.description}>\n                You have nothing to withdraw\n              </p>\n            }\n          </div>\n        </div>\n      )}\n    >\n      <Button\n        onClick={() => triggerWithdrawAll()}\n        testId={testIds.withdrawAllButton}\n      >\n        {children}\n      </Button>\n    </Tooltip>\n  );\n}\n","import React from 'react';\nimport cn from 'classnames';\n\nimport styles from './styles.module.scss';\n\nexport enum OrderType {\n  asc = 'ascending',\n  desc = 'descending',\n}\n\ntype Props = {\n  type?: OrderType,\n  width?: number,\n  height?: number,\n  className?: string,\n}\n\nconst DEFAULT_WIDTH = 24;\nconst DEFAULT_HEIGHT = 24;\n\nexport const SortIcon = ({\n  width = DEFAULT_WIDTH,\n  height = DEFAULT_HEIGHT,\n  type = OrderType.desc,\n  className,\n}: Props) => (\n  <div className={cn({[styles.rotate]: type === OrderType.asc}, className)}>\n    <svg width={width} height={height} viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path d=\"M3 18H9V16H3V18ZM3 6V8H21V6H3ZM3 13H15V11H3V13Z\" fill=\"#2B313B\"/>\n    </svg>\n  </div>\n);\n","import React from 'react';\nimport classNames from 'classnames';\n\nimport styles from './styles.module.scss';\n\ntype RadioButtonProps<T> = {\n  active: boolean;\n  label: React.ReactNode;\n  value: T;\n  onChange: (value: T) => void;\n};\n\nexport function RadioButton<T>({\n  active, label, value, onChange,\n}: RadioButtonProps<T>) {\n  return (\n    <label className={styles.root}>\n      <input\n        type=\"radio\"\n        className=\"invisible w-0 h-0 absolute\"\n        checked={active}\n        onChange={() => onChange(value)}\n      />\n      <div\n        className={classNames(styles.radio, {[styles.radioActive]: active})}\n      />\n\n      <div className={styles.text}>\n        {label}\n      </div>\n    </label>\n  );\n}\n","import React, {useState} from 'react';\nimport cx from 'classnames';\nimport {RadioButton} from '../RadioButton';\nimport {DropdownOpener} from '../DropdownOpener';\nimport {DropdownMenu} from '../DropdownMenu';\n\nimport styles from './styles.module.scss';\n\ntype FilterOptionWithCounterProps = {\n  count: React.ReactNode;\n  option: React.ReactNode;\n};\n\nexport function FilterOptionWithCounter({count, option}: FilterOptionWithCounterProps) {\n  return (\n    <span>\n      {option}\n      {' '}\n      <span className=\"text-gray font-normal\">{count}</span>\n    </span>\n  );\n}\n\ntype FilterOption = {\n  label?: string;\n  fn: (a: any, b: any) => number;\n};\n\ntype FilterProps<T> = {\n  label: string;\n  options: T[];\n  renderOption: (option: T, active: boolean) => React.ReactNode;\n  renderActive?: (option: T) => React.ReactNode;\n  active: T;\n  onChange: (option: T) => void;\n  className?: string;\n  isDisabled?: boolean\n};\n\nexport function Filter<T extends string | FilterOption>({\n  label,\n  options,\n  renderOption,\n  renderActive,\n  active,\n  onChange,\n  className,\n  isDisabled\n}: FilterProps<T>) {\n  const [opened, setOpened] = useState(false);\n\n  return (\n    <div className={cx(styles.root, className)}>\n      {label &&\n        <div className=\"text-gray mr-2\">{label}</div>\n      }\n\n      <div className={styles.dropdownWrapper}>\n        <DropdownOpener\n          className={cx(\n            isDisabled && styles.dropdownInactive,\n            isDisabled && 'text-gray',\n          )}\n          opened={!isDisabled && opened}\n          onChange={setOpened}\n        >\n          {renderActive ? renderActive(active) : active}\n        </DropdownOpener>\n\n        <DropdownMenu\n          opened={!isDisabled && opened}\n          className={styles.dropdownMenu}\n          onClose={() => {\n            setOpened(false);\n          }}\n        >\n          {options.map((option) => (\n            <RadioButton\n              label={renderOption ? renderOption(option, active === option) : option}\n              active={active === option}\n              value={option}\n              onChange={onChange}\n            />\n          ))}\n        </DropdownMenu>\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport cn from 'classnames';\n\nimport {Button} from '@ui/components/Button';\n\nimport styles from './styles.module.scss';\n\ntype Props = {\n  directions: string[],\n  activeDirection: string,\n  isInactive: boolean\n  onDirectionClick: (direction: string) => void,\n};\n\nexport const DirectionSorts = ({directions, activeDirection, onDirectionClick, isInactive}: Props) => (\n  <div className={styles.root}>\n    {directions.map(direction => (\n      <Button\n        key={direction}\n        className={cn(styles.sort, {[styles.active]: direction === activeDirection})}\n        onClick={() => onDirectionClick(direction)}\n        disabled={isInactive}\n      >\n        {direction}\n      </Button>\n    ))}\n  </div>\n);\n","import { useState, useEffect, useMemo } from 'react';\n\nimport { RoketoStream } from 'shared/api/roketo/interfaces/entities';\n\ntype FilterFn = (stream: RoketoStream) => boolean;\n\ntype Option = string | FilterFn;\n\ntype Filter<T> = {\n  option: string;\n  selectOption: (option: string) => void;\n  options: Record<string, T>;\n  optionsArray: string[];\n  currentFilterFunction: T;\n};\n\nexport function useFilter<T extends Option>({ options }: { options: Record<string, T>}): Filter<T> {\n  const keys = useMemo(() => Object.keys(options), [options]);\n\n  const [option, selectOption] = useState(keys[0]);\n\n  const filter = useMemo(\n    () => {\n      const currentFilterFunction = options[option];\n\n      return {\n        option,\n        selectOption,\n        options,\n        optionsArray: keys,\n        currentFilterFunction,\n      };\n    },\n    [options, option, keys],\n  );\n\n  return filter;\n}\n\nexport function useFilters({ items, filters }: { items: (RoketoStream[] | undefined), filters: Filter<FilterFn>[] }) {\n  const [filteredItems, setFilteredItems] = useState<RoketoStream[] | undefined>(undefined);\n  const [filterCounts, setFilterCounts] = useState<Record<string, number>[]>([]);\n\n  useEffect(() => {\n    let filteredItemsValue = items;\n    const filterCountsValue: Record<string, number>[] = [];\n\n    filters.forEach((filter) => {\n      const filterRunResult: Record<string, RoketoStream[] | undefined> = {};\n\n      // run filter for every possible function\n      Object.keys(filter.options).forEach((option) => {\n        filterRunResult[option] = filteredItemsValue?.filter(filter.options[option]);\n      });\n\n      // calc counts for every option in filter\n      const currentFilterCount: Record<string, number> = {};\n      Object.keys(filterRunResult).forEach(\n        (option) => { currentFilterCount[option] = (filterRunResult[option] || []).length; },\n      );\n\n      filterCountsValue.push(currentFilterCount);\n      // set items to selected filter\n      filteredItemsValue = filterRunResult[filter.option];\n    });\n\n    setFilterCounts(filterCountsValue);\n    setFilteredItems(filteredItemsValue);\n  }, [items, filters]);\n\n  return {\n    filterCounts,\n    filteredItems,\n  };\n}\n","import { useMemo } from 'react';\nimport {useStoreMap} from 'effector-react'\n\nimport {$accountId} from 'services/wallet'\nimport { STREAM_STATUS } from 'shared/api/roketo/constants';\nimport type { RoketoStream } from 'shared/api/roketo/interfaces/entities';\n\nimport { useFilter, useFilters } from './lib';\n\nexport const STREAM_TYPE_FILTER = {\n  ALL: 'All',\n  INCOMING: 'Incoming',\n  OUTGOING: 'Outgoing',\n} as const;\n\nconst STREAM_STATUS_FILTER = {\n  ALL: 'All',\n  [STREAM_STATUS.Initialized]: 'Initialized',\n  [STREAM_STATUS.Active]: 'Active',\n  [STREAM_STATUS.Paused]: 'Paused',\n};\n\nconst statusOptions = {\n  [STREAM_STATUS_FILTER.ALL]: () => true,\n  [STREAM_STATUS_FILTER[STREAM_STATUS.Initialized]]: (stream: RoketoStream) => stream.status === STREAM_STATUS.Initialized,\n  [STREAM_STATUS_FILTER[STREAM_STATUS.Active]]: (stream: RoketoStream) => stream.status === STREAM_STATUS.Active,\n  [STREAM_STATUS_FILTER[STREAM_STATUS.Paused]]: (stream: RoketoStream) => stream.status === STREAM_STATUS.Paused,\n}\n\nexport function useStreamFilters(streams: RoketoStream[] | undefined) {\n  const directionOptions = useStoreMap({\n    store: $accountId,\n    keys: [],\n    fn: accountId => ({\n      [STREAM_TYPE_FILTER.ALL]: () => true,\n      [STREAM_TYPE_FILTER.INCOMING]: (stream: RoketoStream) => accountId === stream.receiver_id,\n      [STREAM_TYPE_FILTER.OUTGOING]: (stream: RoketoStream) => accountId === stream.owner_id,\n    })\n  });\n\n  const statusFilter = useFilter({\n    options: statusOptions,\n  });\n\n  const directionFilter = useFilter({\n    options: directionOptions,\n  });\n\n  const combinedFilters = useMemo(\n    () => [directionFilter, statusFilter],\n    [directionFilter, statusFilter],\n  );\n\n  const result = useFilters({\n    items: streams,\n    filters: combinedFilters,\n  });\n\n  return {\n    statusFilter,\n    directionFilter,\n    result,\n  };\n}\n","import React, { useEffect, useState } from 'react';\nimport classNames from 'classnames';\n\nimport {SortIcon, OrderType} from '@ui/icons/Sort';\n\nimport { Filter, FilterOptionWithCounter } from 'shared/kit/Filter';\nimport type { RoketoStream } from 'shared/api/roketo/interfaces/entities';\n\nimport {DirectionSorts} from '../DirectionSorts';\nimport { useStreamFilters } from '../useStreamFilters';\n\nimport styles from './styles.module.scss';\n\nfunction compareBy(a: RoketoStream, b: RoketoStream, key: keyof RoketoStream) {\n  return Number(b[key]) - Number(a[key]);\n}\n\nconst sorts = {\n  bigBalanceFirst: {\n    label: 'With high amount',\n    order: OrderType.desc,\n    fn: (a: RoketoStream, b: RoketoStream) => compareBy(a, b, 'balance'),\n  },\n  highSpeedFirst: {\n    label: 'With high speed',\n    order: OrderType.desc,\n    fn: (a: RoketoStream, b: RoketoStream) => compareBy(a, b, 'tokens_per_sec'),\n  },\n  highSpeedLast: {\n    label: 'With low speed',\n    order: OrderType.asc,\n    fn: (a: RoketoStream, b: RoketoStream) => compareBy(a, b, 'tokens_per_sec') * -1,\n  },\n  mostRecent: {\n    label: 'Most recent',\n    order: OrderType.desc,\n    fn: (a: RoketoStream, b: RoketoStream) => compareBy(a, b, 'timestamp_created'),\n  },\n};\n\ntype StreamFiltersProps = {\n  items: RoketoStream[] | undefined;\n  onFilterDone: (result: RoketoStream[] | undefined) => void;\n  className?: string;\n};\n\nexport function StreamFilters({ items, onFilterDone, className }: StreamFiltersProps) {\n  const filter = useStreamFilters(items);\n  const {filteredItems} = filter.result;\n\n  const [sorting, setSorting] = useState(sorts.mostRecent);\n  const sortOptions = Object.values(sorts);\n  const isEmptyList = items ? items.length === 0 : true\n\n  useEffect(() => {\n    if (!filteredItems) {\n      onFilterDone(filteredItems);\n\n      return;\n    }\n\n    const sortedStreams = [...filteredItems];\n\n    sortedStreams.sort(sorting.fn);\n\n    onFilterDone(sortedStreams);\n  }, [filteredItems, onFilterDone, sorting.fn]);\n\n  return (\n    <div className={classNames(styles.root, className)}>\n      <DirectionSorts\n        directions={filter.directionFilter.optionsArray}\n        activeDirection={filter.directionFilter.option}\n        onDirectionClick={filter.directionFilter.selectOption}\n        isInactive={isEmptyList}\n      />\n      <div className={styles.filtersWrapper}>\n        <Filter\n          options={filter.statusFilter.optionsArray}\n          label=\"Status:\"\n          active={filter.statusFilter.option}\n          onChange={filter.statusFilter.selectOption}\n          isDisabled={isEmptyList}\n          renderOption={(option) => {\n            const counts = filter.result.filterCounts[1];\n            return (\n              <FilterOptionWithCounter\n                option={option}\n                count={counts ? counts[option] : ''}\n              />\n            );\n          }}\n        />\n\n        <Filter\n          options={sortOptions}\n          label=\"Show first:\"\n          active={sorting}\n          onChange={setSorting}\n          isDisabled={isEmptyList}\n          renderOption={(option) => <span>{option.label}</span>}\n          renderActive={(option) => (\n            <div className={styles.sortWithOrder}>\n              {option.order && <SortIcon type={option.order} />}\n              <span>{option.label}</span>\n            </div>\n          )}\n        />\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\n\ntype Props = {\n  width?: number,\n  height?: number,\n  className?: string,\n}\n\nconst DEFAULT_WIDTH = 20;\nconst DEFAULT_HEIGHT = 20;\n\nexport const ErrorSign = ({width = DEFAULT_WIDTH, height = DEFAULT_HEIGHT, className}: Props) => (\n  <div className={className}>\n    <svg width={width} height={height} viewBox=\"0 0 20 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path d=\"M10 0C4.48 0 0 4.48 0 10C0 15.52 4.48 20 10 20C15.52 20 20 15.52 20 10C20 4.48 15.52 0 10 0ZM11 15H9V13H11V15ZM11 11H9V5H11V11Z\" fill=\"#D80A1F\"/>\n    </svg>\n  </div>\n);\n","import React from 'react';\n\nimport {FieldInputProps, FormikState} from 'formik';\n\nimport {FormField} from '@ui/components/FormField';\nimport {Input} from '@ui/components/Input';\n\ntype InputProps = {\n  placeholder: string,\n\n  field: FieldInputProps<any>,\n  form: FormikState<any>,\n\n  label?: React.ReactNode,\n  description?: React.ReactNode,\n\n  isRequired?: boolean,\n  className?: string;\n};\n\nexport const FormikInput = (props: InputProps) => {\n  const {\n    placeholder,\n    description,\n    isRequired,\n    className,\n    field,\n    form,\n    label,\n    ...rest\n  } = props;\n\n  const error = form.errors[field.name];\n\n  return (\n    <FormField\n      isRequired={isRequired}\n      className={className}\n      description={description}\n      label={label}\n      error={error}\n    >\n      <Input\n        required={isRequired}\n        hasError={Boolean(error)}\n        placeholder={placeholder}\n        {...field}\n        {...rest}\n      />\n    </FormField>\n  );\n}\n","import React, {FC, InputHTMLAttributes} from 'react';\nimport cn from 'classnames';\n\nimport styles from './styles.module.scss';\n\ninterface CheckboxProps extends InputHTMLAttributes<HTMLInputElement> {\n  description?: string,\n  hasError?: boolean,\n  className?: string,\n}\n\nexport const Checkbox: FC<CheckboxProps> = ({\n  description,\n  className,\n  hasError = false,\n  ...rest\n}) => (\n  <label className={cn(styles.root, className)}>\n    <input\n      type=\"checkbox\"\n      className={cn(styles.checkbox, {[styles.error]: hasError})}\n      {...rest}\n    />\n    {description &&\n      <span className={styles.description}>{description}</span>\n    }\n  </label>\n);\n","import React from 'react';\n\nimport {FieldInputProps, FormikState} from 'formik';\n\nimport {FormField} from '@ui/components/FormField';\nimport {Checkbox} from '@ui/components/Checkbox';\n\ntype CheckboxProps = {\n  field: FieldInputProps<any>,\n  form: FormikState<any>,\n\n  label?: React.ReactNode,\n  description?: string,\n  isRequired?: boolean,\n  className?: string;\n};\n\nexport const FormikCheckbox = (props: CheckboxProps) => {\n  const {\n    description,\n    isRequired,\n    className,\n    label,\n    field,\n    form,\n    ...rest\n  } = props;\n\n  const error = form.errors[field.name];\n\n  return (\n    <FormField\n      isRequired={isRequired}\n      className={className}\n      label={label}\n      error={error}\n    >\n      <Checkbox\n        description={description}\n        required={isRequired}\n        hasError={Boolean(error)}\n        {...field}\n        {...rest}\n      />\n    </FormField>\n  );\n}\n","import React, {FC, TextareaHTMLAttributes} from 'react';\nimport cn from 'classnames';\n\nimport styles from './styles.module.scss';\n\ninterface TextAreaProps extends TextareaHTMLAttributes<HTMLTextAreaElement> {\n  hasError?: boolean,\n  className?: string,\n}\n\nexport const TextArea: FC<TextAreaProps> = ({\n  className,\n  hasError = false,\n  ...rest\n}) => (\n  <textarea\n    className={cn(styles.textarea, {[styles.error]: hasError}, className)}\n    {...rest}\n  />\n);\n","import React from 'react';\nimport cn from 'classnames';\n\nimport {FieldInputProps, FormikState} from 'formik';\n\nimport {FormField} from '@ui/components/FormField';\nimport {TextArea} from '@ui/components/TextArea';\n\nimport styles from './styles.module.scss';\n\ntype TextAreaProps = {\n  placeholder: string,\n\n  field: FieldInputProps<any>,\n  form: FormikState<any>,\n\n  label?: React.ReactNode,\n  description?: React.ReactNode,\n\n  maxLength?: number,\n  isRequired?: boolean,\n  className?: string;\n  error?: never;\n};\n\nexport const FormikTextArea = (props: TextAreaProps) => {\n  const {\n    placeholder,\n    description,\n    isRequired,\n    className,\n    maxLength,\n    field,\n    label,\n    form,\n    ...rest\n  } = props;\n\n  const error = form.errors[field.name];\n\n  return (\n    <FormField\n      isRequired={isRequired}\n      className={cn(styles.formfield, className)}\n      description={description}\n      label={label}\n      error={error}\n    >\n      <TextArea\n        required={isRequired}\n        hasError={Boolean(error)}\n        placeholder={placeholder}\n        maxLength={maxLength}\n        {...field}\n        {...rest}\n      />\n\n      {maxLength &&\n        <span className={styles.textLimitCounter}>{`${field?.value?.length || 0}/${maxLength}`}</span>\n      }\n    </FormField>\n  );\n};\n","const NUMBER_PATTERN = /^[0-9]+$/;\n\nexport const isLikeNumber = (stringLikeNumber: string) => NUMBER_PATTERN.test(stringLikeNumber);\n","import BigNumber from 'bignumber.js';\nimport {addMonths, differenceInDays} from 'date-fns';\n\nimport {SECONDS_IN_DAY, SECONDS_IN_HOUR, SECONDS_IN_MINUTE} from 'shared/constants';\n\nimport type {RichToken} from 'shared/api/ft';\n\nexport const getDurationInSeconds = (months: number, days: number, hours: number, minutes: number) => {\n  const daysInMonths = differenceInDays(addMonths(new Date(), months), new Date());\n\n  const durationInSeconds = (daysInMonths + days) * SECONDS_IN_DAY\n    + minutes * SECONDS_IN_MINUTE\n    + hours * SECONDS_IN_HOUR;\n\n  return durationInSeconds;\n};\n\nexport const getTokensPerSecondCount = (depositInYocto: string, durationInSeconds: number) => {\n  const value = new BigNumber(depositInYocto)\n    .dividedToIntegerBy(durationInSeconds)\n    .toFixed();\n\n  return value !== 'Infinity' && value !== 'NaN' ? value : '0';\n};\n\nexport const getStreamingSpeed = (speedInSeconds: number, token: RichToken): string => {\n  if (speedInSeconds <= 0) {\n    return 'none';\n  }\n\n  const {formatter, meta} = token;\n  const {formattedValue, unit} = formatter.tokensPerMeaningfulPeriod(speedInSeconds);\n\n  return `${formattedValue} ${meta.symbol} / ${unit}`;\n};\n","import React, {ChangeEvent, Dispatch, SetStateAction, useEffect, useState} from 'react';\nimport {useStore} from 'effector-react';\nimport cn from 'classnames';\nimport {FieldInputProps, FormikState} from 'formik';\n\nimport {$tokens} from 'services/wallet';\nimport {FormField} from '@ui/components/FormField';\nimport {Input} from '@ui/components/Input';\n\nimport {usePrev} from 'shared/hooks/usePrev';\nimport {isLikeNumber} from 'shared/helpers/validation';\nimport { testIds } from 'shared/constants';\n\nimport {getTokensPerSecondCount, getDurationInSeconds, getStreamingSpeed} from '../lib';\n\nimport styles from './styles.module.scss';\n\ntype SpeedInputProps = {\n  label: string;\n  value: number;\n  onChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\n  className?: string;\n  testId: string;\n};\n\nconst SpeedInput = ({className, value, onChange, label, testId}: SpeedInputProps) => (\n  <div className={cn(styles.speedInput, className)}>\n    <Input\n      placeholder=\"0\"\n      value={value}\n      onChange={onChange}\n      className={styles.input}\n      data-testid={testId}\n    />\n    <label className={styles.label}>{label}</label>\n  </div>\n);\n\ntype StreamSpeedCalcFieldProps = {\n  deposit: number,\n  tokenAccountId: string,\n  onSpeedChange: (speed: string) => void,\n\n  field: FieldInputProps<any>,\n  form: FormikState<any>,\n\n  label?: React.ReactNode,\n  description?: React.ReactNode,\n\n  isRequired?: boolean,\n  className?: string;\n};\n\nexport const StreamSpeedCalcField = (props: StreamSpeedCalcFieldProps) => {\n  const {\n    form,\n    field,\n    label,\n    deposit,\n    className,\n    isRequired,\n    description,\n    onSpeedChange,\n    tokenAccountId,\n  } = props;\n\n  const tokens = useStore($tokens);\n  const token = tokens[tokenAccountId];\n  const {formatter} = token;\n\n  const error = form.errors[field.name];\n  const {value: currentStreamingSpeed} = field;\n\n  const [months, setMonths] = useState(0);\n  const [days, setDays] = useState(0);\n  const [minutes, setMinutes] = useState(0);\n  const [hours, setHours] = useState(0);\n\n  const depositInYocto = formatter.toYocto(deposit);\n  const durationInSeconds = getDurationInSeconds(months, days, hours, minutes);\n  const tokensPerSec = getTokensPerSecondCount(depositInYocto, durationInSeconds);\n  const prevSpeed = usePrev(tokensPerSec);\n\n  useEffect(() => {\n    if (prevSpeed !== tokensPerSec) {\n      onSpeedChange(tokensPerSec);\n    }\n  }, [tokensPerSec, onSpeedChange, prevSpeed]);\n\n  const handleInputChangeFactory = (\n    setValue: Dispatch<SetStateAction<number>>,\n    valueLimit: number,\n  ) => (event: ChangeEvent<HTMLInputElement>) => {\n    const {value} = event.target;\n\n    const safeValue = value || '0';\n\n    if (isLikeNumber(safeValue) && Number(safeValue) <= valueLimit) {\n      setValue(Number(safeValue));\n    }\n  };\n\n  const meaningfulSpeed = getStreamingSpeed(currentStreamingSpeed, token);\n  const labelWithStreamingSpeed = (\n    <div className={styles.formLabel}>\n      {label}\n      <span className={cn(styles.speed, styles.label)}>\n        {`Streaming speed: ${meaningfulSpeed}`}\n      </span>\n    </div>\n  );\n\n  return (\n    <FormField\n      isRequired={isRequired}\n      className={cn(styles.formField, className)}\n      description={description}\n      label={labelWithStreamingSpeed}\n      error={error}\n    >\n      <div className={styles.wrapper}>\n        <SpeedInput\n          value={months}\n          onChange={handleInputChangeFactory(setMonths, 12)}\n          label=\"Months, max: 12\"\n          testId={testIds.createStreamMonthsInput}\n        />\n        <SpeedInput\n          value={days}\n          onChange={handleInputChangeFactory(setDays, 31)}\n          label=\"Days, max: 31\"\n          testId={testIds.createStreamDaysInput}\n        />\n        <SpeedInput\n          value={hours}\n          onChange={handleInputChangeFactory(setHours, 24)}\n          label=\"Hours, max: 24\"\n          testId={testIds.createStreamHoursInput}\n        />\n        <SpeedInput\n          value={minutes}\n          onChange={handleInputChangeFactory(setMinutes, 60)}\n          label=\"Minutes, max: 60\"\n          testId={testIds.createStreamMinutesInput}\n        />\n      </div>\n    </FormField>\n  );\n};\n","import { useRef, useEffect } from 'react';\n\nexport function usePrev<T extends any>(value: T) {\n  const ref = useRef<null | T>(null);\n  useEffect(() => {\n    ref.current = value;\n  }, [value]);\n  return ref.current;\n}\n","import React, {useState} from 'react';\nimport {useStore} from 'effector-react';\nimport {FieldInputProps, FormikState} from 'formik';\nimport cn from 'classnames';\n\nimport {$tokens} from 'services/wallet';\nimport {FormField} from '@ui/components/FormField';\n\nimport type {RichToken} from 'shared/api/ft';\n\nimport {DropdownOpener} from 'shared/kit/DropdownOpener';\nimport {DropdownMenu} from 'shared/kit/DropdownMenu';\nimport {TokenImage} from 'shared/kit/TokenImage';\n\nimport styles from './styles.module.scss';\n\ntype TokenSelectorProps = {\n  activeTokenAccountId: string,\n  onTokenChoose: (tokenAccountId: string) => void,\n\n  label?: React.ReactNode,\n  description?: React.ReactNode,\n\n  field: FieldInputProps<any>,\n  form: FormikState<any>,\n\n  isRequired?: boolean,\n  className?: string;\n};\n\nconst TokenOption = ({\n  token,\n  onClick,\n  className,\n}: {token: RichToken, className?: string, onClick?: () => void}) => {\n  const classNames = cn(styles.tokenOption, className);\n\n  const content = (\n    <>\n      <TokenImage\n        tokenAccountId={token.roketoMeta.account_id}\n      />\n      <span>{`${token.meta.name}, ${token.meta.symbol}`}</span>\n    </>\n  );\n\n  if (onClick) {\n    return (\n      <button type='button' className={classNames} onClick={onClick}>\n        {content}\n      </button>\n    );\n  }\n\n  return (\n    <div className={classNames}>\n      {content}\n    </div>\n  );\n};\n\nexport const TokenSelector = (props: TokenSelectorProps) => {\n  const {\n    form,\n    label,\n    field,\n    className,\n    isRequired,\n    description,\n    onTokenChoose,\n    activeTokenAccountId,\n  } = props;\n\n  const tokens = useStore($tokens);\n\n  const [isDropdownOpened, setIsDropdownOpened] = useState(false);\n\n  const allAvailableTokens = Object.values(tokens);\n  const activeToken = tokens[activeTokenAccountId];\n\n  const handleChooseTokenOptions = (token: RichToken) => {\n    setIsDropdownOpened(false);\n\n    onTokenChoose(token.roketoMeta.account_id);\n  };\n\n  const error = form.errors[field.name];\n\n  return (\n    <FormField\n      isRequired={isRequired}\n      className={className}\n      description={description}\n      label={label}\n      error={error}\n    >\n      <div className={styles.dropdownWrapper}>\n        <DropdownOpener\n          onChange={setIsDropdownOpened}\n          className={styles.dropdownOpener}\n          opened={isDropdownOpened}\n        >\n          <TokenOption token={activeToken} />\n        </DropdownOpener>\n\n        <DropdownMenu\n          opened={isDropdownOpened}\n          onClose={() => setIsDropdownOpened(false)}\n          className={styles.dropdownMenu}\n        >\n          {allAvailableTokens.map(token => (\n            <TokenOption\n              token={token}\n              onClick={() => handleChooseTokenOptions(token)}\n              className={styles.withHover}\n            />\n          ))}\n        </DropdownMenu>\n      </div>\n    </FormField>\n  );\n};\n","import {env} from 'shared/config';\n\nexport const COMMENT_TEXT_LIMIT = 80;\n\nexport const INITIAL_FORM_VALUES = {\n  receiver: '',\n  streamName: '',\n  token: env.WNEAR_ID,\n  speed: 0,\n  deposit: 0,\n  autoStart: false,\n  comment: '',\n};\n","import {attach} from 'effector';\nimport * as Yup from 'yup';\n\nimport {$nearWallet, $accountId} from 'services/wallet';\nimport {COMMENT_TEXT_LIMIT} from '../constants';\n\nconst isReceiverNotEqualOwnerFx = attach({\n  source: $accountId,\n  effect: (accountId, value: string | undefined) =>\n    !!accountId && value !== accountId,\n});\n\nconst isAddressNotExistsFx = attach({\n  source: $nearWallet,\n  async effect(wallet, value: string | undefined) {\n    if (!wallet || !value) return false;\n    try {\n      const result = await wallet.near.connection.provider.query({\n        request_type: 'view_account',\n        finality: 'final',\n        account_id: value,\n      });\n      return Boolean(result);\n    } catch {\n      return false;\n    }\n  },\n});\n\nexport const formValidationSchema = Yup.object().shape({\n  receiver: Yup.string()\n    .required('Receiver is required')\n    .test(\n      'receiver-not-equal-owner',\n      'Receiver can not be the same as the owner',\n      isReceiverNotEqualOwnerFx,\n    )\n    .test(\n      'receiver-is-valida-address',\n      'Address does not exists',\n      isAddressNotExistsFx,\n    ),\n  streamName: Yup.string().max(\n    100,\n    'Stream name must be less or equal 100 symbols',\n  ),\n  token: Yup.string().required(),\n  deposit: Yup.number()\n    .required('Deposit is required')\n    .moreThan(0, 'Deposit should be more than 0'),\n  speed: Yup.number()\n    .required('Stream duration is required')\n    .moreThan(0, 'Choose stream duration'),\n  autoStart: Yup.boolean(),\n  comment: Yup.string().max(COMMENT_TEXT_LIMIT),\n});\n","import React, {useState} from 'react';\nimport cn from 'classnames';\nimport {Field, Formik} from 'formik';\nimport {useStore} from 'effector-react';\n\nimport {$tokens} from 'services/wallet';\n\nimport {Button, ButtonType, DisplayMode as ButtonDisplayMode} from '@ui/components/Button';\nimport {ErrorSign} from '@ui/icons/ErrorSign';\n\nimport {FormikInput} from 'shared/components/FormikInput';\nimport {FormikCheckbox} from 'shared/components/FormikCheckbox';\nimport {FormikTextArea} from 'shared/components/FormikTextArea';\nimport {Balance, DisplayMode} from 'shared/components/Balance';\n\nimport { testIds } from 'shared/constants';\n\nimport {env} from 'shared/config';\nimport {StreamSpeedCalcField} from '../StreamSpeedCalcField';\nimport {TokenSelector} from '../TokenSelector';\n\nimport {INITIAL_FORM_VALUES, COMMENT_TEXT_LIMIT} from '../constants';\n\nimport {formValidationSchema} from './model';\n\nimport styles from './styles.module.scss';\n\nconst Row = ({\n  children,\n  className,\n}: {children: React.ReactNode, className?: string}) => (\n  <div className={cn(styles.row, className)}>{children}</div>\n);\n\nexport type FormValues = {\n  receiver: string;\n  streamName: string;\n  autoStart: boolean;\n  comment: string;\n  deposit: number;\n  speed: number;\n  token: string;\n}\n\ntype CreateStreamProps = {\n  onFormSubmit: (values: FormValues) => Promise<void>;\n  onFormCancel: () => void;\n}\n\nexport const CreateStream = ({onFormCancel, onFormSubmit}: CreateStreamProps) => {\n  const tokens = useStore($tokens)\n  const [submitError, setError] = useState<Error | null>(null);\n\n  const handleFormSubmit = (formValues: FormValues) => {\n    onFormSubmit(formValues)\n      .catch(error => setError(error));\n  }\n  return (\n    <div className={styles.root}>\n      <h2 className={styles.title}>Create Stream</h2>\n\n      <Formik\n        initialValues={INITIAL_FORM_VALUES}\n        onSubmit={handleFormSubmit}\n\n        validateOnBlur\n\n        validationSchema={formValidationSchema}\n        validateOnChange={false}\n        validateOnMount={false}\n      >\n        {({\n          values,\n          handleSubmit,\n          setFieldValue,\n          setFieldTouched,\n        }) => {\n          const activeTokenAccountId = values.token;\n\n          const {meta: tokenMeta, formatter, roketoMeta} = tokens[activeTokenAccountId];\n\n          return (\n            <form onSubmit={handleSubmit} className={styles.form}>\n\n              <Row>\n                <Field\n                  isRequired\n                  name=\"receiver\"\n                  label=\"Receiver:\"\n                  component={FormikInput}\n                  placeholder={`receiver.${env.ACCOUNT_SUFFIX}`}\n                  className={styles.rowItem}\n                  data-testid={testIds.createStreamReceiverInput}\n                />\n              </Row>\n\n              <Row className={styles.amount}>\n                <Field\n                  isRequired\n                  name=\"deposit\"\n                  label=\"Amount to stream:\"\n                  component={FormikInput}\n                  placeholder='Amount to stream'\n                  className={styles.rowItem}\n                  description={(<Balance tokenAccountId={activeTokenAccountId} mode={DisplayMode.CRYPTO} />)}\n                  data-testid={testIds.createStreamAmountInput}\n                />\n\n                <Field\n                  isRequired\n                  name=\"token\"\n                  label=\"Token\"\n                  activeTokenAccountId={values.token}\n                  onTokenChoose={(tokenAccountId: string) => {\n                    setFieldValue('token', tokenAccountId, false);\n                    setFieldTouched('token', true, false);\n                  }}\n                  component={TokenSelector}\n                  className={styles.rowItem}\n                />\n              </Row>\n\n              <Row>\n                <Field\n                  tokenAccountId={activeTokenAccountId}\n                  isRequired\n                  name=\"speed\"\n                  label=\"Stream duration:\"\n                  deposit={values.deposit}\n                  component={StreamSpeedCalcField}\n                  onSpeedChange={(speed: number) => {\n                    setFieldValue('speed', speed, false);\n                    setFieldTouched('speed', true, false);\n                  }}\n                  className={styles.rowItem}\n                />\n              </Row>\n\n              <Row>\n                <Field\n                  maxLength={COMMENT_TEXT_LIMIT}\n                  name=\"comment\"\n                  label=\"Comment:\"\n                  placeholder=\"Enter comment\"\n                  component={FormikTextArea}\n                  className={styles.rowItem}\n                  data-testid={testIds.createStreamCommentInput}\n                />\n              </Row>\n\n              <Row>\n                <Field\n                  name=\"autoStart\"\n                  description=\"Start stream immediately\"\n                  type=\"checkbox\"\n                  component={FormikCheckbox}\n                  className={styles.rowItem}\n                  data-testid={testIds.createStreamAutostartCheckbox}\n                />\n              </Row>\n\n              <Row>\n                {tokenMeta && (\n                  <div className={styles.feeDisclaimer}>\n                    {`You will be charged \n                      ${formatter.amount(roketoMeta.commission_on_create)} \n                      ${tokenMeta.symbol} fee for the stream`}\n                  </div>\n                )}\n              </Row>\n\n              <div className={styles.actionButtonsWrapper}>\n                {submitError && (\n                  <div className={styles.submitError}>\n                    <ErrorSign />\n                    <span>{submitError.message}</span>\n                  </div>\n                )}\n\n                <Button\n                  displayMode={ButtonDisplayMode.simple}\n                  onClick={onFormCancel}\n                  testId={testIds.createStreamCancelButton}\n                >\n                  Cancel\n                </Button>\n\n                <Button\n                  type={ButtonType.submit}\n                  displayMode={ButtonDisplayMode.action}\n                  testId={testIds.createStreamSubmitButton}\n                >\n                  Create\n                </Button>\n              </div>\n            </form>\n          );\n        }}\n      </Formik>\n    </div>\n  );\n};\n","import BigNumber from 'bignumber.js';\n\nconst PERCENTAGE_MULTIPLIER = 100;\n\n// Retrieves a percentage ratio from A/B\nconst getExactPercentageRatio = (a: string | number, b: string | number): BigNumber => {\n  const aBN = new BigNumber(a);\n  const bBN = new BigNumber(b);\n\n  if (aBN.isEqualTo(0) || bBN.isEqualTo(0)) {\n    return new BigNumber(0);\n  }\n\n  const ratio = aBN.dividedBy(bBN);\n\n  return ratio.multipliedBy(PERCENTAGE_MULTIPLIER);\n};\n\n// Retrieves a percentage ratio from A/B rounded to an integer\nexport const getRoundedPercentageRatio = (a: string | number, b: string | number, roundRatio: number = 0): BigNumber => (\n  getExactPercentageRatio(a, b).dp(roundRatio)\n);\n","import React from 'react';\nimport cn from 'classnames';\n\nimport {getRoundedPercentageRatio} from 'shared/helpers/math';\n\nimport styles from './styles.module.scss';\n\ntype Props = {\n  total: number,\n  streamed: number,\n  withdrawn: number,\n\n  className?: string,\n};\n\nexport const ProgressBar = ({total, streamed, withdrawn, className}: Props) => {\n  const streamedToTotalPercentageRatio = getRoundedPercentageRatio(streamed, total);\n  const withdrawnToStreamedPercentageRatio = getRoundedPercentageRatio(withdrawn, streamed);\n\n  return (\n    <div className={cn(styles.progressBar, className)}>\n      <div className={cn(styles.progress, styles.streamed)} style={{width: `${streamedToTotalPercentageRatio}%`}}>\n        <div className={cn(styles.progress, styles.withdrawn)} style={{width: `${withdrawnToStreamedPercentageRatio}%`}} />\n      </div>\n    </div>\n  );\n};\n","import React from 'react';\n\nimport {ProgressBar} from 'shared/ui/components/ProgressBar';\n\nimport styles from './styles.module.scss';\n\ntype FinancialInfoProps = {\n  title: string,\n  total: number,\n  streamed?: number,\n  withdrawn?: number,\n  withProgressBar?: boolean,\n  testId?: string;\n};\n\nexport const FinancialInfo = ({title, total, streamed , withdrawn, withProgressBar = true, testId}: FinancialInfoProps) => {\n  const financialContent = streamed ? `$ ${streamed} of ${total}` : `$ ${total}`;\n\n  return (\n    <div className={styles.card}>\n      <h3 className={styles.title}>{title}</h3>\n\n      <span className={styles.finance} data-testid={testId}>{financialContent}</span>\n\n      {withProgressBar &&\n        <ProgressBar total={total} streamed={streamed || 0} withdrawn={withdrawn || 0} />\n      }\n    </div>\n  );\n};\n","import BigNumber from 'bignumber.js';\n\nimport {RichTokens} from 'shared/api/ft';\nimport {PriceOracle} from 'shared/api/price-oracle';\nimport {RoketoStream} from 'shared/api/roketo/interfaces/entities';\nimport {getAvailableToWithdraw} from 'shared/api/roketo/helpers';\nimport {streamViewData} from 'features/roketo-resource';\n\nconst INITIAL_VALUE = new BigNumber(0);\nconst MANTISSA = 3;\n\nexport const countTotalUSDWithdrawal = (\n  streams: RoketoStream[],\n  tokens: RichTokens,\n  priceOracle: PriceOracle\n) => {\n  const availableForWithdrawal = streams.reduce((withdrawalSum, inputStream) => {\n    const tokenAccountId = inputStream.token_account_id;\n    const {formatter} = tokens[tokenAccountId];\n\n    const withdrawal = getAvailableToWithdraw(inputStream).toFixed();\n    const amountForDisplay = formatter.toHumanReadableValue(withdrawal, MANTISSA);\n\n    const amountInUSD = priceOracle.getPriceInUsd(tokenAccountId, amountForDisplay);\n\n    return withdrawalSum.plus(amountInUSD);\n  }, INITIAL_VALUE);\n\n  return Number(availableForWithdrawal.toFixed(0));\n};\n\nexport const collectTotalFinancialAmountInfo = (\n  streams: RoketoStream[],\n  tokens: RichTokens,\n  priceOracle: PriceOracle\n) => {\n  const initialInfo = {total: INITIAL_VALUE, streamed: INITIAL_VALUE, withdrawn: INITIAL_VALUE};\n\n  const totalFinancialInfo = streams.reduce((financialInfoAccumulator, stream) => {\n    const tokenAccountId = stream.token_account_id;\n    const {formatter} = tokens[tokenAccountId];\n\n    const {progress} = streamViewData(stream);\n\n    const streamedAmountForDisplay = formatter.toHumanReadableValue(progress.streamed, MANTISSA);\n    const streamedUSD = priceOracle.getPriceInUsd(tokenAccountId, streamedAmountForDisplay);\n\n    const fullAmountForDisplay = formatter.toHumanReadableValue(progress.full, MANTISSA);\n    const fullUSD = priceOracle.getPriceInUsd(tokenAccountId, fullAmountForDisplay);\n\n    const withdrawnAmountForDisplay = formatter.toHumanReadableValue(progress.withdrawn, MANTISSA);\n    const withdrawnUSD = priceOracle.getPriceInUsd(tokenAccountId, withdrawnAmountForDisplay);\n\n    return {\n      total: financialInfoAccumulator.total.plus(fullUSD),\n      streamed: financialInfoAccumulator.streamed.plus(streamedUSD),\n      withdrawn: financialInfoAccumulator.withdrawn.plus(withdrawnUSD),\n    };\n  }, initialInfo);\n\n  return {\n    total: Number(totalFinancialInfo.total.toFixed(0)),\n    streamed: Number(totalFinancialInfo.streamed.toFixed(0)),\n    withdrawn: Number(totalFinancialInfo.withdrawn.toFixed(0)),\n  };\n};\n","import {createStore, sample} from 'effector';\nimport {$tokens, $accountStreams, $priceOracle} from 'services/wallet';\nimport {isActiveStream} from 'shared/api/roketo/helpers';\n\nimport {\n  collectTotalFinancialAmountInfo,\n  countTotalUSDWithdrawal,\n} from '../../lib';\n\nexport const $financialStatus = createStore({\n  outcomeAmountInfo: {\n    total: 0,\n    streamed: 0,\n    withdrawn: 0,\n  },\n  incomeAmountInfo: {\n    total: 0,\n    streamed: 0,\n    withdrawn: 0,\n  },\n  availableForWithdrawal: 0,\n});\n\nsample({\n  source: {\n    tokens: $tokens,\n    streams: $accountStreams,\n    priceOracle: $priceOracle,\n  },\n  fn({tokens, streams: {inputs, outputs}, priceOracle}) {\n    const activeInputStreams = inputs.filter(isActiveStream);\n    const activeOutputStreams = outputs.filter(isActiveStream);\n    return {\n      outcomeAmountInfo: collectTotalFinancialAmountInfo(\n        activeOutputStreams,\n        tokens,\n        priceOracle,\n      ),\n      incomeAmountInfo: collectTotalFinancialAmountInfo(\n        activeInputStreams,\n        tokens,\n        priceOracle,\n      ),\n      availableForWithdrawal: countTotalUSDWithdrawal(\n        activeInputStreams,\n        tokens,\n        priceOracle,\n      ),\n    };\n  },\n  target: $financialStatus,\n});\n","import cn from 'classnames';\nimport {useStore} from 'effector-react';\n\nimport {testIds} from 'shared/constants';\nimport {FinancialInfo} from '../FinancialInfo';\nimport {$financialStatus} from './model';\n\nimport styles from './styles.module.scss';\n\nexport const FinancialStatus = ({className}: {className?: string}) => {\n  const {outcomeAmountInfo, incomeAmountInfo, availableForWithdrawal} =\n    useStore($financialStatus);\n\n  return (\n    <section className={cn(styles.root, className)}>\n      <FinancialInfo\n        title=\"Sending\"\n        total={outcomeAmountInfo.total}\n        streamed={outcomeAmountInfo.streamed}\n        withdrawn={outcomeAmountInfo.withdrawn}\n      />\n\n      <FinancialInfo\n        title=\"Receiving\"\n        total={incomeAmountInfo.total}\n        streamed={incomeAmountInfo.streamed}\n        withdrawn={incomeAmountInfo.withdrawn}\n      />\n\n      <FinancialInfo\n        title=\"Available for withdrawal\"\n        total={availableForWithdrawal}\n        withProgressBar={false}\n        testId={testIds.availableForWithdrawalCaption}\n      />\n    </section>\n  );\n};\n","import React from 'react';\n\nimport styles from './styles.module.scss';\n\nexport const Name = ({name, label}: {name: string, label?: string | undefined}) => (\n  <div className={styles.flexCenter}>\n    <span className={styles.name}>{name}</span>\n\n    {label &&\n      <span className={styles.nameLabel}>{label}</span>\n    }\n  </div>\n);\n","export function ClockIcon({ className }: { className?: string }) {\n  return (\n    <svg width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\" className={className}>\n      <path\n        d=\"M8.99169 0.666504C4.39169 0.666504 0.666687 4.39984 0.666687 8.99984C0.666687 13.5998 4.39169 17.3332 8.99169 17.3332C13.6 17.3332 17.3334 13.5998 17.3334 8.99984C17.3334 4.39984 13.6 0.666504 8.99169 0.666504ZM9.00002 15.6665C5.31669 15.6665 2.33335 12.6832 2.33335 8.99984C2.33335 5.3165 5.31669 2.33317 9.00002 2.33317C12.6834 2.33317 15.6667 5.3165 15.6667 8.99984C15.6667 12.6832 12.6834 15.6665 9.00002 15.6665ZM9.41669 4.83317H8.16669V9.83317L12.5417 12.4582L13.1667 11.4332L9.41669 9.20817V4.83317Z\"\n        fill=\"black\"/>\n    </svg>\n  );\n}\n","import React from 'react';\nimport cn from 'classnames';\nimport RCTooltip from 'rc-tooltip';\n\nimport {ProgressBar} from 'shared/ui/components/ProgressBar';\nimport {ClockIcon} from 'shared/icons/Clock';\n\nimport {getRoundedPercentageRatio} from 'shared/helpers/math';\n\nimport {TokenFormatter} from 'shared/api/ft/token-formatter';\nimport {useToken} from 'shared/hooks/useToken';\nimport {streamViewData} from 'features/roketo-resource';\nimport {RoketoStream} from 'shared/api/roketo/interfaces/entities';\n\nimport styles from './styles.module.scss';\n\nconst TOOLTIP_ALIGN = {\n  points: ['tl', 'bc'],\n  offset: [-24, 10],\n};\n\ntype StreamStatusProps = {\n  stream: RoketoStream;\n  className?: string;\n};\n\nexport const StreamProgress = ({stream, className}: StreamStatusProps) => {\n  const {token_account_id: tokenId, tokens_per_sec: tokensPerSec} = stream;\n\n  const {progress, timeLeft} = streamViewData(stream);\n\n  const {formatter, meta: {symbol}} = useToken(tokenId);\n\n  const streamed = Number(formatter.toHumanReadableValue(progress.streamed, 3));\n  const withdrawn = Number(formatter.toHumanReadableValue(progress.withdrawn, 3));\n  const total = Number(formatter.toHumanReadableValue(progress.full, 3));\n\n  const streamedText = TokenFormatter.formatSmartly(streamed);\n  const withdrawnText = TokenFormatter.formatSmartly(withdrawn);\n\n  const streamedPercentage = getRoundedPercentageRatio(streamed, total, 1);\n  const withdrawnPercentage = getRoundedPercentageRatio(withdrawn, streamed, 1);\n\n  const progressText = `${streamedText} of ${total} `;\n\n  const {formattedValue: speedFormattedValue, unit: speedUnit} = formatter.tokensPerMeaningfulPeriod(tokensPerSec);\n\n  return (\n    <RCTooltip\n      overlayClassName={styles.overlay}\n      destroyTooltipOnHide\n      align={TOOLTIP_ALIGN}\n      placement=\"bottom\"\n      overlay={\n        <div className={cn(styles.tooltip, styles.text)}>\n          <div className={styles.innerStatus}>\n            {progressText}\n            <span className={cn(styles.grey, styles.smaller)}>{symbol}</span>\n          </div>\n\n          <ProgressBar\n            total={total}\n            streamed={streamed}\n            withdrawn={withdrawn}\n          />\n\n          <div className={cn(styles.status, styles.speed)}>\n            {speedFormattedValue}{' '}\n            <span className={cn(styles.grey, styles.smaller)}>{symbol} / {speedUnit}</span>\n          </div>\n\n          {timeLeft && (\n            <div className={styles.remained}>\n              <ClockIcon className={styles.clock}/>\n              {timeLeft}\n            </div>\n          )}\n\n          <div className={cn(styles.progress, styles.streamed)}>\n            Streamed: {streamedText}{' '}\n            <span className={cn(styles.grey, styles.smaller)}>\n               {`${streamedPercentage}%`}\n            </span>\n          </div>\n\n          <div className={cn(styles.progress, styles.withdrawn)}>\n            Withdrawn: {withdrawnText}{' '}\n            <span className={cn(styles.grey, styles.smaller)}>\n               {`${withdrawnPercentage}%`}\n            </span>\n          </div>\n        </div>\n      }\n    >\n      <div className={cn(styles.root, styles.text, className)}>\n        <div className={styles.status}>\n          {progressText}\n          <span className={styles.grey}>{symbol}</span>\n        </div>\n\n        <ProgressBar\n          total={total}\n          streamed={streamed}\n          withdrawn={withdrawn}\n        />\n      </div>\n    </RCTooltip>\n  );\n};\n","import React from 'react';\n\ntype Props = {\n  width?: number,\n  height?: number,\n  className?: string,\n}\n\nconst DEFAULT_WIDTH = 10;\nconst DEFAULT_HEIGHT = 20;\n\nexport const LinkIcon = ({width = DEFAULT_WIDTH, height = DEFAULT_HEIGHT, className}: Props) => (\n  <svg className={className} width={width} height={height} viewBox=\"0 0 10 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M10 15L10 11L8 11L8 15C8 16.65 6.65 18 5 18C3.35 18 2 16.65 2 15L2 11L-4.80825e-07 11L-6.55671e-07 15C-7.76314e-07 17.76 2.24 20 5 20C7.76 20 10 17.76 10 15ZM2 9L2 5C2 3.35 3.35 2 5 2C6.65 2 8 3.35 8 5L8 9L10 9L10 5C10 2.24 7.76 -9.79135e-08 5 -2.18557e-07C2.24 -3.392e-07 -9.79135e-08 2.24 -2.18557e-07 5L-3.93402e-07 9L2 9ZM6 6L6 14L4 14L4 6L6 6Z\" fill=\"currentColor\"/>\n  </svg>\n);\n","import React from 'react';\nimport {useStore} from 'effector-react';\n\nimport {$roketoWallet, $tokens} from 'services/wallet';\nimport {Button, ButtonType, DisplayMode} from '@ui/components/Button';\nimport {RoketoStream} from 'shared/api/roketo/interfaces/entities';\n\nimport {getAvailableToWithdraw} from 'shared/api/roketo/helpers';\nimport { testIds } from 'shared/constants';\n\ntype WithdrawButtonProps = {\n  stream: RoketoStream;\n};\n\nexport function WithdrawButton({ stream }: WithdrawButtonProps) {\n  const tokens = useStore($tokens);\n  const wallet = useStore($roketoWallet)\n  const available = getAvailableToWithdraw(stream);\n  const tokenAccountId = stream.token_account_id;\n  const { formatter } = tokens[tokenAccountId];\n  const amount = formatter.amount(available.toFixed());\n\n  const handleWithdraw = (e: React.SyntheticEvent) => {\n    e.preventDefault();\n\n    wallet?.roketo.api.withdraw({ streamIds: [ stream.id ] });\n  }\n\n  return (\n    <Button\n      disabled={Number(amount) === 0}\n      type={ButtonType.button}\n      displayMode={DisplayMode.primary}\n      onClick={handleWithdraw}\n      testId={testIds.withdrawButton}\n    >\n      Withdraw\n    </Button>\n  );\n}\n","import React from 'react';\n\nexport type BooleanControl = {\n  on: boolean;\n  off: boolean;\n  toggle: () => void,\n  turnOff: () => void,\n  turnOn: () => void,\n  setOn: (state: boolean) => void,\n};\n\nexport function useBool(initial: boolean): BooleanControl {\n  const [on, setOn] = React.useState(initial);\n\n  return {\n    on,\n    off: !on,\n    toggle: () => setOn(!on),\n    turnOff: () => setOn(false),\n    turnOn: () => setOn(true),\n    setOn,\n  };\n}\n","import classNames from 'classnames';\n\nimport { STREAM_STATUS } from 'shared/api/roketo/constants';\nimport type { RoketoStream } from 'shared/api/roketo/interfaces/entities';\n\nconst bindings = {\n  [STREAM_STATUS.Initialized]: {\n    label: 'Initialized',\n  },\n  [STREAM_STATUS.Active]: {\n    label: 'Active',\n  },\n  [STREAM_STATUS.Paused]: {\n    label: 'Paused',\n  },\n  [STREAM_STATUS.Finished]: {\n    label: 'Finished',\n  },\n} as const;\n\ntype StreamStatusProps = {\n  stream: RoketoStream;\n  className?: string;\n};\n\nexport function StreamStatus({ stream, className }: StreamStatusProps) {\n  const binding = typeof stream.status === 'string'\n    ? bindings[stream.status]\n    : bindings[STREAM_STATUS.Finished];\n\n  return (\n    <div className={classNames(className)}>\n      {binding.label}\n    </div>\n  );\n}\n","import {attach} from 'effector';\n\nimport {$roketoWallet} from 'services/wallet';\n\nconst modifyStreamFx = attach({\n  source: $roketoWallet,\n  async effect(\n    wallet,\n    {\n      command,\n      streamId,\n    }: {command: 'start' | 'stop' | 'pause'; streamId: string},\n  ) {\n    if (!wallet) return null;\n    switch (command) {\n      case 'start':\n        return wallet.roketo.api.startStream({streamId});\n      case 'pause':\n        return wallet.roketo.api.pauseStream({streamId});\n      case 'stop':\n        return wallet.roketo.api.stopStream({streamId});\n      default:\n        return null;\n    }\n  },\n});\n\nexport const $loading = modifyStreamFx.pending;\nexport const startStream = modifyStreamFx.prepend((streamId: string) => ({\n  streamId,\n  command: 'start',\n}));\nexport const pauseStream = modifyStreamFx.prepend((streamId: string) => ({\n  streamId,\n  command: 'pause',\n}));\nexport const stopStream = modifyStreamFx.prepend((streamId: string) => ({\n  streamId,\n  command: 'stop',\n}));\n","export function StartIcon() {\n  return (\n    <svg width=\"8\" height=\"10\" viewBox=\"0 0 8 10\" fill=\"none\">\n      <path d=\"M1.66634 2.76016L5.17968 5.00016L1.66634 7.24016V2.76016ZM0.333008 0.333496V9.66683L7.66634 5.00016L0.333008 0.333496Z\" fill=\"currentColor\" />\n    </svg>\n  );\n}\n","export function PauseIcon() {\n  return (\n    <svg width=\"8\" height=\"10\" viewBox=\"0 0 8 10\" fill=\"none\">\n      <path d=\"M0 9.66659H2.66667V0.333252H0V9.66659ZM5.33333 0.333252V9.66659H8V0.333252H5.33333Z\" fill=\"currentColor\"/>\n    </svg>\n  );\n}\n","export function StopIcon() {\n  return (\n    <svg width=\"8\" height=\"8\" viewBox=\"0 0 8 8\" fill=\"none\">\n      <path d=\"M6.66667 1.33333V6.66667H1.33333V1.33333H6.66667ZM8 0H0V8H8V0Z\" fill=\"currentColor\"/>\n    </svg>\n  );\n}\n","import { useState, ReactNode } from 'react';\nimport classNames from 'classnames';\nimport {useStore, useStoreMap} from 'effector-react';\nimport Modal from 'react-modal';\n\nimport { STREAM_STATUS } from 'shared/api/roketo/constants';\nimport { testIds } from 'shared/constants';\nimport {$accountId} from 'services/wallet';\n\nimport { DropdownOpener } from 'shared/kit/DropdownOpener';\nimport { DropdownMenu, DropdownMenuDivider, DropdownMenuItem } from 'shared/kit/DropdownMenu';\nimport { useBool, BooleanControl } from 'shared/hooks/useBool';\nimport type { RoketoStream } from 'shared/api/roketo/interfaces/entities';\nimport {isActiveStream, isDead, isPausedStream} from 'shared/api/roketo/helpers';\n\nimport { StreamStatus } from '../StreamStatus';\nimport {$loading, startStream, pauseStream, stopStream} from './model';\n\nimport { StartIcon } from './StartIcon';\nimport { PauseIcon } from './PauseIcon';\nimport { StopIcon } from './StopIcon';\nimport styles from './styles.module.scss';\n\nfunction ConfirmModal({modalControl, onConfirm, header, buttonText, className, children}: {\n  modalControl: BooleanControl;\n  onConfirm: () => void;\n  header: ReactNode;\n  buttonText: ReactNode\n  children: ReactNode;\n  className: string\n}) {\n  return (\n    <Modal\n      isOpen={modalControl.on}\n      onRequestClose={modalControl.turnOff}\n      className={styles.modalContent}\n      overlayClassName={styles.modalOverlay}\n    >\n      <h2 className={styles.modalHeader}>{header}</h2>\n      <p>\n        {children}\n      </p>\n      <div className={styles.modalButtons}>\n        <button\n          type=\"button\"\n          onClick={modalControl.turnOff}\n          className={classNames(styles.modalButton, styles.modalSecondary)}\n        >\n          Cancel\n        </button>\n        <button\n          type=\"button\"\n          onClick={() => {\n            modalControl.turnOff();\n            onConfirm();\n          }}\n          className={classNames(styles.modalButton, className)}\n        >\n          {buttonText}\n        </button>\n      </div>\n    </Modal>\n  );\n}\n\nexport function StreamControls({ stream, className }: {\n  stream: RoketoStream;\n  className?: string;\n}) {\n  const pauseModalControl = useBool(false);\n  const stopModalControl = useBool(false);\n  const loading = useStore($loading)\n  const [menuOpened, setMenuOpened] = useState(false);\n  const {isOutgoing, isIncoming, isExternal} = useStoreMap({\n    store: $accountId,\n    keys: [stream],\n    fn(accountId) {\n      const outgoing = accountId === stream.owner_id;\n      const incoming = accountId === stream.receiver_id;\n      const external = !outgoing && !incoming;\n      return {isOutgoing: outgoing, isIncoming: incoming, isExternal: external}\n    }\n  })\n\n  if (isDead(stream) || isExternal) {\n    return (\n      <StreamStatus\n        className={className}\n        stream={stream}\n      />\n    );\n  }\n\n  const onClickPause = () => {\n    setMenuOpened(false);\n    if (isIncoming) {\n      pauseModalControl.turnOn();\n    } else {\n      pauseStream(stream.id);\n    }\n  }\n\n  const onClickStop = () => {\n    setMenuOpened(false);\n    stopModalControl.turnOn();\n  }\n\n  const opened = menuOpened && !loading;\n\n  const shouldShowStartButton = stream.status !== STREAM_STATUS.Active && isOutgoing;\n  const shouldShowPauseButton = stream.status === STREAM_STATUS.Active;\n\n  const statusClassName = {\n    [styles.active]: isActiveStream(stream),\n    [styles.pause]: isPausedStream(stream),\n    [styles.stop]: isDead(stream),\n  };\n\n  return (\n    <div className={classNames(styles.relative, className)}>\n      <ConfirmModal\n        modalControl={pauseModalControl}\n        onConfirm={() => pauseStream(stream.id)}\n        header=\"Are you sure?\"\n        buttonText=\"Pause\"\n        className={styles.modalWarning}\n      >\n        As a stream receiver, you will not be able to resume stream. Only stream\n        owners can resume streams.\n      </ConfirmModal>\n      <ConfirmModal\n        modalControl={stopModalControl}\n        onConfirm={() => stopStream(stream.id)}\n        header=\"Stop stream\"\n        buttonText=\"Stop\"\n        className={styles.modalDanger}\n      >\n        This action will completely shut down the stream. After that, it can't be turned on.\n      </ConfirmModal>\n      <DropdownOpener\n        opened={opened}\n        onChange={setMenuOpened}\n        className={classNames(styles.dropdownOpener, statusClassName)}\n        testId={testIds.streamControlsDropdown}\n      >\n        {loading ? 'Loading...' : <StreamStatus stream={stream} className={styles.statusPadded} />}\n      </DropdownOpener>\n\n      <DropdownMenu\n        onClose={() => setMenuOpened(false)}\n        opened={opened}\n        className={styles.controlsMenu}\n      >\n        {shouldShowStartButton && (\n          <DropdownMenuItem>\n            <button\n              type=\"button\"\n              onClick={() => startStream(stream.id)}\n              className={classNames(styles.controlButton, styles.start)}\n              data-testid={testIds.streamStartButton}\n            >\n              <StartIcon />\n              <span>Start</span>\n              {' '}\n            </button>\n          </DropdownMenuItem>\n        )}\n\n        {shouldShowPauseButton && (\n          <DropdownMenuItem>\n            <button\n              type=\"button\"\n              onClick={onClickPause}\n              className={classNames(styles.controlButton, styles.pause)}\n              data-testid={testIds.streamPauseButton}\n            >\n              <PauseIcon />\n              <span>Pause</span>\n            </button>\n          </DropdownMenuItem>\n        )}\n\n        {(shouldShowStartButton || shouldShowPauseButton) &&\n          <DropdownMenuDivider />\n        }\n        <DropdownMenuItem>\n          <button\n            type=\"button\"\n            onClick={onClickStop}\n            className={classNames(styles.controlButton, styles.stop)}\n            data-testid={testIds.streamStopButton}\n          >\n            <StopIcon />\n            <span>Stop</span>\n          </button>\n        </DropdownMenuItem>\n      </DropdownMenu>\n    </div>\n  );\n}\n","import React, {useCallback} from 'react';\nimport cn from 'classnames';\nimport copy from 'clipboard-copy';\n\nimport {LinkIcon} from '@ui/icons/Link';\n\nimport {WithdrawButton} from 'features/stream-control/WithdrawButton';\nimport { StreamControls } from 'features/stream-control/StreamControls';\n\nimport {getStreamLink} from 'shared/helpers/routing';\nimport {isActiveStream} from 'shared/api/roketo/helpers';\nimport {RoketoStream} from 'shared/api/roketo/interfaces/entities';\n\nimport {STREAM_DIRECTION, useGetStreamDirection} from 'shared/hooks/useGetStreamDirection';\nimport styles from './styles.module.scss';\n\nconst StreamLinkButton = ({onCLick}: { onCLick: (event: React.SyntheticEvent) => void }) => (\n  <button className={styles.linkButton} type=\"button\" onClick={onCLick}>\n    <LinkIcon/>\n  </button>\n);\n\ntype Props = {\n  stream: RoketoStream,\n  className?: string,\n}\n\nexport const Controls = ({className, stream}: Props) => {\n  const {id: streamId} = stream;\n\n  const handleLinkClick = useCallback((event: React.SyntheticEvent) => {\n    event.preventDefault();\n\n    const streamLink = getStreamLink(streamId);\n\n    copy(streamLink);\n  }, [streamId]);\n\n  const direction = useGetStreamDirection(stream);\n  const showWithdraw = direction === STREAM_DIRECTION.IN && isActiveStream(stream);\n\n  return (\n    <div className={cn(styles.root, className)}>\n      {showWithdraw &&\n        <WithdrawButton stream={stream} />\n      }\n\n      <StreamControls stream={stream} />\n\n      <StreamLinkButton onCLick={handleLinkClick}/>\n    </div>\n  );\n};\n","import React from 'react';\nimport cn from 'classnames';\nimport {generatePath, Link} from 'react-router-dom';\n\nimport {RoketoStream} from 'shared/api/roketo/interfaces/entities';\nimport {ROUTES_MAP} from 'shared/helpers/routing';\nimport {STREAM_DIRECTION, useGetStreamDirection} from 'shared/hooks/useGetStreamDirection';\n\nimport {Name} from '../Name';\nimport {StreamProgress} from '../StreamProgress';\n\nimport {Controls} from '../Controls';\nimport styles from './styles.module.scss';\n\ntype StreamCardProps = {\n  stream: RoketoStream,\n  className?: string,\n}\n\nexport const StreamCard = ({stream, className}: StreamCardProps) => {\n  const {\n    id,\n    description,\n  } = stream;\n\n  let comment = '';\n\n  try {\n    const parsedDescription = JSON.parse(description);\n    comment = parsedDescription.comment;\n  } catch {\n    comment = description;\n  }\n\n  const isIncomingStream = useGetStreamDirection(stream) === STREAM_DIRECTION.IN;\n\n  const name = isIncomingStream ? stream.owner_id : stream.receiver_id;\n  const label = isIncomingStream ? undefined : 'Sending';\n\n  const streamPageLink = generatePath(ROUTES_MAP.stream.path, {id});\n\n  return (\n    <div className={cn(styles.root, className)}>\n      <Link to={streamPageLink} className={styles.name}>\n        <Name name={name} label={label}/>\n      </Link>\n\n      <StreamProgress stream={stream} className={styles.withMarginRight} />\n\n      <Link to={streamPageLink} className='col-span-2 grow-0'>\n        <p className={styles.comment}>\n          {comment}\n        </p>\n      </Link>\n\n\n      <Controls\n        stream={stream}\n        className={cn(styles.controls, 'col-span-2 grow-0')}\n      />\n    </div>\n  );\n};\n","import React from 'react';\nimport cn from 'classnames';\nimport {useStoreMap} from 'effector-react';\n\nimport {$accountStreams} from 'services/wallet';\nimport {RoketoStream} from 'shared/api/roketo/interfaces/entities';\n\nimport {Button} from '@ui/components/Button';\nimport {Spinner} from '@ui/components/Spinner';\n\nimport {StreamCard} from '../StreamCard';\nimport styles from './styles.module.scss';\n\ntype Props = {\n  displayingStreams: RoketoStream[] | undefined,\n\n  onCreateStreamClick: () => void,\n\n  className?: string,\n}\n\nconst EmptyState = ({children}: {children: React.ReactNode}) => <div className={styles.emptyState}>{children}</div>\n\nexport const StreamsList = ({className, displayingStreams, onCreateStreamClick}: Props) => {\n  const {loading, hasStreams} = useStoreMap($accountStreams,  (value) => ({\n    loading: !value.streamsLoaded,\n    hasStreams: value.inputs.length + value.outputs.length > 0,\n  }));\n\n  const hasDisplayedStreams = (displayingStreams?.length ?? 0) > 0;\n\n  if (loading) {\n    return (\n      <EmptyState>\n        <Spinner wrapperClassName={styles.loader} />\n      </EmptyState>\n    );\n  }\n\n  if (!hasStreams) {\n    return (\n      <EmptyState>\n        <div>\n          You don't have any streams yet.\n        </div>\n        <Button onClick={onCreateStreamClick}>Create First Stream</Button>\n      </EmptyState>\n    );\n  }\n\n  if (!hasDisplayedStreams) {\n    return (\n      <EmptyState>\n        <div>No streams matching your filters. Try selecting different ones</div>\n      </EmptyState>\n    );\n  }\n\n  return (\n    <div className={cn(styles.container, className)}>\n      <section className={styles.flexColumn}>\n        <div className={cn(styles.withPaddings, 'grid grid-cols-6 gap-x-10')}>\n          <h3 className={styles.title}>Wallet address</h3>\n          <h3 className={styles.title}>Amount to stream</h3>\n          <h3 className={styles.title}>Comment</h3>\n        </div>\n\n        {displayingStreams?.map(stream => (\n          <StreamCard\n            stream={stream}\n            key={stream.id}\n            className={cn(styles.withPaddings, 'grid grid-cols-6 gap-x-10')}\n          />\n        ))}\n      </section>\n    </div>\n  );\n}\n","import {generatePath} from 'react-router-dom';\nimport {attach} from 'effector';\nimport {$roketoWallet} from 'services/wallet';\nimport type {FormValues} from 'features/create-stream/CreateStream';\nimport {ROUTES_MAP} from 'shared/helpers/routing';\n\nconst redirectUrl = generatePath(ROUTES_MAP.streams.path);\nconst returnPath = `${window.location.origin}/#${redirectUrl}`;\n\nexport const handleCreateStreamFx = attach({\n  source: $roketoWallet,\n  async effect(wallet, values: FormValues) {\n    if (!wallet) throw Error('no roketo wallet exists');\n    const {roketo, tokens} = wallet;\n    const {receiver, autoStart, comment, deposit, speed, token} = values;\n\n    const {formatter, api, roketoMeta} = tokens[token];\n\n    await roketo.api.createStream({\n      deposit: formatter.toYocto(deposit),\n      comment,\n      receiverId: receiver,\n      tokenAccountId: token,\n      commissionOnCreate: roketoMeta.commission_on_create,\n      tokensPerSec: speed,\n      isAutoStart: autoStart,\n      callbackUrl: returnPath,\n      handleTransferStream: api.transfer,\n    });\n  },\n});\n","import {useState, useCallback} from 'react';\nimport cn from 'classnames';\nimport {useStoreMap} from 'effector-react';\n\nimport {$accountStreams} from 'services/wallet';\nimport {Layout} from '@ui/components/Layout';\nimport {Button} from '@ui/components/Button';\n\nimport {Modal} from 'shared/components/Modal';\n\nimport {WithdrawAllButton} from 'features/stream-control/WithdrawAllButton';\nimport {StreamFilters} from 'features/filtering/StreamFilters';\nimport {CreateStream} from 'features/create-stream/CreateStream';\nimport {FinancialStatus} from 'widgets/financialStatus';\nimport {StreamsList} from 'widgets/streamsList';\n\nimport {RoketoStream} from 'shared/api/roketo/interfaces/entities';\nimport { testIds } from 'shared/constants';\nimport {handleCreateStreamFx} from './model'\n\nimport styles from './styles.module.scss';\n\nexport const StreamsPage = () => {\n  const allStreams = useStoreMap({\n    store: $accountStreams,\n    keys: [],\n    fn: ({inputs, outputs}) => [...inputs, ...outputs],\n  });\n\n  const [filteredItems, setFiltered] = useState<RoketoStream[] | undefined>([]);\n  const [isModalOpened, setIsModalOpened] = useState<boolean>(false);\n  const toggleModal = useCallback(\n    () => setIsModalOpened(!isModalOpened),\n    [setIsModalOpened, isModalOpened]\n  );\n\n  return (\n    <div className={styles.root}>\n      <Layout>\n        <section className={cn(styles.flex, styles.header)}>\n          <h1 className={styles.title}>Streams</h1>\n\n          <div className={cn(styles.flex, styles.buttonsWrapper)}>\n            <WithdrawAllButton>Withdraw tokens</WithdrawAllButton>\n\n            <Button\n              onClick={toggleModal}\n              testId={testIds.createStreamButton}\n            >\n              Create a stream\n            </Button>\n            <Modal isOpen={isModalOpened} onCloseModal={toggleModal}>\n              <CreateStream onFormCancel={toggleModal} onFormSubmit={handleCreateStreamFx}/>\n            </Modal>\n          </div>\n        </section>\n\n        <FinancialStatus />\n\n        <StreamFilters\n          items={allStreams}\n          onFilterDone={setFiltered}\n          className={styles.streamFilters}\n        />\n\n        <StreamsList\n          displayingStreams={filteredItems}\n          className={styles.section}\n          onCreateStreamClick={toggleModal}\n        />\n\n      </Layout>\n    </div>\n  );\n};\n","import React from 'react';\nimport classNames from 'classnames';\n\nimport {Authorization} from 'features/authorization';\n\nimport styles from './styles.module.scss';\n\nexport function AuthorizePage() {\n  return (\n    <div className=\"flex h-screen mx-3\">\n      <div\n        className={classNames('lg:m-auto mx-auto my-auto lg:w-2/5 bg-gray-90 rounded-3xl p-5', styles.block)}\n      >\n        <div className={classNames('my-24', styles.content)}>\n          <h1 className=\"text-3xl mb-4 font-semibold\">\n            {' '}\n            Login via NEAR Network\n            {' '}\n          </h1>\n          <p className={classNames('mb-4', styles.hint)}>\n            Click button below to login or create new account\n          </p>\n          <Authorization />\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport classNames from 'classnames';\nimport { Link } from 'react-router-dom';\nimport './Button.scss';\n\nconst variants = {\n  main: 'main',\n  filled: 'filled',\n  outlined: 'outlined',\n};\n\ntype CommonButtonProps = {\n  icon?: never;\n  children?: React.ReactNode;\n  className?: string;\n  size?: 'normal' | 'big';\n  loading?: boolean;\n  disabled?: boolean;\n  loadingText?: string;\n  color?: string;\n  variant?: string;\n};\n\ntype SpecificLinkProps = {\n  link: true;\n  to: string;\n};\n\ntype SpecificButtonProps = {\n  link?: false;\n  type: 'submit' | 'button';\n  onClick?: (e: React.SyntheticEvent) => void;\n};\n\ntype ButtonProps = CommonButtonProps & (SpecificLinkProps | SpecificButtonProps);\n\nexport function Button({\n  icon,\n  children,\n  className,\n  size,\n  loading,\n  disabled,\n  loadingText,\n  color = 'light',\n  variant = 'outlined',\n  ...restProps\n}: ButtonProps) {\n  let variantStyles = '';\n  let sizeStyles = '';\n  let colorStyles = '';\n\n  if (variant === variants.main) {\n    variantStyles = 'Button--main';\n    sizeStyles = size === 'normal'\n      ? 'px-5 py-4  rounded-2xl font-semibold'\n      : size === 'big'\n        ? 'px-12 py-6 rounded-3xl font-bold'\n        : '';\n  } else if (variant === variants.outlined) {\n    variantStyles = 'border-solid border font-semibold rounded-lg ';\n    colorStyles = color === 'light'\n      ? 'border-blue hover:bg-blue'\n      : color === 'dark'\n        ? 'border-border hover:bg-hover hover:border-hover'\n        : '';\n  } else if (variant === variants.filled) {\n    variantStyles = 'bg-dark hover:bg-hover font-semibold rounded-lg active:bg-transparent';\n  }\n\n  const commonProps = {\n    disabled: loading || disabled,\n    className: classNames(\n      'inline-flex items-center justify-center p-3  whitespace-nowrap',\n      variantStyles,\n      sizeStyles,\n      colorStyles,\n      disabled ? 'Button--disabled' : '',\n      'transition-all',\n      className\n    ),\n  };\n\n  const content = loading ? (\n    loadingText\n  ) : (\n    <>\n      {icon ? <div className=\"mr-2\">{icon}</div> : null}\n      {children}\n    </>\n  );\n\n  return restProps.link ? (\n    <Link {...commonProps} {...restProps}>{content}</Link>\n  ) : (\n    <button\n      {...commonProps}\n      {...restProps}\n      type={restProps.type === 'button' ? 'button' : 'submit'}\n    >\n      {content}\n    </button>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/RUSSIANS_HACK.83d68466.gif\";","export default __webpack_public_path__ + \"static/media/crab.3fbdb8f2.gif\";","import classNames from 'classnames';\nimport React from 'react';\nimport { Button } from 'shared/kit/Button';\nimport hackImage from 'shared/images/RUSSIANS_HACK.gif';\nimport crabImage from 'shared/images/crab.gif';\n\ntype PageErrorProps = {\n  message?: React.ReactNode;\n  onRetry: () => void;\n  className: string;\n};\n\nexport function PageError({\n  message,\n  onRetry,\n  className,\n}: PageErrorProps) {\n  const rand = React.useRef(Math.random());\n\n  return (\n    <div className={classNames('text-center', className)}>\n      {rand.current > 0.5 ? (\n        <img\n          src={hackImage}\n          className=\"mx-auto\"\n          alt=\"funny hackers gif with bird dancing around\"\n        />\n      ) : (\n        <img\n          src={crabImage}\n          className=\"mx-auto\"\n          alt=\"crab with a knife tries to hurt people\"\n        />\n      )}\n\n      <h1 className=\"text-4xl font-semibold mb-6 mt-10\">\n        Something is broken.\n      </h1>\n      <p className=\"text-gray mb-4\">Finally we have something to fix</p>\n      {message && (\n        <code className=\"p-4 border-special-inactive border block text-special-inactive text-xs mb-4\">\n          {message}\n        </code>\n      )}\n      <Button\n        variant=\"outlined\"\n        color=\"dark\"\n        className=\"mt-10\"\n        onClick={onRetry}\n        type=\"button\"\n      >\n        Try again\n      </Button>\n      <p className=\"text-xs text-gray mt-2\">(that probably wont help)</p>\n    </div>\n  );\n}\n","export function BreadcrumbIcon({ className }: { className?: string }) {\n  return (\n    <svg className={className} width=\"8\" height=\"12\" viewBox=\"0 0 8 12\" fill=\"none\">\n      <path\n        d=\"M0.895051 11.6285C0.745051 11.6285 0.603384 11.5702 0.495051 11.4535C0.295051 11.2285 0.311718 10.8869 0.528384 10.6869L5.836 5.90328L0.495028 1.27828C0.270028 1.07828 0.261695 0.736613 0.461695 0.511613C0.661695 0.294947 1.00336 0.27828 1.22836 0.47828L6.97766 5.46995C7.23599 5.70328 7.23599 6.10328 6.97766 6.33662L1.26172 11.4869C1.15338 11.5869 1.02838 11.6285 0.895051 11.6285Z\"\n        fill=\"currentColor\"/>\n    </svg>\n  );\n}\n","import {createStore, sample, attach, combine, createEffect} from 'effector';\nimport {createGate} from 'effector-react';\n\nimport type {RoketoStream} from 'shared/api/roketo/interfaces/entities';\nimport {$roketoWallet, lastCreatedStreamUpdated} from 'services/wallet';\n\nexport const pageGate = createGate<string | null>({defaultState: null});\nexport const $stream = createStore<RoketoStream | null>(null);\nexport const $pageError = createStore<string | null>(null);\nconst requestStreamFx = attach({\n  source: $roketoWallet,\n  async effect(wallet, streamId: string | null) {\n    return streamId && wallet?.roketo.api.getStream({streamId});\n  },\n});\nexport const $loading = combine(\n  $stream,\n  $pageError,\n  (stream, error) => !stream && !error,\n);\n\nconst streamRevalidationTimerFx = createEffect(\n  () =>\n    new Promise<void>((rs) => {\n      setTimeout(rs, 10000);\n    }),\n);\n/**\n * when last_created_stream is changed, revalidation timer ends or stream id in page URL changed\n * read page stream id\n * check whether page is open\n * and start requesting stream data\n * */\nsample({\n  clock: [\n    lastCreatedStreamUpdated,\n    pageGate.state,\n    streamRevalidationTimerFx.doneData,\n  ],\n  source: pageGate.state,\n  filter: pageGate.status,\n  target: requestStreamFx,\n});\n/**\n * when page is opened or revalidation timer ends\n * start revalidation timer again\n * */\nsample({\n  clock: [pageGate.open, streamRevalidationTimerFx.doneData],\n  filter: pageGate.status,\n  target: streamRevalidationTimerFx,\n});\nsample({\n  clock: requestStreamFx.doneData,\n  filter: Boolean,\n  target: $stream,\n});\n/** clear stream data when page is closed */\nsample({\n  clock: pageGate.close,\n  fn: () => null,\n  target: $stream,\n});\nsample({\n  clock: requestStreamFx.failData,\n  fn: (error) => error.message,\n  target: $pageError,\n});\n/** clear error message when stream successfully requested */\nsample({\n  clock: requestStreamFx.doneData,\n  fn: () => null,\n  target: $pageError,\n});\n","import React, {useState} from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport {useStore, useGate} from 'effector-react';\nimport copy from 'clipboard-copy';\nimport classNames from 'classnames';\nimport { format, isPast } from 'date-fns';\n\nimport {$tokens} from 'services/wallet';\nimport { streamViewData } from 'features/roketo-resource';\nimport { LinkIcon } from '@ui/icons/Link';\nimport { getStreamLink, ROUTES_MAP } from 'shared/helpers/routing';\nimport { PageError } from 'shared/components/PageError';\nimport {DropdownOpener} from 'shared/kit/DropdownOpener';\nimport { Layout } from '@ui/components/Layout';\nimport type { RoketoStream } from 'shared/api/roketo/interfaces/entities';\nimport { getStreamingSpeed } from 'features/create-stream/lib';\nimport { ProgressBar } from '@ui/components/ProgressBar';\nimport { StreamControls } from 'features/stream-control/StreamControls';\nimport { STREAM_DIRECTION, useGetStreamDirection } from 'shared/hooks/useGetStreamDirection';\nimport { STREAM_STATUS } from 'shared/api/roketo/constants';\nimport { WithdrawButton } from 'features/stream-control/WithdrawButton';\nimport { TokenImage } from 'shared/kit/TokenImage';\nimport { getRoundedPercentageRatio } from 'shared/helpers/math';\nimport { getAvailableToWithdraw } from 'shared/api/roketo/helpers';\n\nimport styles from './styles.module.scss';\nimport { BreadcrumbIcon } from './BreadcrumbIcon';\nimport {pageGate, $stream, $pageError, $loading} from './model'\n\nfunction StreamProgress({ stream }: { stream: RoketoStream }) {\n  const tokens = useStore($tokens);\n\n  const { meta, formatter } = tokens[stream.token_account_id];\n  const { progress: { streamed, withdrawn, full } } = streamViewData(stream);\n\n  return (\n    <div>\n      <div className={styles.numericProgress}>\n        <TokenImage\n          tokenAccountId={stream.token_account_id}\n          className={styles.tokenIcon}\n        />\n        <span>{`${meta.symbol} ${formatter.amount(streamed)} of ${formatter.amount(full)}`}</span>\n      </div>\n      <ProgressBar\n        total={Number(full)}\n        streamed={Number(streamed)}\n        withdrawn={Number(withdrawn)}\n      />\n    </div>\n  );\n}\n\nfunction StreamButtons({stream}: {stream: RoketoStream}) {\n  const {isDead} = streamViewData(stream);\n  const direction = useGetStreamDirection(stream);\n\n  if (isDead) {\n    return null;\n  }\n\n  return (\n    <div className={styles.buttons}>\n      <StreamControls stream={stream} />\n\n      {direction === STREAM_DIRECTION.IN && stream.status === STREAM_STATUS.Active &&\n        <WithdrawButton stream={stream} />\n      }\n    </div>\n  );\n}\n\nfunction StreamSpeed({stream}: {stream: RoketoStream}) {\n  const tokens = useStore($tokens);\n\n  return (\n    <div>\n      <span className={styles.blockTitle}>Speed</span>\n      <div className={styles.speed}>\n        {getStreamingSpeed(Number(stream.tokens_per_sec), tokens[stream.token_account_id])}\n      </div>\n    </div>\n  );\n}\n\nfunction StreamComment({stream}: {stream: RoketoStream}) {\n  let comment = '';\n\n  try {\n    const parsedDescription = JSON.parse(stream.description);\n    comment = parsedDescription.comment;\n  } catch {\n    comment = stream.description;\n  }\n\n  if (comment === '') {\n    return null;\n  }\n\n  return (\n    <div>\n      <span className={styles.blockTitle}>Comment</span>\n      <div className={styles.commentBody}>\n        {comment}\n      </div>\n    </div>\n  );\n}\n\nfunction CopyButton({stringToCopy}: {stringToCopy: string}) {\n  return (\n    <button\n      type=\"button\"\n      className={styles.copyButton}\n      onClick={() => copy(stringToCopy)}\n    >\n      <LinkIcon className={styles.linkIcon} />\n    </button>\n  );\n}\n\nfunction StreamCopyUrlBlock({stream}: {stream: RoketoStream}) {\n  const link = getStreamLink(stream.id);\n\n  return (\n    <div>\n      <div className={classNames(styles.blockTitle, styles.copyTitle)}>\n        Public link to view the stream\n        <CopyButton stringToCopy={link} />\n      </div>\n      <div className={styles.link}>{link}</div>\n    </div>\n  );\n}\n\nfunction InfoRow({ title, children }: { title: string, children: React.ReactNode }) {\n  return (\n    <div className={styles.infoRow}>\n      <span className={styles.infoTitle}>{title}</span>\n      {children}\n    </div>\n  );\n}\n\nfunction StreamData({stream}: {stream: RoketoStream}) {\n  const direction = useGetStreamDirection(stream);\n  const tokens = useStore($tokens);\n  const {\n    streamEndInfo,\n    timeLeft,\n    progress: {streamed, left, full},\n  } = streamViewData(stream);\n\n  const streamedToTotalPercentageRatio = getRoundedPercentageRatio(streamed, full).toNumber();\n  const leftToTotalPercentageRatio = getRoundedPercentageRatio(left, full).toNumber();\n  const available = getAvailableToWithdraw(stream).toNumber();\n\n  const {meta, formatter} = tokens[stream.token_account_id];\n  \n  const [showOtherInfo, setShowOtherInfo] = useState(false);\n\n  return (\n    <div className={classNames(styles.tile, styles.infoTile)}>\n      <div className={styles.blockHeader}>Stream info</div>\n      <InfoRow title=\"Sender\">\n        <span className={styles.font16}>\n          {direction === STREAM_DIRECTION.OUT ? 'You' : stream.owner_id}\n        </span>\n      </InfoRow>\n      <InfoRow title=\"Receiver\">\n        <span className={styles.font16}>\n          {direction === STREAM_DIRECTION.IN ? 'You' : stream.receiver_id}\n        </span>\n      </InfoRow>\n      <InfoRow title=\"Amount\">\n        <span className={styles.font14}>\n          {formatter.amount(full)}&nbsp;\n          <span className={styles.font12}>{meta.symbol}</span>\n        </span>\n      </InfoRow>\n      <InfoRow title=\"Stream Created\">\n        <span className={styles.font14}>\n          {format(\n            new Date(Number(stream.timestamp_created) / 1000000),\n            \"PP 'at' p\",\n          )}\n        </span>\n      </InfoRow>\n      {streamEndInfo !== null && (\n        <InfoRow title={isPast(streamEndInfo) ? 'Stream Ended' : 'Stream Ends'}>\n          <span className={styles.font14}>\n            {format(new Date(streamEndInfo), \"PP 'at' p\")}\n          </span>\n        </InfoRow>\n      )}\n      <InfoRow title=\"Token\">\n        <span className={styles.font14}>\n          {meta.name},&nbsp;\n          <span className={styles.font12}>{meta.symbol}</span>\n        </span>\n      </InfoRow>\n\n      <div className={styles.divider} />\n      <DropdownOpener\n        className={styles.dropdownOpener}\n        opened={showOtherInfo}\n        onChange={(update) => {\n          setShowOtherInfo(update);\n        }}\n      >\n        <h3 className={styles.sectionHeader}>Other info</h3>\n      </DropdownOpener>\n\n      {showOtherInfo && (\n        <>\n          <InfoRow title=\"Stream ID\">\n            <div className={styles.centeredFlex}>\n              <span className={classNames(styles.font14, styles.streamID)}>\n                {stream.id}\n              </span>\n              <CopyButton stringToCopy={stream.id} />\n            </div>\n          </InfoRow>\n          <InfoRow title=\"Remaining\">\n            <span className={styles.font14}>{timeLeft || 'Finished'}</span>\n          </InfoRow>\n          <InfoRow title=\"Tokens Transferred\">\n            <span className={styles.font14}>\n              {formatter.amount(streamed)}&nbsp;\n              <span className={styles.font12}>\n                {meta.symbol}{' '}\n                <span className={styles.grey}>\n                  ({streamedToTotalPercentageRatio}%)\n                </span>\n              </span>\n            </span>\n          </InfoRow>\n          {stream.timestamp_created !== stream.last_action && (\n            <InfoRow title=\"Latest Withdrawal\">\n              <span className={styles.font14}>\n                {format(\n                  new Date(Number(stream.last_action) / 1000000),\n                  \"PP 'at' p\",\n                )}\n              </span>\n            </InfoRow>\n          )}\n          <InfoRow title=\"Tokens Left\">\n            <span className={styles.font14}>\n              {formatter.amount(left)}&nbsp;\n              <span className={styles.font12}>\n                {meta.symbol}{' '}\n                <span className={styles.grey}>\n                  ({leftToTotalPercentageRatio}%)\n                </span>\n              </span>\n            </span>\n          </InfoRow>\n          <InfoRow title=\"Tokens Available\">\n            <span className={styles.font14}>\n              {formatter.amount(available)}&nbsp;\n              <span className={styles.font12}>{meta.symbol}</span>\n            </span>\n          </InfoRow>\n        </>\n      )}\n    </div>\n  );\n}\n\nexport function StreamPage() {\n  const {id} = useParams() as {id: string};\n  useGate(pageGate, id);\n  const loading = useStore($loading);\n  const stream = useStore($stream);\n  const pageError = useStore($pageError);\n  return (\n    <div className={styles.root}>\n      <Layout>\n        <div className={styles.breadbrumbs}>\n          <Link\n            to={ROUTES_MAP.streams.path}\n            className={styles.streamsLink}\n          >\n            Streams\n          </Link>\n          <BreadcrumbIcon className={styles.breadbrumb} />\n          <span className={styles.id}>{id}</span>\n        </div>\n        {pageError &&\n          <PageError\n            className=\"max-w-2xl mx-auto py-32\"\n            message={pageError}\n            onRetry={() => {}}\n          />\n        }\n        {loading && <div className=\"py-32 text-center text-gray text-2xl\">Loading...</div>}\n\n        {!pageError && stream &&\n          <main className={styles.stream}>\n            <div className={styles.left}>\n              <div className={classNames(styles.tile, styles.remaining)}>\n                <span className={styles.blockTitle}>\n                  Remaining\n                </span>\n                <span>\n                  {streamViewData(stream).timeLeft || 'Finished'}\n                </span>\n              </div>\n              <div className={classNames(styles.tile, styles.main)}>\n                <StreamProgress stream={stream} />\n                <StreamButtons stream={stream} />\n                <StreamSpeed stream={stream} />\n                <div className={styles.divider} />\n                <StreamComment stream={stream} />\n                <StreamCopyUrlBlock stream={stream} />\n              </div>\n            </div>\n            <div className={styles.right}>\n              <StreamData stream={stream} />\n            </div>\n          </main>\n        }\n      </Layout>\n    </div>\n  );\n}\n","import { Button, DisplayMode as ButtonDisplayMode } from '@ui/components/Button';\n\nimport styles from './styles.module.scss';\n\nexport function NotFoundPage() {\n  return (\n    <div className={styles.root}>\n      <div className={styles.big404}>4<span className={styles.big0}>0</span>4</div>\n      <div className={styles.pageNotFound}>Page not found</div>\n      <div className={styles.weAreSorry}>\n        We're sorry the page<br />you requested was not found.\n      </div>\n      <Button\n        className={styles.backButton}\n        displayMode={ButtonDisplayMode.action}\n        onClick={() => window.history.back()}\n      >\n        Back\n      </Button>\n    </div>\n  );\n}\n","import { useEffect } from 'react';\n\nimport {\n  HashRouter as Router,\n  Route,\n  Switch,\n  Redirect,\n} from 'react-router-dom';\nimport { useStore } from 'effector-react';\n\nimport { $isSignedIn } from 'services/wallet';\n\nimport { Header } from 'shared/components/Header';\nimport { PrivateRoute } from 'shared/components/PrivateRoute';\nimport {Footer} from 'widgets/footer';\n\nimport { env } from 'shared/config';\nimport { ROUTES_MAP } from 'shared/helpers/routing';\n\nimport { StreamsPage } from './streams';\nimport { AuthorizePage } from './authorize';\nimport { StreamPage } from './stream';\nimport { NotFoundPage } from './not-found';\n\nconst TRASH_QUERY_PARAMS = ['transactionHashes', 'errorCode', 'errorMessage'];\n\nexport function Routing() {\n  useEffect(() => {\n    // Remove unused search params\n    const url = new URL(window.location.href);\n\n    TRASH_QUERY_PARAMS.forEach((param) => {\n      if (url.searchParams.has(param)) {\n        url.searchParams.delete(param);\n      }\n    });\n\n    window.history.replaceState(null, '', url);\n  });\n\n  const signedIn = useStore($isSignedIn)\n\n  const {\n    root,\n    stream,\n    streams,\n    authorize,\n  } = ROUTES_MAP;\n\n  return (\n    <Router basename={env.PUBLIC_URL}>\n      <Header />\n\n      <Switch>\n        <PrivateRoute\n          exact\n          redirect={<Redirect to={streams.path} />}\n          allowed={!signedIn}\n          path={root.path}\n        >\n          <Redirect to={authorize.path} />\n        </PrivateRoute>\n\n        <PrivateRoute\n          exact\n          redirect={<Redirect to={streams.path} />}\n          allowed={!signedIn}\n          path={authorize.path}\n        >\n          <AuthorizePage />\n        </PrivateRoute>\n\n        <Route exact path={stream.path}>\n          <StreamPage />\n        </Route>\n\n        <PrivateRoute\n          exact\n          redirect={<Redirect to={authorize.path} />}\n          allowed={signedIn}\n          path={streams.path}\n        >\n          <StreamsPage />\n        </PrivateRoute>\n\n        <Route render={NotFoundPage} />\n      </Switch>\n\n      <Footer />\n    </Router>\n  );\n}\n","import 'error-polyfill';\nimport {useEffect} from 'react';\nimport {useStore} from 'effector-react';\nimport {Routing} from 'pages';\nimport {initWallets, $appLoading} from 'services/wallet';\n\nimport './index.scss';\n\nfunction App() {\n  useEffect(() => {\n    initWallets();\n  }, []);\n  const isLoading = useStore($appLoading);\n  return isLoading ? null : <Routing />;\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Modal from 'react-modal';\nimport App from './app';\n\nconst rootEl = document.getElementById('root')!;\n\nModal.setAppElement(rootEl);\nReactDOM.render(<App />, rootEl);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"styles_root__1wORt\",\"layout\":\"styles_layout__3xx--\",\"section\":\"styles_section__2r57z\",\"logo\":\"styles_logo__w4rz3\",\"links\":\"styles_links__2CP2p\",\"legal\":\"styles_legal__1I5Mf\",\"socials\":\"styles_socials__pFfwm\",\"jurInfo\":\"styles_jurInfo__p5KY0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__2E2rA\",\"flexColumn\":\"styles_flexColumn__vggyT\",\"withPaddings\":\"styles_withPaddings__3K5aA\",\"title\":\"styles_title__284Zv\",\"emptyState\":\"styles_emptyState__3rrQX\",\"loader\":\"styles_loader__xExeF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"styles_root__2_gZI\",\"description\":\"styles_description__9SwXr\",\"preparedTokensWrapper\":\"styles_preparedTokensWrapper__1n7o-\",\"preparedToken\":\"styles_preparedToken__3wMsS\",\"info\":\"styles_info__OjsX3\",\"amount\":\"styles_amount__2Pqv4\",\"symbol\":\"styles_symbol__HcQ7S\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"styles_wrapper__TAkqw\",\"speedInput\":\"styles_speedInput__pndxz\",\"input\":\"styles_input__2-TTa\",\"label\":\"styles_label__1NoFr\",\"formLabel\":\"styles_formLabel__2w0iu\",\"formField\":\"styles_formField__GA6eY\",\"speed\":\"styles_speed__M079a\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"styles_root__2UE9y\",\"section\":\"styles_section__2YjD4\",\"flex\":\"styles_flex__5E-Gn\",\"header\":\"styles_header__2fhvP\",\"buttonsWrapper\":\"styles_buttonsWrapper__KUQAt\",\"title\":\"styles_title__1SNWA\",\"streamFilters\":\"styles_streamFilters__ZRc30\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"styles_root__3Kyti\",\"wrapper\":\"styles_wrapper__P7W3S\",\"balance\":\"styles_balance__o5yA-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profile\":\"profile_profile__Dw7tT\",\"dropdownOpener\":\"profile_dropdownOpener__rb_O7\",\"name\":\"profile_name__2iGU9\",\"avatar\":\"profile_avatar__20etB\",\"dropdownMenu\":\"profile_dropdownMenu__2a3bk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"styles_overlay__2aFDm\",\"bodyOverflowHidden\":\"styles_bodyOverflowHidden__1QZAq\",\"content\":\"styles_content__2Cjkl\",\"title\":\"styles_title__1w-yg\",\"close\":\"styles_close__1xZ3p\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"styles_root__17WVD\",\"big404\":\"styles_big404__1ZrOC\",\"big0\":\"styles_big0__1G3uC\",\"pageNotFound\":\"styles_pageNotFound__2_Tlm\",\"weAreSorry\":\"styles_weAreSorry__-XpXJ\",\"backButton\":\"styles_backButton__2uRdQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"styles_root__37pAo\",\"label\":\"styles_label__1Z1u2\",\"description\":\"styles_description__3HMUq\",\"error\":\"styles_error__iK_dp\",\"required\":\"styles_required__eL5Iv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dropdownWrapper\":\"styles_dropdownWrapper__1mfn5\",\"dropdownOpener\":\"styles_dropdownOpener__xnUU_\",\"tokenOption\":\"styles_tokenOption__2nenl\",\"withHover\":\"styles_withHover__17YXX\",\"dropdownMenu\":\"styles_dropdownMenu__1M_bV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"progressBar\":\"styles_progressBar__WfqVp\",\"streamed\":\"styles_streamed__2JSLG\",\"progress\":\"styles_progress__1Vfwm\",\"withdrawn\":\"styles_withdrawn__2eocI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"styles_root__1Ickw\",\"controls\":\"styles_controls__35vzk\",\"name\":\"styles_name__26X88\",\"comment\":\"styles_comment__z2oIA\",\"withMarginRight\":\"styles_withMarginRight__20A25\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"styles_root__2eQAJ\",\"primary\":\"styles_primary__F4Fip\",\"action\":\"styles_action__ZCYgS\",\"simple\":\"styles_simple__2Db_y\"};"],"sourceRoot":""}