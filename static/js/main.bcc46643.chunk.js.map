{"version":3,"sources":["pages/profile/index.module.scss","shared/icons/Account.tsx","shared/icons/Streams.tsx","shared/icons/Send.tsx","shared/kit/NavLink/NavLink.tsx","shared/config.ts","shared/api/near/index.ts","shared/helpers/date.ts","shared/api/roketo/constants.ts","shared/api/roketo/helpers.ts","shared/api/roketo/contract-api.ts","shared/api/roketo/index.ts","shared/constants.ts","shared/api/ft/token-formatter.ts","shared/api/ft/ft-api.ts","shared/api/ft/index.ts","shared/api/price-oracle/constants.ts","shared/api/price-oracle/index.ts","app/roketo-context.tsx","shared/kit/Button/Button.tsx","shared/api/roketo-web/roketo-web.ts","features/near-auth/NearAuthButton.tsx","shared/helpers/routing.ts","shared/images/logo_stream_with_text.svg","shared/hooks/useBool.ts","shared/icons/Profile.tsx","shared/components/Header.tsx","shared/components/PrivateRoute.tsx","shared/kit/FormField/FormField.tsx","shared/kit/Input/Input.tsx","shared/icons/Tokens.tsx","shared/kit/TokenImage/index.tsx","shared/hooks/useOutsideClick.ts","shared/kit/DropdownMenu/DropdownMenu.tsx","shared/icons/DropdownArrowDown.tsx","shared/kit/DropdownOpener/DropdownOpener.tsx","shared/kit/RadioButton/RadioButton.tsx","shared/kit/Tooltip/Tooltip.tsx","features/create-stream/StreamSpeedCalcField.tsx","shared/hooks/usePrev.ts","shared/hooks/useToken.ts","shared/helpers/isWNearTokenId.ts","features/create-stream/Balance.tsx","features/create-stream/CreateStreamForm.tsx","pages/send/index.tsx","shared/kit/ProgressBar/ProgressBar.tsx","shared/icons/Link.tsx","shared/components/DurationTimer.tsx","shared/hooks/useGetStreamDirection.ts","shared/icons/Pause.tsx","shared/icons/Start.tsx","shared/icons/Stop.tsx","features/stream-control/StreamStatus.tsx","features/stream-control/StreamControls.tsx","features/roketo-resource/index.ts","shared/icons/StreamOut.tsx","shared/icons/StreamIn.tsx","features/stream-view/StreamingSpeed.tsx","shared/kit/Bullet/Bullet.tsx","features/stream-view/StreamProgressPercentage.tsx","features/stream-view/StreamCard.tsx","shared/kit/Filter/Filter.tsx","features/filtering/lib.ts","features/filtering/useStreamFilters.ts","features/filtering/StreamFilters.tsx","features/stream-control/WithdrawAllButton.tsx","shared/images/RUSSIANS_HACK.gif","shared/images/crab.gif","shared/components/PageError.tsx","pages/streams/index.tsx","shared/components/AccountStreamCard.tsx","shared/components/AccountColumn.tsx","shared/icons/StreamWithdraw.tsx","pages/account/index.tsx","pages/authorize/index.tsx","shared/icons/Copy.tsx","features/stream-view/StreamOverviewCard.tsx","features/stream-control/WithdrawButton.tsx","features/stream-view/StreamDashboard.tsx","shared/icons/ArrowLeft.tsx","pages/stream/index.tsx","pages/profile/index.tsx","pages/index.tsx","app/index.tsx","index.tsx"],"names":["module","exports","AccountIcon","width","height","viewBox","fill","xmlns","d","stroke","strokeWidth","strokeLinecap","StreamsIcon","cx","cy","r","SendIcon","NavLink","icon","children","className","to","onClick","match","useRouteMatch","isActive","isExact","classNames","env","process","GAS_SIZE","createNearInstance","a","keyStore","keyStores","BrowserLocalStorageKeyStore","connect","nodeUrl","walletUrl","networkId","headers","near","getNearAuth","walletConnection","login","logout","signOut","window","location","reload","requestSignIn","getAccountId","accountId","account","getAccountBalance","balance","signedIn","formatDistanceLocale","xYears","xMonths","xDays","xSeconds","xMinutes","xHours","shortEnLocale","formatDistance","token","count","replace","STREAM_STATUS","isIdling","stream","status","isDead","getAvailableToWithdraw","value","period","millisecondsToSeconds","Date","now","last_action","Number","BigNumber","minimum","tokens_per_sec","RoketoContractApi","contract","this","active_incoming_streams","active_outgoing_streams","deposit","inactive_incoming_streams","inactive_outgoing_streams","is_cron_allowed","last_created_stream","stake","total_incoming","total_outgoing","total_received","get_account","account_id","newAccount","Err","Ok","from","limit","get_account_incoming_streams","res","get_account_outgoing_streams","streamId","get_stream","stream_id","get_dao","description","receiverId","tokenAccountId","commissionOnCreate","tokensPerSec","cliffPeriodSec","isAutoStart","isExpirable","isLocked","callbackUrl","handleTransferStream","totalAmount","plus","toFixed","transferPayload","owner_id","receiver_id","token_name","BigInt","cliff_period_sec","is_locked","is_auto_start_enabled","is_expirable","start_stream","pause_stream","stop_stream","streamIds","withdraw","stream_ids","initRoketo","nearAPI","viewMethods","changeMethods","api","roketoUserAccountPromise","getAccount","daoPromise","getDao","Promise","all","roketoUserAccount","dao","SECONDS_IN_HOUR","SECONDS_IN_MINUTE","SECONDS_IN_DAY","SECONDS_IN_WEEK","SECONDS_IN_MONTH","SECONDS_IN_YEAR","TokenFormatter","tokenDecimals","MP","amount","numbro","divide","formatted","format","mantissa","trimMantissa","optionalMantissa","average","multiply","multipliers","unit","firstGoodLookingMultiplier","find","multiplier","formattedValue","formatSmartly","FTApi","transfer","payload","getIsRegistered","isRegistered","actions","transactions","functionCall","memo","msg","JSONbig","stringify","Create","request","unshift","utils","parseNearAmount","signAndSendTransaction","walletCallbackUrl","Contract","ft_metadata","ft_balance_of","storage_balance_of","total","near_deposit","storage_deposit","initFT","tokens","richRokens","Object","keys","map","getMetadata","getBalance","meta","formatter","decimals","roketoMeta","NEAR_MULTIPLIER","DAI_MULTIPLIER","TOKEN_MULTIPLIER_MAP","CONTRACT_VIEW_METHODS_LIST","CONTRACT_CHANGE_METHODS_LIST","convertRawPriceToTokenMap","tokenPrices","relyingSourceOracleId","reduce","accumulatorMap","priceToken","tokenId","desiredSourceOracle","reports","oracle_id","price","convertTokenToUsdFactory","priceTokenMap","tokenToMultiplierMap","tokenPrice","tokenMultiplier","initPriceOracle","priceOracleContract","get_assets","rawAssets","tokenMap","getPriceInUsd","AppContext","React","createContext","RoketoContextProvider","useState","context","setContext","useEffect","init","WalletConnection","auth","roketo","priceOracle","Provider","ERR_NOT_IN_NEAR_CONTEXT","Error","useRoketoContext","useContext","variants","Button","size","loading","disabled","loadingText","color","variant","restProps","variantStyles","sizeStyles","colorStyles","commonProps","content","link","type","serverConfig","TokenProvider","initialized","authApiClient","client","getRefreshedToken","getAccountIdAndNear","key","savedToken","localStorage","containsUnicode","generateLoginParams","loginParams","accessToken","config","getKey","keyPair","timestamp","sign","TextEncoder","encode","String","Uint8Signature","signature","Array","encodeURIComponent","tokenProvider","onErrorRetry","error","revalidate","retryCount","message","startsWith","refreshToken","apiConfig","authMethods","bearer","usersApiClient","useUser","useSWR","findOne","NearAuthButton","data","name","email","src","style","borderRadius","margin","alt","routes","getStreamLink","origin","useBool","initial","on","setOn","off","toggle","turnOff","turnOn","ProfileIcon","MinifiedHeader","logo","LogoText","FullHeader","menuControl","navigation","Header","PrivateRoute","allowed","redirect","path","exact","render","FormField","label","rest","Input","borderColor","NearTokenImage","props","version","preserveAspectRatio","transform","FallbackTokenImage","currentTokens","TokenIcon","image","Component","TokenImage","DropdownMenu","opened","onClose","ref","useRef","callback","handleClick","target","current","HTMLElement","contains","document","addEventListener","removeEventListener","useOutsideClick","DropdownMenuItem","DropdownMenuDivider","DropdownArrowDown","DropdownOpener","onChange","rounded","minimal","minimalClasses","RadioButton","active","checked","Tooltip","placement","html","overlay","align","dangerouslySetInnerHTML","__html","SpeedInput","placeholder","StreamSpeedCalcField","months","setMonths","days","setDays","minutes","setMinutes","hours","setHours","durationInSeconds","differenceInDays","addMonths","dividedToIntegerBy","prevSpeed","usePrev","e","useToken","isWNearTokenId","symbol","Balance","actualBalance","available","CreateStreamForm","onSubmit","schema","Yup","shape","receiver","required","test","Boolean","connection","provider","query","request_type","finality","moreThan","speed","autoStart","comment","max","CreateStreamFormSchema","isDropdownOpened","setIsDropdownOpened","submitError","setError","formikOnSubmit","values","undefined","allAvailableTokens","initialValues","validationSchema","validateOnBlur","validateOnChange","validateOnMount","setFieldValue","setFieldTouched","handleSubmit","isSubmitting","activeTokenAccountId","activeToken","tokenMeta","field","id","tokensPerMeaningfulPeriod","toYocto","length","maxLength","commission_on_create","redirectUrl","generatePath","returnPath","SendPage","createStream","GRADIENT_STOP","GRADIENTS","ProgressBar","progresses","p","sort","b","progress","i","background","GradientSVG","endColor","startColor","progressValue","idCSS","rotation","gradientTransform","offset","stopColor","ArcProgressBar","circleRatio","styles","buildStyles","pathColor","minValue","maxValue","colors","trailColor","LinkIcon","clipPath","strokeLinejoin","DurationTimer","untilTimestamp","suffix","finishedText","untilDate","dateValid","isNaN","getTime","expired","duration","intervalToDuration","start","end","weeks","years","seconds","formatDuration","locale","STREAM_DIRECTION","useGetStreamDirection","PauseIcon","StartIcon","StopIcon","x","y","rx","bindings","colorClass","StreamStatus","binding","PauseConfirmModal","modalControl","onConfirm","isOpen","onRequestClose","overlayClassName","StreamControls","setLoading","menuOpened","setMenuOpened","isOutgoing","isIncoming","isExternalStream","handlePause","pauseStream","handleStart","startStream","handleStop","stopStream","useStreams","getAccountIncomingStreams","inputs","getAccountOutgoingtreams","outputs","streamViewData","availableToWithdraw","secondsLeft","minus","dividedBy","toNumber","timestampEnd","dateEnd","full","tokens_total_withdrawn","withdrawn","streamed","left","percentages","StreamOutIcon","StreamInIcon","StreamingSpeed","direction","token_account_id","speedInfo","Bullet","StreamProgressPercentage","formattedFloatValue","percentageValue","output","StreamCard","timeLeft","copy","FilterOptionWithCounter","option","Filter","options","renderOption","renderActive","setOpened","useFilter","useMemo","selectOption","currentFilterFunction","optionsArray","STREAM_TYPE_FILTER","STREAM_STATUS_FILTER","ALL","useStreamFilters","streams","statusOptions","directionOptions","statusFilter","directionFilter","result","items","filters","filteredItems","setFilteredItems","filterCounts","setFilterCounts","filteredItemsValue","filterCountsValue","forEach","filter","filterRunResult","currentFilterCount","push","useFilters","compareBy","sorts","bigBalanceFirst","fn","highSpeedFirst","highSpeedLast","mostRecent","statusPriority","defaultStreamSort","indexOf","StreamFilters","onFilterDone","sorting","setSorting","sortOptions","sortedStreams","counts","WithdrawAllButton","activeInputs","tokensData","tmpResult","preparedTokenData","PageError","onRetry","rand","Math","random","hackImage","crabImage","StreamsPage","setFiltered","streamsSWR","secondsTillRevalidation","setSecondsTillRevalidation","allStreams","setTimeout","mutate","clearTimeout","nearConversionRate","AccountStreamCard","showPeriod","balanceValue","multiplyAmountByTimePeriod","PERIODS","sec","min","hour","day","AccountColumn","header","tokensField","periodsOptions","selectedPeriod","StreamWithdrawIcon","AccountPage","AuthorizePage","backgroundColor","CopyIcon","VerticalData","HorizontalData","StreamOverviewCard","amount_to_push","creator_id","timestamp_created","getEmptyStream","commissionPercentage","commission_coef","val","shiftedBy","pow","WithdrawButton","StreamDashboard","ArrowLeftIcon","BackButton","StreamCopyUrlBlock","StreamPage","streamSWR","swr","getStream","errorRetryInterval","errorRetryCount","isCompleted","setInterval","clearInterval","useSingleStream","useParams","maybeStream","pageError","NAME_INPUT","EMAIL_INPUT","ProfilePage","isMutating","setIsMutating","userSWR","formRef","updateUser","useCallback","preventDefault","newName","newEmail","upsert","optimisticData","busy","isValidating","profileFormBusy","defaultValue","Routing","url","URL","href","TRANSACTION_HASHES","searchParams","has","delete","history","replaceState","basename","App","rootEl","getElementById","Modal","setAppElement","ReactDOM"],"mappings":"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","file":"static/js/main.bcc46643.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"profileFormBusy\":\"profile_profileFormBusy__1a27V\"};","import React from 'react';\n\nexport function AccountIcon() {\n  return (\n    <svg\n      width=\"17\"\n      height=\"17\"\n      viewBox=\"0 0 17 17\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <path\n        d=\"M1.35828 8.21811C1.35828 7.03631 1.88087 5.91501 2.78586 5.15499L6.96214 1.64773C7.70587 1.02314 8.79082 1.02314 9.53456 1.64773L13.7108 5.15499C14.6158 5.91501 15.1384 7.03631 15.1384 8.2181V12.4077C15.1384 14.0646 13.7953 15.4077 12.1384 15.4077H4.35827C2.70142 15.4077 1.35828 14.0646 1.35828 12.4077V8.21811Z\"\n        stroke=\"currentColor\"\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n      />\n    </svg>\n  );\n}\n","import React from 'react';\n\nexport function StreamsIcon() {\n  return (\n    <svg\n      width=\"14\"\n      height=\"14\"\n      viewBox=\"0 0 14 14\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <circle cx=\"2.08925\" cy=\"2.03994\" r=\"2.03994\" fill=\"currentColor\" />\n      <circle cx=\"11.1691\" cy=\"2.03994\" r=\"2.03994\" fill=\"currentColor\" />\n      <circle cx=\"2.08925\" cy=\"11.1198\" r=\"2.03994\" fill=\"currentColor\" />\n      <circle cx=\"11.1691\" cy=\"11.1198\" r=\"2.03994\" fill=\"currentColor\" />\n    </svg>\n  );\n}\n","import React from 'react';\n\nexport function SendIcon() {\n  return (\n    <svg\n      width=\"12\"\n      height=\"12\"\n      viewBox=\"0 0 12 12\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <path\n        d=\"M10.5309 10.5238L1.9707 1.96368M1.9707 1.96368V10.5238M1.9707 1.96368H10.5308\"\n        stroke=\"currentColor\"\n        strokeWidth=\"2.5\"\n        strokeLinecap=\"round\"\n      />\n    </svg>\n  );\n}\n","import React from 'react';\nimport classNames from 'classnames';\nimport { Link, useRouteMatch } from 'react-router-dom';\n\ntype NavLinkProps = {\n  icon: React.ReactNode;\n  children: React.ReactNode;\n  className?: never;\n  to: string;\n  onClick: () => void;\n};\n\nexport function NavLink({\n  icon, children, className, to, onClick\n}: NavLinkProps) {\n  const activeClassname = 'bg-hover';\n  const match = useRouteMatch(to);\n  const isActive = match && match.isExact;\n\n  return (\n    <Link\n      to={to}\n      className={classNames(\n        className,\n        'text-white font-semibold',\n        'flex items-center px-5 py-4 rounded-xl ',\n        'group cursor-pointer whitespace-nowrap',\n        isActive ? activeClassname : '',\n        'transition-all',\n        'hover:bg-hover',\n      )}\n      onClick={onClick}\n    >\n      <div\n        className={classNames(\n          'group-hover:text-blue',\n          isActive ? 'text-blue' : '',\n        )}\n      >\n        {icon}\n      </div>\n      <div className=\"ml-2\">{children}</div>\n    </Link>\n  );\n}\n","type EnvType = {\n  ACCOUNT_SUFFIX: string;\n  NEAR_NETWORK_ID: string;\n  NEAR_NODE_URL: string;\n  ROKETO_CONTRACT_NAME: string;\n  WALLET_URL: string;\n  PUBLIC_URL: string;\n  PRICE_ORACLE_CONTRACT_NAME: string,\n  PRICE_ORACLE_SOURCE_ID: string,\n  WNEAR_ID: string;\n}\n\nexport const env = {\n  ACCOUNT_SUFFIX: process.env.REACT_APP_NEAR_ACCOUNT_SUFFIX,\n  NEAR_NETWORK_ID: process.env.REACT_APP_NEAR_NETWORK_ID,\n  NEAR_NODE_URL: process.env.REACT_APP_NEAR_NODE_URL,\n  ROKETO_CONTRACT_NAME: process.env.REACT_APP_ROKETO_CONTRACT_NAME,\n  WALLET_URL: process.env.REACT_APP_WALLET_URL,\n  PUBLIC_URL: process.env.PUBLIC_URL,\n  PRICE_ORACLE_CONTRACT_NAME: process.env.REACT_APP_PRICE_ORACLE_CONTRACT_NAME,\n  PRICE_ORACLE_SOURCE_ID: process.env.REACT_APP_PRICE_ORACLE_SOURCE_ID,\n  WNEAR_ID: process.env.REACT_APP_WNEAR_ID,\n} as EnvType;\n\nexport const GAS_SIZE = \"200000000000000\";\n","import { connect, keyStores, WalletConnection, ConnectedWalletAccount,  } from 'near-api-js';\nimport { AccountBalance } from 'near-api-js/lib/account';\n\nimport { env } from 'shared/config';\n\nexport async function createNearInstance() {\n  const keyStore = new keyStores.BrowserLocalStorageKeyStore();\n  const near = await connect({\n    nodeUrl: env.NEAR_NODE_URL,\n    walletUrl: env.WALLET_URL,\n    networkId: env.NEAR_NETWORK_ID,\n    keyStore,\n    headers: {},\n  });\n\n  return near;\n}\n\nexport type NearAuth = {\n  balance?: AccountBalance;\n  account: ConnectedWalletAccount;\n  signedIn: boolean;\n  accountId: string;\n  login: () => void,\n  logout: () => void,\n}\n\nexport async function getNearAuth(walletConnection: WalletConnection): Promise<NearAuth> {\n  const accountId = await walletConnection.getAccountId();\n  const account = await walletConnection.account();\n\n  let balance;\n\n  if (accountId) {\n    balance = await account.getAccountBalance();\n  }\n\n  async function login() {\n    const appTitle = 'Roketo Token Streaming Service';\n  \n    await walletConnection.requestSignIn(\n      env.ROKETO_CONTRACT_NAME,\n      appTitle,\n    );\n  }\n  \n  async function logout() {\n    await walletConnection.signOut();\n\n    window.location.reload(); \n  }\n\n  return {\n    balance,\n    account,\n    signedIn: !!accountId,\n    accountId,\n    login,\n    logout,\n  }\n}\n\n\n\n","export const formatDistanceLocale = {\n  xYears: '{{count}} years',\n  xMonths: '{{count}} months',\n  xDays: '{{count}}d',\n  xSeconds: '{{count}}s',\n  xMinutes: '{{count}}m',\n  xHours: '{{count}}h',\n} as const;\n\ntype TokenType = keyof typeof formatDistanceLocale;\n\nexport const shortEnLocale = {\n  formatDistance: (token: TokenType, count: string) => formatDistanceLocale[token].replace('{{count}}', count),\n};\n\nexport function isValidDate(d: Date) {\n  return !Number.isNaN(d.getTime());\n}\n\nexport function fromNanosecToSec(value: number | string) {\n  return Number(value) / 1000 / 1000 / 1000;\n}\n\nexport function fromNanosecToMilisec(value: number | string) {\n  return Number(value) / 1000 / 1000;\n}\n","export const STREAM_STATUS = {\n  Initialized: 'Initialized',\n  Active: 'Active',\n  Paused: 'Paused',\n  Finished: 'Finished'\n} as const;\n\nexport const STREAM_ACTION_TYPE = {\n  INIT: 'Init',\n  DEPOSIT: 'Deposit',\n  START: 'Start',\n  WITHDRAW: 'Withdraw',\n  PAUSE: 'Pause',\n  STOP: 'Stop',\n} as const;\n","import BigNumber from 'bignumber.js';\nimport { millisecondsToSeconds } from 'date-fns';\n\nimport { fromNanosecToSec } from 'shared/helpers/date';\n\nimport { STREAM_STATUS } from './constants';\nimport { RoketoStream, RoketoAccount } from './interfaces/entities';\n\nexport function isIdling(stream: RoketoStream) {\n  return (\n    stream.status === STREAM_STATUS.Initialized\n    || stream.status === STREAM_STATUS.Paused\n  );\n}\n\nexport function isDead(stream?: RoketoStream) {\n  return stream?.status === STREAM_STATUS.Finished;\n}\n\nexport function getAvailableToWithdraw(stream: RoketoStream): BigNumber {\n  const nowSec = millisecondsToSeconds(Date.now());\n  const lastActionSec = fromNanosecToSec(stream.last_action);\n  const period = nowSec - lastActionSec;\n\n  return BigNumber.minimum(\n    stream.balance, \n    Number(stream.tokens_per_sec) * period\n  );\n}\n\nexport const getEmptyAccount = (): RoketoAccount => ({\n  active_incoming_streams: 0,\n  active_outgoing_streams: 0,\n  deposit: \"0\",\n  inactive_incoming_streams: 0,\n  inactive_outgoing_streams: 0,\n  is_cron_allowed: true,\n  last_created_stream: \"any\",\n  stake: \"0\",\n  total_incoming: {},\n  total_outgoing: {},\n  total_received: {}\n});\n\nexport const getEmptyStream = (id: string = 'any'): RoketoStream => ({\n  amount_to_push: \"1250000000000000000000\",\n  balance: \"1249999999999999990000\",\n  creator_id: \"dcversus.testnet\",\n  description: \"lol\",\n  id,\n  is_expirable: true,\n  is_locked: false,\n  last_action: 1648397477757220400,\n  owner_id: \"dcversus.testnet\",\n  receiver_id: \"dcversus2.testnet\",\n  status: \"Active\",\n  timestamp_created: 1648397477757220400,\n  token_account_id: \"wrap.testnet\",\n  tokens_per_sec: \"1111111111111\",\n  tokens_total_withdrawn: \"0\",\n})\n","import { Account } from 'near-api-js';\nimport BigNumber from 'bignumber.js';\n\nimport { GAS_SIZE } from 'shared/config';\nimport { RoketoContract } from './interfaces/contracts';\nimport { RoketoAccount, RoketoStream } from './interfaces/entities';\nimport { CreateStreamApiProps, StreamsProps } from './interfaces/roketo-api'\nimport { getEmptyAccount } from './helpers';\n\ntype NewRoketoApiProps = {\n  account: Account;\n  contract: RoketoContract;\n}\n\nexport class RoketoContractApi {\n  contract: RoketoContract;\n\n  account: Account;\n\n  constructor({\n    contract,\n    account,\n  }: NewRoketoApiProps) {\n    this.contract = contract;\n\n    this.account = account;\n  }\n\n  async getAccount(): Promise<RoketoAccount> {\n    if (!this.account.accountId) {\n      return getEmptyAccount();\n    }\n\n    const newAccount = await this.contract.get_account({ account_id: this.account.accountId });\n\n    if (newAccount.Err) {\n      return getEmptyAccount();\n    }\n\n    return newAccount.Ok;\n  }\n\n  async getAccountIncomingStreams({ from, limit }: StreamsProps): Promise<RoketoStream[]> {\n    const res = await this.contract.get_account_incoming_streams({ account_id: this.account.accountId, from, limit });\n    \n    return res.Ok;\n  }\n\n  async getAccountOutgoingtreams({ from, limit }: StreamsProps): Promise<RoketoStream[]> {\n    const res = await this.contract.get_account_outgoing_streams({ account_id: this.account.accountId, from, limit });\n\n    return res.Ok;\n  }\n\n  async getStream({ streamId }: { streamId: string }) {\n    const res = await this.contract.get_stream({\n      stream_id: streamId,\n    });\n\n    return res.Ok;\n  }\n\n  async getDao() {\n    const res = await this.contract.get_dao();\n\n    return res;\n  }\n\n  async createStream({\n    description,\n    deposit,\n    receiverId,\n    tokenAccountId,\n    commissionOnCreate,\n    tokensPerSec,\n    cliffPeriodSec,\n    isAutoStart = true,\n    isExpirable,\n    isLocked,\n    callbackUrl,\n    handleTransferStream,\n  }: CreateStreamApiProps) {\n    const totalAmount = new BigNumber(deposit).plus(commissionOnCreate).toFixed();\n    const transferPayload = {\n      description,\n      balance: deposit,\n      owner_id: this.account.accountId,\n      receiver_id: receiverId,\n      token_name: tokenAccountId,\n      tokens_per_sec: BigInt(tokensPerSec),\n      cliff_period_sec: cliffPeriodSec,\n      is_locked: isLocked,\n      is_auto_start_enabled: isAutoStart,\n      is_expirable: isExpirable,\n    };\n\n    return handleTransferStream(\n      transferPayload,\n      totalAmount,\n      callbackUrl\n    );\n  }\n\n  async startStream({ streamId }: { streamId: string }) {\n    const res = await this.contract.start_stream(\n      { stream_id: streamId },\n      GAS_SIZE,\n      '1'\n    );\n\n    return res;\n  }\n\n  async pauseStream({ streamId }: { streamId: string }) {\n    const res = await this.contract.pause_stream(\n      { stream_id: streamId },\n      GAS_SIZE,\n      '1'\n    );\n\n    return res;\n  }\n\n  async stopStream({ streamId }: { streamId: string }) {\n    const res = await this.contract.stop_stream(\n      { stream_id: streamId },\n      GAS_SIZE,\n      '1'\n    );\n    return res;\n  }\n\n  async withdraw({ streamIds }: { streamIds: string[] }) {\n    const res = await this.contract.withdraw(\n      { stream_ids: streamIds },\n      GAS_SIZE,\n      '1'\n    );\n    return res;\n  }\n}\n","import * as nearAPI from \"near-api-js\";\nimport { Account } from \"near-api-js\";\n\nimport { env } from \"shared/config\";\n\nimport { RoketoContract } from './interfaces/contracts';\nimport { RoketoContractApi } from \"./contract-api\";\nimport { RoketoAccount, RoketoDao } from \"./interfaces/entities\";\n\nexport interface Roketo {\n  api: RoketoContractApi;\n  dao: RoketoDao;\n  account: RoketoAccount;\n}\n\nexport async function initRoketo({\n  account,\n}: {\n  account: Account;\n}): Promise<Roketo> {\n  const contract = new nearAPI.Contract(account, env.ROKETO_CONTRACT_NAME, {\n    viewMethods: [\n      \"get_stats\",\n      \"get_dao\",\n      \"get_token\",\n      \"get_stream\",\n      \"get_account\",\n      \"get_account_incoming_streams\",\n      \"get_account_outgoing_streams\",\n      \"get_account_ft\",\n    ],\n    changeMethods: [\n      \"start_stream\",\n      \"pause_stream\",\n      \"stop_stream\",\n      \"withdraw\",\n    ],\n  }) as RoketoContract;\n\n  // create high level api for outside usage\n  const api = new RoketoContractApi({\n    contract,\n    account,\n  });\n\n  const roketoUserAccountPromise = api.getAccount();\n\n  const daoPromise = api.getDao();\n\n  const [\n    roketoUserAccount,\n    dao\n  ] = await Promise.all([\n    roketoUserAccountPromise,\n    daoPromise,\n  ]);\n\n  return {\n    api,\n    dao,\n    account: roketoUserAccount,\n  };\n}\n","\nexport const SECONDS_IN_MINUTE = 60;\nexport const SECONDS_IN_HOUR = SECONDS_IN_MINUTE * 60;\nexport const SECONDS_IN_DAY = SECONDS_IN_HOUR * 24;\nexport const SECONDS_IN_WEEK = SECONDS_IN_DAY * 7;\nexport const SECONDS_IN_MONTH = SECONDS_IN_WEEK * 4;\nexport const SECONDS_IN_YEAR = SECONDS_IN_MONTH * 12;\n","\nimport numbro from 'numbro';\n\nimport {\n  SECONDS_IN_YEAR,\n  SECONDS_IN_MONTH,\n  SECONDS_IN_WEEK,\n  SECONDS_IN_DAY,\n  SECONDS_IN_HOUR,\n  SECONDS_IN_MINUTE\n} from 'shared/constants';\n\nexport class TokenFormatter {\n  tokenDecimals: number;\n\n  MP: number;\n\n  constructor(tokenDecimals: number ) {\n    this.tokenDecimals = tokenDecimals;\n    this.MP = 10 ** tokenDecimals;\n  }\n\n  static formatSmartly(value: number) {\n    if (value !== 0 && value < 0.001) {\n      return '<0.001';\n    }\n\n    if (value === 0) {\n      return '0';\n    }\n\n    return numbro(value).format({\n     mantissa: 3,\n     trimMantissa: true,\n     optionalMantissa: true,\n     average: true,\n   })\n  }\n\n  // for display purposes, converts from yocto values\n  amount(amount: number | string) {\n    const value = numbro(amount).divide(this.MP).value();\n\n    const formatted = numbro(value).format({\n      mantissa: 3,\n      trimMantissa: true,\n      optionalMantissa: true,\n      average: true,\n    });\n\n    if (value === 0) {\n      return '0';\n    }\n\n    if (amount !== 0 && value < 0.001) {\n      return '<0.001';\n    }\n\n    return formatted;\n  }\n\n  toYocto(value: number | string) {\n    return numbro(value)\n      .multiply(this.MP)\n      .format({ mantissa: 0 });\n  }\n\n  // tries to find the best interval for display\n  // to avoid 0.0000000000000000000000000009839248 tokens per sec\n  tokensPerMeaningfulPeriod(tokensPerSec: number | string) {\n    const multipliers = [\n      1,\n      SECONDS_IN_MINUTE,\n      SECONDS_IN_HOUR,\n      SECONDS_IN_DAY,\n      SECONDS_IN_WEEK,\n      SECONDS_IN_MONTH,\n      SECONDS_IN_YEAR,\n    ];\n    const unit = {\n      1: 'second',\n      [SECONDS_IN_MINUTE]: 'minute',\n      [SECONDS_IN_HOUR]: 'hour',\n      [SECONDS_IN_DAY]: 'day',\n      [SECONDS_IN_WEEK]: 'week',\n      [SECONDS_IN_MONTH]: 'month',\n      [SECONDS_IN_YEAR]: 'year',\n    };\n\n    const firstGoodLookingMultiplier = multipliers.find((multiplier) => {\n      const value = numbro(tokensPerSec)\n        .multiply(multiplier)\n        .divide(this.MP)\n        .value();\n\n      const isOk = value > 0.1;\n      return isOk;\n    }) || SECONDS_IN_YEAR;\n\n    const value = numbro(tokensPerSec)\n      .multiply(firstGoodLookingMultiplier)\n      .divide(this.MP)\n      .value();\n\n    return {\n      formattedValue: TokenFormatter.formatSmartly(value),\n      unit: unit[firstGoodLookingMultiplier],\n    };\n  }\n}\n","import { Account, Contract, utils, transactions } from 'near-api-js';\nimport BigNumber from 'bignumber.js';\nimport JSONbig from 'json-bigint';\n\nimport { env, GAS_SIZE } from 'shared/config';\n\nimport { TokenMetadata } from './types';\n\ntype FTContract = Contract & {\n  ft_balance_of: (options: { account_id: string }) => Promise<string>;\n  storage_balance_of: (options: { account_id: string }) => Promise<{ total: string, available: string }>;\n  ft_metadata: () => Promise<TokenMetadata>;\n  near_deposit: (options: { }, gas: string, deposit: string) => Promise<never>;\n  storage_deposit: (options: { }, gas: string, deposit: string | null) => Promise<never>;\n  ft_transfer_call: ({ args, gas, callbackUrl, amount }: { args: any, gas: string, callbackUrl: string, amount: number }) => Promise<never>\n};\n\nexport class FTApi {\n  contract: FTContract;\n\n  tokenAccountId: string;\n\n  account: Account;\n\n  constructor(account: Account, tokenAccountId: string) {\n    this.tokenAccountId = tokenAccountId;\n    this.account = account;\n\n    this.contract = new Contract(account, tokenAccountId, {\n      viewMethods: ['ft_balance_of', 'ft_metadata', 'storage_balance_of'],\n      changeMethods: ['ft_transfer_call', 'storage_deposit', 'near_deposit'],\n    }) as FTContract;\n  }\n\n  async getMetadata(): Promise<TokenMetadata> {\n    const res = await this.contract.ft_metadata();\n\n    return res;\n  }\n\n  async getBalance(): Promise<string> {\n    if (!this.account.accountId) {\n      return '0';\n    }\n\n    const res = await this.contract.ft_balance_of({ account_id: this.account.accountId });\n\n    return res;\n  }\n\n  async getIsRegistered(): Promise<boolean> {\n    if (!this.account.accountId) {\n      return false;\n    }\n\n    const res = await this.contract.storage_balance_of({ account_id: this.account.accountId });\n\n    return res && res.total !== '0';\n  }\n\n  async nearDeposit(deposit: string): Promise<void> {\n    const res = await this.contract.near_deposit({}, GAS_SIZE, deposit);\n\n    return res;\n  }\n  \n  async storageDeposit(): Promise<void> {\n    const res = await this.contract.storage_deposit(\n      {},\n      GAS_SIZE,\n      utils.format.parseNearAmount('0.00125') // account creation costs 0.00125 NEAR for storage\n    );\n  \n    return res;\n  }\n\n  transfer = async (payload: any, amount: string, callbackUrl?: string) => {\n    const isRegistered = await this.getIsRegistered();\n\n    const actions = [\n      transactions.functionCall(\n        \"near_deposit\",\n        {},\n        '30000000000000',\n        // we should add 1 for Push purposes\n        new BigNumber(amount).plus('1').toFixed()\n      ),\n      transactions.functionCall(\n        'ft_transfer_call',\n        {\n          receiver_id: env.ROKETO_CONTRACT_NAME,\n          amount: new BigNumber(amount).toFixed(),\n          memo: 'Roketo transfer',\n          msg: JSONbig.stringify({\n            Create: {\n              request: payload\n            }\n          }),\n        },\n        '100000000000000',\n        1\n      ),\n      transactions.functionCall(\n        'ft_transfer_call',\n        {\n          receiver_id: env.ROKETO_CONTRACT_NAME,\n          amount: '1',\n          memo: 'Roketo transfer',\n          msg: '\"Push\"',\n        },\n        '100000000000000',\n        1\n      )\n    ];\n\n    if (!isRegistered) {\n      actions.unshift(\n        transactions.functionCall(\n          \"storage_deposit\",\n          {},\n          '30000000000000',\n          utils.format.parseNearAmount('0.00125') // account creation costs 0.00125 NEAR for storage\n        )\n      )\n    }\n\n    // @ts-ignore\n    const res = this.account.signAndSendTransaction({\n      receiverId: this.tokenAccountId,\n      walletCallbackUrl: callbackUrl,\n      actions\n    });\n\n    return res;\n  }\n}\n","import { Account } from 'near-api-js';\n\nimport { RoketoDao, RoketoTokenMeta } from 'shared/api/roketo/interfaces/entities';\n\nimport { TokenMetadata } from './types';\nimport { TokenFormatter } from './token-formatter';\nimport { FTApi } from './ft-api';\n\nexport type RichTokens = {\n  [tokenAccountId: string]: {\n    api: FTApi;\n    roketoMeta: RoketoTokenMeta;\n    formatter: TokenFormatter;\n    meta: TokenMetadata;\n    balance: string;\n    isRegistered: boolean;\n  }\n}\n\ntype InitFRProps = {\n  account: Account;\n  tokens: RoketoDao['tokens'];\n}\n\nexport async function initFT({ account, tokens }: InitFRProps) {\n  const richRokens: RichTokens = {};\n\n  await Promise.all(Object.keys(tokens).map(async (tokenAccountId: string) => {\n    const api = new FTApi(account, tokenAccountId);\n    const [ meta, balance, isRegistered ] = await Promise.all([\n      api.getMetadata(),\n      api.getBalance(),\n      api.getIsRegistered()\n    ])\n    const formatter = new TokenFormatter(meta.decimals);\n\n    richRokens[tokenAccountId] = {\n      api,\n      formatter,\n      roketoMeta: tokens[tokenAccountId],\n      meta,\n      balance,\n      isRegistered\n    };\n  }));\n\n  return richRokens;\n}\n","const NEAR_MULTIPLIER = 10 ** 24;\nconst DAI_MULTIPLIER = 10 ** 18;\n\nexport const TOKEN_MULTIPLIER_MAP = {\n  // TestNet\n  'wrap.testnet': NEAR_MULTIPLIER,\n  'dai.fakes.testnet': DAI_MULTIPLIER,\n\n  // MainNet\n  'wrap.near': NEAR_MULTIPLIER,\n  'dai.bridge.near': DAI_MULTIPLIER,\n};\n\nexport const CONTRACT_VIEW_METHODS_LIST = [\n  'get_assets',\n  'get_asset',\n  'get_price_data',\n];\nexport const CONTRACT_CHANGE_METHODS_LIST = [];\n","import numbro from 'numbro';\nimport * as nearAPI from 'near-api-js';\n\nimport {env} from 'shared/config';\n\nimport {TokenId, TokenMultiplierMap, TokenPriceCollection, TokenPriceRaw} from './interfaces/entites';\nimport {PriceOracleContract} from './interfaces/contract';\nimport {CONTRACT_CHANGE_METHODS_LIST, CONTRACT_VIEW_METHODS_LIST, TOKEN_MULTIPLIER_MAP,} from './constants';\n\nexport interface PriceOracle {\n  getPriceInUsd: (tokenId: TokenId, amount: number | string) => number,\n}\n\nconst convertRawPriceToTokenMap = (\n  tokenPrices: TokenPriceRaw[], relyingSourceOracleId: string\n): TokenPriceCollection => {\n  const priceTokenMap = tokenPrices.reduce((accumulatorMap, priceToken) => {\n    const [tokenId, {reports}] = priceToken;\n\n    const desiredSourceOracle = reports.find(\n      ({oracle_id}) => oracle_id === relyingSourceOracleId\n    );\n    if (!desiredSourceOracle) {\n      return accumulatorMap;\n    }\n\n    return {\n      ...accumulatorMap,\n      [tokenId]: desiredSourceOracle.price,\n    };\n  }, {});\n\n  return priceTokenMap;\n};\n\n\n/**\n * 5 NEAR = 5 * 10**24 \"wrap.near\"\n * 50 DAI = 50 * 10**18 \"dai.bridge.near\"\n *\n * Price NEAR { multiplier: 1000, decimals: 26 }\n * 5 NEAR in USD = 5 * 10**24 * 1000 / 10**(26 - 18) = 50 * 10**18\n * Price DAI { multiplier: 101, decimals: 20 }\n * 50 DAI in USD = 50 * 10**18 * 101 / 10**(20 - 18) = 505 * 10**17\n *\n * more: https://github.com/NearDeFi/price-oracle/blob/c2a10765a629dd013eeaa0f49d5631cbc0470b76/src/utils.rs#L18\n */\nconst convertTokenToUsdFactory = (\n  priceTokenMap: TokenPriceCollection, tokenToMultiplierMap: TokenMultiplierMap\n) => (tokenId: TokenId, amount: number | string): number => {\n  const tokenPrice = priceTokenMap[tokenId];\n  const tokenMultiplier = tokenToMultiplierMap[tokenId];\n\n  if (!tokenPrice || !tokenMultiplier) {\n    return 0;\n  }\n\n  const {multiplier, decimals} = tokenPrice;\n\n  return numbro(amount)\n    .multiply(tokenMultiplier)\n    .multiply(Number(multiplier))\n    .divide(10 ** decimals)\n    .value();\n};\n\nexport const initPriceOracle = async (\n  {account}: {account: nearAPI.ConnectedWalletAccount}\n): Promise<PriceOracle> => {\n  const priceOracleContract = new nearAPI.Contract(account, env.PRICE_ORACLE_CONTRACT_NAME, {\n    viewMethods: CONTRACT_VIEW_METHODS_LIST,\n    changeMethods: CONTRACT_CHANGE_METHODS_LIST,\n  }) as PriceOracleContract;\n\n  const rawAssets = await priceOracleContract.get_assets({});\n  const tokenMap = convertRawPriceToTokenMap(rawAssets, env.PRICE_ORACLE_SOURCE_ID);\n\n  const getPriceInUsd = convertTokenToUsdFactory(tokenMap, TOKEN_MULTIPLIER_MAP);\n\n  return {\n    getPriceInUsd,\n  };\n};\n","import React, { useEffect, useState, useContext } from 'react';\nimport { Near, WalletConnection } from 'near-api-js';\n\nimport { env } from 'shared/config';\nimport { createNearInstance, getNearAuth, NearAuth } from 'shared/api/near';\nimport { initRoketo, Roketo } from 'shared/api/roketo';\nimport { initFT, RichTokens } from 'shared/api/ft';\nimport { initPriceOracle, PriceOracle } from 'shared/api/price-oracle';\n\ntype AppServices = {\n  auth: NearAuth;\n  tokens: RichTokens;\n  roketo: Roketo;\n  priceOracle: PriceOracle,\n  near: Near;\n  walletConnection: WalletConnection;\n};\nconst AppContext = React.createContext<AppServices | null>(null);\n\nexport function RoketoContextProvider({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  const [context, setContext] = useState<AppServices | null>(null);\n\n  useEffect(() => {\n    const init = async () => {\n      const near = await createNearInstance();\n      const walletConnection = new WalletConnection(near, env.ROKETO_CONTRACT_NAME);\n      const auth = await getNearAuth(walletConnection);\n\n      const [roketo, priceOracle] = await Promise.all([\n        initRoketo({\n          account: auth.account,\n        }),\n        initPriceOracle({account: auth.account}),\n      ]);\n\n      const tokens = await initFT({\n        account: auth.account,\n        tokens: roketo.dao.tokens,\n      });\n\n      setContext({\n        auth,\n        near,\n        roketo,\n        priceOracle,\n        walletConnection,\n        tokens, \n      });\n    };\n\n    init();\n  }, []);\n\n  return (\n    <AppContext.Provider value={context}>\n      {context ? children : null}\n    </AppContext.Provider>\n  );\n}\n\nconst ERR_NOT_IN_NEAR_CONTEXT = new Error('Near context is not found');\n\nexport function useRoketoContext() {\n  const context = useContext(AppContext);\n\n  if (!context) {\n    throw ERR_NOT_IN_NEAR_CONTEXT;\n  }\n\n  return context;\n}\n","import React from 'react';\nimport classNames from 'classnames';\nimport { Link } from 'react-router-dom';\nimport './Button.scss';\n\nconst variants = {\n  main: 'main',\n  filled: 'filled',\n  outlined: 'outlined',\n};\n\n// const sizes = ['normal', 'big'];\n// const colors = ['dark', 'light'];\n\ntype CommonButtonProps = {\n  icon?: never;\n  children?: React.ReactNode;\n  className?: string;\n  size?: 'normal' | 'big';\n  loading?: boolean;\n  disabled?: boolean;\n  loadingText?: string;\n  color?: string;\n  variant?: string;\n};\n\ntype SpecificLinkProps = {\n  link: true;\n  to: string;\n};\n\ntype SpecificButtonProps = {\n  link?: false;\n  type: 'submit' | 'button';\n  onClick?: () => void;\n};\n\ntype ButtonProps = CommonButtonProps & (SpecificLinkProps | SpecificButtonProps);\n\nexport function Button({\n  icon,\n  children,\n  className,\n  size,\n  loading,\n  disabled,\n  loadingText,\n  color = 'light',\n  variant = 'outlined',\n  ...restProps\n}: ButtonProps) {\n  let variantStyles = '';\n  let sizeStyles = '';\n  let colorStyles = '';\n\n  if (variant === variants.main) {\n    variantStyles = 'Button--main';\n    sizeStyles = size === 'normal'\n      ? 'px-5 py-4  rounded-2xl font-semibold'\n      : size === 'big'\n        ? 'px-12 py-6 rounded-3xl font-bold'\n        : '';\n  } else if (variant === variants.outlined) {\n    variantStyles = 'border-solid border font-semibold rounded-lg ';\n    colorStyles = color === 'light'\n      ? 'border-blue hover:bg-blue'\n      : color === 'dark'\n        ? 'border-border hover:bg-hover hover:border-hover'\n        : '';\n  } else if (variant === variants.filled) {\n    variantStyles = 'bg-dark hover:bg-hover font-semibold rounded-lg active:bg-transparent';\n  }\n\n  const commonProps = {\n    disabled: loading || disabled,\n    className: classNames(\n      'inline-flex items-center justify-center p-3  whitespace-nowrap',\n      variantStyles,\n      sizeStyles,\n      colorStyles,\n      disabled ? 'Button--disabled' : '',\n      'transition-all',\n      className\n    ),\n  };\n\n  const content = loading ? (\n    loadingText\n  ) : (\n    <>\n      {icon ? <div className=\"mr-2\">{icon}</div> : null}\n      {children}\n    </>\n  );\n\n  return restProps.link ? (\n    <Link {...commonProps} {...restProps}>{content}</Link>\n  ) : (\n    <button\n      {...commonProps}\n      {...restProps}\n      type={restProps.type === 'button' ? 'button' : 'submit'}\n    >\n      {content}\n    </button>\n  );\n}\n","import useSWR, { SWRResponse } from 'swr';\nimport type { PublicConfiguration } from 'swr/dist/types';\nimport * as client from '@roketo/api-client';\nimport { WalletConnection } from 'near-api-js';\n\nimport { useRoketoContext } from 'app/roketo-context';\nimport { env } from 'shared/config';\nimport { createNearInstance } from '../near';\n\nconst serverConfig = process.env.NODE_ENV !== 'production' ? { baseServer: new client.ServerConfiguration('http://localhost:3000', {}) } : {};\n\nclass TokenProvider {\n  private initialized: boolean = false;\n\n  private token: null | Promise<string> = null;\n\n  private readonly authApiClient = new client.AuthApi(client.createConfiguration({ ...serverConfig }));\n\n  getToken() {\n    if (!this.token) {\n      this.token = this.getRefreshedToken();\n    }\n\n    return this.token;\n  }\n\n  refreshToken() {\n    this.token = this.getRefreshedToken();\n  }\n\n  private async getRefreshedToken(): Promise<string> {\n    try {\n      const { accountId } = await this.getAccountIdAndNear();\n\n      const ROKETO_API_ACCESS_TOKEN_KEY_PREFIX = 'roketoApiAccessToken';\n\n      const key = `${ROKETO_API_ACCESS_TOKEN_KEY_PREFIX}:${accountId}`;\n\n      if (!this.initialized) {\n        this.initialized = true;\n\n        const savedToken = localStorage[key] || null;\n\n        if (savedToken && !this.containsUnicode(savedToken)) {\n          return savedToken;\n        }\n      }\n\n      delete localStorage[key];\n\n      const loginParams = await this.generateLoginParams();\n\n      const { accessToken } = await this.authApiClient.login(loginParams);\n\n      localStorage[key] = accessToken;\n\n      return accessToken;\n    } catch (e) {\n      // TODO: Think of better handling of failing login.\n      this.token = null;\n\n      throw e;\n    }\n  }\n\n  private async getAccountIdAndNear() {\n    const near = await createNearInstance();\n    const walletConnection = new WalletConnection(near, env.ROKETO_CONTRACT_NAME);\n    const accountId = walletConnection.getAccountId();\n\n    return { accountId, near };\n  }\n\n  private async generateLoginParams(): Promise<client.LoginDto> {\n    const { accountId, near } = await this.getAccountIdAndNear();\n\n    const keyPair = await near.config.keyStore.getKey(near.config.networkId, accountId);\n\n    const timestamp = Date.now();\n\n    const { signature: Uint8Signature } = keyPair.sign(new TextEncoder().encode(String(timestamp))); // TODO: Polyfill TextEncoder?\n\n    const signature: number[] = Array.from(Uint8Signature);\n\n    return {\n      accountId,\n      timestamp,\n      signature,\n    }\n  }\n\n  private containsUnicode(token: string) {\n    return token !== encodeURIComponent(token);\n  }\n}\n\nconst tokenProvider = new TokenProvider();\n\nconst onErrorRetry: PublicConfiguration<any, any, any>['onErrorRetry'] = async (error, key, config, revalidate, { retryCount }) => {\n  if (error.message.startsWith('HTTP-Code: 401') && retryCount <= 3) {\n    await tokenProvider.refreshToken();\n\n    revalidate({ retryCount });\n  }\n};\n\nconst apiConfig = client.createConfiguration({\n  ...serverConfig,\n  authMethods: { bearer: { tokenProvider } }\n});\n\nconst defaultApiClient = new client.DefaultApi(apiConfig);\n\nexport function useHello(): SWRResponse<client.HelloResponse> {\n  const { auth } = useRoketoContext();\n\n  const swr = useSWR(\n    auth.accountId ? 'hello' : null,\n    () => defaultApiClient.getHello(),\n    { onErrorRetry },\n  );\n\n  return swr;\n}\n\nexport const usersApiClient = new client.UsersApi(apiConfig);\n\nexport function useUser(): SWRResponse<client.User> {\n  const { auth } = useRoketoContext();\n\n  const swr = useSWR(\n    auth.accountId ? 'user' : null,\n    () => usersApiClient.findOne(auth.accountId),\n    { onErrorRetry },\n  );\n\n  return swr;\n}\n","import React from 'react';\n\nimport { useRoketoContext } from 'app/roketo-context';\nimport { Button } from 'shared/kit/Button';\nimport { useUser } from 'shared/api/roketo-web';\n\ntype NearAuthButtonProps = {\n  variant?: string;\n  className?: string;\n};\n\nexport function NearAuthButton({ variant, className }: NearAuthButtonProps) {\n  const {\n    auth: {\n      logout,\n      login,\n      accountId,\n      signedIn,\n    }\n  } = useRoketoContext();\n\n  const userSWR = useUser();\n  const { name, email } = userSWR.data || {};\n\n  return signedIn ? (\n    <Button type=\"button\" onClick={logout} variant={variant} className={className}>\n      Sign out (\n      {name || accountId}\n      <img src={`http://localhost:3000/users/${accountId}/avatar?email=${email}`} style={{ width: 32, height: 32, borderRadius: 16, margin: '0 2px 0 5px' }} alt=\"\" />\n      )\n    </Button>\n  ) : (\n    <Button type=\"button\" onClick={login} variant={variant} className={className}>\n      Sign in with NEAR Wallet\n    </Button>\n  );\n}\n","export const routes = {\n  authorize: '/authorize',\n  account: '/account',\n  streams: '/streams',\n  send: '/',\n  receive: '/receive',\n  stream: '/streams/:id',\n  profile: '/profile',\n};\n\nexport function getStreamLink(streamId: string | undefined) {\n  return `${window.location.origin}/#/streams/${streamId}`;\n}\n","export default __webpack_public_path__ + \"static/media/logo_stream_with_text.831f0892.svg\";","import React from 'react';\n\nexport type BooleanControl = {\n  on: boolean;\n  off: boolean;\n  toggle: () => void,\n  turnOff: () => void,\n  turnOn: () => void,\n  setOn: (state: boolean) => void,\n};\n\nexport function useBool(initial: boolean): BooleanControl {\n  const [on, setOn] = React.useState(initial);\n\n  return {\n    on,\n    off: !on,\n    toggle: () => setOn(!on),\n    turnOff: () => setOn(false),\n    turnOn: () => setOn(true),\n    setOn,\n  };\n}\n","import React from 'react';\r\n\r\nexport function ProfileIcon() {\r\n  return (\r\n    <svg\r\n      fill=\"none\"\r\n      width=\"20\"\r\n      height=\"20\"\r\n      viewBox=\"0 0 45.973 45.973\"\r\n    >\r\n      <path\r\n        d=\"M43.454,18.443h-2.437c-0.453-1.766-1.16-3.42-2.082-4.933l1.752-1.756c0.473-0.473,0.733-1.104,0.733-1.774\r\n        c0-0.669-0.262-1.301-0.733-1.773l-2.92-2.917c-0.947-0.948-2.602-0.947-3.545-0.001l-1.826,1.815\r\n        C30.9,6.232,29.296,5.56,27.529,5.128V2.52c0-1.383-1.105-2.52-2.488-2.52h-4.128c-1.383,0-2.471,1.137-2.471,2.52v2.607\r\n        c-1.766,0.431-3.38,1.104-4.878,1.977l-1.825-1.815c-0.946-0.948-2.602-0.947-3.551-0.001L5.27,8.205\r\n        C4.802,8.672,4.535,9.318,4.535,9.978c0,0.669,0.259,1.299,0.733,1.772l1.752,1.76c-0.921,1.513-1.629,3.167-2.081,4.933H2.501\r\n        C1.117,18.443,0,19.555,0,20.935v4.125c0,1.384,1.117,2.471,2.501,2.471h2.438c0.452,1.766,1.159,3.43,2.079,4.943l-1.752,1.763\r\n        c-0.474,0.473-0.734,1.106-0.734,1.776s0.261,1.303,0.734,1.776l2.92,2.919c0.474,0.473,1.103,0.733,1.772,0.733\r\n        s1.299-0.261,1.773-0.733l1.833-1.816c1.498,0.873,3.112,1.545,4.878,1.978v2.604c0,1.383,1.088,2.498,2.471,2.498h4.128\r\n        c1.383,0,2.488-1.115,2.488-2.498v-2.605c1.767-0.432,3.371-1.104,4.869-1.977l1.817,1.812c0.474,0.475,1.104,0.735,1.775,0.735\r\n        c0.67,0,1.301-0.261,1.774-0.733l2.92-2.917c0.473-0.472,0.732-1.103,0.734-1.772c0-0.67-0.262-1.299-0.734-1.773l-1.75-1.77\r\n        c0.92-1.514,1.627-3.179,2.08-4.943h2.438c1.383,0,2.52-1.087,2.52-2.471v-4.125C45.973,19.555,44.837,18.443,43.454,18.443z\r\n         M22.976,30.85c-4.378,0-7.928-3.517-7.928-7.852c0-4.338,3.55-7.85,7.928-7.85c4.379,0,7.931,3.512,7.931,7.85\r\n        C30.906,27.334,27.355,30.85,22.976,30.85z\"\r\n        stroke=\"currentColor\"\r\n        strokeWidth=\"5\"\r\n        strokeLinecap=\"round\"\r\n      />\r\n    </svg>\r\n  );\r\n}\r\n","import React from 'react';\nimport classNames from 'classnames';\nimport { useRouteMatch } from 'react-router-dom';\nimport { AccountIcon } from 'shared/icons/Account';\nimport { StreamsIcon } from 'shared/icons/Streams';\nimport { SendIcon } from 'shared/icons/Send';\nimport { NavLink } from 'shared/kit/NavLink';\nimport { NearAuthButton } from 'features/near-auth/NearAuthButton';\nimport { routes } from 'shared/helpers/routing';\nimport LogoText from 'shared/images/logo_stream_with_text.svg';\nimport { useBool } from 'shared/hooks/useBool';\nimport { ProfileIcon } from 'shared/icons/Profile';\n\nfunction MinifiedHeader() {\n  const logo = (\n    <div className=\"flex justify-start items-center\">\n      <img src={LogoText} alt=\"rocketo logo\" />\n    </div>\n  );\n  return (\n    <div\n      className={classNames(\n        'py-4 px-6',\n        'absolute w-full pt-8',\n        'flex justify-center',\n      )}\n    >\n      {logo}\n    </div>\n  );\n}\n\nfunction FullHeader() {\n  const menuControl = useBool(false);\n\n  const navigation = (\n    <ul className=\"flex-col lg:flex-row flex justify-center \">\n      <li className=\"mb-2 lg:mr-2 lg:mb-0\">\n        <NavLink\n          onClick={menuControl.turnOff}\n          to={routes.account}\n          icon={<AccountIcon />}\n        >\n          Account\n        </NavLink>\n      </li>\n      <li className=\"mb-2 lg:mr-2 lg:mb-0\">\n        <NavLink\n          onClick={menuControl.turnOff}\n          to={routes.streams}\n          icon={<StreamsIcon />}\n        >\n          My Streams\n        </NavLink>\n      </li>\n      <li className=\"mb-2 lg:mr-2 lg:mb-0\">\n        <NavLink\n          onClick={menuControl.turnOff}\n          to={routes.send}\n          icon={<SendIcon />}\n        >\n          Send\n        </NavLink>\n      </li>\n      <li className=\"mb-2 lg:mr-2 lg:mb-0\">\n        <NavLink\n          onClick={menuControl.turnOff}\n          to={routes.profile}\n          icon={<ProfileIcon />}\n        >\n          Profile\n        </NavLink>\n      </li>\n    </ul>\n  );\n\n  const logo = (\n    <div className=\"flex justify-start items-center\">\n      <img src={LogoText} alt=\"rocketo logo\" />\n    </div>\n  );\n\n  return (\n    <div className=\"py-4 px-6 w-full pt-8\">\n      <div\n        className={classNames('hidden lg:grid items-center grid-cols-3 gap-3 ')}\n      >\n        {logo}\n        {navigation}\n\n        <div className=\"flex justify-end\">\n          <NearAuthButton />\n        </div>\n      </div>\n\n      <div className={classNames('lg:hidden')}>\n        <div className=\"flex justify-between\">\n          {logo}\n\n          <button\n            className=\"p-1\"\n            onClick={menuControl.toggle}\n            type=\"button\"\n            data-bs-toggle=\"collapse\"\n            data-bs-target=\"#navbarSupportedContent\"\n            aria-controls=\"navbarSupportedContent\"\n            aria-expanded=\"false\"\n            aria-label=\"Toggle navigation\"\n          >\n            <div\n              className={classNames(\n                'burger-menu',\n                menuControl.on ? 'burger-menu--active' : '',\n              )}\n            />\n          </button>\n        </div>\n        <div\n          className={classNames(menuControl.on ? 'block' : 'hidden', 'mt-4')}\n        >\n          {navigation}\n          <NearAuthButton className=\"mt-4\" />\n        </div>\n      </div>\n    </div>\n  );\n}\nexport function Header() {\n  const match = useRouteMatch('/authorize');\n\n  if (match) {\n    return <MinifiedHeader />;\n  }\n\n  return <FullHeader />;\n}\n","import { Route } from 'react-router-dom';\n\n// A wrapper for <Route> that redirects to the login\n// screen if you're not yet authenticated.\n\ntype PrivateRouteProps = {\n  children: React.ReactNode;\n  allowed: boolean;\n  redirect: React.ReactNode;\n  path: string;\n  exact: boolean;\n}\n\nexport function PrivateRoute({\n  children,\n  allowed,\n  redirect,\n  path,\n  exact = false\n}: PrivateRouteProps) {\n  return (\n    <Route\n      exact={exact}\n      path={path}\n      render={() => (allowed ? children : redirect)}\n    />\n  );\n}","import React from 'react';\nimport classNames from 'classnames';\n\ntype FormFieldProps = {\n  children: React.ReactNode;\n  label: React.ReactNode;\n  error?: string;\n  className?: string;\n};\n\nexport function FormField({\n  children, label, error, className, ...rest\n}: FormFieldProps) {\n  return (\n    <div className={classNames('block', className)} {...rest}>\n      <div className=\"mb-1\">{label}</div>\n      <div>{children}</div>\n      {error ? <div className=\"text-red-500 mt-1 text-xs\">{error}</div> : null}\n    </div>\n  );\n}\n","import React from 'react';\nimport './Input.scss';\nimport classNames from 'classnames';\n\ntype InputProps = {\n  children: React.ReactNode;\n  className?: string;\n  error?: never;\n};\n\nexport function Input({\n  children, className, error, ...rest\n}: InputProps) {\n  const borderColor = error ? 'border-red-400' : 'border-border';\n  return (\n    <label\n      className={classNames(\n        'Input font-semibold flex p-4 rounded-lg border  bg-input text-white focus-within:border-blue hover:border-blue',\n        borderColor,\n        className,\n      )}\n      {...rest}\n    >\n      {children}\n    </label>\n  );\n}\n","import React from 'react';\nimport { useRoketoContext } from 'app/roketo-context';\n\ntype NearTokenImageProps = {\n  className?: string;\n};\n\nfunction NearTokenImage(props: NearTokenImageProps) {\n  return (\n    <svg\n      version=\"1.0\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"20pt\"\n      height=\"20pt\"\n      viewBox=\"0 0 864.000000 864.000000\"\n      preserveAspectRatio=\"xMidYMid meet\"\n      {...props}\n    >\n      <g\n        transform=\"translate(0.000000,864.000000) scale(0.100000,-0.100000)\"\n        fill=\"#000000\"\n        stroke=\"none\"\n      >\n        <path d=\"M2490 6461 c-164 -53 -265 -156 -314 -320 -14 -49 -16 -226 -16 -1821 0 -1595 2 -1772 16 -1821 25 -85 62 -148 118 -205 179 -178 476 -178 650 0 30 30 249 347 519 749 518 772 502 742 438 799 -21 19 -42 28 -66 28 -40 0 -6 28 -555 -449 -283 -246 -411 -351 -425 -349 -20 3 -20 11 -20 1238 l0 1235 21 3 c16 2 286 -315 1376 -1621 746 -892 1372 -1637 1392 -1654 94 -83 187 -113 351 -113 169 0 275 39 371 134 56 57 93 120 118 205 14 49 16 226 16 1821 0 1595 -2 1772 -16 1821 -25 85 -62 148 -118 205 -179 178 -476 178 -650 0 -30 -30 -249 -347 -519 -749 -518 -772 -502 -742 -438 -799 21 -19 42 -28 66 -28 40 0 6 -28 555 449 283 246 411 351 425 349 20 -3 20 -11 20 -1238 l0 -1235 -21 -3 c-16 -2 -286 315 -1376 1621 -746 892 -1372 1637 -1392 1654 -95 85 -187 113 -356 112 -82 0 -131 -5 -170 -18z\" />\n      </g>\n    </svg>\n  );\n}\n\ntype FallbackTokenImageProps = {\n  className?: string;\n};\n\nfunction FallbackTokenImage(props: FallbackTokenImageProps) {\n  return (\n    <svg\n      version=\"1.0\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"20pt\"\n      height=\"20pt\"\n      viewBox=\"0 0 864.000000 864.000000\"\n      preserveAspectRatio=\"xMidYMid meet\"\n      {...props}\n    >\n      <g\n        transform=\"translate(0.000000,864.000000) scale(0.100000,-0.100000)\"\n        fill=\"#000000\"\n        stroke=\"none\"\n      >\n        <path d=\"M2490 6461 c-164 -53 -265 -156 -314 -320 -14 -49 -16 -226 -16 -1821 0 -1595 2 -1772 16 -1821 25 -85 62 -148 118 -205 179 -178 476 -178 650 0 30 30 249 347 519 749 518 772 502 742 438 799 -21 19 -42 28 -66 28 -40 0 -6 28 -555 -449 -283 -246 -411 -351 -425 -349 -20 3 -20 11 -20 1238 l0 1235 21 3 c16 2 286 -315 1376 -1621 746 -892 1372 -1637 1392 -1654 94 -83 187 -113 351 -113 169 0 275 39 371 134 56 57 93 120 118 205 14 49 16 226 16 1821 0 1595 -2 1772 -16 1821 -25 85 -62 148 -118 205 -179 178 -476 178 -650 0 -30 -30 -249 -347 -519 -749 -518 -772 -502 -742 -438 -799 21 -19 42 -28 66 -28 40 0 6 -28 555 449 283 246 411 351 425 349 20 -3 20 -11 20 -1238 l0 -1235 -21 -3 c-16 -2 -286 315 -1376 1621 -746 892 -1372 1637 -1392 1654 -95 85 -187 113 -356 112 -82 0 -131 -5 -170 -18z\" />\n      </g>\n    </svg>\n  );\n}\n\nconst currentTokens = {\n  'wrap.testnet': NearTokenImage,\n  'wrap.near': NearTokenImage,\n};\n\nfunction isValidTokenName(tokenName: string): tokenName is keyof typeof currentTokens {\n  return tokenName in currentTokens;\n}\n\ntype TokenIconProps = {\n  tokenAccountId: string;\n  className?: string;\n};\n\nexport function TokenIcon({ tokenAccountId, className, ...rest }: TokenIconProps) {\n  const { tokens } = useRoketoContext();\n  const image = tokens[tokenAccountId]?.meta?.icon;\n\n  if (image) {\n    return (\n      <img src={image} alt={tokenAccountId} className={className} {...rest} />\n    );\n  }\n\n  const Component = isValidTokenName(tokenAccountId) ? currentTokens[tokenAccountId] : FallbackTokenImage;\n\n  return <Component className={className} {...rest} />;\n}\n","import React from 'react';\nimport classNames from 'classnames';\nimport { TokenIcon } from 'shared/icons/Tokens';\n\ntype TokenImageProps = {\n  tokenAccountId: string;\n  size?: number;\n  className?: string;\n};\n\nexport function TokenImage({\n  tokenAccountId,\n  size = 8,\n  className,\n}: TokenImageProps) {\n  return (\n    <div\n      className={classNames(\n        'p-1 flex-shrink-0 rounded-lg bg-card2 inline-flex items-center justify-center',\n        `w-${size} h-${size}`,\n        className,\n      )}\n    >\n      <TokenIcon className=\"w-full h-full rounded-full\" tokenAccountId={tokenAccountId} />\n    </div>\n  );\n}\n","import React from 'react';\n\nexport const useOutsideClick = (ref: React.RefObject<HTMLElement>, callback: () => void) => {\n  const handleClick = ({ target }: DocumentEventMap[\"click\"]) => {\n    if (ref.current && target instanceof HTMLElement && !ref.current.contains(target)) {\n      callback();\n    }\n  };\n\n  React.useEffect(() => {\n    document.addEventListener('click', handleClick);\n\n    return () => {\n      document.removeEventListener('click', handleClick);\n    };\n  });\n};\n","import React from 'react';\nimport classNames from 'classnames';\nimport { useOutsideClick } from 'shared/hooks/useOutsideClick';\n\ntype DropdownMenuProps = {\n  opened: boolean;\n  children: React.ReactNode;\n  className?: string;\n  onClose: () => void;\n};\n\nexport function DropdownMenu({\n  opened,\n  children,\n  className,\n  onClose\n}: DropdownMenuProps) {\n  const ref = React.useRef<HTMLInputElement | null>(null);\n\n  useOutsideClick(ref, () => {\n    if (opened) {\n      onClose();\n    }\n  });\n\n  return (\n    <div\n      ref={ref}\n      className={classNames(\n        className,\n        'absolute top-full pt-2',\n        opened ? 'flex' : 'hidden',\n      )}\n    >\n      <div className={classNames('w-full bg-hover rounded-2xl py-2')}>\n        {children}\n      </div>\n    </div>\n  );\n}\n\ntype DropdownMenuItemProps = {\n  children: React.ReactNode;\n  className?: String;\n};\n\nexport function DropdownMenuItem({ children, className, ...rest }: DropdownMenuItemProps) {\n  return (\n    <div\n      className={classNames(\n        'px-5 py-1 font-semibold text-sm hover:font-bold',\n        className,\n      )}\n      {...rest}\n    >\n      {children}\n    </div>\n  );\n}\n\nexport function DropdownMenuDivider() {\n  return <div className=\"border-dark border-t w-full my-2\" />;\n}\n","import React from 'react';\n\ntype DropdownArrowDownProps = {\n  className?: string;\n};\n\nexport function DropdownArrowDown(props: DropdownArrowDownProps) {\n  return (\n    <svg\n      width=\"12\"\n      height=\"7\"\n      viewBox=\"0 0 12 7\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path\n        d=\"M1.37378 0.739731L6.11885 5.4848L10.8639 0.739731\"\n        stroke=\"white\"\n        strokeWidth=\"1.5\"\n      />\n    </svg>\n  );\n}\n","import React from 'react';\nimport classNames from 'classnames';\nimport { DropdownArrowDown } from 'shared/icons/DropdownArrowDown';\n\ntype DropdownOpenerProps = {\n  opened?: boolean;\n  className?: string;\n  children: React.ReactNode;\n  onChange: (state: boolean) => void;\n  rounded?: boolean;\n  minimal?: boolean;\n};\n\n/**\n * @param {minimal} Boolean remove outline and padding if true\n * @param {rounded} Boolean set to true to change shape to pill\n * @returns\n */\nexport function DropdownOpener({\n  opened,\n  className,\n  children,\n  onChange,\n  rounded,\n  minimal = false,\n  ...rest\n}: DropdownOpenerProps) {\n  const minimalClasses = minimal\n    ? ''\n    : 'px-4 py-3 border border-border w-36 hover:bg-hover hover:border-hover';\n\n  return (\n    <button\n      type=\"button\"\n      onClick={() => onChange(!opened)}\n      className={classNames(\n        'cursor-pointer flex items-center',\n        className,\n        minimalClasses,\n        rounded ? 'rounded-full' : 'rounded-lg',\n      )}\n      {...rest}\n    >\n      {children}\n      <div className=\"flex-grow\" />\n      <DropdownArrowDown\n        className={classNames('ml-2', 'transform', opened ? 'rotate-180' : '')}\n      />\n    </button>\n  );\n}\n","import React from 'react';\nimport classNames from 'classnames';\n\ntype RadioButtonProps<T> = {\n  active: boolean;\n  label: React.ReactNode;\n  value: T;\n  onChange: (value: T) => void;\n};\n\nexport function RadioButton<T>({\n  active, label, value, onChange,\n}: RadioButtonProps<T>) {\n  return (\n    <label className=\"inline-flex items-center whitespace-nowrap\">\n      <input\n        type=\"radio\"\n        className=\"invisible w-0 h-0 absolute\"\n        checked={active}\n        onChange={() => onChange(value)}\n      />\n      <div\n        className={classNames(\n          active ? 'border-blue border-4' : 'border-border border-2',\n          'border-full w-3 h-3 rounded-full',\n        )}\n      />\n\n      <div className={classNames(active ? 'font-semibold' : '', 'ml-3 flex')}>\n        {label}\n      </div>\n    </label>\n  );\n}\n","import React from 'react';\n\nimport RCTooltip from 'rc-tooltip';\nimport type { TooltipProps as RCTooltipProps } from 'rc-tooltip/lib/Tooltip';\n\nimport './Tooltip.scss';\n\ntype TooltipProps = {\n  placement?: string;\n  children?: React.ReactElement;\n  html?: never;\n  overlay: React.ReactNode;\n  className?: string;\n  align?: RCTooltipProps[\"align\"];\n};\n\nexport function Tooltip({\n  placement = 'top',\n  children,\n  html,\n  overlay,\n  align,\n  ...rest\n}: TooltipProps) {\n  return (\n    <RCTooltip\n      align={align}\n      placement={placement}\n      overlay={\n        html ? <div dangerouslySetInnerHTML={{ __html: html }} /> : overlay\n      }\n      {...rest}\n    >\n      {children || <span className=\"Tooltip__defaultIcon\">?</span>}\n    </RCTooltip>\n  );\n}\n","import { useEffect, useState } from 'react';\nimport classNames from 'classnames';\nimport { differenceInDays, addMonths } from 'date-fns';\nimport BigNumber from 'bignumber.js';\n\nimport { usePrev } from 'shared/hooks/usePrev';\nimport { SECONDS_IN_DAY, SECONDS_IN_HOUR, SECONDS_IN_MINUTE } from 'shared/constants';\n\ntype SpeedInputProps = {\n  className?: string;\n  value: number;\n  onChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\n  label: string;\n};\n\nfunction SpeedInput({ className, value, onChange, label }: SpeedInputProps) {\n  return (\n    <label className={classNames('w-1/4 input font-semibold flex p-4 border-border border bg-input text-white focus-within:border-blue hover:border-blue', className)}>\n      <input\n        className=\"focus:outline-none input bg-input w-1/3\"\n        placeholder=\"0\"\n        value={value}\n        onChange={onChange}\n      />\n      <div className=\"right-2 opacity-100 w-1/4\">{label}</div>\n    </label>\n  );\n}\n\ntype StreamSpeedCalcFieldProps = {\n  onChange: (speed: string) => void;\n  deposit: string;\n};\n\nexport function StreamSpeedCalcField({ onChange, deposit = '0' }: StreamSpeedCalcFieldProps) {\n  const [months, setMonths] = useState(0);\n  const [days, setDays] = useState(0);\n  const [minutes, setMinutes] = useState(0);\n  const [hours, setHours] = useState(0);\n\n  const daysInMonths = differenceInDays(addMonths(new Date(), months), new Date());\n\n  const durationInSeconds = (daysInMonths + days) * SECONDS_IN_DAY\n    + minutes * SECONDS_IN_MINUTE\n    + hours * SECONDS_IN_HOUR;\n\n  const tokensPerSec = (() => {\n    const value = new BigNumber(deposit)\n      .dividedToIntegerBy(durationInSeconds)\n      .toFixed()\n\n\n    return value !== 'Infinity'\n      ? value\n      : '0';\n  })();\n\n  const prevSpeed = usePrev(tokensPerSec);\n\n  useEffect(() => {\n    if (prevSpeed !== tokensPerSec) {\n      onChange(tokensPerSec);\n    }\n  }, [tokensPerSec, onChange, prevSpeed]);\n\n  return (\n    <div className=\"flex\">\n      <SpeedInput\n        value={months}\n        onChange={(e) => {\n          setMonths(Number(e.target.value));\n        }}\n        label=\"months\"\n        className=\"rounded-l-lg\"\n      />\n      <SpeedInput\n        value={days}\n        onChange={(e) => {\n          setDays(Number(e.target.value));\n        }}\n        label=\"days\"\n      />\n      <SpeedInput\n        value={hours}\n        onChange={(e) => {\n          setHours(Number(e.target.value));\n        }}\n        label=\"hours\"\n      />\n      <SpeedInput\n        value={minutes}\n        onChange={(e) => {\n          setMinutes(Number(e.target.value));\n        }}\n        label=\"mins\"\n        className=\"rounded-r-lg\"\n      />\n    </div>\n  );\n}\n","import { useRef, useEffect } from 'react';\n\nexport function usePrev<T extends any>(value: T) {\n  const ref = useRef<null | T>(null);\n  useEffect(() => {\n    ref.current = value;\n  }, [value]);\n  return ref.current;\n}\n","import { useRoketoContext } from 'app/roketo-context';\nimport { isWNearTokenId } from 'shared/helpers/isWNearTokenId';\n\nexport function useToken(tokenAccountId: string) {\n  const { tokens } = useRoketoContext();\n\n  // tmp: hard code for wNear\n  if (isWNearTokenId(tokenAccountId)) {\n    tokens[tokenAccountId].meta.symbol = 'NEAR';\n  }\n\n  return tokens[tokenAccountId];\n}\n","import { env } from \"shared/config\";\n\nexport function isWNearTokenId(tokenAccountId: string) {\n  return tokenAccountId === env.WNEAR_ID;\n}","import { useRoketoContext } from 'app/roketo-context';\nimport { env } from 'shared/config';\nimport { useToken } from 'shared/hooks/useToken';\n\nexport function Balance({ tokenAccountId }: { tokenAccountId: string }) {\n  const { auth } = useRoketoContext()\n  const { balance, formatter, meta } = useToken(tokenAccountId);\n\n  // tmp: hard code for wNear\n  const actualBalance = tokenAccountId === env.WNEAR_ID\n    ? auth.balance?.available || '0'\n    : balance;\n\n  return (\n    <span>\n      Balance:\n      {' '}\n      {formatter.amount(actualBalance)}\n      {' '}\n      {meta.symbol}\n    </span>\n  );\n}\n","import React, { useState } from 'react';\nimport { Formik, Field, FieldProps } from 'formik';\nimport * as Yup from 'yup';\nimport type { Near } from 'near-api-js';\n\nimport { FormField } from 'shared/kit/FormField';\nimport { Input } from 'shared/kit/Input';\nimport { Button } from 'shared/kit/Button';\nimport { TokenImage } from 'shared/kit/TokenImage';\nimport { DropdownMenu, DropdownMenuItem } from 'shared/kit/DropdownMenu';\nimport { DropdownOpener } from 'shared/kit/DropdownOpener';\nimport { RadioButton } from 'shared/kit/RadioButton';\nimport { Tooltip } from 'shared/kit/Tooltip';\nimport { env } from 'shared/config';\nimport { useRoketoContext } from 'app/roketo-context';\n\nimport { StreamSpeedCalcField } from './StreamSpeedCalcField';\nimport { Balance } from './Balance';\n\ntype StreamFormSchemaParams = {\n  near: Near;\n  accountId: string;\n};\n\nconst CreateStreamFormSchema = ({ near, accountId }: StreamFormSchemaParams) => Yup.object().shape({\n  receiver: Yup.string()\n    .required('Receiver is a required')\n    .test(\n      'receiver-not-equal-owner',\n      'Receiver can not be the same as owner',\n      (value) => value !== accountId,\n    )\n    .test(\n      'receiver-is-valida-address',\n      'Address does not exists',\n      async (value) => {\n        try {\n          return Boolean(value && await near.connection.provider.query({\n            request_type: 'view_account',\n            finality: 'final',\n            account_id: value,\n          }));\n        } catch (error) {\n          return false;\n        }\n      },\n    ),\n  token: Yup.string().required(),\n  deposit: Yup.number()\n    .required()\n    .moreThan(0, 'Deposit should be more than 0'),\n  speed: Yup.number().required().moreThan(0, 'Choose stream duration'),\n  autoStart: Yup.boolean(),\n  comment: Yup.string().max(255),\n});\n\nexport type CreateStreamFormValues = {\n  receiver: string;\n  autoStart: boolean;\n  comment: string;\n  deposit: number;\n  speed: number;\n  token: string;\n};\n\ntype CreateStreamFormProps = {\n  onSubmit: (values: CreateStreamFormValues) => void;\n};\n\nexport function CreateStreamForm({ onSubmit }: CreateStreamFormProps) {\n  const { near, auth, tokens } = useRoketoContext();\n\n  const schema = CreateStreamFormSchema({\n    accountId: auth.accountId,\n    near,\n  });\n\n  const [isDropdownOpened, setIsDropdownOpened] = useState(false);\n  const [submitError, setError] = useState<Error | null>(null);\n\n  const formikOnSubmit = async (values: CreateStreamFormValues) => {\n    try {\n      const res = await onSubmit(values);\n      return res;\n    } catch (error: unknown) {\n      if (error instanceof Error) {\n        setError(error);\n      }\n\n      return undefined;\n    }\n  };\n\n  const allAvailableTokens = Object.values(tokens);\n\n  return (\n    <Formik<CreateStreamFormValues>\n      initialValues={{\n        receiver: '',\n        token: env.WNEAR_ID,\n        speed: 0,\n        deposit: 0,\n        autoStart: true,\n        comment: '',\n      }}\n      validationSchema={schema}\n      onSubmit={formikOnSubmit}\n      validateOnBlur={false}\n      validateOnChange={false}\n      validateOnMount={false}\n    >\n      {({\n        values,\n        setFieldValue,\n        setFieldTouched,\n        handleSubmit,\n        isSubmitting,\n      }) => {\n        const activeTokenAccountId = values.token;\n        const activeToken = tokens[activeTokenAccountId];\n        const { meta: tokenMeta, roketoMeta, formatter } = activeToken;\n\n        return (\n          <form className=\"max-w-lg mx-auto w-full\" onSubmit={handleSubmit}>\n            <Field name=\"receiver\">\n              {({\n                field,\n                meta,\n              }: FieldProps<CreateStreamFormValues['receiver']>) => (\n                <FormField\n                  label=\"Receiver:\"\n                  className=\"mb-4\"\n                  error={meta.error}\n                >\n                  <Input>\n                    <input\n                      placeholder={`receiver.${env.ACCOUNT_SUFFIX}`}\n                      id=\"ownerInput\"\n                      {...field} \n                    />\n                  </Input>\n                </FormField>\n              )}\n            </Field>\n\n            <div className=\"flex mb-4\">\n              <Field name=\"token\">\n                {({\n                  field,\n                  meta,\n                }: FieldProps<CreateStreamFormValues['token']>) => (\n                  <FormField\n                    label=\"Token:\"\n                    className=\"w-1/3 items-center relative\"\n                    error={meta.error}\n                  >\n                    <DropdownOpener\n                      minimal\n                      className=\"bg-input text-white focus-within:border-blue hover:border-blue text-xl h-14 px-4 py-3 border border-border w-36\"\n                      onChange={setIsDropdownOpened}\n                    >\n                      <div className=\"inline-flex items-center\">\n                        <TokenImage\n                          tokenAccountId={field.value}\n                          className=\"mr-1\"\n                        />\n                        {' '}\n                        <span>{tokenMeta.symbol}</span>\n                      </div>\n                    </DropdownOpener>\n\n                    <DropdownMenu\n                      opened={isDropdownOpened}\n                      className=\"z-10\"\n                      onClose={() => setIsDropdownOpened(false)}\n                    >\n                      {allAvailableTokens.map(token => {\n                        const {symbol} = token.meta;\n                        const {tokenAccountId} = token.api;\n\n                        return (\n                          <DropdownMenuItem\n                            className=\"focus-within:border-blue\"\n                            key={tokenAccountId}\n                          >\n                            <RadioButton\n                              label={(\n                                <div className=\"inline-flex items-center\">\n                                  <TokenImage\n                                    size={6}\n                                    tokenAccountId={tokenAccountId}\n                                    className=\"mr-1\"\n                                  />\n                                  {' '}\n                                  <span>{symbol}</span>\n                                </div>\n                              )}\n                              active={field.value === tokenAccountId}\n                              value={tokenAccountId}\n                              onChange={(value) => {\n                                setIsDropdownOpened(false);\n                                setFieldValue(field.name, value, false);\n                                setFieldTouched(field.name, true, false);\n                              }}\n                            />\n                          </DropdownMenuItem>\n                        );\n                      })}\n                    </DropdownMenu>\n                  </FormField>\n                )}\n              </Field>\n\n              <Field name=\"deposit\">\n                {({\n                  field,\n                  meta,\n                }: FieldProps<CreateStreamFormValues['deposit']>) => (\n                  <FormField\n                    label={(\n                      <span>\n                        <span>Stream deposit:</span>\n                        <Tooltip\n                          className=\"ml-2\"\n                          overlay=\"Funds which will be used to create a stream for a set period.\"\n                        />\n                        {' '}\n                        <Balance\n                          tokenAccountId={activeTokenAccountId}\n                        />\n                      </span>\n                    )}\n                    className=\"w-2/3\"\n                    error={meta.error}\n                  >\n                    <Input>\n                      <input placeholder=\"0.00\" {...field} />\n                    </Input>\n                  </FormField>\n                )}\n              </Field>\n            </div>\n\n            <div className=\"block mb-4\">\n              <Field name=\"speed\">\n                {({\n                  field,\n                  meta,\n                }: FieldProps<CreateStreamFormValues['speed']>) => (\n                  <FormField\n                    label={(\n                      <div className=\"relative\">\n                        <div>\n                          Period to unlock the initial deposit:\n                          {' '}\n                          <Tooltip\n                            className=\"ml-2\"\n                            overlay=\"In case of no extensions for an initial deposit after this period will be reached receiver will be able to withdraw whole initial deposit and close the stream. \"\n                          />\n                        </div>\n                        <div className=\"text-xs text-gray absolute right-0 top-1\">\n                          Streaming speed:\n                          {' '}\n                          {(() => {\n                            if (field.value <= 0) {\n                              return 'none';\n                            }\n\n                            const { formattedValue, unit } = formatter.tokensPerMeaningfulPeriod(field.value);\n\n                            return `${formattedValue} ${tokenMeta.symbol} / ${unit}`;\n                          })()}\n                        </div>\n                      </div>\n                    )}\n                    error={meta.error}\n                  >\n                    {' '}\n                    <StreamSpeedCalcField\n                      deposit={formatter.toYocto(values.deposit)}\n                      onChange={(speed) => {\n                        setFieldValue(field.name, speed, false);\n                        setFieldTouched(field.name, true, false);\n                      }}\n                    />\n                  </FormField>\n                )}\n              </Field>\n            </div>\n\n            <Field name=\"comment\">\n              {({\n                field,\n                meta,\n              }: FieldProps<CreateStreamFormValues['comment']>) => (\n                <FormField\n                  className=\"mb-6\"\n                  error={meta.error}\n                  label={(\n                    <div className=\"flex justify-between items-center\">\n                      <div className=\"mb-1\">Comment:</div>\n                      <div className=\"text-xs text-gray\">\n                        {(field.value && field.value.length) || 0}\n                        /255\n                      </div>\n                    </div>\n                  )}\n                >\n                  <label className=\"h-40 Input font-semibold flex p-4 pt-0 rounded-lg border  bg-input text-white focus-within:border-blue hover:border-blue border-border\">\n                    <textarea\n                      id=\"commentInput\"\n                      className=\" bg-input  w-full h-full pt-2 focus:outline-none resize-none\"\n                      placeholder=\"Enter comment\"\n                      maxLength={255}\n                      {...field}\n                    />\n                  </label>\n                </FormField>\n              )}\n            </Field>\n\n            {submitError && (\n              <p className=\"text-special-inactive my-4\">\n                Submit error:\n                {' '}\n                {submitError.message}\n              </p>\n            )}\n            <div className=\"flex relaitive\">\n              <div>\n                <label className=\"flex\">\n                  <Field name=\"autoStart\" className=\"mr-1\" type=\"checkbox\" />\n                  <span>\n                    Start stream immediately?\n                    {' '}\n                    <Tooltip\n                      className=\"ml-2\"\n                      overlay=\"Check this if you want this stream to start transferring funds immediately.\"\n                    />\n                  </span>\n                </label>\n\n                {tokenMeta &&\n                  <p className=\"text-left text-gray w-2/3 text-sm\">\n                    You will be charged\n                    {' '}\n                    {formatter.amount(roketoMeta.commission_on_create)}\n                    {' '}\n                    {tokenMeta.symbol}\n                    {' '}\n                    fee for that stream\n                  </p>\n                }\n              </div>\n\n              <Button\n                type=\"submit\"\n                disabled={isSubmitting}\n                variant=\"main\"\n                size=\"big\"\n                className=\"rounded-lg\"\n              >\n                Create Stream\n              </Button>\n            </div>\n          </form>\n        );\n      }}\n    </Formik>\n  );\n}\n","import React from 'react';\nimport { generatePath } from 'react-router-dom';\n\nimport { useRoketoContext } from 'app/roketo-context';\nimport { CreateStreamForm, CreateStreamFormValues } from 'features/create-stream/CreateStreamForm';\n\nconst redirectUrl = generatePath('streams');\nconst returnPath = `${window.location.origin}/#/${redirectUrl}`;\n\nexport function SendPage() {\n  const { roketo, tokens } = useRoketoContext();\n\n  const handleClick = async (values: CreateStreamFormValues) => {\n    const {\n      receiver,\n      autoStart,\n      comment,\n      deposit,\n      speed,\n      token,\n    } = values;\n\n    const { formatter, api, roketoMeta } = tokens[token];\n\n    await roketo.api.createStream({\n      deposit: formatter.toYocto(deposit),\n      description: comment,\n      receiverId: receiver,\n      tokenAccountId: token,\n      commissionOnCreate: roketoMeta.commission_on_create,\n      tokensPerSec: speed,\n      isAutoStart: autoStart,\n      callbackUrl: returnPath,\n      handleTransferStream: api.transfer,\n    });\n  };\n\n  return (\n    <div className=\"container m-auto px-5 py-12\">\n      <div className=\"text-center\">\n        <h1 className=\"text-5xl mb-4 text-center\">Create a stream</h1>\n        <p className=\"text-gray\">Stream your tokens to the receiver directly</p>\n      </div>\n      <CreateStreamForm onSubmit={handleClick} />\n    </div>\n  );\n}\n","import React from 'react';\nimport classNames from 'classnames';\nimport {\n  CircularProgressbar,\n  CircularProgressbarWithChildren,\n  buildStyles,\n} from 'react-circular-progressbar';\n\nconst GRADIENT_STOP = [\n  ['#4743FB', '#C750FF'],\n  ['#FFCC69', '#FF8469'],\n];\nconst GRADIENTS = [\n  `linear-gradient(270deg, ${GRADIENT_STOP[0][0]} 0%, ${GRADIENT_STOP[0][1]} 100%)`,\n  `linear-gradient(270deg, ${GRADIENT_STOP[1][0]} 0%, ${GRADIENT_STOP[1][1]} 100%)`,\n];\n\ntype ProgressBarProps = {\n  progresses: number[];\n  className: string;\n};\n\nexport function ProgressBar({ progresses, className }: ProgressBarProps) {\n  const p = [...progresses];\n  p.sort((a, b) => b - a);\n\n  return (\n    <div\n      className={classNames(\n        'relative h-3 rounded-r-md rounded-l-lg bg-progressBar',\n        className,\n      )}\n    >\n      {p.map((progress, i) => (\n        <div\n          key={i} // eslint-disable-line react/no-array-index-key\n          className=\"absolute left-0 h-full rounded-lg\"\n          style={{\n            width: `${progress * 100}%`,\n            background: GRADIENTS[i],\n          }}\n        />\n      ))}\n    </div>\n  );\n}\n\ntype GradientSVGProps = {\n  endColor: string;\n  startColor: string;\n  progressValue: number;\n  idCSS: string;\n  rotation: number;\n};\n\nfunction GradientSVG({\n  endColor, startColor, progressValue, idCSS, rotation,\n}: GradientSVGProps) {\n  const gradientTransform = `rotate(${rotation})`;\n\n  return (\n    <svg style={{ height: 0 }}>\n      <defs>\n        <linearGradient id={idCSS} gradientTransform={gradientTransform}>\n          <stop offset=\"0%\" stopColor={startColor} />\n          {progressValue > 0 && progressValue < 100 ? (\n            <stop offset={`${progressValue}%\"`} stopColor={endColor} />\n          ) : null}\n          <stop offset=\"100%\" stopColor={endColor} />\n        </linearGradient>\n      </defs>\n    </svg>\n  );\n}\n\ntype ArcProgressBarProps = {\n  progresses: number[];\n  className: string;\n};\n\nexport function ArcProgressBar({ progresses, className }: ArcProgressBarProps) {\n  progresses.sort((a, b) => b - a);\n  const rotation = 3 / 4;\n\n  return (\n    <div className={classNames(className)}>\n      <CircularProgressbarWithChildren\n        circleRatio={0.5}\n        styles={buildStyles({\n          rotation,\n          pathColor: '#0D0B26',\n          strokeLinecap: 'round',\n        })}\n        value={1}\n        minValue={0}\n        maxValue={1}\n      >\n        {GRADIENT_STOP.map((colors, i) => (\n          <GradientSVG\n            // eslint-disable-next-line react/no-array-index-key\n            key={i}\n            progressValue={0}\n            idCSS={`__arcProgressBar_grad_${i}`}\n            rotation={i === 0 ? 90 : 90}\n            startColor={colors[0]}\n            endColor={colors[1]}\n          />\n        ))}\n        {progresses.map((progress, i) => (\n          <CircularProgressbar\n            // eslint-disable-next-line react/no-array-index-key\n            key={i}\n            circleRatio={0.5}\n            className=\"absolute inset-0\"\n            value={progress}\n            styles={buildStyles({\n              rotation,\n              trailColor: 'transparent',\n              pathColor: `url(#__arcProgressBar_grad_${i})`,\n              strokeLinecap: 'round',\n            })}\n            minValue={0}\n            maxValue={1}\n          />\n        ))}\n      </CircularProgressbarWithChildren>\n    </div>\n  );\n}\n","import React from 'react';\n\ntype LinkIconProps = {\n  className?: string;\n};\n\nexport function LinkIcon(props: LinkIconProps) {\n  return (\n    <svg\n      width=\"20\"\n      height=\"21\"\n      viewBox=\"0 0 20 21\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <g clipPath=\"url(#clip0)\">\n        <path\n          d=\"M8.31055 11.6724C8.66342 12.1442 9.11362 12.5345 9.63062 12.817C10.1476 13.0994 10.7193 13.2674 11.3069 13.3095C11.8945 13.3516 12.4843 13.2668 13.0363 13.0609C13.5883 12.855 14.0895 12.5328 14.506 12.1161L16.9711 9.65109C17.7194 8.87624 18.1335 7.83845 18.1242 6.76124C18.1148 5.68403 17.6827 4.65359 16.921 3.89186C16.1593 3.13013 15.1288 2.69805 14.0516 2.68869C12.9744 2.67933 11.9366 3.09344 11.1618 3.84181L9.74849 5.24689\"\n          stroke=\"currentColor\"\n          strokeWidth=\"1.64336\"\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n        />\n        <path\n          d=\"M11.5972 10.0291C11.2444 9.55731 10.7942 9.16697 10.2772 8.88451C9.76017 8.60205 9.18847 8.43408 8.60085 8.392C8.01323 8.34991 7.42344 8.4347 6.87147 8.6406C6.3195 8.8465 5.81826 9.1687 5.40176 9.58535L2.93672 12.0504C2.18835 12.8252 1.77424 13.863 1.7836 14.9402C1.79296 16.0175 2.22504 17.0479 2.98677 17.8096C3.7485 18.5714 4.77894 19.0034 5.85615 19.0128C6.93336 19.0222 7.97115 18.608 8.746 17.8597L10.1511 16.4546\"\n          stroke=\"currentColor\"\n          strokeWidth=\"1.64336\"\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n        />\n      </g>\n      <defs>\n        <clipPath id=\"clip0\">\n          <rect\n            width=\"19.7203\"\n            height=\"19.7203\"\n            fill=\"white\"\n            transform=\"translate(0.09375 0.990601)\"\n          />\n        </clipPath>\n      </defs>\n    </svg>\n  );\n}\n","import React from 'react';\nimport { intervalToDuration, formatDuration } from 'date-fns';\nimport { shortEnLocale, isValidDate } from 'shared/helpers/date';\n\ntype DurationTimerProps = {\n  untilTimestamp: number | string;\n  suffix?: string;\n  finishedText?: string;\n};\n\nexport function DurationTimer({ untilTimestamp, suffix, finishedText }: DurationTimerProps) {\n  const untilDate = new Date(untilTimestamp);\n  const dateValid = isValidDate(untilDate);\n\n  if (!dateValid) {\n    return <span>Invalid Date</span>;\n  }\n\n  const expired = dateValid ? Date.now() > untilTimestamp : true;\n  const duration = expired ? null : intervalToDuration({ start: new Date(), end: untilDate });\n\n  if (!duration || expired) {\n    return <span>{finishedText}</span>;\n  }\n\n  if (duration.days || duration.weeks || duration.months || duration.years) {\n    duration.seconds = 0;\n  }\n\n  const formatted = formatDuration(duration, {\n    locale: shortEnLocale,\n  }) + (suffix || '');\n\n  return <span>{formatted}</span>;\n}\n","import { RoketoStream } from 'shared/api/roketo/interfaces/entities';\nimport { useRoketoContext } from 'app/roketo-context';\n\nexport const STREAM_DIRECTION = {\n  IN: 'in',\n  OUT: 'out',\n};\n\ntype StreamDirectionKeyType = keyof typeof STREAM_DIRECTION;\n\nexport function useGetStreamDirection(stream: RoketoStream): typeof STREAM_DIRECTION[StreamDirectionKeyType] {\n  const { auth } = useRoketoContext();\n\n  // todo: case with 3rd person view\n  return stream.receiver_id === auth.accountId\n    ? STREAM_DIRECTION.IN\n    : STREAM_DIRECTION.OUT;\n}","import React from 'react';\n\ntype PauseIconProps = {\n  className?: string;\n};\n\nexport function PauseIcon(props: PauseIconProps) {\n  return (\n    <svg\n      width=\"11\"\n      height=\"11\"\n      viewBox=\"0 0 11 11\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path\n        d=\"M2.42963 2.28638V8.60681\"\n        stroke=\"#FFAB6A\"\n        strokeWidth=\"3\"\n        strokeLinecap=\"round\"\n      />\n      <path\n        d=\"M8.76996 2.28638V8.60681\"\n        stroke=\"#FFAB6A\"\n        strokeWidth=\"3\"\n        strokeLinecap=\"round\"\n      />\n    </svg>\n  );\n}\n","import React from 'react';\n\ntype StartIconProps = {\n  className?: string;\n};\n\nexport function StartIcon(props: StartIconProps) {\n  return (\n    <svg\n      width=\"8\"\n      height=\"8\"\n      viewBox=\"0 0 8 8\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path\n        d=\"M7.17026 3.36901C7.72501 3.6893 7.72501 4.49002 7.17026 4.81031L2.10367 7.7355C1.54891 8.05579 0.855469 7.65543 0.855469 7.01486L0.85547 1.16446C0.85547 0.523887 1.54891 0.123526 2.10367 0.443814L7.17026 3.36901Z\"\n        fill=\"#2EDDD9\"\n      />\n    </svg>\n  );\n}\n","import React from 'react';\n\ntype StopIconProps = {\n  className?: string;\n};\n\nexport function StopIcon(props: StopIconProps) {\n  return (\n    <svg\n      width=\"11\"\n      height=\"11\"\n      viewBox=\"0 0 11 11\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <rect\n        x=\"0.429626\"\n        y=\"0.930298\"\n        width=\"9.58382\"\n        height=\"9.58382\"\n        rx=\"2\"\n        fill=\"#F56173\"\n      />\n    </svg>\n  );\n}\n","import classNames from 'classnames';\n\nimport { STREAM_STATUS } from 'shared/api/roketo/constants';\nimport type { RoketoStream } from 'shared/api/roketo/interfaces/entities';\n\nconst bindings = {\n  [STREAM_STATUS.Initialized]: {\n    colorClass: 'text-special-active',\n    label: 'Initialized',\n  },\n  [STREAM_STATUS.Active]: {\n    colorClass: 'text-special-active',\n    label: 'Active',\n  },\n  [STREAM_STATUS.Paused]: {\n    colorClass: 'text-special-hold',\n    label: 'Paused',\n  },\n  [STREAM_STATUS.Finished]: {\n    colorClass: 'text-special-active',\n    label: 'Finished',\n  },\n} as const;\n\ntype StreamStatusProps = {\n  stream: RoketoStream;\n  className?: string;\n};\n\nexport function StreamStatus({ stream, className }: StreamStatusProps) {\n  const binding = bindings[stream.status] || {};\n\n  return (\n    <div className={classNames(binding.colorClass, className)}>\n      {binding.label}\n    </div>\n  );\n}\n","import React, { useState } from 'react';\nimport classNames from 'classnames';\nimport Modal from 'react-modal';\n\nimport { DropdownOpener } from 'shared/kit/DropdownOpener';\nimport { DropdownMenu, DropdownMenuDivider, DropdownMenuItem } from 'shared/kit/DropdownMenu';\nimport { Button } from 'shared/kit/Button';\nimport { useBool, BooleanControl } from 'shared/hooks/useBool';\nimport { PauseIcon } from 'shared/icons/Pause';\nimport { StartIcon } from 'shared/icons/Start';\nimport { StopIcon } from 'shared/icons/Stop';\nimport { useRoketoContext } from 'app/roketo-context';\nimport type { RoketoStream } from 'shared/api/roketo/interfaces/entities';\n\nimport { STREAM_STATUS } from 'shared/api/roketo/constants';\nimport { StreamStatus } from './StreamStatus';\n\ntype PauseConfirmModalProps = {\n  modalControl: BooleanControl;\n  onConfirm: () => void;\n};\n\nfunction PauseConfirmModal({ modalControl, onConfirm }: PauseConfirmModalProps) {\n  return (\n    <Modal\n      isOpen={modalControl.on}\n      onRequestClose={modalControl.turnOff}\n      className=\"ModalContent\"\n      overlayClassName=\"ModalOverlay\"\n    >\n      <h2 className=\"text-2xl mb-4\">Are you sure?</h2>\n      <p className=\"mb-6\">\n        As a stream receiver, you will not be able to resume stream. Only stream\n        owners can resume streams\n      </p>\n      <Button\n        className=\"w-full\"\n        variant=\"filled\"\n        type=\"button\"\n        onClick={() => {\n          modalControl.turnOff();\n          onConfirm();\n        }}\n      >\n        Yes, I want to pause stream.\n      </Button>\n    </Modal>\n  );\n}\n\ntype StreamControlsProps = {\n  stream: RoketoStream;\n  minimal?: boolean;\n  className: string;\n};\n\nexport function StreamControls({ stream, minimal = false, className }: StreamControlsProps) {\n  const { auth, roketo } = useRoketoContext();\n  const modalControl = useBool(false);\n  const [loading, setLoading] = useState(false);\n  const [menuOpened, setMenuOpened] = useState(false);\n\n  const isOutgoing = auth.accountId === stream.owner_id;\n  const isIncoming = auth.accountId === stream.receiver_id;\n  const isExternalStream = !isOutgoing && !isIncoming;\n\n  const isDead = stream.status === STREAM_STATUS.Finished;\n\n  const handlePause = async () => {\n    setLoading(true);\n    await roketo.api.pauseStream({ streamId: stream.id });\n    setLoading(false);\n  }\n\n  const handleStart = async () => {\n    setLoading(true);\n    await roketo.api.startStream({ streamId: stream.id });\n    setLoading(false);\n  }\n\n  const handleStop = async () => {\n    setLoading(true);\n    await roketo.api.stopStream({ streamId: stream.id });\n    setLoading(false);\n  }\n\n  if (isDead || isExternalStream) {\n    return (\n      <StreamStatus\n        className={classNames(\n          minimal ? '' : 'border border-border p-4 px-6 rounded-lg',\n          className,\n        )}\n        stream={stream}\n      />\n    );\n  }\n\n  function onClickPause() {\n    if (isIncoming) {\n      modalControl.turnOn();\n    } else {\n      handlePause();\n    }\n  }\n\n  const opened = menuOpened && !loading;\n\n  return (\n    <div className={classNames(className, 'relative inline-flex')}>\n      <PauseConfirmModal\n        modalControl={modalControl}\n        onConfirm={handlePause}\n      />\n      <DropdownOpener\n        minimal={minimal}\n        opened={opened}\n        onChange={setMenuOpened}\n      >\n        {loading ? 'Loading...' : <StreamStatus stream={stream} />}\n      </DropdownOpener>\n      <DropdownMenu\n        onClose={() => setMenuOpened(false)}\n        opened={opened}\n        className=\"top-full w-44\"\n      >\n        {stream.status !== STREAM_STATUS.Active && isOutgoing && (\n          <>\n            <DropdownMenuItem>\n              <button\n                type=\"button\"\n                className=\"inline-flex items-center font-semibold\"\n                onClick={handleStart}\n              >\n                <StartIcon className=\"mr-4 flex-shrink-0\" />\n                <span>Start stream</span>\n                {' '}\n              </button>\n            </DropdownMenuItem>\n            <DropdownMenuDivider />\n          </>\n        )}\n\n        {stream.status !== STREAM_STATUS.Paused && (\n          <>\n            <DropdownMenuItem>\n              <button\n                type=\"button\"\n                className=\"inline-flex items-center font-semibold\"\n                onClick={onClickPause}\n              >\n                <PauseIcon className=\"mr-4 flex-shrink-0\" />\n                <span>Pause stream</span>\n              </button>\n            </DropdownMenuItem>\n            <DropdownMenuDivider />\n          </>\n        )}\n\n        <DropdownMenuItem>\n          <button\n            type=\"button\"\n            className=\"inline-flex items-center font-semibold\"\n            onClick={handleStop}\n          >\n            <StopIcon className=\"mr-4 flex-shrink-0\" />\n            <span> Stop stream </span>\n          </button>\n        </DropdownMenuItem>\n      </DropdownMenu>\n    </div>\n  );\n}\n","import React from 'react';\nimport BigNumber from 'bignumber.js';\nimport useSWR from 'swr';\n\nimport { getAvailableToWithdraw, isDead } from 'shared/api/roketo/helpers';\nimport { STREAM_STATUS } from 'shared/api/roketo/constants';\nimport { useRoketoContext } from 'app/roketo-context';\nimport type { RoketoStream } from 'shared/api/roketo/interfaces/entities';\nimport { SECONDS_IN_YEAR } from 'shared/constants';\n\nexport function useStreams() {\n  const { auth, roketo } = useRoketoContext();\n\n  const swr = useSWR(\n    ['streams', auth.accountId, roketo.account.last_created_stream],\n    async () => {\n      const inputs = await roketo.api.getAccountIncomingStreams({ from: 0, limit: 100 });\n      const outputs = await roketo.api.getAccountOutgoingtreams({ from: 0, limit: 100 });\n\n      return {\n        inputs,\n        outputs\n      };\n    },\n  );\n\n  return swr;\n}\n\nexport function useSingleStream(streamId: string) {\n  const { roketo } = useRoketoContext();\n\n  const swr = useSWR<RoketoStream>(\n    () => {\n      const key = roketo.account\n        ? ['stream', streamId, roketo.account.last_created_stream]\n        : false;\n      return key;\n    },\n    async () => {\n      const stream = await roketo.api.getStream({ streamId });\n\n      return stream;\n    },\n    {\n      errorRetryInterval: 2000,\n      errorRetryCount: 3,\n    },\n  );\n\n  const stream = swr.data;\n\n  const isCompleted = isDead(stream);\n\n  React.useEffect(() => {\n    const startPoller = () => setInterval(swr.mutate, 1000);\n\n    if (stream?.status === STREAM_STATUS.Active && !isCompleted) {\n      const id = startPoller();\n      return () => clearInterval(id);\n    }\n\n    return undefined;\n  }, [stream?.status, isCompleted, swr]);\n\n  return swr;\n}\n\nexport function streamViewData(stream: RoketoStream) {\n  const MAX_SEC = SECONDS_IN_YEAR * 1000;\n\n  const availableToWithdraw = getAvailableToWithdraw(stream);\n\n  const secondsLeft = BigNumber.minimum(\n    MAX_SEC,\n    new BigNumber(stream.balance)\n      .minus(availableToWithdraw)\n      .dividedBy(stream.tokens_per_sec)\n      .toFixed()\n  ).toNumber();\n\n  const timestampEnd = secondsLeft > 0 ? Date.now() + secondsLeft * 1000 : 0;\n  const dateEnd = new Date(timestampEnd);\n\n  // progress bar calculations\n  const full = new BigNumber(stream.balance).plus(stream.tokens_total_withdrawn);\n  const withdrawn = new BigNumber(stream.tokens_total_withdrawn);\n  const streamed = withdrawn.plus(availableToWithdraw);\n\n  const left = full.minus(streamed);\n  const progresses = [\n    withdrawn.dividedBy(full).toNumber(),\n    streamed.dividedBy(full).toNumber()\n  ];\n\n  const percentages = {\n    left: full.minus(streamed).dividedBy(full).toNumber(),\n    streamed: streamed.dividedBy(full).toNumber(),\n    withdrawn: withdrawn.dividedBy(full).toNumber(),\n    available: availableToWithdraw.dividedBy(full).toNumber(),\n  };\n\n  return {\n    dateEnd,\n    progresses,\n    isDead: isDead(stream),\n    percentages,\n    timestampEnd,\n    progress: {\n      full: full.toFixed(),\n      withdrawn: withdrawn.toFixed(),\n      streamed: streamed.toFixed(),\n      left: left.toFixed(),\n      available: availableToWithdraw.toFixed(),\n    },\n  };\n}\n","import React from 'react';\n\nexport function StreamOutIcon() {\n  return (\n    <svg\n      width=\"16\"\n      height=\"17\"\n      viewBox=\"0 0 16 17\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <path\n        d=\"M8.23528 9.07894L1 1.8437M1 1.8437V9.07894M1 1.8437H8.23523\"\n        stroke=\"#F56173\"\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n      />\n      <path\n        d=\"M12.1637 6.27117C13.591 7.14282 14.5438 8.71519 14.5438 10.5101C14.5438 13.2512 12.3217 15.4733 9.58065 15.4733C7.78575 15.4733 6.21339 14.5205 5.34174 13.0931\"\n        stroke=\"#F56173\"\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n      />\n    </svg>\n  );\n}\n","import React from 'react';\n\nexport function StreamInIcon() {\n  return (\n    <svg\n      width=\"16\"\n      height=\"17\"\n      viewBox=\"0 0 16 17\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <path\n        d=\"M0.999991 1.84371L8.23523 9.07889M8.23523 9.07889V1.84371M8.23523 9.07889H1.00004\"\n        stroke=\"#2EDDD9\"\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n      />\n      <path\n        d=\"M12.1637 6.27124C13.5911 7.14289 14.5438 8.71524 14.5438 10.5101C14.5438 13.2512 12.3218 15.4733 9.58068 15.4733C7.7858 15.4733 6.21344 14.5205 5.3418 13.0931\"\n        stroke=\"#2EDDD9\"\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n      />\n    </svg>\n  );\n}\n","import React from 'react';\nimport classNames from 'classnames';\n\nimport { useToken } from 'shared/hooks/useToken';\nimport { StreamOutIcon } from 'shared/icons/StreamOut';\nimport { StreamInIcon } from 'shared/icons/StreamIn';\nimport { RoketoStream } from 'shared/api/roketo/interfaces/entities';\nimport { useGetStreamDirection, STREAM_DIRECTION } from 'shared/hooks/useGetStreamDirection';\n\ntype StreamingSpeedProps = {\n  stream: RoketoStream;\n  className?: string;\n}\n\nexport function StreamingSpeed({ stream, className }: StreamingSpeedProps) {\n  const direction = useGetStreamDirection(stream);\n  const { formatter, meta } = useToken(stream.token_account_id);\n  const speedInfo = formatter.tokensPerMeaningfulPeriod(stream.tokens_per_sec);\n\n  return (\n    <div\n      className={classNames(\n        'inline-flex items-center whitespace-nowrap',\n        className,\n      )}\n    >\n      {direction === STREAM_DIRECTION.OUT &&\n        <StreamOutIcon />\n      }\n\n      {direction === STREAM_DIRECTION.IN &&\n        <StreamInIcon />\n      }\n\n      <span className=\"ml-2\">\n        <span>\n          @\n          {speedInfo.formattedValue}\n        </span>\n        <span>\n          {' '}\n          {meta.symbol}\n          {' '}\n          /\n          {speedInfo.unit}\n        </span>\n      </span>\n    </div>\n  );\n}\n","import React from 'react';\nimport classNames from 'classnames';\n\ntype BulletProps = {\n  className: string;\n};\n\nexport function Bullet({ className, ...rest }: BulletProps) {\n  return (\n    <div\n      className={classNames(\n        'inline-block w-2 h-2 flex-shrink-9 rounded-full',\n        className,\n      )}\n      {...rest}\n    />\n  );\n}\n","import numbro from 'numbro';\nimport classNames from 'classnames';\nimport { Bullet } from 'shared/kit/Bullet';\n\ntype StreamProgressPercentageProps = {\n  label: string;\n  formattedFloatValue: string;\n  percentageValue: number;\n  colorClass: string;\n  className?: string;\n};\n\nexport function StreamProgressPercentage({\n  label,\n  formattedFloatValue,\n  percentageValue,\n  colorClass,\n  className\n}: StreamProgressPercentageProps) {\n  return (\n    <div className={className}>\n      <Bullet className={classNames(colorClass, 'mr-1')} />\n      <span>\n        {label}:{' '}\n        <span className=\"font-semibold\">\n          {formattedFloatValue}\n          {' '}\n        </span>\n        <span className=\"text-gray\">\n          {' '}\n          {numbro(percentageValue).format({\n            output: 'percent',\n            mantissa: 1,\n          })}\n        </span>\n      </span>\n    </div>\n  );\n}\n","import classNames from 'classnames';\nimport React from 'react';\nimport copy from 'clipboard-copy';\nimport { Link, generatePath } from 'react-router-dom';\nimport { formatDuration, intervalToDuration } from 'date-fns';\n\nimport { TokenImage } from 'shared/kit/TokenImage';\nimport { ProgressBar } from 'shared/kit/ProgressBar';\nimport { Button } from 'shared/kit/Button';\nimport { getStreamLink, routes } from 'shared/helpers/routing';\nimport { LinkIcon } from 'shared/icons/Link';\nimport { shortEnLocale } from 'shared/helpers/date';\nimport { isIdling } from 'shared/api/roketo/helpers';\nimport { DurationTimer } from 'shared/components/DurationTimer';\nimport type { RoketoStream } from 'shared/api/roketo/interfaces/entities';\nimport { useToken } from 'shared/hooks/useToken';\nimport { useGetStreamDirection, STREAM_DIRECTION } from 'shared/hooks/useGetStreamDirection';\nimport { StreamControls } from 'features/stream-control/StreamControls';\nimport { streamViewData } from 'features/roketo-resource';\n\nimport { StreamingSpeed } from './StreamingSpeed';\nimport { StreamProgressPercentage } from './StreamProgressPercentage';\n\ntype StreamCardProps = {\n  stream: RoketoStream;\n  className: string;\n};\n\nexport function StreamCard({ stream, className }: StreamCardProps) {\n  const { formatter, meta } = useToken(stream.token_account_id);\n  const direction = useGetStreamDirection(stream);\n\n  const {\n    dateEnd,\n    progresses,\n    timestampEnd,\n    percentages,\n    progress: { full, withdrawn, streamed },\n  } = streamViewData(stream);\n\n  const link = getStreamLink(stream.id);\n\n  const duration = intervalToDuration({\n    start: new Date(),\n    end: dateEnd,\n  });\n  const timeLeft = formatDuration(duration, {\n    locale: shortEnLocale,\n  });\n\n  return (\n    <div\n      className={classNames(\n        'grid grid-cols-12 gap-6 justify-items-center',\n        'p-10 bg-input rounded-3xl',\n        className,\n      )}\n    >\n      <Link\n        to={generatePath(routes.stream, { id: stream.id })}\n        className=\"w-full col-span-12 xl:col-span-6 justify-self-start\"\n      >\n        <div className=\"flex items-center\">\n          <TokenImage tokenAccountId={stream.token_account_id} className=\"mr-4\" />\n          <div className=\"w-full gap-4 flex items-end flex-wrap\">\n            <div className=\"text-2xl whitespace-nowrap flex-shrink-0\">\n              {formatter.amount(streamed)}\n              {' '}\n              of\n              {' '}\n              {formatter.amount(full)}\n              {' '}\n              <span className=\"uppercase\">{meta.symbol}</span>\n            </div>\n\n            <StreamingSpeed stream={stream} />\n\n            <div className=\"whitespace-nowrap\">\n              {isIdling(stream) ? (\n                timeLeft\n              ) : (\n                <DurationTimer\n                  untilTimestamp={timestampEnd}\n                  suffix=\" remaining\"\n                />\n              )}\n            </div>\n          </div>\n        </div>\n        <ProgressBar className=\"mt-5\" progresses={progresses} />\n        <div className=\"flex text-sm mt-3 mr-3\">\n          <StreamProgressPercentage\n            className=\"mr-4\"\n            label=\"Withdrawn\"\n            colorClass=\"bg-streams-withdrawn\"\n            formattedFloatValue={`${formatter.amount(withdrawn)} ${meta.symbol}`}\n            percentageValue={percentages.withdrawn}\n          />\n          <StreamProgressPercentage\n            label=\"Streamed\"\n            colorClass=\"bg-streams-streamed\"\n            formattedFloatValue={`${formatter.amount(streamed)} ${meta.symbol}`}\n            percentageValue={percentages.streamed}\n          />\n        </div>\n      </Link>\n      <div className=\"hidden xl:block\" />\n      <div className=\"flex gap-5 justify-between xl:justify-end col-span-12 xl:col-span-5 w-full items-center flex-wrap md:flex-nowrap\">\n        {direction === STREAM_DIRECTION.IN ? (\n          <div className=\"w-44\">\n            <div className=\"text-gray\">Sender:</div>\n            <div className=\"break-words\">{stream.owner_id}</div>\n          </div>\n        ) : (\n          <div className=\"w-44\">\n            <div className=\"text-gray\">Receiver:</div>\n            <div className=\"break-words\">{stream.receiver_id}</div>\n          </div>\n        )}\n        <div className=\"w-24\">\n          <div className=\"text-gray\">Status:</div>\n          <StreamControls className=\"w-full\" minimal stream={stream} />\n        </div>\n        <div className=\"flex items-start justify-end w-52\">\n          <Button\n            type=\"button\"\n            className=\"ml-3\"\n            variant=\"filled\"\n            onClick={() => copy(link)}\n            to={generatePath(routes.stream, { id: stream.id })}\n          >\n            <LinkIcon />\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React, { useState } from 'react';\nimport classNames from 'classnames';\nimport { RadioButton } from '../RadioButton';\nimport { DropdownOpener } from '../DropdownOpener';\nimport { DropdownMenu, DropdownMenuItem } from '../DropdownMenu';\n\ntype FilterOptionWithCounterProps = {\n  count: React.ReactNode;\n  option: React.ReactNode;\n};\n\nexport function FilterOptionWithCounter({ count, option }: FilterOptionWithCounterProps) {\n  return (\n    <span>\n      {option}\n      {' '}\n      <span className=\"text-gray font-normal\">{count}</span>\n    </span>\n  );\n}\n\ntype FilterOption = {\n  label: string;\n  fn: (a: any, b: any) => number;\n};\n\ntype FilterProps<T> = {\n  label: string;\n  options: T[];\n  renderOption: (option: T, active: boolean) => React.ReactNode;\n  renderActive?: (option: T) => React.ReactNode;\n  active: T;\n  minimal?: boolean;\n  onChange: (option: T) => void;\n  className: string;\n};\n\nexport function Filter<T extends string | FilterOption>({\n  label,\n  options,\n  renderOption,\n  renderActive,\n  active,\n  minimal,\n  onChange,\n  className,\n}: FilterProps<T>) {\n  const [opened, setOpened] = useState(false);\n\n  return (\n    <div className={classNames('inline-flex items-center relative', className)}>\n      <div className=\"text-gray mr-2\">{label}</div>\n      <DropdownOpener minimal={minimal} rounded onChange={setOpened}>\n        {renderActive ? renderActive(active) : active}\n      </DropdownOpener>\n\n      <DropdownMenu\n        opened={opened}\n        className=\"right-0\"\n        onClose={() => {\n          setOpened(false);\n        }}\n      >\n        {options.map((option) => (\n          <DropdownMenuItem key={typeof option === 'string' ? option : option.label}>\n            <RadioButton\n              label={\n                renderOption ? renderOption(option, active === option) : option\n              }\n              active={active === option}\n              value={option}\n              onChange={onChange}\n            />\n          </DropdownMenuItem>\n        ))}\n      </DropdownMenu>\n    </div>\n  );\n}\n","import { useState, useEffect, useMemo } from 'react';\n\nimport { RoketoStream } from 'shared/api/roketo/interfaces/entities';\n\ntype FilterFn = (stream: RoketoStream) => boolean;\n\ntype Option = string | FilterFn;\n\ntype Filter<T> = {\n  option: string;\n  selectOption: (option: string) => void;\n  options: Record<string, T>;\n  optionsArray: string[];\n  currentFilterFunction: T;\n};\n\nexport function useFilter<T extends Option>({ options }: { options: Record<string, T>}): Filter<T> {\n  const keys = useMemo(() => Object.keys(options), [options]);\n\n  const [option, selectOption] = useState(keys[0]);\n\n  const filter = useMemo(\n    () => {\n      const currentFilterFunction = options[option];\n\n      return {\n        option,\n        selectOption,\n        options,\n        optionsArray: keys,\n        currentFilterFunction,\n      };\n    },\n    [options, option, keys],\n  );\n\n  return filter;\n}\n\nexport function useFilters({ items, filters }: { items: (RoketoStream[] | undefined), filters: Filter<FilterFn>[] }) {\n  const [filteredItems, setFilteredItems] = useState<RoketoStream[] | undefined>(undefined);\n  const [filterCounts, setFilterCounts] = useState<Record<string, number>[]>([]);\n\n  useEffect(() => {\n    let filteredItemsValue = items;\n    const filterCountsValue: Record<string, number>[] = [];\n\n    filters.forEach((filter) => {\n      const filterRunResult: Record<string, RoketoStream[] | undefined> = {};\n\n      // run filter for every possible function\n      Object.keys(filter.options).forEach((option) => {\n        filterRunResult[option] = filteredItemsValue?.filter(filter.options[option]);\n      });\n\n      // calc counts for every option in filter\n      const currentFilterCount: Record<string, number> = {};\n      Object.keys(filterRunResult).forEach(\n        (option) => { currentFilterCount[option] = (filterRunResult[option] || []).length; },\n      );\n\n      filterCountsValue.push(currentFilterCount);\n      // set items to selected filter\n      filteredItemsValue = filterRunResult[filter.option];\n    });\n\n    setFilterCounts(filterCountsValue);\n    setFilteredItems(filteredItemsValue);\n  }, [items, filters]);\n\n  return {\n    filterCounts,\n    filteredItems,\n  };\n}\n","import { useRoketoContext } from 'app/roketo-context';\nimport { useMemo } from 'react';\n\nimport { STREAM_STATUS } from 'shared/api/roketo/constants';\nimport type { RoketoStream } from 'shared/api/roketo/interfaces/entities';\n\nimport { useFilter, useFilters } from './lib';\n\nconst STREAM_TYPE_FILTER = {\n  ALL: 'All',\n  INCOMING: 'Incoming',\n  OUTGOING: 'Outgoing',\n};\n\nconst STREAM_STATUS_FILTER = {\n  ALL: 'All',\n  [STREAM_STATUS.Active]: 'Active',\n  [STREAM_STATUS.Paused]: 'Paused',\n  [STREAM_STATUS.Finished]: 'Finished',\n};\n\nexport function useStreamFilters(streams: RoketoStream[] | undefined) {\n  const { auth } = useRoketoContext();\n\n  const statusOptions = useMemo(\n    () => ({\n      [STREAM_STATUS_FILTER.ALL]: () => true,\n      [STREAM_STATUS_FILTER[STREAM_STATUS.Active]]: (stream: RoketoStream) => stream.status === STREAM_STATUS.Active,\n      [STREAM_STATUS_FILTER[STREAM_STATUS.Paused]]: (stream: RoketoStream) => stream.status === STREAM_STATUS.Paused,\n      [STREAM_STATUS_FILTER[STREAM_STATUS.Finished]]:\n        (stream: RoketoStream) => stream.status === STREAM_STATUS.Finished,\n    }),\n    [],\n  );\n  const directionOptions = useMemo(\n    () => ({\n      [STREAM_TYPE_FILTER.ALL]: () => true,\n      [STREAM_TYPE_FILTER.INCOMING]: (stream: RoketoStream) => auth.accountId === stream.receiver_id,\n      [STREAM_TYPE_FILTER.OUTGOING]: (stream: RoketoStream) => auth.accountId === stream.owner_id,\n    }),\n    [auth.accountId],\n  );\n\n  const statusFilter = useFilter({\n    options: statusOptions,\n  });\n\n  const directionFilter = useFilter({\n    options: directionOptions,\n  });\n\n  const combinedFilters = useMemo(\n    () => [directionFilter, statusFilter],\n    [directionFilter, statusFilter],\n  );\n\n  const result = useFilters({\n    items: streams,\n    filters: combinedFilters,\n  });\n\n  return {\n    statusFilter,\n    directionFilter,\n    result,\n  };\n}\n","import React, { useEffect, useState } from 'react';\nimport classNames from 'classnames';\n\nimport { Filter, FilterOptionWithCounter } from 'shared/kit/Filter';\nimport { STREAM_STATUS } from 'shared/api/roketo/constants';\nimport type { RoketoStream } from 'shared/api/roketo/interfaces/entities';\n\nimport { useStreamFilters } from './useStreamFilters';\n\nfunction compareBy(a: RoketoStream, b: RoketoStream, key: keyof RoketoStream) {\n  return Number(b[key]) - Number(a[key]);\n}\n\nconst sorts = {\n  bigBalanceFirst: {\n    label: 'With big balances',\n    fn: (a: RoketoStream, b: RoketoStream) => compareBy(a, b, 'balance'),\n  },\n  highSpeedFirst: {\n    label: 'With high speed',\n    fn: (a: RoketoStream, b: RoketoStream) => compareBy(a, b, 'tokens_per_sec'),\n  },\n  highSpeedLast: {\n    label: 'With low speed',\n    fn: (a: RoketoStream, b: RoketoStream) => compareBy(a, b, 'tokens_per_sec') * -1,\n  },\n  mostRecent: {\n    label: 'Most recent',\n    fn: (a: RoketoStream, b: RoketoStream) => compareBy(a, b, 'timestamp_created'),\n  },\n};\nconst statusPriority = [\n  STREAM_STATUS.Initialized,\n  STREAM_STATUS.Active,\n  STREAM_STATUS.Paused,\n  STREAM_STATUS.Finished,\n];\n\nfunction defaultStreamSort(a: RoketoStream, b: RoketoStream) {\n  return statusPriority.indexOf(a.status) - statusPriority.indexOf(b.status);\n}\n\ntype StreamFiltersProps = {\n  items: RoketoStream[] | undefined;\n  onFilterDone: (result: RoketoStream[] | undefined) => void;\n  className: string;\n};\n\nexport function StreamFilters({ items, onFilterDone, className }: StreamFiltersProps) {\n  const filter = useStreamFilters(items);\n  const {filteredItems} = filter.result;\n\n  const [sorting, setSorting] = useState(sorts.mostRecent);\n  const sortOptions = Object.values(sorts);\n\n  useEffect(() => {\n    if (!filteredItems) {\n      onFilterDone(filteredItems);\n\n      return;\n    }\n\n    const sortedStreams = [...filteredItems];\n\n    sortedStreams.sort(defaultStreamSort);\n    sortedStreams.sort(sorting.fn);\n\n    onFilterDone(sortedStreams);\n  }, [filteredItems, onFilterDone, sorting.fn]);\n\n  return (\n    <div className={classNames('md:flex', className)}>\n      <Filter\n        className=\"mr-5 z-10\"\n        options={filter.directionFilter.optionsArray}\n        label=\"Type:\"\n        active={filter.directionFilter.option}\n        onChange={filter.directionFilter.selectOption}\n        renderOption={(option) => {\n          const counts = filter.result.filterCounts[0];\n          return (\n            <FilterOptionWithCounter\n              option={option}\n              count={counts ? counts[option] : ''}\n            />\n          );\n        }}\n      />\n      <Filter\n        className=\"z-10\"\n        options={filter.statusFilter.optionsArray}\n        label=\"Status:\"\n        active={filter.statusFilter.option}\n        onChange={filter.statusFilter.selectOption}\n        renderOption={(option) => {\n          const counts = filter.result.filterCounts[1];\n          return (\n            <FilterOptionWithCounter\n              option={option}\n              count={counts ? counts[option] : ''}\n            />\n          );\n        }}\n      />\n      <div className=\"flex-grow\" />\n      <Filter\n        className=\"mt-3 md:mt-0\"\n        minimal\n        options={sortOptions}\n        label=\"Show first:\"\n        active={sorting}\n        onChange={setSorting}\n        renderOption={(option) => <span>{option.label}</span>}\n        renderActive={(option) => <span>{option.label}</span>}\n      />\n    </div>\n  );\n}\n","import React from 'react';\nimport BigNumber from 'bignumber.js';\n\nimport { Button } from 'shared/kit/Button';\nimport { Tooltip } from 'shared/kit/Tooltip';\nimport { useRoketoContext } from 'app/roketo-context';\nimport { useStreams } from 'features/roketo-resource';\nimport { getAvailableToWithdraw } from 'shared/api/roketo/helpers';\nimport { TokenImage } from 'shared/kit/TokenImage';\nimport { STREAM_STATUS } from 'shared/api/roketo/constants';\nimport { RoketoStream } from 'shared/api/roketo/interfaces/entities';\n\nexport function WithdrawAllButton({ children }: { children: React.ReactNode}) {\n  const { tokens, roketo } = useRoketoContext();\n  const streamsSWR = useStreams();\n\n  const streams = streamsSWR.data;\n  const { inputs = [] } = streams || {};\n\n  const activeInputs = inputs.filter((stream: RoketoStream) => \n    stream.status === STREAM_STATUS.Active\n  );\n\n  type TmpData = {\n    available: BigNumber;\n    tokenAccountId: string;\n  }\n\n  const tokensData = {} as {[tokenAccountId: string]: TmpData };\n  const tmpResult = [] as TmpData[];\n  const streamIds = [] as string[];\n\n  // eslint-disable-next-line no-restricted-syntax\n  for (const stream of activeInputs) {\n    const tokenAccountId = stream.token_account_id;\n    const available = getAvailableToWithdraw(stream);\n\n    if (available.toFixed() !== '0') {\n      streamIds.push(stream.id);\n    }\n\n    if (!tokensData[tokenAccountId]) {\n      const value = {\n        available,\n        tokenAccountId,\n      }\n\n      tmpResult.push(value);\n      tokensData[tokenAccountId] = value;\n    } else {\n      tokensData[tokenAccountId].available = tokensData[tokenAccountId].available.plus(available);\n    }\n  }\n\n  const preparedTokenData = tmpResult.map((value: TmpData) => {\n    const { formatter, meta: { symbol } } = tokens[value.tokenAccountId];\n    const amount = formatter.amount(value.available.toFixed());\n\n    return {\n      tokenAccountId: value.tokenAccountId,\n      amount,\n      symbol\n    }\n  });\n\n  const handleWithdraw = () => {\n    if (streamIds.length > 0) {\n      roketo.api.withdraw({ streamIds })\n    }\n  }\n\n  return (\n    <Tooltip\n      placement=\"bottom\"\n      align={{ offset: [0, 20] }}\n      overlay={(\n        <div className=\"text-left\">\n          <p className=\"mb-4 text-gray\">\n            Move all received tokens to your wallet.\n          </p>\n          <div className=\"text-left\">\n            {preparedTokenData.length !== 0 && preparedTokenData.map((data) => \n              <div\n                key={data.tokenAccountId}\n                className=\"inline-flex items-center p-2 rounded-lg bg-card2 w-full mb-2\"\n              >\n                <TokenImage tokenAccountId={data.tokenAccountId} className=\"mr-2\" />\n                {' '}\n                <div>\n                  <span className=\"font-semibold\">{data.amount}</span>\n                  {' '}\n                  <span className=\"text-gray\">{data.symbol}</span>\n                </div>\n              </div>\n            )}\n\n            {preparedTokenData.length === 0 &&\n              <p className=\"font-semibold text-center\">\n                You have nothing to withdraw\n              </p>\n            }\n          </div>\n        </div>\n      )}\n    >\n      <Button\n        type=\"button\"\n        loadingText=\"Updating account...\"\n        variant=\"main\"\n        size=\"normal\"\n        onClick={handleWithdraw}\n      >\n        {children}\n      </Button>\n    </Tooltip>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/RUSSIANS_HACK.83d68466.gif\";","export default __webpack_public_path__ + \"static/media/crab.3fbdb8f2.gif\";","import classNames from 'classnames';\nimport React from 'react';\nimport { Button } from 'shared/kit/Button';\nimport hackImage from 'shared/images/RUSSIANS_HACK.gif';\nimport crabImage from 'shared/images/crab.gif';\n\ntype PageErrorProps = {\n  message?: React.ReactNode;\n  onRetry: () => void;\n  className: string;\n};\n\nexport function PageError({\n  message,\n  onRetry,\n  className,\n}: PageErrorProps) {\n  const rand = React.useRef(Math.random());\n\n  return (\n    <div className={classNames('text-center', className)}>\n      {rand.current > 0.5 ? (\n        <img\n          src={hackImage}\n          className=\"mx-auto\"\n          alt=\"funny hackers gif with bird dancing around\"\n        />\n      ) : (\n        <img\n          src={crabImage}\n          className=\"mx-auto\"\n          alt=\"crab with a knife tries to hurt people\"\n        />\n      )}\n\n      <h1 className=\"text-4xl font-semibold mb-6 mt-10\">\n        Something is broken.\n      </h1>\n      <p className=\"text-gray mb-4\">Finally we have something to fix</p>\n      {message && (\n        <code className=\"p-4 border-special-inactive border block text-special-inactive text-xs mb-4\">\n          {message}\n        </code>\n      )}\n      <Button\n        variant=\"outlined\"\n        color=\"dark\"\n        className=\"mt-10\"\n        onClick={onRetry}\n        type=\"button\"\n      >\n        Try again\n      </Button>\n      <p className=\"text-xs text-gray mt-2\">(that probably wont help)</p>\n    </div>\n  );\n}\n","import React, { useEffect, useMemo, useState } from 'react';\n\nimport { StreamCard } from 'features/stream-view/StreamCard';\nimport { StreamFilters } from 'features/filtering/StreamFilters';\nimport { Button } from 'shared/kit/Button';\nimport { routes } from 'shared/helpers/routing';\nimport { useStreams } from 'features/roketo-resource';\nimport { WithdrawAllButton } from 'features/stream-control/WithdrawAllButton';\nimport { PageError } from 'shared/components/PageError';\nimport { useRoketoContext } from 'app/roketo-context';\nimport type { RoketoStream } from 'shared/api/roketo/interfaces/entities';\nimport { env } from 'shared/config';\n\nconst REVALIDATION_PERIOD = 30;\n\nexport function StreamsPage() {\n  const [filteredItems, setFiltered] = useState<RoketoStream[] | undefined>([]);\n  const streamsSWR = useStreams();\n  const {priceOracle} = useRoketoContext();\n  const [secondsTillRevalidation, setSecondsTillRevalidation] = useState(REVALIDATION_PERIOD);\n\n  const streams = streamsSWR.data;\n  const { error } = streamsSWR;\n  const { inputs, outputs } = streams || {};\n\n  const allStreams = useMemo<RoketoStream[] | undefined>(\n    () => ((inputs || outputs) && [...(inputs || []), ...(outputs || [])]),\n    [inputs, outputs]\n  );\n\n  useEffect(() => {\n    const id = setTimeout(() => {\n      if (secondsTillRevalidation <= 0) {\n        setSecondsTillRevalidation(REVALIDATION_PERIOD);\n        streamsSWR.mutate();\n      } else {\n        setSecondsTillRevalidation((secondsLeft) => secondsLeft - 1);\n      }\n    }, 1000);\n    return () => clearTimeout(id);\n  }, [streamsSWR, secondsTillRevalidation]);\n\n  const nearConversionRate = priceOracle.getPriceInUsd(env.WNEAR_ID, 1);\n\n  return (\n    <div className=\"container mx-auto p-12\">\n      <div className=\"flex mb-12\">\n        <h1 className=\"text-3xl \">All Streams</h1>\n        <div className=\"flex-grow\" />\n        <WithdrawAllButton>\n          Withdraw all\n        </WithdrawAllButton>\n      </div>\n\n      <div>Current currency conversion rate is:\n        <h2>{`1 Near is approximately equals to ${nearConversionRate}$`}</h2>\n      </div>\n      \n      <StreamFilters\n        items={allStreams}\n        onFilterDone={setFiltered}\n        className=\"mb-10 relative z-10\"\n      />\n\n      {error &&\n        <PageError\n          className=\"max-w-2xl mx-auto py-32\"\n          message={error.message}\n          onRetry={() => {\n            streamsSWR.mutate();\n          }}\n        />\n      }\n      \n      {!streams && !error &&\n        <div>Loading</div>\n      }\n\n      {streams && allStreams?.length === 0 &&\n        <div className=\"flex flex-col w-80 mx-auto\">\n          <h3 className=\"text-3xl text-center my-12 \">\n            You dont have any streams yet.\n          </h3>\n          <Button\n            variant=\"main\"\n            link\n            to={routes.send}\n          >\n            Create First Stream\n          </Button>\n        </div>\n      }\n      \n      {streams && filteredItems?.length === 0 && allStreams?.length !== 0 &&\n        <h3 className=\"text-3xl text-center my-12 w-80 mx-auto\">\n          No streams matching your filters.\n          {' '}\n          <br />\n          Try selecting different filters!\n        </h3>\n      }\n\n      {filteredItems?.map((stream: RoketoStream) => (\n        <StreamCard\n          key={stream.id}\n          stream={stream}\n          className=\"mb-4\"\n        />\n      ))}\n    </div>\n  );\n}\n","import React from 'react';\nimport classNames from 'classnames';\n\nimport { TokenImage } from 'shared/kit/TokenImage';\nimport { SECONDS_IN_MINUTE, SECONDS_IN_HOUR, SECONDS_IN_DAY } from 'shared/constants';\nimport { useToken } from 'shared/hooks/useToken';\n\nfunction multiplyAmountByTimePeriod(amount: number, period: string) {\n  switch (period) {\n    case 'min':\n      return amount * SECONDS_IN_MINUTE;\n    case 'hour':\n      return amount * SECONDS_IN_HOUR;\n    case 'day':\n      return amount * SECONDS_IN_DAY;\n    default:\n      return amount;\n  }\n}\n\ntype AccountStreamCardProps = {\n  tokenAccountId: string;\n  balance: string;\n  period: string;\n  showPeriod: boolean;\n  className: string;\n};\n\nexport function AccountStreamCard({\n  tokenAccountId,\n  balance,\n  period = '',\n  showPeriod = true,\n  className,\n}: AccountStreamCardProps) {\n  const { formatter, meta } = useToken(tokenAccountId);\n\n  const balanceValue = multiplyAmountByTimePeriod(Number(balance), period);\n\n  return (\n    <div\n      className={classNames(\n        'w-full rounded-lg bg-input flex items-center width-full p-6',\n        className,\n      )}\n    >\n      <div className=\"w-full lg:flex items-center\">\n        <div className=\"flex items-center\">\n          <div className=\"w-12 mr-4\">\n            <span className=\"flex-shrink-0 rounded-full bg-card2 inline-flex items-center justify-center w-12 h-12\">\n              <TokenImage tokenAccountId={tokenAccountId} />\n            </span>\n          </div>\n          <div className=\"\">\n            <div className=\"font-bold\">\n              {meta.symbol}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"ml-auto lg:mt-0 mt-4\">\n          <span className=\" text-3xl\">\n            {formatter.amount(balanceValue)}\n          </span>\n          {showPeriod ? <span>{period !== '' ? `/${period}` : ''}</span> : ''}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React, { useState } from 'react';\n\nimport {\n  DropdownMenu,\n  DropdownMenuItem,\n} from 'shared/kit/DropdownMenu';\nimport { RadioButton } from 'shared/kit/RadioButton';\nimport { DropdownOpener } from 'shared/kit/DropdownOpener';\nimport { useFilter } from 'features/filtering/lib';\nimport { RoketoAccount } from 'shared/api/roketo/interfaces/entities';\n\nimport { AccountStreamCard } from './AccountStreamCard';\n\nconst PERIODS = {\n  sec: '/sec',\n  min: '/min',\n  hour: '/hour',\n  day: '/day',\n};\n\ntype AccountColumnProps = {\n  account?: RoketoAccount;\n  header: string;\n  icon: React.ReactNode;\n  tokensField: 'total_incoming' | 'total_outgoing' | 'total_received';\n  showPeriod?: boolean;\n  className?: string;\n};\n\nexport function AccountColumn({\n  account,\n  header,\n  icon,\n  tokensField,\n  showPeriod = true,\n  className,\n}: AccountColumnProps) {\n  const tokensData = account !== undefined ? account[tokensField] : {};\n\n  const periodsOptions = useFilter({ options: PERIODS });\n  const [opened, setOpened] = useState(false);\n  const selectedPeriod = periodsOptions.option;\n\n  return (\n    <div className={className}>\n      <h2 className=\"text-xl mb-6 flex items-center\">\n        <span className=\"mr-3\">{icon}</span>\n        {header}\n        <span className=\"ml-2\">\n          {showPeriod ? (\n            <div className=\"inline-flex items-center relative\">\n              <DropdownOpener minimal rounded onChange={setOpened}>\n                {periodsOptions.options[selectedPeriod]}\n              </DropdownOpener>\n              <DropdownMenu\n                opened={opened}\n                className=\"right-0\"\n                onClose={() => setOpened(false)}\n              >\n                {periodsOptions.optionsArray.map((option) => (\n                  <DropdownMenuItem key={option}>\n                    <RadioButton\n                      label={option}\n                      active={selectedPeriod === option}\n                      value={option}\n                      onChange={periodsOptions.selectOption}\n                    />\n                  </DropdownMenuItem>\n                ))}\n              </DropdownMenu>\n            </div>\n          ) : (\n            ''\n          )}\n        </span>\n      </h2>\n      <div>\n        {Object.keys(tokensData)\n          .filter((tokenAccountId: string) => tokensData[tokenAccountId] !== \"0\")\n          .map((tokenAccountId: string) => (\n            <AccountStreamCard\n              key={tokenAccountId}\n              tokenAccountId={tokenAccountId}\n              balance={tokensData[tokenAccountId]}\n              period={selectedPeriod}\n              showPeriod={showPeriod}\n              className=\"mb-4\"\n            />\n          )\n        )}\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\n\nexport function StreamWithdrawIcon() {\n  return (\n    <svg\n      width=\"20\"\n      height=\"24\"\n      viewBox=\"0 0 20 24\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <path\n        d=\"M10.0818 9.73921L10.0818 21.718M10.0818 21.718L18.5945 13.2589M10.0818 21.718L1.5691 13.2589M10.0823 4.3827L10.0823 1.78194\"\n        stroke=\"#8DA6FF\"\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n      />\n    </svg>\n  );\n}\n","import React from 'react';\n\nimport { useRoketoContext } from 'app/roketo-context';\nimport { AccountColumn } from 'shared/components/AccountColumn';\nimport { StreamWithdrawIcon } from 'shared/icons/StreamWithdraw';\nimport { StreamOutIcon } from 'shared/icons/StreamOut';\nimport { StreamInIcon } from 'shared/icons/StreamIn';\n\nexport function AccountPage() {\n  const { roketo } = useRoketoContext();\n\n  return (\n    <div className=\"container mx-auto p-12\">\n      <div className=\"md:flex justify-between items-center mb-10\">\n        <h1 className=\"text-3xl\">My Account</h1>\n      </div>\n\n      <div className=\"grid grid-cols-3 gap-4\">\n        <AccountColumn\n          icon={<StreamInIcon />}\n          header=\"Receiving\"\n          account={roketo?.account}\n          tokensField=\"total_incoming\"\n          key=\"AccountInputs\"\n        />\n        <AccountColumn\n          icon={<StreamOutIcon />}\n          header=\"Sending\"\n          account={roketo?.account}\n          tokensField=\"total_outgoing\"\n          key=\"AccountOutputs\"\n        />\n        <AccountColumn\n          icon={<StreamWithdrawIcon />}\n          header=\"Withdrawn\"\n          account={roketo?.account}\n          tokensField=\"total_received\"\n          key=\"AccountWithdrawn\"\n          showPeriod={false}\n        />\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport { NearAuthButton } from 'features/near-auth/NearAuthButton';\n\nexport function AuthorizePage() {\n  return (\n    <div className=\"flex h-screen mx-3\">\n      <div\n        className=\"lg:m-auto mx-auto my-auto lg:w-2/5 bg-gray-90 rounded-3xl p-5\"\n        style={{ backgroundColor: '#0D0B26' }}\n      >\n        <div className=\"my-24 text-center\">\n          <h1 className=\"text-3xl mb-4 font-semibold\">\n            {' '}\n            Login via NEAR Network\n            {' '}\n          </h1>\n          <p className=\"text-gray\">\n            Click button below to login or create new account\n          </p>\n          <NearAuthButton\n            variant=\"main\"\n            className=\"mt-10 rounded-lg py-4 px-8\"\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\n\nexport function CopyIcon() {\n  return (\n    <svg\n      width=\"17\"\n      height=\"16\"\n      viewBox=\"0 0 17 16\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <path\n        d=\"M12.1884 4.70767H13.2423C14.6173 4.70767 15.7319 5.82227 15.7319 7.1972V12.6244C15.7319 13.9994 14.6173 15.114 13.2423 15.114H7.81509C6.44016 15.114 5.32556 13.9994 5.32556 12.6244V11.5705\"\n        stroke=\"currentColor\"\n        strokeWidth=\"1.65968\"\n      />\n      <rect\n        x=\"1.46289\"\n        y=\"1.3735\"\n        width=\"10.4063\"\n        height=\"10.4063\"\n        rx=\"2.48952\"\n        stroke=\"currentColor\"\n        strokeWidth=\"1.65968\"\n      />\n    </svg>\n  );\n}\n","import React from 'react';\nimport classNames from 'classnames';\nimport { format, formatDuration, intervalToDuration } from 'date-fns';\nimport numbro from 'numbro';\nimport copy from 'clipboard-copy';\nimport BigNumber from 'bignumber.js';\n\nimport { CopyIcon } from 'shared/icons/Copy';\nimport { fromNanosecToMilisec, shortEnLocale } from 'shared/helpers/date';\nimport { DurationTimer } from 'shared/components/DurationTimer';\nimport { isIdling, getEmptyStream } from 'shared/api/roketo/helpers';\nimport { RoketoStream } from 'shared/api/roketo/interfaces/entities';\nimport { useGetStreamDirection, STREAM_DIRECTION } from 'shared/hooks/useGetStreamDirection';\nimport { useToken } from 'shared/hooks/useToken';\nimport { streamViewData } from 'features/roketo-resource';\n\nimport { StreamingSpeed } from './StreamingSpeed';\n\ntype DataWrapperProps = {\n  label: string;\n  children: React.ReactNode;\n  className?: string;\n}\n\nfunction VerticalData({ label, children, className }: DataWrapperProps) {\n  return (\n    <div className={className}>\n      <div className=\"text-gray text-sm\">{label}</div>\n      <div className=\"font-semibold text-lg break-words select-all\">\n        {children}\n      </div>\n    </div>\n  );\n}\n\nfunction HorizontalData({ label, children, className }: DataWrapperProps) {\n  return (\n    <div className={classNames('flex justify-between my-3', className)}>\n      <div className=\"text-gray text-sm\">{label}</div>\n      <div className=\"text-sm text-right\">{children}</div>\n    </div>\n  );\n}\n\ntype StreamOverviewCardProps = {\n  stream?: RoketoStream;\n  className: string;\n};\n\nexport function StreamOverviewCard({\n  stream = getEmptyStream(),\n  className\n}: StreamOverviewCardProps) {\n  const {\n    dateEnd,\n    percentages,\n    timestampEnd,\n    progress: {\n      full, streamed, left, available,\n    },\n  } = streamViewData(stream);\n\n  const direction = useGetStreamDirection(stream);\n  const { meta, formatter, roketoMeta } = useToken(stream.token_account_id);\n  const commissionPercentage = new BigNumber(roketoMeta.commission_coef.val)\n    .shiftedBy(roketoMeta.commission_coef.pow)\n    .toNumber();\n\n  const duration = intervalToDuration({\n    start: new Date(),\n    end: dateEnd,\n  });\n  const timeLeft = formatDuration(duration, {\n    locale: shortEnLocale,\n  });\n\n  return (\n    <div className={classNames('pt-10 p-9 bg-input rounded-3xl', className)}>\n      <div className=\"flex text-center justify-between\">\n        {direction === STREAM_DIRECTION.IN ? (\n          <VerticalData label=\"Sender:\" className=\"w-1/2 mr-4\">\n            {stream.owner_id}\n          </VerticalData>\n        ) : (\n          <VerticalData label=\"Receiver:\" className=\"w-1/2 mr-4\">\n            {stream.receiver_id}\n          </VerticalData>\n        )}\n\n        <VerticalData label=\"Time Remaining:\" className=\"w-1/2\">\n          {isIdling(stream) ? (\n            timeLeft\n          ) : (\n            <DurationTimer\n              untilTimestamp={timestampEnd}\n              finishedText=\"Finished\"\n            />\n          )}\n        </VerticalData>\n      </div>\n      <div className=\"border-t border-border mt-8 mb-9\" />\n      <HorizontalData label=\"Stream Created:\">\n        {format(new Date(Number(stream.timestamp_created) / 1000000), 'Yo MMM do')}\n      </HorizontalData>\n      <HorizontalData label=\"Token:\">{meta.symbol}</HorizontalData>\n      <HorizontalData label=\"Total:\">\n        {formatter.amount(full)}\n        {' '}\n        {meta.symbol}\n      </HorizontalData>\n      <HorizontalData label=\"Tokens Transferred:\">\n        <span>\n          {formatter.amount(streamed)}\n          {' '}\n          {meta.symbol}\n          {' '}\n          <span className=\"text-gray\">\n            (\n            {numbro(percentages.streamed).format({\n              output: 'percent',\n              mantissa: 2,\n            })}\n            )\n          </span>\n        </span>\n      </HorizontalData>\n      <HorizontalData label=\"Tokens Left:\">\n        <span>\n          {formatter.amount(left)}\n          {' '}\n          {meta.symbol}\n          {' '}\n          <span className=\"text-gray\">\n            (\n            {numbro(percentages.left).format({\n              output: 'percent',\n              mantissa: 2,\n            })}\n            )\n          </span>\n        </span>\n      </HorizontalData>\n      <HorizontalData label=\"Tokens Available:\">\n        {formatter.amount(available)}\n        {' '}\n        {meta.symbol}\n      </HorizontalData>\n      <HorizontalData label=\"Stream update & withdrawal fee:\">\n        {formatter.amount(\n          Number(available) * (commissionPercentage || 0) / 100\n        )}\n        {' '}\n        {meta.symbol}\n        {' '}\n        <span className=\"text-gray\">\n          (\n          {numbro(\n            commissionPercentage || 0 / 100,\n          ).format({\n            output: 'percent',\n            mantissa: 2,\n          })}\n          )\n        </span>\n      </HorizontalData>\n      <HorizontalData label=\"Speed:\">\n        <StreamingSpeed stream={stream} />\n      </HorizontalData>\n\n      {direction === 'in' ? (\n        <HorizontalData label=\"Latest Withdrawal:\">\n          {format(new Date(fromNanosecToMilisec(stream.last_action)), 'MMM dd, Yo  H:m')}\n        </HorizontalData>\n      ) : (\n        ''\n      )}\n\n      <HorizontalData label=\"Stream ID:\">\n        <div className=\"inline-block w-24 overflow-ellipsis overflow-hidden\">\n          {stream.id}\n        </div>\n        <button\n          type=\"button\"\n          onClick={() => copy(stream.id)}\n          className=\"hover:text-blue\"\n        >\n          <CopyIcon />\n        </button>\n      </HorizontalData>\n    </div>\n  );\n}\n","import React from 'react';\n\nimport { Button } from 'shared/kit/Button';\nimport { useRoketoContext } from 'app/roketo-context';\nimport { getAvailableToWithdraw } from 'shared/api/roketo/helpers';\nimport { RoketoStream } from 'shared/api/roketo/interfaces/entities';\n\nexport function WithdrawButton({ stream }: { stream: RoketoStream}) {\n  const { tokens, roketo } = useRoketoContext();\n  const available = getAvailableToWithdraw(stream);\n  const tokenAccountId = stream.token_account_id;\n  const { formatter, meta: { symbol } } = tokens[tokenAccountId];\n  const amount = formatter.amount(available.toFixed());\n\n  const handleWithdraw = () => \n    roketo.api.withdraw({ streamIds: [ stream.id ] })\n\n  return (\n    <Button\n      disabled={amount === '0'}\n      type=\"button\"\n      loadingText=\"Withdrow...\"\n      variant=\"outlined\"\n      color=\"dark\"\n      onClick={handleWithdraw}\n    >\n      Withdraw {amount} {symbol}\n    </Button>\n  );\n}\n","import React from 'react';\nimport classNames from 'classnames';\n\nimport { ArcProgressBar } from 'shared/kit/ProgressBar';\nimport { Tooltip } from 'shared/kit/Tooltip';\nimport { useGetStreamDirection, STREAM_DIRECTION } from 'shared/hooks/useGetStreamDirection';\nimport type { RoketoStream } from 'shared/api/roketo/interfaces/entities';\nimport { useToken } from 'shared/hooks/useToken';\nimport { TokenImage } from 'shared/kit/TokenImage';\nimport { STREAM_STATUS } from 'shared/api/roketo/constants';\n\nimport { StreamControls } from 'features/stream-control/StreamControls';\nimport { WithdrawButton } from 'features/stream-control/WithdrawButton';\nimport { streamViewData } from 'features/roketo-resource';\n\nimport { StreamingSpeed } from './StreamingSpeed';\nimport { StreamProgressPercentage } from './StreamProgressPercentage';\n\nexport function StreamDashboard({ stream }: { stream: RoketoStream }) {\n  const { token_account_id: tokenAccountId } = stream;\n  const { formatter, meta } = useToken(tokenAccountId);\n  const direction = useGetStreamDirection(stream);\n\n  const {\n    progresses,\n    percentages,\n    isDead,\n    progress: { full, withdrawn, streamed },\n  } = streamViewData(stream);\n\n\n  return (\n    <div className={classNames('flex', 'flex-col', 'items-center')}>\n      <div className=\"-mb-32\">\n        <Tooltip\n          align={{ offset: [0, -20] }}\n          overlay={(\n            <div className=\"text-left\">\n              <StreamProgressPercentage\n                className=\"whitespace-nowrap mb-2\"\n                label=\"Withdrawn\"\n                colorClass=\"bg-streams-withdrawn\"\n                formattedFloatValue={`${formatter.amount(withdrawn)} ${meta.symbol}`}\n                percentageValue={percentages.withdrawn}\n              />\n              <StreamProgressPercentage\n                className=\"whitespace-nowrap\"\n                label=\"Streamed\"\n                colorClass=\"bg-streams-streamed\"\n                formattedFloatValue={`${formatter.amount(streamed)} ${meta.symbol}`}\n                percentageValue={percentages.streamed}\n              />\n            </div>\n          )}\n        >\n          <ArcProgressBar className=\"w-96 h-72\" progresses={progresses} />\n        </Tooltip>\n\n        <div className=\"flex justify-between pt-5 -mx-2 text-gray\">\n          <div className=\"w-10 text-center\"> 0%</div>\n          <div className=\"w-10 text-center\"> 100%</div>\n        </div>\n      </div>\n\n      <TokenImage size={14} tokenAccountId={tokenAccountId} className=\"mb-8\" />\n      <div className=\"text-6xl font-semibold\">{formatter.amount(streamed)}</div>\n      <div className=\"text-gray font-semibold\">\n        of\n        {' '}\n        {formatter.amount(full)}\n        {' '}\n        {meta.symbol}\n      </div>\n      <StreamingSpeed\n        stream={stream}\n        className=\"mt-6 mb-6\"\n      />\n\n      {!isDead &&\n        <div className=\"flex relative z-10\">\n          <StreamControls stream={stream} className=\"mr-2\" />\n\n          {/* render withdraw funds button */}\n          {direction === STREAM_DIRECTION.IN && stream.status === STREAM_STATUS.Active &&\n            <WithdrawButton stream={stream} />\n          }\n        </div>\n      }\n    </div>\n  );\n}\n","import React from 'react';\n\nexport function ArrowLeftIcon() {\n  return (\n    <svg\n      width=\"9\"\n      height=\"14\"\n      viewBox=\"0 0 9 14\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <path\n        d=\"M7.44798 12.8541L1.86072 7.26685L7.44798 1.67958\"\n        stroke=\"white\"\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n      />\n    </svg>\n  );\n}\n","import React, { useEffect, useState } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport copy from 'clipboard-copy';\nimport classNames from 'classnames';\n\nimport { StreamOverviewCard } from 'features/stream-view/StreamOverviewCard';\nimport { useSingleStream } from 'features/roketo-resource';\nimport { StreamDashboard } from 'features/stream-view/StreamDashboard';\nimport { LinkIcon } from 'shared/icons/Link';\nimport { ArrowLeftIcon } from 'shared/icons/ArrowLeft';\nimport { getStreamLink, routes } from 'shared/helpers/routing';\nimport { PageError } from 'shared/components/PageError';\n\nfunction BackButton({ to }: { to: string }) {\n  return (\n    <Link\n      to={to}\n      className={classNames('group flex items-center')}\n    >\n      <div className=\"flex items-center justify-center h-11 w-11 rounded-full border-border border group-hover:bg-border mr-4\">\n        <ArrowLeftIcon />\n      </div>\n      <span className=\"uppercase text-gray text-xs\"> Back </span>\n    </Link>\n  );\n}\n\nfunction StreamCopyUrlBlock({ className, link }: { className: string, link: string }) {\n  return (\n    <div className={className}>\n      <div className=\"mb-4 text-gray text-center\">\n        Public link to view the stream:\n      </div>\n      <div className=\"border border-border bg-input py-4 px-5 rounded-2xl flex items-center\">\n        <div className=\"break-all select-all\">{link}</div>\n        <div className=\"w-px bg-border mx-6 self-stretch flex-shrink-0\" />\n        <button\n          type=\"button\"\n          className=\"whitespace-nowrap text-blue py-2 px-3 font-semibold text-sm inline-flex bg-transparent hover:bg-hover active:bg-input rounded-lg transition\"\n          onClick={() => copy(link)}\n        >\n          <LinkIcon className=\"mr-2\" />\n          Copy Link\n        </button>\n      </div>\n    </div>\n  );\n}\n\nconst REVALIDATION_PERIOD = 10;\n\nexport function StreamPage() {\n  const params = useParams() as { id: string };\n  const streamSWR = useSingleStream(params.id);\n  const [secondsTillRevalidation, setSecondsTillRevalidation] = useState(REVALIDATION_PERIOD);\n\n  useEffect(() => {\n    const id = setTimeout(() => {\n      if (secondsTillRevalidation <= 0) {\n        setSecondsTillRevalidation(REVALIDATION_PERIOD);\n        streamSWR.mutate();\n      } else {\n        setSecondsTillRevalidation((secondsLeft) => secondsLeft - 1);\n      }\n    }, 1000);\n    return () => clearTimeout(id);\n  }, [streamSWR, secondsTillRevalidation]);\n\n  const maybeStream = streamSWR.data;\n  const pageError = streamSWR.error;\n\n  const link = getStreamLink(maybeStream?.id);\n\n  return (\n    <div className=\"container mx-auto p-12\">\n      <div className=\"mb-10\">\n        <BackButton to={routes.streams} />\n      </div>\n      {pageError &&\n        <PageError\n          className=\"max-w-2xl mx-auto py-32\"\n          message={pageError.message}\n          onRetry={() => {\n            streamSWR.mutate();\n          }}\n        />\n      }\n      {!pageError && !maybeStream &&\n        <div className=\"py-32 text-center text-gray text-2xl\">Loading...</div>\n      }\n\n      {maybeStream &&\n        <div className=\"flex flex-col lg:flex-row justify-between\">\n        <div className=\"flex flex-col items-center flex-grow\">\n          <StreamDashboard stream={maybeStream} />\n          <StreamCopyUrlBlock link={link} className=\"max-w-xl w-full mt-28\" />\n        </div>\n        <StreamOverviewCard\n          className=\"mt-10 w-full lg:mt-0 lg:w-1/3 self-start\"\n          stream={maybeStream}\n        />\n        </div>\n      }\n    </div>\n  );\n}\n","import React, { useCallback, useRef, useState } from 'react';\nimport classNames from 'classnames';\n\nimport { useRoketoContext } from 'app/roketo-context';\nimport { Input } from 'shared/kit/Input';\nimport { Button } from 'shared/kit/Button';\nimport { usersApiClient, useUser } from 'shared/api/roketo-web';\n\nimport styles from './index.module.scss';\n\nconst NAME_INPUT = \"nameInput\";\nconst EMAIL_INPUT = \"emailInput\";\n\nexport function ProfilePage() {\n  const { auth } = useRoketoContext();\n\n  const [isMutating, setIsMutating] = useState(false);\n\n  const userSWR = useUser();\n\n  const { name = '', email = '' } = userSWR.data ?? {};\n\n  const formRef = useRef<HTMLFormElement | null>(null);\n\n  const updateUser = useCallback(async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!userSWR.data) {\n      return;\n    }\n\n    setIsMutating(true);\n\n    const newName = formRef.current?.[NAME_INPUT].value;\n    const newEmail = formRef.current?.[EMAIL_INPUT].value;\n\n    await userSWR.mutate(\n      async () => usersApiClient.upsert(auth.accountId, {\n        name: newName,\n        email: newEmail,\n      }),\n      { revalidate: false, optimisticData: { ...userSWR.data, name: newName } }\n    );\n\n    setIsMutating(false);\n  }, [auth.accountId, userSWR]);\n\n  const busy = userSWR.isValidating || isMutating;\n\n  return (\n    <div className=\"container mx-auto p-12\">\n      <div className=\"md:flex justify-between items-center mb-10\">\n        <h1 className=\"text-3xl\">Profile</h1>\n      </div>\n\n      <form className={classNames('inline-flex mb-10', busy && styles.profileFormBusy)} onSubmit={updateUser} ref={formRef}>\n        <div className=\"mr-10\">\n          Name:\n          <Input>\n            <input\n              key={name}\n              placeholder=\"Name\"\n              name={NAME_INPUT}\n              defaultValue={name}\n              disabled={busy}\n            />\n          </Input>\n        </div>\n        <div className=\"mr-10\">\n          Email:\n          <Input>\n            <input\n              key={email}\n              placeholder=\"Email\"\n              name={EMAIL_INPUT}\n              defaultValue={email}\n              disabled={busy}\n            />\n          </Input>\n        </div>\n        <Button\n          type=\"submit\"\n          disabled={busy}\n          variant=\"main\"\n          size=\"normal\"\n          className=\"rounded-lg h-14 self-end mb-0.5\"\n        >\n          Save\n        </Button>\n      </form>\n    </div>\n  );\n}\n","import { useEffect } from 'react';\nimport {\n  HashRouter as Router,\n  Route,\n  Switch,\n  Redirect,\n} from 'react-router-dom';\n\nimport { Header } from 'shared/components/Header';\nimport { PrivateRoute } from 'shared/components/PrivateRoute';\nimport { useRoketoContext } from 'app/roketo-context';\n\nimport { env } from 'shared/config';\nimport { routes } from 'shared/helpers/routing';\nimport { SendPage } from './send';\nimport { StreamsPage } from './streams';\nimport { AccountPage } from './account';\nimport { AuthorizePage } from './authorize';\nimport { StreamPage } from './stream';\nimport { ProfilePage } from './profile';\n\nexport function Routing() {\n  useEffect(() => {\n    // Remove unused search params\n    const url = new URL(window.location.href);\n    const TRANSACTION_HASHES = 'transactionHashes';\n\n    if (url.searchParams.has(TRANSACTION_HASHES)) {\n      url.searchParams.delete(TRANSACTION_HASHES);\n      window.history.replaceState(null, '', url);\n    }\n  });\n\n  const { auth } = useRoketoContext();\n\n  return (\n    <Router basename={env.PUBLIC_URL}>\n      <Header />\n\n      <Switch>\n        <PrivateRoute\n          exact\n          redirect={<Redirect to={routes.send} />}\n          allowed={!auth.signedIn}\n          path={routes.authorize}\n        >\n          <AuthorizePage />\n        </PrivateRoute>\n        \n        <PrivateRoute\n          exact\n          redirect={<Redirect to={routes.authorize} />}\n          allowed={auth.signedIn}\n          path={routes.send}\n        >\n          <SendPage />\n        </PrivateRoute>\n\n        <PrivateRoute\n          exact\n          redirect={<Redirect to={routes.authorize} />}\n          allowed={auth.signedIn}\n          path={routes.account}\n        >\n          <AccountPage />\n        </PrivateRoute>\n\n        <Route exact path={routes.stream}>\n          <StreamPage />\n        </Route>\n\n        <PrivateRoute\n          exact\n          redirect={<Redirect to={routes.authorize} />}\n          allowed={auth.signedIn}\n          path={routes.streams}\n        >\n          <StreamsPage />\n        </PrivateRoute>\n        <PrivateRoute\n          exact\n          redirect={<Redirect to={routes.authorize} />}\n          allowed={auth.signedIn}\n          path={routes.profile}\n        >\n          <ProfilePage />\n        </PrivateRoute>\n      </Switch>\n    </Router>\n  );\n}","import React from 'react';\nimport 'error-polyfill';\n\nimport { Routing } from 'pages';\n\nimport { RoketoContextProvider } from './roketo-context';\nimport './index.scss';\n\nfunction App() {\n  return (\n    <RoketoContextProvider>\n      <Routing />\n    </RoketoContextProvider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Modal from 'react-modal';\nimport App from './app';\n\nconst rootEl = document.getElementById('root')!;\n\nModal.setAppElement(rootEl);\nReactDOM.render(<App />, rootEl);\n"],"sourceRoot":""}