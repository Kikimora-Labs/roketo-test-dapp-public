{"version":3,"sources":["lib/environment.js","features/near-connect/config.js","features/near-connect/near-contract-api.js","features/near-connect/RoketoApi.js","features/croncat/index.js","features/ft-tokens/TokenMeta.ts","features/ft-tokens/index.js","features/near-connect/useNear.js","lib/formatting.js","components/kit/FormField/FormField.tsx","components/kit/Input/Input.tsx","components/kit/Button/Button.tsx","components/icons/Tokens.jsx","components/kit/TokenImage/TokenImage.tsx","lib/useOutsideClick.js","components/kit/DropdownMenu/DropdownMenu.tsx","components/icons/DropdownArrowDown.jsx","components/kit/DropdownOpener/DropdownOpener.tsx","components/kit/RadioButton/RadioButton.tsx","components/kit/Tooltip/Tooltip.tsx","lib/useTokenFormatter.js","features/create-stream/StreamSpeedCalcField.jsx","lib/usePrev.js","features/create-stream/CreateStreamForm.jsx","pages/Send.jsx","components/icons/Account.jsx","components/icons/Streams.jsx","components/icons/Send.jsx","components/kit/NavLink/NavLink.tsx","features/near-auth/NearAuthButton.jsx","features/near-auth/useNearAuth.js","lib/routing.js","images/logo_stream_with_text.svg","lib/useBool.js","components/Header.jsx","components/icons/StreamOut.jsx","components/icons/StreamIn.jsx","features/stream-view/StreamingSpeed.jsx","components/kit/ProgressBar/ProgressBar.tsx","features/stream-control/useStreamControl.js","features/stream-control/lib.js","features/stream-control/StreamStatus.jsx","components/icons/Pause.jsx","components/icons/Start.jsx","components/icons/Stop.jsx","features/stream-control/StreamControls.jsx","features/stream-control/StreamAutodepositStatus.jsx","components/icons/Plus.jsx","components/icons/PlusGradient.jsx","features/stream-view/lib.js","features/stream-control/StreamDepositButton.jsx","features/stream-control/StreamAutodepositControls.jsx","lib/date.js","components/DurationTimer.jsx","features/stream-view/streamViewData.js","components/icons/Link.jsx","components/kit/Bullet/Bullet.tsx","features/stream-view/StreamProgressPercentage.jsx","features/stream-view/StreamCard.jsx","components/icons/Copy.jsx","features/stream-view/StreamOverviewCard.jsx","features/xyiming-resources/lib.js","features/xyiming-resources/xyiming-resources.js","features/stream-control/StreamWithdrawButton.jsx","features/stream-view/StreamDashboard.jsx","features/stream-view/StreamActionHistory.jsx","features/filtering/lib.js","features/filtering/streams/useStreamFilters.js","components/kit/Filter/Filter.tsx","features/filtering/streams/StreamFilters.jsx","images/RUSSIANS_HACK.gif","images/crab.gif","components/PageError.jsx","pages/MyStreams.jsx","components/AccountStreamCard.jsx","components/AccountColumn.tsx","components/icons/History.jsx","components/icons/StreamWithdraw.jsx","components/icons/Cron.jsx","features/croncat/CroncatButton.jsx","pages/Account.tsx","pages/Authorize.tsx","components/icons/ArrowLeft.jsx","pages/StreamPage.jsx","App.jsx","index.tsx"],"names":["env","ACCOUNT_SUFFIX","process","NEAR_NETWORK_ID","NEAR_NODE_URL","CONTRACT_NAME","WALLET_URL","NEAR_CONFIG","accountSuffix","NEAR_ACCOUNT_SUFFIX","networkId","nodeUrl","contractName","walletUrl","GAS_SIZE","GAS_SIZE_CRON","STORAGE_DEPOSIT","NearContractApi","contract","ft","walletConnection","account","operationalCommission","tokens","getAccount","accountId","a","fallback","account_id","dynamic_inputs","dynamic_outputs","static_streams","last_action","ready_to_withdraw","total_incoming","total_outgoing","total_received","is_external_update_enabled","cron_task","get_account","currentAccount","console","debug","tokensWithoutStorage","update_account","BigNumber","multipliedBy","plus","toFixed","res","streamId","autoDeposit","change_auto_deposit","stream_id","auto_deposit","token","deposit","tokenContract","ft_transfer_call","receiver_id","contractId","amount","memo","msg","JSON","stringify","Deposit","pause_stream","start_stream","stop_stream","receiverId","speed","description","autoDepositEnabled","isAutoStartEnabled","callbackUrl","createCommission","commission_on_create","create_stream","args","owner_id","getAccountId","token_name","tokens_per_tick","is_auto_deposit_enabled","is_auto_start_enabled","gas","Create","balance","get_stream","from","to","get_stream_history","start_cron","get_status","getStatus","getCurrentAccount","updateAccount","createStream","depositStream","pauseStream","startStream","stopStream","getStream","getStreamHistory","changeAutoDeposit","startCron","RoketoApi","this","inited","_walletConnection","_account","_contract","status","dao_id","num_tokens_listed","operational_commission","name","ticker","is_active","commission_percentage","total_commission","api","nearAPI","NearConfig","viewMethods","changeMethods","log","forEach","address","tokensMap","find","t","meta","tokenMeta","some","bridge","endsWith","map","LOW_DEPOSIT","Error","Croncat","near","wallet","_accountId","_near","_targetContractId","_operationalCommission","nearApi","hash","get_task","task_hash","cadence","dep","Date","getTime","create_task","contract_id","function_id","recurring","Number","arguments","update_task","get_all_tasks","res1","myTasks","filter","TokenMeta","metadata","spec","symbol","icon","reference","reference_hash","decimals","NEAR_META","Tokens","__tokens","__account","__contracts","FTContract","Object","keys","Promise","all","ft_metadata","getAccountBalance","total","ft_balance_of","storage_balance_of","NEAR_OBJECT_TYPE","keyStore","NearContext","React","createContext","roketo","croncat","auth","signedIn","signedAccountId","contractApi","refreshAllowance","login","logout","createNearInstance","BrowserLocalStorageKeyStore","deps","Near","ERR_NOT_IN_NEAR_CONTEXT","useNear","useContext","TokenFormatter","tokenDecimals","TICK_TO_MS","TICK_TO_S","TICK_TO_MINUTE","TICK_TO_HOUR","TICK_TO_DAY","TICK_TO_WEEK","TICK_TO_MONTH","TICK_TO_YEAR","MP","bigValueFormatter","Intl","NumberFormat","minimumIntegerDigits","maximumFractionDigits","minimumFractionDigits","smallValueFormatter","minimumSignificantDigits","maximumSignificantDigits","formatSmartly","value","format","numbro","mantissa","trimMantissa","optionalMantissa","average","tokenPerSecondToInt","tps","multiply","divide","toInt","floatValue","tokensPerMS","tokensPerTick","tokensPerS","tokensPerMeaningfulPeriod","multipliers","unit","firstGoodLookingMultiplier","multiplier","formattedValue","ticksToMs","ticks","Math","round","secondsToTicks","seconds","speedPerSecondToTick","speedPerSec","window","tf","FormField","children","label","error","className","rest","classNames","Input","borderColor","variants","Button","size","loading","disabled","loadingText","color","variant","restProps","variantStyles","sizeStyles","colorStyles","commonProps","content","link","type","NearTokenImage","props","version","xmlns","width","height","viewBox","preserveAspectRatio","transform","fill","stroke","d","FallbackTokenIamge","TokenIcon","tokenName","image","get","NEAR","src","alt","Component","TokenImage","DropdownMenu","opened","onClose","ref","useRef","callback","handleClick","e","current","contains","target","useEffect","document","addEventListener","removeEventListener","useOutsideClick","DropdownMenuItem","DropdownMenuDivider","DropdownArrowDown","strokeWidth","DropdownOpener","onChange","rounded","minimal","minimalClasses","onClick","RadioButton","active","checked","Tooltip","placement","html","overlay","dangerouslySetInnerHTML","__html","useTokenFormatter","StreamSpeedCalcField","formatter","useState","days","setDays","minutes","setMinutes","hours","setHours","durationInSeconds","SECONDS_IN_HOUR","SECONDS_IN_MINUTE","isNaN","Infinity","prevSpeed","usePrev","placeholder","CreateStreamForm","onSubmit","schema","Yup","shape","receiver","required","test","connection","provider","query","request_type","finality","moreThan","comment","max","CreateStreamFormSchema","dropdownOpened","setDropdownOpened","submitError","setError","tokensNames","tickers","formikOnSubmit","initialValues","autoStart","validationSchema","validateOnBlur","validateOnChange","validateOnMount","values","setFieldValue","setFieldTouched","handleSubmit","isSubmitting","field","id","option","length","maxLength","message","redirectUrl","generatePath","returnPath","location","origin","SendPage","createStreamClick","String","AccountIcon","strokeLinecap","StreamsIcon","cx","cy","r","SendIcon","NavLink","match","useRouteMatch","isActive","isExact","NearAuthButton","preventDefault","useNearAuth","role","routes","useBool","initial","on","setOn","off","toggle","turnOff","turnOn","MinifiedHeader","logo","LogoText","FullHeader","menuControl","navigation","Header","StreamOutIcon","StreamInIcon","StreamingSpeed","stream","direction","speedInfo","GRADIENT_STOP","GRADIENTS","ProgressBar","progresses","p","sort","b","progress","i","style","background","GradientSVG","endColor","startColor","progressValue","idCSS","rotation","gradientTransform","offset","stopColor","ArcProgressBar","circleRatio","styles","buildStyles","pathColor","minValue","maxValue","colors","trailColor","STREAM_CONTROL_ID_NOT_PROVIDED","useStreamControl","ensureMethodHasStreamId","setLoading","wrapped","fn","updateAllAndWithdraw","pause","restart","stop","enable","disable","STREAM_STATUS","INITIALIZED","ACTIVE","PAUSED","FINISHED","INTERRUPTED","STREAM_DIRECTION","STREAM_AUTODEPOSIT_STATUS","STREAM_ACTION_TYPE","StreamStatus","binding","colorClass","PauseIcon","StartIcon","StopIcon","x","y","rx","PauseConfirmModal","modalControl","onConfirm","isOpen","onRequestClose","overlayClassName","StreamControls","isOutgoing","isIncoming","isExternalStream","isDead","menuOpened","setMenuOpened","controls","StreamAutodepositStatus","disableMsg","enableMsg","PlusIcon","PlusGradientIcon","x1","y1","x2","y2","gradientUnits","streamDirection","isIdling","isFundable","available_to_withdraw","useDepositButton","setDeposit","isDisabled","modal","StreamDepositButton","depositButton","StreamDepositButtonOutlined","StreamAutodepositControls","menu","formatDistanceLocale","xYears","xMonths","xDays","xSeconds","xMinutes","xHours","shortEnLocale","formatDistance","count","replace","isValidDate","DurationTimer","untilTimestamp","suffix","finishedText","untilDate","dateValid","expired","setExpired","intervalToDuration","start","end","duration","setDuration","untilDateValue","setInterval","isExpired","newDurationValue","clearInterval","useDurationTimer","weeks","months","years","formatted","formatDuration","locale","streamViewData","tokenFormatter","secondsLeft","dateEnd","timestampEnd","full","tokens_total_withdrawn","withdrawn","streamed","available","left","percentages","LinkIcon","clipPath","strokeLinejoin","Bullet","StreamProgressPercentage","formattedFloatValue","percentageValue","output","streamType","timestamp_created","history_len","StreamCard","timeLeft","copy","CopyIcon","auto_deposit_enabled","history","actor","action_type","timestamp","VerticalData","HorizontalData","StreamOverviewCard","identifyStreamsDirection","streams","fetchStream","fetchStreamHistory","streamHistory","fetchedStreams","identified","inputs","s","outputs","useAccount","useSWR","errorRetryInterval","useStreams","accountSWR","data","swr","fetchStreams","TokenBalance","balanceInt","StreamWithdrawButton","streamControl","mutate","useSWRConfig","streamsSWR","balances","useMemo","balancesValue","tokensSWR","balancesWithoutNear","rawKeys","parse","ftStorageBalance","refreshInterval","notRegisteredTokens","tokensRequireManualDeposit","isBridged","isSafeToWithdraw","entries","useWithdrawReadyBalances","join","showNEP141Popup","align","bottom","StreamDashboard","top","ThCell","TdCell","ACTION_TYPE_COLOR","ActionType","actionType","StreamActionHistory","currentPage","onNextPageClick","onPrevPageClick","maxPage","pageSize","Array","_","entry","commission_on_withdraw","fromNanosec","useFilter","options","selectOption","currentFilterFunction","optionsArray","STREAM_TYPE_FILTER","STREAM_STATUS_FILTER","ALL","ARCHIVED","useStreamFilters","statusOptions","directionOptions","statusFilter","directionFilter","result","items","filters","filteredItems","setFilteredItems","filterCounts","setFilterCounts","filteredItemsValue","filterCountsValue","filterRunResult","filtered","currentFilterCount","push","useFilters","FilterOptionWithCounter","Filter","renderOption","renderActive","setOpened","compareBy","key","sorts","bigBalanceFirst","highSpeedFirst","highSpeedLast","mostRecent","statusPriority","defaultStreamSort","indexOf","StreamFilters","onFilterDone","sorting","setSorting","sortOptions","sorted","counts","PageError","onRetry","rand","random","hackImage","crabImage","INPUTS","OUTPUTS","MyStreamsPage","setFiltered","isIncomingStream","allStreams","concat","AccountStreamCard","streamsLength","period","showPeriod","balanceValue","utils","formatNearAmount","PERIODS","sec","min","hour","day","AccountColumn","header","tokensField","streamsType","streamGroups","undefined","reduce","groups","item","group","tokensData","periodsOptions","selectedPeriod","HistoryIcon","StreamWithdrawIcon","CronIcon","CRON_STATUS","CroncatButton","accountData","cronStatus","AccountPage","pageError","addSuffix","AuthorizePage","backgroundColor","ArrowLeftIcon","BackButton","StreamCopyUrlBlock","StreamPage","params","useParams","streamSWR","errorRetryCount","isCompleted","useSingleStream","PAGE_SIZE","page","setPage","ceil","canGoBack","onError","nextPage","prevPage","useSingleStreamHistory","streamHistorySWR","pageReady","renderStreamData","PrivateRoute","allowed","redirect","render","AppFn","apiRef","croncatRef","tokensRef","setInited","setNear","requestSignIn","signOut","alert","init","useCreateNear","Provider","basename","exact","path","Send","rootEl","getElementById","Modal","setAppElement","ReactDOM"],"mappings":"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","file":"static/js/main.78fcfbf7.chunk.js","sourcesContent":["export const env = {\n  ACCOUNT_SUFFIX: process.env.REACT_APP_NEAR_ACCOUNT_SUFFIX,\n  NEAR_NETWORK_ID: process.env.REACT_APP_NEAR_NETWORK_ID,\n  NEAR_NODE_URL: process.env.REACT_APP_NEAR_NODE_URL,\n  CONTRACT_NAME: process.env.REACT_APP_CONTRACT_NAME,\n  WALLET_URL: process.env.REACT_APP_WALLET_URL,\n};\n","import { env } from '../../lib/environment';\n\nexport const NEAR_CONFIG = {\n  accountSuffix: env.NEAR_ACCOUNT_SUFFIX,\n  networkId: env.NEAR_NETWORK_ID,\n  nodeUrl: env.NEAR_NODE_URL,\n  contractName: env.CONTRACT_NAME,\n  walletUrl: env.WALLET_URL,\n};\n","import BigNumber from 'bignumber.js';\n\nconst GAS_SIZE = '200000000000000';\nconst GAS_SIZE_CRON = '300000000000000';\nconst STORAGE_DEPOSIT = 1e22;\n\nexport function NearContractApi({\n  contract,\n  ft,\n  walletConnection,\n  account,\n  operationalCommission,\n  tokens,\n}) {\n  const getAccount = async (accountId) => {\n    const fallback = {\n      account_id: accountId,\n      dynamic_inputs: [],\n      dynamic_outputs: [],\n      static_streams: [],\n      last_action: null,\n      ready_to_withdraw: [],\n      total_incoming: [],\n      total_outgoing: [],\n      total_received: [],\n      is_external_update_enabled: false,\n      cron_task: null,\n    };\n\n    try {\n      const currentAccount = await contract.get_account({ account_id: accountId });\n      return currentAccount || fallback;\n    } catch (e) {\n      console.debug('near error', e);\n    }\n    return fallback;\n  };\n\n  const getCurrentAccount = () => getAccount(walletConnection.getAccountId());\n\n  async function updateAccount({ tokensWithoutStorage = 0 }) {\n    const res = await contract.update_account(\n      {\n        account_id: account.accountId,\n      },\n      GAS_SIZE,\n      new BigNumber(STORAGE_DEPOSIT)\n        .multipliedBy(tokensWithoutStorage)\n        .plus(operationalCommission)\n        .toFixed(),\n    );\n    return res;\n  }\n\n  async function changeAutoDeposit({ streamId, autoDeposit }) {\n    const res = await contract.change_auto_deposit(\n      { stream_id: streamId, auto_deposit: autoDeposit },\n      GAS_SIZE,\n      operationalCommission,\n    );\n\n    return res;\n  }\n\n  async function depositStream({ streamId, token, deposit }) {\n    if (token === 'NEAR') {\n      await contract.deposit({ stream_id: streamId }, GAS_SIZE, deposit);\n    } else {\n      const tokenContract = ft[token].contract;\n\n      await tokenContract.ft_transfer_call(\n        {\n          receiver_id: contract.contractId,\n          amount: deposit,\n          memo: 'xyiming transfer',\n          msg: JSON.stringify({\n            Deposit: streamId,\n          }),\n        },\n        GAS_SIZE,\n        1,\n      );\n    }\n  }\n\n  async function pauseStream({ streamId }) {\n    const res = await contract.pause_stream(\n      { stream_id: streamId },\n      GAS_SIZE,\n      operationalCommission,\n    );\n\n    return res;\n  }\n\n  async function startStream({ streamId }) {\n    const res = await contract.start_stream(\n      { stream_id: streamId },\n      GAS_SIZE,\n      operationalCommission,\n    );\n\n    return res;\n  }\n\n  async function stopStream({ streamId }) {\n    const res = await contract.stop_stream(\n      { stream_id: streamId },\n      GAS_SIZE,\n      operationalCommission,\n    );\n    return res;\n  }\n\n  async function createStream(\n    {\n      deposit,\n      receiverId,\n      token,\n      speed,\n      description,\n      autoDepositEnabled = false,\n      isAutoStartEnabled = true,\n    },\n    { callbackUrl } = {},\n  ) {\n    let res;\n    const createCommission = tokens[token].commission_on_create;\n\n    try {\n      if (token === 'NEAR') {\n        // contract.methodName({ args, gas?, amount?, callbackUrl?, meta? })\n        res = await contract.create_stream({\n          args: {\n            owner_id: walletConnection.getAccountId(),\n            receiver_id: receiverId,\n            token_name: token,\n            tokens_per_tick: speed,\n            description,\n            is_auto_deposit_enabled: autoDepositEnabled,\n            is_auto_start_enabled: isAutoStartEnabled,\n          },\n          gas: GAS_SIZE,\n          amount: new BigNumber(deposit).plus(createCommission).toFixed(),\n          callbackUrl,\n        });\n      } else {\n        const tokenContract = ft[token].contract;\n        res = await tokenContract.ft_transfer_call({\n          args: {\n            receiver_id: contract.contractId,\n            amount: new BigNumber(deposit).plus(createCommission).toFixed(),\n            memo: 'Roketo transfer',\n            msg: JSON.stringify({\n              Create: {\n                description,\n                owner_id: walletConnection.getAccountId(),\n                receiver_id: receiverId,\n                token_name: token,\n                tokens_per_tick: speed,\n                balance: deposit,\n                is_auto_deposit_enabled: autoDepositEnabled,\n                is_auto_start_enabled: isAutoStartEnabled,\n              },\n            }),\n          },\n          gas: GAS_SIZE,\n          amount: 1,\n          callbackUrl,\n        });\n      }\n      return res;\n    } catch (error) {\n      console.debug(error);\n      throw error;\n    }\n  }\n\n  async function getStream({ streamId }) {\n    const res = await contract.get_stream({\n      stream_id: streamId,\n    });\n\n    return res;\n  }\n\n  async function getStreamHistory({ streamId, from, to }) {\n    const res = await contract.get_stream_history({\n      stream_id: streamId,\n      from,\n      to,\n    });\n\n    return res;\n  }\n\n  async function startCron() {\n    const res = await contract.start_cron(\n      {},\n      GAS_SIZE_CRON,\n      operationalCommission,\n    );\n\n    return res;\n  }\n\n  /**\n   * fetches general info about contract: Supported FT tokens, commision %\n   */\n  async function getStatus() {\n    const res = await contract.get_status({});\n    return res;\n  }\n\n  return {\n    getStatus,\n    // account methods\n    getCurrentAccount,\n    updateAccount,\n    // stream methods\n    getAccount,\n    createStream,\n    depositStream,\n    pauseStream,\n    startStream,\n    stopStream,\n    getStream,\n    getStreamHistory,\n    changeAutoDeposit,\n    // cron methods\n    startCron,\n  };\n}\n","import * as nearAPI from 'near-api-js';\nimport { NearContractApi } from './near-contract-api';\nimport { NEAR_CONFIG as NearConfig } from './config';\n\nexport class RoketoApi {\n  constructor({ account, walletConnection }) {\n    this.inited = false;\n    this._walletConnection = walletConnection;\n    this._account = account;\n    this._contract = null;\n    this.ft = {};\n    this.status = {\n      dao_id: '',\n      num_tokens_listed: 0,\n      operational_commission: '0',\n      tokens: [\n        {\n          name: '',\n          ticker: '',\n          account_id: '',\n          is_active: false,\n          commission_on_create: '0',\n          commission_percentage: 0,\n          total_commission: '0',\n        },\n      ],\n    };\n\n    this.api = null;\n  }\n\n  async init() {\n    if (this.inited) return;\n\n    // create Roketo Contract\n    this._contract = new nearAPI.Contract(\n      this._account,\n      NearConfig.contractName,\n      {\n        viewMethods: [\n          'get_account',\n          'get_stream',\n          'get_stream_history',\n          'get_status',\n        ],\n        changeMethods: [\n          'create_stream',\n          'deposit',\n          'update_account',\n          'start_stream',\n          'pause_stream',\n          'stop_stream',\n          'change_auto_deposit',\n          'start_cron',\n        ],\n      },\n    );\n\n    // fetch metadata for tokens & commissions\n    this.status = await this._contract.get_status({});\n    console.log(this.status);\n    const { tokens } = this.status;\n\n    // create contracts for every token\n    this.ft = {};\n\n    console.debug('Generating FT contracts for', tokens);\n    tokens.forEach((token) => {\n      // {\n      //   name: 'NEAR token',\n      //   ticker: 'NEAR',\n      //   account_id: '',\n      //   is_active: true,\n      //   commission_on_create: '10000000000000000000000',\n      //   commission_percentage: 0.1,\n      //   total_commission: '0',\n      // },\n\n      this.ft[token.ticker] = {\n        name: token.ticker,\n        address: token.account_id,\n        contract: new nearAPI.Contract(this._account, token.account_id, {\n          viewMethods: ['ft_balance_of'],\n          changeMethods: ['ft_transfer', 'ft_transfer_call'],\n        }),\n      };\n    });\n\n    // create high level api for outside usage\n    this.api = NearContractApi({\n      contract: this._contract,\n      ft: this.ft,\n      walletConnection: this._walletConnection,\n      account: this._account,\n      operationalCommission: this.status.operational_commission,\n      tokens: this.tokensMap,\n    });\n    this.inited = true;\n  }\n\n  tokenMeta(ticker) {\n    return this.status.tokens.find((t) => t.ticker === ticker);\n  }\n\n  isBridged(ticker) {\n    const meta = this.tokenMeta(ticker);\n    const bridges = ['factory.bridge.near'];\n\n    if (bridges.some((bridge) => meta.account_id.endsWith(bridge))) {\n      return true;\n    }\n\n    return false;\n  }\n\n  get tokensMap() {\n    const map = {};\n    this.status.tokens.forEach((token) => {\n      map[token.ticker] = token;\n    });\n    return map;\n  }\n}\n","import * as nearApi from 'near-api-js';\nimport BigNumber from 'bignumber.js';\n\nconst GAS_SIZE = '250000000000000';\n\nexport const LOW_DEPOSIT = new Error('Deposit it too small.');\n\nexport function cadenceString({\n  minute, hour, monthDay, month, weekDay,\n}) {\n  const part = (value) => value || '*';\n  return `${part(minute)} ${part(hour)} ${part(monthDay)} ${part(\n    monthDay,\n  )} ${part(month)} ${part(weekDay)}`;\n}\n\nexport class Croncat {\n  constructor({\n    near, wallet, operationalCommission, contractId,\n  }) {\n    if (!wallet || !operationalCommission || !contractId) return;\n\n    this._accountId = wallet.getAccountId();\n    this._near = near;\n    this._targetContractId = contractId;\n    this._operationalCommission = operationalCommission;\n    this._contract = new nearApi.Contract(wallet.account(), 'cron.in.testnet', {\n      viewMethods: [\n        'get_task',\n        'get_all_tasks',\n        'get_tasks',\n        'get_total_tasks_per_agent_per_slot',\n      ],\n      changeMethods: ['create_task', 'update_task'],\n    });\n  }\n\n  async getTask(hash) {\n    const res = await this._contract.get_task({ task_hash: hash });\n\n    return res;\n  }\n\n  /**\n   * `contract_id` AccountId Account to direct all execution calls against\n   * `function_id` String Contract method this task will be executing\n   * `cadence` String Crontab Spec String. Defines the interval spacing of execution\n   * `recurring` Boolean Defines if this task can continue until balance runs out\n   * `deposit` u128 Configuration of NEAR balance to send to each function call.\n   *    This is the \"amount\" for a function call.\n   * `gas` u64 Configuration of NEAR balance to attach to each function call.\n   *    This is the \"gas\" for a function call.\n   * `arguments` Vec NOTE: Only allow static pre-defined bytes,\n   *    most useful for cross-contract task creation\n   * @param {*} param0\n   */\n  async createTask({ cadence, amount }) {\n    if (amount < this._operationalCommission) {\n      throw LOW_DEPOSIT;\n    }\n\n    const dep = new BigNumber(this._operationalCommission)\n      .plus(new Date().getTime())\n      .toFixed();\n\n    const deposit = dep;\n\n    console.debug('Create Task', {\n      cadence,\n      amount,\n      deposit,\n    });\n\n    await this._contract.create_task(\n      {\n        contract_id: this._targetContractId,\n        function_id: 'update_account',\n        cadence,\n        recurring: true,\n        deposit,\n        gas: Number(GAS_SIZE),\n        arguments: [],\n      },\n      GAS_SIZE,\n      amount,\n    );\n  }\n\n  async updateTask({ hash, cadence, amount }) {\n    if (amount < this._operationalCommission) {\n      throw LOW_DEPOSIT;\n    }\n\n    await this._contract.update_task(\n      {\n        task_hash: hash,\n        contract_id: this._targetContractId,\n        function_id: 'update_account',\n        cadence,\n        recurring: true,\n        deposit: this._operationalCommission + new Date().getTime(),\n        gas: GAS_SIZE,\n        arguments: [],\n      },\n      GAS_SIZE,\n      amount,\n    );\n  }\n\n  async getAllTasks() {\n    const res1 = await this._contract.get_all_tasks();\n    const myTasks = res1.filter((t) => t.owner_id === this._accountId);\n\n    return myTasks;\n  }\n}\n","export class TokenMeta {\n  ticker = '';\n\n  metadata = {\n    spec: 'ft-1.0.0',\n    name: '',\n    symbol: '',\n    icon: '',\n    reference: null,\n    reference_hash: null,\n    decimals: 18,\n  };\n\n  constructor({ ticker, metadata }: { ticker: any, metadata: any }) {\n    this.ticker = ticker;\n    this.metadata = metadata;\n  }\n}\n","import * as nearAPI from 'near-api-js';\n\nimport { TokenMeta } from './TokenMeta';\n\nfunction FTContract(account, address) {\n  return new nearAPI.Contract(account, address, {\n    viewMethods: ['ft_balance_of', 'ft_metadata', 'storage_balance_of'],\n    changeMethods: ['ft_transfer', 'ft_transfer_call'],\n  });\n}\n\nconst NEAR_META = new TokenMeta({\n  ticker: 'NEAR',\n  metadata: {\n    spec: null,\n    name: 'Near Protocol',\n    symbol: 'NEAR',\n    icon: '',\n    reference: null,\n    reference_hash: null,\n    decimals: 24,\n  },\n});\n\nexport class Tokens {\n  constructor({ tokens, account }) {\n    this.__tokens = tokens;\n    this.__account = account;\n    this.__contracts = {};\n    this.tokens = {};\n\n    if (!tokens || !account) return;\n\n    tokens.forEach((token) => {\n      this.__contracts[token.ticker] = FTContract(account, token.account_id);\n    });\n  }\n\n  get tickers() {\n    return Object.keys(this.tokens);\n  }\n\n  contract(ticker) {\n    return this.__contracts[ticker];\n  }\n\n  get(ticker) {\n    const token = this.tokens[ticker]\n      || new TokenMeta({\n        ticker,\n        metadata: {\n          spec: null,\n          name: ticker,\n          symbol: ticker,\n          icon: '',\n          reference: null,\n          reference_hash: null,\n          decimals: 24,\n        },\n      });\n\n    return token;\n  }\n\n  async init() {\n    await Promise.all(\n      this.__tokens.map(async (token) => {\n        let meta;\n        if (token.ticker === 'NEAR') {\n          meta = NEAR_META;\n        } else if (!token.account_id) {\n          meta = new TokenMeta({\n            ticker: token.ticker,\n            metadata: {\n              spec: null,\n              name: token.ticker,\n              symbol: token.ticker,\n              icon: '',\n              reference: null,\n              reference_hash: null,\n              decimals: 24,\n            },\n          });\n        } else {\n          // construct Near FT contract for address\n\n          const contract = this.contract(token.ticker);\n          const metadata = await contract.ft_metadata();\n\n          if (metadata.decimals < 8) {\n            // we cant support anything with decimals less than 8\n            return;\n          }\n\n          meta = new TokenMeta({\n            ticker: token.ticker,\n            metadata,\n          });\n        }\n\n        this.tokens[token.ticker] = meta;\n      }),\n    );\n  }\n\n  async balance(ticker) {\n    if (ticker === 'NEAR') {\n      const balance = await this.__account.getAccountBalance();\n      return balance.total;\n    }\n    const contract = this.contract(ticker);\n    const res = await contract.ft_balance_of({\n      account_id: this.__account.accountId,\n    });\n\n    return res;\n  }\n\n  // Only ft tokens are allowed\n  // DO NOT PROVIDE NEAR HERE\n  async ftStorageBalance(ticker) {\n    const contract = this.contract(ticker);\n    const res = await contract.storage_balance_of({\n      account_id: this.__account.accountId,\n    });\n\n    return res;\n  }\n}\n","import React, { useContext, useEffect, useState } from 'react';\nimport * as nearAPI from 'near-api-js';\nimport { NEAR_CONFIG as NearConfig } from './config';\nimport { RoketoApi } from './RoketoApi';\nimport { NearContractApi } from './near-contract-api';\nimport { Croncat } from '../croncat';\nimport { Tokens } from '../ft-tokens';\n\nconst NEAR_OBJECT_TYPE = {\n  keyStore: null,\n  near: null,\n  walletConnection: null,\n  accountId: null,\n  account: null,\n};\n\nexport const NearContext = React.createContext({\n  inited: false,\n  near: NEAR_OBJECT_TYPE,\n  roketo: new RoketoApi({}),\n  croncat: new Croncat({}),\n  tokens: new Tokens({}),\n\n  auth: {\n    signedIn: false,\n    signedAccountId: null,\n  },\n  contractApi: NearContractApi({}),\n  refreshAllowance: () => {},\n  login: () => {},\n  logout: () => {},\n});\n\nasync function createNearInstance() {\n  const keyStore = new nearAPI.keyStores.BrowserLocalStorageKeyStore();\n  const near = await nearAPI.connect(\n    { deps: { keyStore }, ...NearConfig },\n  );\n  const Near = NEAR_OBJECT_TYPE;\n\n  Near.keyStore = keyStore;\n  Near.near = near;\n\n  Near.walletConnection = new nearAPI.WalletConnection(\n    near,\n    NearConfig.contractName,\n  );\n  Near.accountId = Near.walletConnection.getAccountId();\n  Near.account = Near.walletConnection.account();\n\n  return Near;\n}\n\nexport function useCreateNear() {\n  const apiRef = React.useRef(null);\n  const croncatRef = React.useRef(null);\n  const tokensRef = React.useRef(null);\n\n  const [inited, setInited] = useState(false);\n  const [near, setNear] = useState(NEAR_OBJECT_TYPE);\n\n  const auth = {\n    signedIn: !!near.accountId,\n    signedAccountId: near.accountId,\n  };\n\n  async function login() {\n    const appTitle = 'Roketo Token Streaming Service';\n\n    await near.walletConnection.requestSignIn(\n      NearConfig.contractName,\n      appTitle,\n    );\n  }\n\n  function logout() {\n    near.walletConnection.signOut();\n\n    setNear({\n      ...near,\n      accountId: null,\n    });\n  }\n\n  async function refreshAllowance() {\n    alert(\n      \"You're out of access key allowance. Need sign in again to refresh it\",\n    );\n    await logout();\n    // await requestSignIn();\n  }\n\n  useEffect(() => {\n    const init = async () => {\n      const Near = await createNearInstance();\n\n      console.debug('Create Near');\n      const roketo = new RoketoApi({\n        account: Near.account,\n        walletConnection: Near.walletConnection,\n      });\n\n      console.debug('Create Roketo');\n      await roketo.init();\n\n      const croncat = new Croncat({\n        wallet: Near.walletConnection,\n        operationalCommission: roketo.status.operational_commission,\n        contractId: roketo._contract.contractId,\n        near: Near.near,\n      });\n      console.debug('Create Croncat');\n\n      const tokens = new Tokens({\n        tokens: roketo.status.tokens,\n        account: Near.walletConnection.account(),\n      });\n\n      await tokens.init();\n      console.debug('Create ft-tokens');\n      apiRef.current = roketo;\n      croncatRef.current = croncat;\n      tokensRef.current = tokens;\n\n      setNear(Near);\n      setInited(true);\n    };\n\n    init();\n  }, []);\n\n  return {\n    auth,\n    near,\n    roketo: apiRef.current,\n    contractApi: apiRef.current ? apiRef.current.api : null,\n    croncat: croncatRef.current,\n    tokens: tokensRef.current,\n    inited,\n    login,\n    logout,\n    refreshAllowance,\n  };\n}\n\nconst ERR_NOT_IN_NEAR_CONTEXT = new Error('Near context is not found');\n\nexport function useNear() {\n  const near = useContext(NearContext);\n  const insideContext = !!near;\n\n  if (!insideContext) {\n    throw ERR_NOT_IN_NEAR_CONTEXT;\n  }\n\n  return near;\n}\n","import numbro from 'numbro';\n\nexport const tokens = {\n  NEAR: {\n    name: 'Near',\n    decimals: 24,\n    address: null,\n    is_mainnet: true,\n    is_testnet: true,\n  },\n  fallback: {\n    name: null,\n    decimals: 18,\n    address: null,\n    is_mainnet: false,\n    is_testnet: false,\n  },\n};\n\nexport function TokenFormatter(tokenDecimals) {\n  const TICK_TO_MS = 10 ** 6;\n  const TICK_TO_S = 10 ** 9;\n  const TICK_TO_MINUTE = TICK_TO_S * 60;\n  const TICK_TO_HOUR = TICK_TO_MINUTE * 60;\n  const TICK_TO_DAY = TICK_TO_HOUR * 24;\n  const TICK_TO_WEEK = TICK_TO_DAY * 7;\n  const TICK_TO_MONTH = TICK_TO_WEEK * 4;\n  const TICK_TO_YEAR = TICK_TO_MONTH * 12;\n\n  const MP = 10 ** tokenDecimals;\n\n  const bigValueFormatter = Intl.NumberFormat('en-US', {\n    minimumIntegerDigits: 1,\n    maximumFractionDigits: 2,\n    minimumFractionDigits: 2,\n  });\n  const smallValueFormatter = Intl.NumberFormat('en-US', {\n    minimumSignificantDigits: 2,\n    maximumSignificantDigits: 4,\n    maximumFractionDigits: tokenDecimals,\n  });\n\n  const formatSmartly = (value) => {\n    if (value < 1) {\n      return smallValueFormatter.format(value);\n    } if (value < 1000000) {\n      return bigValueFormatter.format(value);\n    }\n    return numbro(value).format({\n      mantissa: 3,\n      trimMantissa: true,\n      optionalMantissa: true,\n      average: true,\n    });\n  };\n\n  return {\n    tokenPerSecondToInt: (tps) => numbro(tps).multiply(MP).divide(TICK_TO_S).format({\n      mantissa: 0,\n    }),\n    toInt: (floatValue) => numbro(floatValue).multiply(MP).format({ mantissa: 0 }),\n    amount: (amount) => {\n      const value = numbro(amount).divide(MP).value();\n      const formatted = formatSmartly(value);\n      return formatted;\n    },\n    tokensPerMS: (tokensPerTick) => {\n      const value = numbro(tokensPerTick).multiply(TICK_TO_MS).divide(MP);\n      return formatSmartly(value);\n    },\n    tokensPerS: (tokensPerTick) => {\n      const value = numbro(tokensPerTick)\n        .multiply(TICK_TO_S)\n        .divide(MP)\n        .value();\n\n      return formatSmartly(value);\n    },\n\n    tokensPerMeaningfulPeriod: (tokensPerTick) => {\n      // tries to find the best interval for display\n      // to avoid 0.0000000000000000000000000009839248 tokens per sec\n      const multipliers = [\n        TICK_TO_S,\n        TICK_TO_MINUTE,\n        TICK_TO_HOUR,\n        TICK_TO_DAY,\n        TICK_TO_WEEK,\n        TICK_TO_MONTH,\n        TICK_TO_YEAR,\n      ];\n      const unit = {\n        [TICK_TO_S]: 'second',\n        [TICK_TO_MINUTE]: 'minute',\n        [TICK_TO_HOUR]: 'hour',\n        [TICK_TO_DAY]: 'day',\n        [TICK_TO_WEEK]: 'week',\n        [TICK_TO_MONTH]: 'month',\n        [TICK_TO_YEAR]: 'year',\n      };\n      const firstGoodLookingMultiplier = multipliers.find((multiplier) => {\n        const value = numbro(tokensPerTick)\n          .multiply(multiplier)\n          .divide(MP)\n          .value();\n        const isOk = value > 0.01;\n        return isOk;\n      }) || TICK_TO_YEAR;\n\n      const value = numbro(tokensPerTick)\n        .multiply(firstGoodLookingMultiplier)\n        .divide(MP)\n        .value();\n\n      return {\n        formattedValue: formatSmartly(value),\n        unit: unit[firstGoodLookingMultiplier],\n      };\n    },\n    ticksToMs: (ticks) => Math.round(ticks / TICK_TO_MS),\n    secondsToTicks: (seconds) => seconds * TICK_TO_S,\n    speedPerSecondToTick: (speedPerSec) => numbro(speedPerSec).multiply(TICK_TO_S).value(),\n  };\n}\n\nwindow.tf = TokenFormatter;\nexport function timestamp(value) {\n  return {\n    fromNanosec() {\n      return value / 1000 / 1000;\n    },\n  };\n}\n","import React from 'react';\nimport classNames from 'classnames';\n\ntype FormFieldProps = {\n  children: never;\n  label: never;\n  error: never;\n  className: never;\n};\n\nexport function FormField({\n  children, label, error, className, ...rest\n}: FormFieldProps) {\n  return (\n    <div className={classNames('block', className)} {...rest}>\n      <div className=\"mb-1\">{label}</div>\n      <div>{children}</div>\n      {error ? <div className=\"text-red-500 mt-1 text-xs\">{error}</div> : null}\n    </div>\n  );\n}\n","import React from 'react';\nimport './Input.scss';\nimport classNames from 'classnames';\n\ntype InputProps = {\n  children: never;\n  className: never;\n  error: never;\n};\n\nexport function Input({\n  children, className, error, ...rest\n}: InputProps) {\n  const borderColor = error ? 'border-red-400' : 'border-border';\n  return (\n    <label\n      className={classNames(\n        'Input font-semibold flex p-4 rounded-lg border  bg-input text-white focus-within:border-blue hover:border-blue',\n        borderColor,\n        className,\n      )}\n      {...rest}\n    >\n      {children}\n    </label>\n  );\n}\n","import React from 'react';\nimport classNames from 'classnames';\nimport { Link } from 'react-router-dom';\nimport './Button.scss';\n\nconst variants = {\n  main: 'main',\n  filled: 'filled',\n  outlined: 'outlined',\n};\n\n// const sizes = ['normal', 'big'];\n// const colors = ['dark', 'light'];\n\ntype CommonButtonProps = {\n  icon: never;\n  children: never;\n  className: never;\n  size: never;\n  loading: never;\n  disabled: never;\n  loadingText: never;\n  color?: string;\n  variant?: string;\n  type: 'button';\n};\n\ntype SpecificLinkProps = {\n  link: true;\n  to: string;\n};\n\ntype SpecificButtonProps = {\n  link?: false;\n};\n\ntype ButtonProps = CommonButtonProps & (SpecificLinkProps | SpecificButtonProps);\n\nexport function Button({\n  icon,\n  children,\n  className,\n  size,\n  loading,\n  disabled,\n  loadingText,\n  color = 'light',\n  variant = 'outlined',\n  ...restProps\n}: ButtonProps) {\n  let variantStyles = '';\n  let sizeStyles = '';\n  let colorStyles = '';\n\n  if (variant === variants.main) {\n    variantStyles = 'Button--main';\n    sizeStyles = size === 'normal'\n      ? 'px-5 py-4  rounded-2xl font-semibold'\n      : size === 'big'\n        ? 'px-12 py-6 rounded-3xl font-bold'\n        : '';\n  } else if (variant === variants.outlined) {\n    variantStyles = 'border-solid border font-semibold rounded-lg ';\n    colorStyles = color === 'light'\n      ? 'border-blue hover:bg-blue'\n      : color === 'dark'\n        ? 'border-border hover:bg-hover hover:border-hover'\n        : '';\n  } else if (variant === variants.filled) {\n    variantStyles = 'bg-dark hover:bg-hover font-semibold rounded-lg active:bg-transparent';\n  }\n\n  const commonProps = {\n    disabled: loading || disabled,\n    className: classNames(\n      'inline-flex items-center justify-center p-3  whitespace-nowrap',\n      variantStyles,\n      sizeStyles,\n      colorStyles,\n      disabled ? 'Button--disabled' : '',\n      'transition-all',\n      className\n    ),\n  };\n\n  const content = loading ? (\n    loadingText\n  ) : (\n    <>\n      {icon ? <div className=\"mr-2\">{icon}</div> : null}\n      {children}\n    </>\n  );\n\n  return restProps.link ? (\n    <Link {...commonProps} {...restProps}>{content}</Link>\n  ) : (\n    <button {...commonProps} {...restProps} type=\"button\">{content}</button>\n  );\n}\n","import React from 'react';\nimport { useNear } from '../../features/near-connect/useNear';\n\nfunction NearTokenImage(props) {\n  return (\n    <svg\n      version=\"1.0\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"20pt\"\n      height=\"20pt\"\n      viewBox=\"0 0 864.000000 864.000000\"\n      preserveAspectRatio=\"xMidYMid meet\"\n      {...props}\n    >\n      <g\n        transform=\"translate(0.000000,864.000000) scale(0.100000,-0.100000)\"\n        fill=\"#000000\"\n        stroke=\"none\"\n      >\n        <path d=\"M2490 6461 c-164 -53 -265 -156 -314 -320 -14 -49 -16 -226 -16 -1821 0 -1595 2 -1772 16 -1821 25 -85 62 -148 118 -205 179 -178 476 -178 650 0 30 30 249 347 519 749 518 772 502 742 438 799 -21 19 -42 28 -66 28 -40 0 -6 28 -555 -449 -283 -246 -411 -351 -425 -349 -20 3 -20 11 -20 1238 l0 1235 21 3 c16 2 286 -315 1376 -1621 746 -892 1372 -1637 1392 -1654 94 -83 187 -113 351 -113 169 0 275 39 371 134 56 57 93 120 118 205 14 49 16 226 16 1821 0 1595 -2 1772 -16 1821 -25 85 -62 148 -118 205 -179 178 -476 178 -650 0 -30 -30 -249 -347 -519 -749 -518 -772 -502 -742 -438 -799 21 -19 42 -28 66 -28 40 0 6 -28 555 449 283 246 411 351 425 349 20 -3 20 -11 20 -1238 l0 -1235 -21 -3 c-16 -2 -286 315 -1376 1621 -746 892 -1372 1637 -1392 1654 -95 85 -187 113 -356 112 -82 0 -131 -5 -170 -18z\" />\n      </g>\n    </svg>\n  );\n}\n\nfunction FallbackTokenIamge(props) {\n  return (\n    <svg\n      version=\"1.0\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"20pt\"\n      height=\"20pt\"\n      viewBox=\"0 0 864.000000 864.000000\"\n      preserveAspectRatio=\"xMidYMid meet\"\n      {...props}\n    >\n      <g\n        transform=\"translate(0.000000,864.000000) scale(0.100000,-0.100000)\"\n        fill=\"#000000\"\n        stroke=\"none\"\n      >\n        <path d=\"M2490 6461 c-164 -53 -265 -156 -314 -320 -14 -49 -16 -226 -16 -1821 0 -1595 2 -1772 16 -1821 25 -85 62 -148 118 -205 179 -178 476 -178 650 0 30 30 249 347 519 749 518 772 502 742 438 799 -21 19 -42 28 -66 28 -40 0 -6 28 -555 -449 -283 -246 -411 -351 -425 -349 -20 3 -20 11 -20 1238 l0 1235 21 3 c16 2 286 -315 1376 -1621 746 -892 1372 -1637 1392 -1654 94 -83 187 -113 351 -113 169 0 275 39 371 134 56 57 93 120 118 205 14 49 16 226 16 1821 0 1595 -2 1772 -16 1821 -25 85 -62 148 -118 205 -179 178 -476 178 -650 0 -30 -30 -249 -347 -519 -749 -518 -772 -502 -742 -438 -799 21 -19 42 -28 66 -28 40 0 6 -28 555 449 283 246 411 351 425 349 20 -3 20 -11 20 -1238 l0 -1235 -21 -3 c-16 -2 -286 315 -1376 1621 -746 892 -1372 1637 -1392 1654 -95 85 -187 113 -356 112 -82 0 -131 -5 -170 -18z\" />\n      </g>\n    </svg>\n  );\n}\n\nexport function TokenIcon({ tokenName, className, ...rest }) {\n  const near = useNear();\n  const image = near.tokens.get(tokenName).metadata.icon;\n\n  const tokens = {\n    NEAR: NearTokenImage,\n    fallback: FallbackTokenIamge,\n  };\n\n  if (image) {\n    return (\n      <img src={image} alt={tokenName} className={className} {...rest} />\n    );\n  }\n  const Component = tokens[tokenName] || tokens.fallback;\n  return <Component className={className} {...rest} />;\n}\n","import React from 'react';\nimport classNames from 'classnames';\nimport { TokenIcon } from '../../icons/Tokens';\n\ntype TokenImageProps = {\n  tokenName: never;\n  size?: number;\n  className?: string;\n};\n\nexport function TokenImage({\n  tokenName, size = 8, className, ...rest\n}: TokenImageProps) {\n  return (\n    <div\n      className={classNames(\n        'p-1 flex-shrink-0 rounded-lg bg-card2 inline-flex items-center justify-center',\n        `w-${size} h-${size}`,\n        className,\n      )}\n      {...rest}\n    >\n      <TokenIcon className=\"w-full h-full rounded-full\" tokenName={tokenName} />\n    </div>\n  );\n}\n","import React from 'react';\n\nexport const useOutsideClick = (ref, callback) => {\n  const handleClick = (e) => {\n    if (ref.current && !ref.current.contains(e.target)) {\n      callback();\n    }\n  };\n\n  React.useEffect(() => {\n    document.addEventListener('click', handleClick);\n\n    return () => {\n      document.removeEventListener('click', handleClick);\n    };\n  });\n};\n","import React from 'react';\nimport classNames from 'classnames';\nimport { useOutsideClick } from '../../../lib/useOutsideClick';\n\ntype DropdownMenuProps = {\n  opened: boolean;\n  children: React.ReactNode;\n  className?: string;\n  onClose: () => void;\n};\n\nexport function DropdownMenu({\n  opened, children, className, onClose,\n}: DropdownMenuProps) {\n  const ref = React.useRef<HTMLInputElement | null>(null);\n\n  useOutsideClick(ref, () => {\n    if (opened) {\n      onClose();\n    }\n  });\n\n  return (\n    <div\n      ref={ref}\n      className={classNames(\n        className,\n        'absolute top-full pt-2',\n        opened ? 'flex' : 'hidden',\n      )}\n    >\n      <div className={classNames('w-full bg-hover rounded-2xl py-2')}>\n        {children}\n      </div>\n    </div>\n  );\n}\n\ntype DropdownMenuItemProps = {\n  children: React.ReactNode;\n  className?: String;\n};\n\nexport function DropdownMenuItem({ children, className, ...rest }: DropdownMenuItemProps) {\n  return (\n    <div\n      className={classNames(\n        'px-5 py-1 font-semibold text-sm hover:font-bold',\n        className,\n      )}\n      {...rest}\n    >\n      {children}\n    </div>\n  );\n}\n\nexport function DropdownMenuDivider() {\n  return <div className=\"border-dark border-t w-full my-2\" />;\n}\n","import React from 'react';\n\nexport function DropdownArrowDown(props) {\n  return (\n    <svg\n      width=\"12\"\n      height=\"7\"\n      viewBox=\"0 0 12 7\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path\n        d=\"M1.37378 0.739731L6.11885 5.4848L10.8639 0.739731\"\n        stroke=\"white\"\n        strokeWidth=\"1.5\"\n      />\n    </svg>\n  );\n}\n","import React from 'react';\nimport classNames from 'classnames';\nimport { DropdownArrowDown } from '../../icons/DropdownArrowDown';\n\ntype DropdownOpenerProps = {\n  opened?: never;\n  className?: never;\n  children: React.ReactNode;\n  onChange: (state: boolean) => void;\n  rounded: boolean;\n  minimal: boolean;\n};\n\n/**\n * @param {minimal} Boolean remove outline and padding if true\n * @param {rounded} Boolean set to true to change shape to pill\n * @returns\n */\nexport function DropdownOpener({\n  opened,\n  className,\n  children,\n  onChange,\n  rounded,\n  minimal,\n  ...rest\n}: DropdownOpenerProps) {\n  const minimalClasses = minimal\n    ? ''\n    : 'px-4 py-3 border border-border w-36 hover:bg-hover hover:border-hover';\n\n  return (\n    <button\n      type=\"button\"\n      onClick={() => onChange(!opened)}\n      className={classNames(\n        'cursor-pointer flex items-center',\n        className,\n        minimalClasses,\n        rounded ? 'rounded-full' : 'rounded-lg',\n      )}\n      {...rest}\n    >\n      {children}\n      <div className=\"flex-grow\" />\n      <DropdownArrowDown\n        className={classNames('ml-2', 'transform', opened ? 'rotate-180' : '')}\n      />\n    </button>\n  );\n}\n","import React from 'react';\nimport classNames from 'classnames';\n\ntype RadioButtonProps<T> = {\n  active: boolean;\n  label: React.ReactNode;\n  value: T;\n  onChange: (value: T) => void;\n};\n\nexport function RadioButton<T>({\n  active, label, value, onChange,\n}: RadioButtonProps<T>) {\n  return (\n    <label className=\"inline-flex items-center whitespace-nowrap\">\n      <input\n        type=\"radio\"\n        className=\"invisible w-0 h-0 absolute\"\n        checked={active}\n        onChange={() => onChange(value)}\n      />\n      <div\n        className={classNames(\n          active ? 'border-blue border-4' : 'border-border border-2',\n          'border-full w-3 h-3 rounded-full',\n        )}\n      />\n\n      <div className={classNames(active ? 'font-semibold' : '', 'ml-3 flex')}>\n        {label}\n      </div>\n    </label>\n  );\n}\n","import './Tooltip.scss';\n\nimport RCTooltip from 'rc-tooltip';\nimport React from 'react';\n\ntype TooltipProps = {\n  placement?: string;\n  children: never;\n  html: never;\n  overlay: never;\n};\n\nexport function Tooltip({\n  placement = 'top',\n  children,\n  html,\n  overlay,\n  ...rest\n}: TooltipProps) {\n  return (\n    <RCTooltip\n      // @ts-ignore\n      placement={placement}\n      overlay={\n        html ? <div dangerouslySetInnerHTML={{ __html: html }} /> : overlay\n      }\n      {...rest}\n    >\n      {children || <span className=\"Tooltip__defaultIcon\">?</span>}\n    </RCTooltip>\n  );\n}\n","import { useNear } from '../features/near-connect/useNear';\nimport { TokenFormatter } from './formatting';\n\nexport function useTokenFormatter(tokenName) {\n  const near = useNear();\n  const token = near.tokens.get(tokenName);\n\n  return TokenFormatter(token.metadata.decimals);\n}\n","import { useEffect, useState } from 'react';\nimport { usePrev } from '../../lib/usePrev';\nimport { useTokenFormatter } from '../../lib/useTokenFormatter';\n\nexport function StreamSpeedCalcField({ onChange, deposit = 0, token }) {\n  const formatter = useTokenFormatter(token);\n\n  const [days, setDays] = useState(0.0);\n  const [minutes, setMinutes] = useState(0);\n  const [hours, setHours] = useState(0);\n\n  const SECONDS_IN_MINUTE = 60;\n  const SECONDS_IN_HOUR = SECONDS_IN_MINUTE * 60;\n  const SECONDS_IN_DAY = SECONDS_IN_HOUR * 24;\n\n  const durationInSeconds = days * SECONDS_IN_DAY\n    + minutes * SECONDS_IN_MINUTE\n    + hours * SECONDS_IN_HOUR;\n\n  let tokensPerTick = Math.round(\n    deposit / formatter.secondsToTicks(durationInSeconds),\n  );\n\n  if (Number.isNaN(tokensPerTick)) {\n    tokensPerTick = 0;\n  } else if (tokensPerTick === Infinity) {\n    tokensPerTick = 0;\n  }\n\n  const prevSpeed = usePrev(tokensPerTick);\n\n  useEffect(() => {\n    if (prevSpeed !== tokensPerTick) {\n      onChange(tokensPerTick);\n    }\n  }, [tokensPerTick, onChange, prevSpeed]);\n\n  return (\n    <div className=\"flex\" label=\"Stream duration\">\n      <label className=\"w-1/3 input font-semibold flex p-4 rounded-l-lg border-border border bg-input text-white focus-within:border-blue hover:border-blue\">\n        <input\n          className=\"focus:outline-none input bg-input w-1/3\"\n          placeholder=\"0\"\n          value={days}\n          onChange={(e) => {\n            setDays(e.target.value);\n          }}\n        />\n        <div className=\"right-2 opacity-100 w-1/3\">days</div>\n      </label>\n      <label className=\"w-1/3 input font-semibold flex p-4 border-border border bg-input text-white focus-within:border-blue hover:border-blue\">\n        <input\n          className=\"focus:outline-none input bg-input w-1/3\"\n          placeholder=\"0\"\n          value={hours}\n          onChange={(e) => setHours(e.target.value)}\n        />\n        <div className=\"right-2 opacity-100 w-1/3\">hours</div>\n      </label>\n      <label className=\"w-1/3 input font-semibold flex p-4 rounded-r-lg border-border border bg-input text-white focus-within:border-blue hover:border-blue\">\n        <input\n          className=\"focus:outline-none input bg-input w-1/3\"\n          placeholder=\"0\"\n          value={minutes}\n          onChange={(e) => setMinutes(e.target.value)}\n        />\n        <div className=\"right-2 opacity-100 w-1/3\">mins</div>\n      </label>\n    </div>\n  );\n}\n","import { useRef, useEffect } from 'react';\n\nexport function usePrev(value) {\n  const ref = useRef(null);\n  useEffect(() => {\n    ref.current = value;\n  }, [value]);\n  return ref.current;\n}\n","import React, { useState } from 'react';\nimport { Formik, Field } from 'formik';\nimport * as Yup from 'yup';\n\nimport { FormField } from '../../components/kit/FormField';\nimport { Input } from '../../components/kit/Input';\nimport { Button } from '../../components/kit/Button';\nimport { TokenImage } from '../../components/kit/TokenImage';\nimport { useNear } from '../near-connect/useNear';\nimport { DropdownMenu, DropdownMenuItem } from '../../components/kit/DropdownMenu';\nimport { DropdownOpener } from '../../components/kit/DropdownOpener';\nimport { RadioButton } from '../../components/kit/RadioButton';\nimport { Tooltip } from '../../components/kit/Tooltip';\nimport { TokenFormatter } from '../../lib/formatting';\nimport { StreamSpeedCalcField } from './StreamSpeedCalcField';\nimport { env } from '../../lib/environment';\n\nconst CreateStreamFormSchema = ({ near, accountId }) => Yup.object().shape({\n  receiver: Yup.string()\n    .required('Receiver is a required')\n    .test(\n      'receiver-not-equal-owner',\n      'Receiver can not be the same as owner',\n      (value) => value !== accountId,\n    )\n    .test(\n      'receiver-is-valida-address',\n      'Address does not exists',\n      async (value) => {\n        try {\n          await near.near.near.connection.provider.query({\n            request_type: 'view_account',\n            finality: 'final',\n            account_id: value,\n          });\n          return true;\n        } catch (error) {\n          return false;\n        }\n      },\n    ),\n  token: Yup.string().required(),\n  deposit: Yup.number()\n    .required()\n    .moreThan(0, 'Deposit should be more than 0'),\n  speed: Yup.number().required().moreThan(0, 'Choose stream duration'),\n  autoDeposit: Yup.boolean(),\n  comment: Yup.string().max(255),\n});\n\nexport function CreateStreamForm({ onSubmit }) {\n  const near = useNear();\n  const schema = CreateStreamFormSchema({\n    accountId: near.near.walletConnection.getAccountId(),\n    near,\n  });\n\n  const [dropdownOpened, setDropdownOpened] = useState(false);\n\n  const [submitError, setError] = useState(null);\n\n  const tokensNames = near.tokens.tickers;\n  const formikOnSubmit = async (...args) => {\n    console.debug('Formik submit', ...args);\n    try {\n      const res = await onSubmit(...args);\n      return res;\n    } catch (error) {\n      setError(error);\n    }\n  };\n  return (\n    <Formik\n      initialValues={{\n        receiver: '',\n        token: 'NEAR',\n        speed: 0,\n        deposit: 0,\n        autoDeposit: false,\n        autoStart: true,\n        comment: '',\n      }}\n      validationSchema={schema}\n      onSubmit={formikOnSubmit}\n      validateOnBlur={false}\n      validateOnChange={false}\n      validateOnMount={false}\n    >\n      {({\n        values,\n        setFieldValue,\n        setFieldTouched,\n        handleSubmit,\n        isSubmitting,\n      }) => {\n        const tokenMeta = near.roketo.tokenMeta(values.token);\n        const formatter = TokenFormatter(\n          near.tokens.get(values.token).metadata.decimals,\n        );\n        return (\n          <form className=\"max-w-lg mx-auto w-full\" onSubmit={handleSubmit}>\n            <Field name=\"receiver\">\n              {({\n                field,\n                meta,\n              }) => (\n                <FormField\n                  label=\"Receiver:\"\n                  className=\"mb-4\"\n                  error={meta.error}\n                >\n                  <Input>\n                    <input\n                      placeholder={`receiver.${env.ACCOUNT_SUFFIX}`}\n                      id=\"ownerInput\"\n                      {...field}\n                    />\n                  </Input>\n                </FormField>\n              )}\n            </Field>\n\n            <div className=\"flex mb-4\">\n              <Field name=\"token\">\n                {({\n                  field,\n                  meta,\n                }) => (\n                  <FormField\n                    label=\"Token:\"\n                    className=\"w-1/3 items-center relative\"\n                    error={meta.error}\n                  >\n                    <DropdownOpener\n                      minimal\n                      className=\"bg-input text-white focus-within:border-blue hover:border-blue text-xl h-14 px-4 py-3 border border-border w-36\"\n                      onChange={setDropdownOpened}\n                    >\n                      <div className=\"inline-flex items-center\">\n                        <TokenImage\n                          tokenName={field.value}\n                          className=\"mr-1\"\n                        />\n                        {' '}\n                        <span>{field.value}</span>\n                      </div>\n                    </DropdownOpener>\n\n                    <DropdownMenu\n                      opened={dropdownOpened}\n                      className=\"z-10\"\n                      onClose={() => setDropdownOpened(false)}\n                    >\n                      {tokensNames.map((option) => (\n                        <DropdownMenuItem\n                          className=\"focus-within:border-blue\"\n                          key={option}\n                        >\n                          <RadioButton\n                            label={(\n                              <div className=\"inline-flex items-center\">\n                                <TokenImage\n                                  size={6}\n                                  tokenName={option}\n                                  className=\"mr-1\"\n                                />\n                                {' '}\n                                <span>{option}</span>\n                              </div>\n                            )}\n                            active={field.value === option}\n                            value={option}\n                            onChange={(value) => {\n                              setDropdownOpened(false);\n                              setFieldValue(field.name, value, false);\n                              setFieldTouched(field.name, true, false);\n                            }}\n                          />\n                        </DropdownMenuItem>\n                      ))}\n                    </DropdownMenu>\n                  </FormField>\n                )}\n              </Field>\n\n              <Field name=\"deposit\">\n                {({\n                  field,\n                  meta,\n                }) => (\n                  <FormField\n                    label={(\n                      <span>\n                        <span>Stream initial deposit:</span>\n                        <Tooltip\n                          className=\"ml-2\"\n                          overlay=\"Funds which will be used to create an initial stream for a set period. This deposit can be extended in manual or automatical mode.\"\n                        />\n                      </span>\n                    )}\n                    className=\"w-2/3\"\n                    error={meta.error}\n                  >\n                    <Input>\n                      <input placeholder=\"0.00\" {...field} />\n                    </Input>\n                  </FormField>\n                )}\n              </Field>\n            </div>\n\n            <div className=\"block mb-4\">\n              <Field name=\"speed\">\n                {({\n                  field,\n                  meta,\n                }) => (\n                  <FormField\n                    label={(\n                      <div className=\"relative\">\n                        <div>\n                          Period to unlock the initial deposit:\n                          {' '}\n                          <Tooltip\n                            className=\"ml-2\"\n                            overlay=\"In case of no extensions for an initial deposit after this period will be reached reciever will be able to withdraw whole initial deposit and close the stream. \"\n                          />\n                        </div>\n                        <div className=\"text-xs text-gray absolute right-0 top-1\">\n                          Streaming speed:\n                          {' '}\n                          {formatter.tokensPerS(field.value)}\n                          {' '}\n                          {values.token}\n                          {' '}\n                          / sec\n                        </div>\n                      </div>\n                    )}\n                    error={meta.error}\n                  >\n                    {' '}\n                    <StreamSpeedCalcField\n                      token={values.token}\n                      deposit={formatter.toInt(values.deposit)}\n                      onChange={(speed) => {\n                        setFieldValue(field.name, speed, false);\n                        setFieldTouched(field.name, true, false);\n                      }}\n                    />\n                  </FormField>\n                )}\n              </Field>\n            </div>\n\n            <Field name=\"comment\">\n              {({\n                field,\n                meta,\n              }) => (\n                <FormField\n                  className=\"mb-6\"\n                  error={meta.error}\n                  label={(\n                    <div className=\"flex justify-between items-center\">\n                      <div className=\"mb-1\">Comment:</div>\n                      <div className=\"text-xs text-gray\">\n                        {(field.value && field.value.length) || 0}\n                        /255\n                      </div>\n                    </div>\n                  )}\n                >\n                  <label className=\"h-40 Input font-semibold flex p-4 pt-0 rounded-lg border  bg-input text-white focus-within:border-blue hover:border-blue border-border\">\n                    <textarea\n                      id=\"commentInput\"\n                      className=\" bg-input  w-full h-full pt-2 focus:outline-none resize-none\"\n                      placeholder=\"Enter comment\"\n                      maxLength=\"255\"\n                      {...field}\n                    />\n                  </label>\n                </FormField>\n              )}\n            </Field>\n\n            {submitError && (\n              <p className=\"text-special-inactive my-4\">\n                Submit error:\n                {' '}\n                {submitError.message}\n              </p>\n            )}\n            <div className=\"flex relaitive\">\n              <div>\n                <label className=\"flex\">\n                  <Field name=\"autoDeposit\" className=\"mr-1\" type=\"checkbox\" />\n                  <span>\n                    Enable auto deposit?\n                    {' '}\n                    <Tooltip\n                      className=\"ml-2\"\n                      overlay=\"Check this if you want make this stream infinite extending getting deposits from income streams with saving initial stream speed.\"\n                    />\n                  </span>\n                </label>\n                <label className=\"flex\">\n                  <Field name=\"autoStart\" className=\"mr-1\" type=\"checkbox\" />\n                  <span>\n                    Start stream immediately?\n                    {' '}\n                    <Tooltip\n                      className=\"ml-2\"\n                      overlay=\"Check this if you want this stream to start transfering funds immediatly.\"\n                    />\n                  </span>\n                </label>\n\n                <p className=\"text-left text-gray w-2/3 text-sm\">\n                  You will be charged\n                  {' '}\n                  {formatter.amount(tokenMeta.commission_on_create)}\n                  {' '}\n                  {tokenMeta.ticker}\n                  {' '}\n                  fee for that stream\n                </p>\n              </div>\n\n              <Button\n                type=\"button\"\n                disabled={isSubmitting}\n                variant=\"main\"\n                size=\"big\"\n                className=\"rounded-lg\"\n              >\n                Create Stream\n              </Button>\n            </div>\n          </form>\n        );\n      }}\n    </Formik>\n  );\n}\n","import React from 'react';\nimport { generatePath } from 'react-router-dom';\nimport { useNear } from '../features/near-connect/useNear';\nimport { TokenFormatter } from '../lib/formatting';\nimport { CreateStreamForm } from '../features/create-stream/CreateStreamForm';\n\nconst redirectUrl = generatePath('streams');\nconst returnPath = `${window.location.origin}/#/${redirectUrl}`;\n\nfunction SendPage() {\n  const near = useNear();\n  const createStreamClick = async (values) => {\n    const {\n      receiver, autoDeposit, autoStart, comment, deposit, speed, token,\n    } = values;\n    const formatter = TokenFormatter(near.tokens.get(token).metadata.decimals);\n\n    await near.contractApi.createStream(\n      {\n        deposit: formatter.toInt(deposit),\n        description: comment,\n        receiverId: receiver,\n        token,\n        speed: String(speed),\n        autoDepositEnabled: autoDeposit,\n        isAutoStartEnabled: autoStart,\n      },\n      {\n        callbackUrl: returnPath,\n      },\n    );\n  };\n\n  return (\n    <div className=\"container m-auto px-5 py-12\">\n      <div className=\"text-center\">\n        <h1 className=\"text-5xl mb-4 text-center\">Create a stream</h1>\n        <p className=\"text-gray\">Stream your tokens to the receiver directly</p>\n      </div>\n      <CreateStreamForm onSubmit={createStreamClick} />\n    </div>\n  );\n}\n\nexport default SendPage;\n","import React from 'react';\n\nexport function AccountIcon() {\n  return (\n    <svg\n      width=\"17\"\n      height=\"17\"\n      viewBox=\"0 0 17 17\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <path\n        d=\"M1.35828 8.21811C1.35828 7.03631 1.88087 5.91501 2.78586 5.15499L6.96214 1.64773C7.70587 1.02314 8.79082 1.02314 9.53456 1.64773L13.7108 5.15499C14.6158 5.91501 15.1384 7.03631 15.1384 8.2181V12.4077C15.1384 14.0646 13.7953 15.4077 12.1384 15.4077H4.35827C2.70142 15.4077 1.35828 14.0646 1.35828 12.4077V8.21811Z\"\n        stroke=\"currentColor\"\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n      />\n    </svg>\n  );\n}\n","import React from 'react';\n\nexport function StreamsIcon() {\n  return (\n    <svg\n      width=\"14\"\n      height=\"14\"\n      viewBox=\"0 0 14 14\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <circle cx=\"2.08925\" cy=\"2.03994\" r=\"2.03994\" fill=\"currentColor\" />\n      <circle cx=\"11.1691\" cy=\"2.03994\" r=\"2.03994\" fill=\"currentColor\" />\n      <circle cx=\"2.08925\" cy=\"11.1198\" r=\"2.03994\" fill=\"currentColor\" />\n      <circle cx=\"11.1691\" cy=\"11.1198\" r=\"2.03994\" fill=\"currentColor\" />\n    </svg>\n  );\n}\n","import React from 'react';\n\nexport function SendIcon() {\n  return (\n    <svg\n      width=\"12\"\n      height=\"12\"\n      viewBox=\"0 0 12 12\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <path\n        d=\"M10.5309 10.5238L1.9707 1.96368M1.9707 1.96368V10.5238M1.9707 1.96368H10.5308\"\n        stroke=\"currentColor\"\n        strokeWidth=\"2.5\"\n        strokeLinecap=\"round\"\n      />\n    </svg>\n  );\n}\n","import React from 'react';\nimport classNames from 'classnames';\nimport { Link, useRouteMatch } from 'react-router-dom';\n\ntype NavLinkProps = {\n  icon: never;\n  children: never;\n  className: never;\n  to: never;\n};\n\nexport function NavLink({\n  icon, children, className, to, ...rest\n}: NavLinkProps) {\n  const activeClassname = 'bg-hover';\n  const match = useRouteMatch(to);\n  const isActive = match && match.isExact;\n\n  return (\n    <Link\n      to={to}\n      className={classNames(\n        className,\n        'text-white font-semibold',\n        'flex items-center px-5 py-4 rounded-xl ',\n        'group cursor-pointer whitespace-nowrap',\n        isActive ? activeClassname : '',\n        'transition-all',\n        'hover:bg-hover',\n      )}\n      {...rest}\n    >\n      <div\n        className={classNames(\n          'group-hover:text-blue',\n          isActive ? 'text-blue' : '',\n        )}\n      >\n        {icon}\n      </div>\n      <div className=\"ml-2\">{children}</div>\n    </Link>\n  );\n}\n","import React from 'react';\nimport { Button } from '../../components/kit/Button';\nimport { useNearAuth } from './useNearAuth';\n\nexport function NearAuthButton(props) {\n  const {\n    inited, logout, login, accountId, signedIn,\n  } = useNearAuth();\n\n  if (!inited) {\n    return (\n      <Button type=\"button\" {...props}>\n        Connecting...\n        {' '}\n        <span\n          className=\"spinner-grow spinner-grow-sm\"\n          role=\"status\"\n          aria-hidden=\"true\"\n        />\n      </Button>\n    );\n  }\n\n  return signedIn ? (\n    <Button type=\"button\" onClick={logout} {...props}>\n      Sign out (\n      {accountId}\n      )\n    </Button>\n  ) : (\n    <Button type=\"button\" onClick={login} {...props}>\n      Sign in with NEAR Wallet\n    </Button>\n  );\n}\n","import { useNear } from '../near-connect/useNear';\n\nexport function useNearAuth() {\n  const near = useNear();\n\n  async function login(e) {\n    if (e) {\n      e.preventDefault();\n    }\n\n    await near.login();\n    return false;\n  }\n\n  async function logout() {\n    await near.logout();\n  }\n\n  return {\n    accountId: near.auth.signedAccountId,\n    signedIn: near.auth.signedIn,\n    inited: near.inited,\n    login,\n    logout,\n  };\n}\n","export const routes = {\n  authorize: '/authorize',\n  account: '/account',\n  myStreams: '/streams',\n  send: '/',\n  receive: '/receive',\n  stream: (id) => `/streams/${id}`,\n};\n","export default __webpack_public_path__ + \"static/media/logo_stream_with_text.831f0892.svg\";","import React from 'react';\n\nexport function useBool(initial) {\n  const [on, setOn] = React.useState(initial);\n\n  return {\n    on,\n    off: !on,\n    toggle: () => setOn(!on),\n    turnOff: () => setOn(false),\n    turnOn: () => setOn(true),\n    setOn,\n  };\n}\n","import React from 'react';\nimport classNames from 'classnames';\nimport { useRouteMatch } from 'react-router-dom';\nimport { AccountIcon } from './icons/Account';\nimport { StreamsIcon } from './icons/Streams';\nimport { SendIcon } from './icons/Send';\nimport { NavLink } from './kit/NavLink';\nimport { NearAuthButton } from '../features/near-auth/NearAuthButton';\nimport { routes } from '../lib/routing';\nimport LogoText from '../images/logo_stream_with_text.svg';\nimport { useBool } from '../lib/useBool';\n\nfunction MinifiedHeader() {\n  const logo = (\n    <div className=\"flex justify-start items-center\">\n      <img src={LogoText} alt=\"rocketo logo\" />\n    </div>\n  );\n  return (\n    <div\n      className={classNames(\n        'py-4 px-6',\n        'absolute w-full pt-8',\n        'flex justify-center',\n      )}\n    >\n      {logo}\n    </div>\n  );\n}\n\nfunction FullHeader() {\n  const menuControl = useBool(false);\n\n  const navigation = (\n    <ul className=\"flex-col lg:flex-row flex justify-center \">\n      <li className=\"mb-2 lg:mr-2 lg:mb-0\">\n        <NavLink\n          onClick={menuControl.turnOff}\n          to={routes.account}\n          icon={<AccountIcon />}\n        >\n          Account\n        </NavLink>\n      </li>\n      <li className=\"mb-2 lg:mr-2 lg:mb-0\">\n        <NavLink\n          onClick={menuControl.turnOff}\n          to={routes.myStreams}\n          icon={<StreamsIcon />}\n        >\n          My Streams\n        </NavLink>\n      </li>\n      <li className=\"mb-2 lg:mr-2 lg:mb-0\">\n        <NavLink\n          onClick={menuControl.turnOff}\n          to={routes.send}\n          icon={<SendIcon />}\n        >\n          Send\n        </NavLink>\n      </li>\n    </ul>\n  );\n\n  const logo = (\n    <div className=\"flex justify-start items-center\">\n      <img src={LogoText} alt=\"rocketo logo\" />\n    </div>\n  );\n\n  return (\n    <div className=\"py-4 px-6 w-full pt-8\">\n      <div\n        className={classNames('hidden lg:grid items-center grid-cols-3 gap-3 ')}\n      >\n        {logo}\n        {navigation}\n\n        <div className=\"flex justify-end\">\n          <NearAuthButton />\n        </div>\n      </div>\n\n      <div className={classNames('lg:hidden')}>\n        <div className=\"flex justify-between\">\n          {logo}\n\n          <button\n            className=\"p-1\"\n            onClick={menuControl.toggle}\n            type=\"button\"\n            data-bs-toggle=\"collapse\"\n            data-bs-target=\"#navbarSupportedContent\"\n            aria-controls=\"navbarSupportedContent\"\n            aria-expanded=\"false\"\n            aria-label=\"Toggle navigation\"\n          >\n            <div\n              className={classNames(\n                'burger-menu',\n                menuControl.on ? 'burger-menu--active' : '',\n              )}\n            />\n          </button>\n        </div>\n        <div\n          className={classNames(menuControl.on ? 'block' : 'hidden', 'mt-4')}\n        >\n          {navigation}\n          <NearAuthButton className=\"mt-4\" />\n        </div>\n      </div>\n    </div>\n  );\n}\nexport function Header() {\n  const match = useRouteMatch('/authorize');\n\n  if (match) {\n    return <MinifiedHeader />;\n  }\n\n  return <FullHeader />;\n}\n","import React from 'react';\n\nexport function StreamOutIcon() {\n  return (\n    <svg\n      width=\"16\"\n      height=\"17\"\n      viewBox=\"0 0 16 17\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <path\n        d=\"M8.23528 9.07894L1 1.8437M1 1.8437V9.07894M1 1.8437H8.23523\"\n        stroke=\"#F56173\"\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n      />\n      <path\n        d=\"M12.1637 6.27117C13.591 7.14282 14.5438 8.71519 14.5438 10.5101C14.5438 13.2512 12.3217 15.4733 9.58065 15.4733C7.78575 15.4733 6.21339 14.5205 5.34174 13.0931\"\n        stroke=\"#F56173\"\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n      />\n    </svg>\n  );\n}\n","import React from 'react';\n\nexport function StreamInIcon() {\n  return (\n    <svg\n      width=\"16\"\n      height=\"17\"\n      viewBox=\"0 0 16 17\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <path\n        d=\"M0.999991 1.84371L8.23523 9.07889M8.23523 9.07889V1.84371M8.23523 9.07889H1.00004\"\n        stroke=\"#2EDDD9\"\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n      />\n      <path\n        d=\"M12.1637 6.27124C13.5911 7.14289 14.5438 8.71524 14.5438 10.5101C14.5438 13.2512 12.3218 15.4733 9.58068 15.4733C7.7858 15.4733 6.21344 14.5205 5.3418 13.0931\"\n        stroke=\"#2EDDD9\"\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n      />\n    </svg>\n  );\n}\n","import React from 'react';\nimport classNames from 'classnames';\nimport { StreamOutIcon } from '../../components/icons/StreamOut';\nimport { StreamInIcon } from '../../components/icons/StreamIn';\nimport { useTokenFormatter } from '../../lib/useTokenFormatter';\n\nexport function StreamingSpeed({\n  stream, direction, className, ...rest\n}) {\n  const tf = useTokenFormatter(stream.ticker);\n  const speedInfo = tf.tokensPerMeaningfulPeriod(stream.tokens_per_tick);\n\n  return (\n    <div\n      className={classNames(\n        'inline-flex items-center whitespace-nowrap',\n        className,\n      )}\n      {...rest}\n    >\n      {direction === 'out' ? (\n        <StreamOutIcon />\n      ) : direction === 'in' ? (\n        <StreamInIcon />\n      ) : (\n        ''\n      )}\n      <span className=\"ml-2\">\n        <span>\n          @\n          {speedInfo.formattedValue}\n        </span>\n        <span>\n          {' '}\n          {stream.ticker}\n          {' '}\n          /\n          {speedInfo.unit}\n        </span>\n      </span>\n    </div>\n  );\n}\n","import React from 'react';\nimport classNames from 'classnames';\nimport {\n  CircularProgressbar,\n  CircularProgressbarWithChildren,\n  buildStyles,\n} from 'react-circular-progressbar';\n\nconst GRADIENT_STOP = [\n  ['#4743FB', '#C750FF'],\n  ['#FFCC69', '#FF8469'],\n];\nconst GRADIENTS = [\n  `linear-gradient(270deg, ${GRADIENT_STOP[0][0]} 0%, ${GRADIENT_STOP[0][1]} 100%)`,\n  `linear-gradient(270deg, ${GRADIENT_STOP[1][0]} 0%, ${GRADIENT_STOP[1][1]} 100%)`,\n];\n\ntype ProgressBarProps = {\n  progresses: never;\n  className: never;\n};\n\nexport function ProgressBar({ progresses, className, ...rest }: ProgressBarProps) {\n  const p = [...progresses];\n  p.sort((a, b) => b - a);\n\n  return (\n    <div\n      className={classNames(\n        'relative h-3 rounded-r-md rounded-l-lg bg-progressBar',\n        className,\n      )}\n      {...rest}\n    >\n      {p.map((progress, i) => (\n        <div\n          key={i} // eslint-disable-line react/no-array-index-key\n          className=\"absolute left-0 h-full rounded-lg\"\n          style={{\n            width: `${progress * 100}%`,\n            background: GRADIENTS[i],\n          }}\n        />\n      ))}\n    </div>\n  );\n}\n\ntype GradientSVGProps = {\n  endColor: string;\n  startColor: string;\n  progressValue?: number;\n  idCSS: string;\n  rotation: number;\n};\n\nfunction GradientSVG({\n  endColor, startColor, progressValue = 0, idCSS, rotation,\n}: GradientSVGProps) {\n  const gradientTransform = `rotate(${rotation})`;\n\n  return (\n    <svg style={{ height: 0 }}>\n      <defs>\n        <linearGradient id={idCSS} gradientTransform={gradientTransform}>\n          <stop offset=\"0%\" stopColor={startColor} />\n          {progressValue > 0 && progressValue < 100 ? (\n            <stop offset={`${progressValue}%\"`} stopColor={endColor} />\n          ) : null}\n          <stop offset=\"100%\" stopColor={endColor} />\n        </linearGradient>\n      </defs>\n    </svg>\n  );\n}\n\ntype ArcProgressBarProps = {\n  progresses: never[];\n  className: never;\n};\n\nexport function ArcProgressBar({ progresses, className, ...rest }: ArcProgressBarProps) {\n  progresses.sort((a, b) => b - a);\n  const rotation = 3 / 4;\n\n  return (\n    <div className={classNames(className)} {...rest}>\n      <CircularProgressbarWithChildren\n        circleRatio={0.5}\n        styles={buildStyles({\n          rotation,\n          pathColor: '#0D0B26',\n          strokeLinecap: 'round',\n        })}\n        value={1}\n        minValue={0}\n        maxValue={1}\n      >\n        {GRADIENT_STOP.map((colors, i) => (\n          <GradientSVG\n            idCSS={`__arcProgressBar_grad_${i}`}\n            rotation={i === 0 ? 90 : 90}\n            startColor={colors[0]}\n            endColor={colors[1]}\n          />\n        ))}\n        {progresses.map((progress, i) => (\n          <CircularProgressbar\n            circleRatio={0.5}\n            className=\"absolute inset-0\"\n            value={progress}\n            styles={buildStyles({\n              rotation,\n              trailColor: 'transparent',\n              pathColor: `url(#__arcProgressBar_grad_${i})`,\n              strokeLinecap: 'round',\n            })}\n            minValue={0}\n            maxValue={1}\n          />\n        ))}\n      </CircularProgressbarWithChildren>\n    </div>\n  );\n}\n","import React from 'react';\nimport { useNear } from '../near-connect/useNear';\n\nconst STREAM_CONTROL_ID_NOT_PROVIDED = new Error(\n  'Provide stream id to use stream methods',\n);\n\nexport function useStreamControl(streamId) {\n  const ensureMethodHasStreamId = () => {\n    if (!streamId) throw STREAM_CONTROL_ID_NOT_PROVIDED;\n  };\n  const near = useNear();\n  const [loading, setLoading] = React.useState(false);\n\n  async function updateAllAndWithdraw({ tokensWithoutStorage = 0 }) {\n    console.debug('updating all account');\n    await near.contractApi.updateAccount({ tokensWithoutStorage });\n    console.debug('update completed');\n  }\n\n  async function enable() {\n    ensureMethodHasStreamId();\n    console.debug('enable', streamId);\n\n    await near.contractApi.changeAutoDeposit({\n      streamId,\n      autoDeposit: true,\n    });\n  }\n\n  async function disable() {\n    ensureMethodHasStreamId();\n    console.debug('disabling', streamId);\n\n    await near.contractApi.changeAutoDeposit({\n      streamId,\n      autoDeposit: false,\n    });\n  }\n\n  async function depositFunc({ token, deposit }) {\n    ensureMethodHasStreamId();\n    console.debug('depositing', token, streamId);\n\n    await near.contractApi.depositStream({\n      token,\n      deposit,\n      streamId,\n    });\n    // token === 'NEAR'\n    //   ? await near.contractApi.depositStream({\n    //       streamId,\n    //       deposit,\n    //     })\n    //   : await near.near.fts[token].ft_transfer_call(\n    //       {\n    //         receiver_id: near.near.contractName,\n    //         amount: deposit,\n    //         memo: 'xyiming transfer',\n    //         msg: streamId,\n    //       },\n    //       '200000000000000',\n    //       1,\n    //     );\n  }\n\n  async function pause() {\n    ensureMethodHasStreamId();\n    console.debug('pausing', streamId);\n    const res = await near.contractApi.pauseStream({\n      streamId,\n    });\n    console.debug('pausing res', res);\n\n    return res;\n  }\n\n  async function restart() {\n    ensureMethodHasStreamId();\n    console.debug('restarting', streamId);\n    const res = await near.contractApi.startStream({ streamId });\n    console.debug('restarting res', res);\n\n    return res;\n  }\n\n  async function stop() {\n    ensureMethodHasStreamId();\n    console.debug('Stop called stopping', streamId);\n    const res = await near.contractApi.stopStream({ streamId });\n    console.debug('stopping res', res);\n    return res;\n  }\n\n  function wrapped(fn) {\n    return async (...args) => {\n      if (loading) return;\n\n      setLoading(true);\n\n      try {\n        await fn(...args);\n      } finally {\n        setLoading(false);\n      }\n    };\n  }\n\n  return {\n    loading,\n    updateAllAndWithdraw: wrapped(updateAllAndWithdraw),\n    pause: wrapped(pause),\n    restart: wrapped(restart),\n    stop: wrapped(stop),\n    deposit: wrapped(depositFunc),\n    enable: wrapped(enable),\n    disable: wrapped(disable),\n  };\n}\n","export const STREAM_STATUS = {\n  INITIALIZED: 'INITIALIZED',\n  ACTIVE: 'ACTIVE',\n  PAUSED: 'PAUSED',\n  FINISHED: 'FINISHED',\n  INTERRUPTED: 'INTERRUPTED',\n};\nexport const STREAM_DIRECTION = {\n  IN: 'in',\n  OUT: 'out',\n};\nexport const STREAM_AUTODEPOSIT_STATUS = {\n  ENABLED: 'enabled',\n  DISABLED: 'disabled',\n};\n\nexport const STREAM_ACTION_TYPE = {\n  INIT: 'Init',\n  DEPOSIT: 'Deposit',\n  START: 'Start',\n  WITHDRAW: 'Withdraw',\n  PAUSE: 'Pause',\n  STOP: 'Stop',\n};\n","import classNames from 'classnames';\nimport { STREAM_STATUS } from './lib';\n\nexport function StreamStatus({ stream, className, ...rest }) {\n  const bindings = {\n    [STREAM_STATUS.INITIALIZED]: {\n      colorClass: 'text-special-active',\n      label: 'Initialized',\n    },\n    [STREAM_STATUS.ACTIVE]: {\n      colorClass: 'text-special-active',\n      label: 'Active',\n    },\n    [STREAM_STATUS.PAUSED]: {\n      colorClass: 'text-special-hold',\n      label: 'Paused',\n    },\n    [STREAM_STATUS.FINISHED]: {\n      colorClass: 'text-special-active',\n      label: 'Finished',\n    },\n    [STREAM_STATUS.INTERRUPTED]: {\n      colorClass: 'text-special-inactive',\n      label: 'Interrupted',\n    },\n  };\n\n  const binding = bindings[stream.status] || {};\n\n  return (\n    <div className={classNames(binding.colorClass, className)} {...rest}>\n      {binding.label}\n    </div>\n  );\n}\n","import React from 'react';\n\nexport function PauseIcon(props) {\n  return (\n    <svg\n      width=\"11\"\n      height=\"11\"\n      viewBox=\"0 0 11 11\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path\n        d=\"M2.42963 2.28638V8.60681\"\n        stroke=\"#FFAB6A\"\n        strokeWidth=\"3\"\n        strokeLinecap=\"round\"\n      />\n      <path\n        d=\"M8.76996 2.28638V8.60681\"\n        stroke=\"#FFAB6A\"\n        strokeWidth=\"3\"\n        strokeLinecap=\"round\"\n      />\n    </svg>\n  );\n}\n","import React from 'react';\n\nexport function StartIcon(props) {\n  return (\n    <svg\n      width=\"8\"\n      height=\"8\"\n      viewBox=\"0 0 8 8\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path\n        d=\"M7.17026 3.36901C7.72501 3.6893 7.72501 4.49002 7.17026 4.81031L2.10367 7.7355C1.54891 8.05579 0.855469 7.65543 0.855469 7.01486L0.85547 1.16446C0.85547 0.523887 1.54891 0.123526 2.10367 0.443814L7.17026 3.36901Z\"\n        fill=\"#2EDDD9\"\n      />\n    </svg>\n  );\n}\n","import React from 'react';\n\nexport function StopIcon(props) {\n  return (\n    <svg\n      width=\"11\"\n      height=\"11\"\n      viewBox=\"0 0 11 11\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <rect\n        x=\"0.429626\"\n        y=\"0.930298\"\n        width=\"9.58382\"\n        height=\"9.58382\"\n        rx=\"2\"\n        fill=\"#F56173\"\n      />\n    </svg>\n  );\n}\n","import React, { useState } from 'react';\nimport classNames from 'classnames';\nimport Modal from 'react-modal';\nimport { useStreamControl } from './useStreamControl';\nimport { useNear } from '../near-connect/useNear';\nimport { DropdownOpener } from '../../components/kit/DropdownOpener';\nimport { DropdownMenu, DropdownMenuDivider, DropdownMenuItem } from '../../components/kit/DropdownMenu';\nimport { Button } from '../../components/kit/Button';\nimport { StreamStatus } from './StreamStatus';\nimport { STREAM_STATUS } from './lib';\nimport { useBool } from '../../lib/useBool';\nimport { PauseIcon } from '../../components/icons/Pause';\nimport { StartIcon } from '../../components/icons/Start';\nimport { StopIcon } from '../../components/icons/Stop';\n\nfunction PauseConfirmModal({ modalControl, onConfirm }) {\n  return (\n    <Modal\n      isOpen={modalControl.on}\n      onRequestClose={modalControl.turnOff}\n      className=\"ModalContent\"\n      overlayClassName=\"ModalOverlay\"\n    >\n      <h2 className=\"text-2xl mb-4\">Are you sure?</h2>\n      <p className=\"mb-6\">\n        As a stream receiver, you will not be able to resume stream. Only stream\n        owners can resume streams\n      </p>\n      <Button\n        className=\"w-full\"\n        variant=\"filled\"\n        type=\"button\"\n        onClick={() => {\n          modalControl.turnOff();\n          onConfirm();\n        }}\n      >\n        Yes, I want to pause stream.\n      </Button>\n    </Modal>\n  );\n}\nexport function StreamControls({ stream, minimal, className }) {\n  const near = useNear();\n  const modalControl = useBool(false);\n\n  const isOutgoing = near.near.accountId === stream.owner_id;\n  const isIncoming = near.near.accountId === stream.receiver_id;\n  const isExternalStream = !isOutgoing && !isIncoming;\n\n  const isDead = stream.status === STREAM_STATUS.INTERRUPTED\n    || stream.status === STREAM_STATUS.FINISHED;\n  const [menuOpened, setMenuOpened] = useState(false);\n\n  const controls = useStreamControl(stream.id);\n\n  if (isDead || isExternalStream) {\n    return (\n      <StreamStatus\n        className={classNames(\n          minimal ? '' : 'border border-border p-4 px-6 rounded-lg',\n          className,\n        )}\n        stream={stream}\n      />\n    );\n  }\n\n  function onClickPause() {\n    if (isIncoming) {\n      modalControl.turnOn();\n    } else {\n      controls.pause();\n    }\n  }\n\n  const opened = menuOpened && !controls.loading;\n\n  return (\n    <div className={classNames(className, 'relative inline-flex')}>\n      <PauseConfirmModal\n        modalControl={modalControl}\n        onConfirm={controls.pause}\n      />\n      <DropdownOpener\n        minimal={minimal}\n        opened={opened}\n        onChange={setMenuOpened}\n      >\n        {controls.loading ? 'Loading...' : <StreamStatus stream={stream} />}\n      </DropdownOpener>\n      <DropdownMenu\n        onClose={() => setMenuOpened(false)}\n        opened={opened}\n        className=\"top-full w-44\"\n      >\n        {stream.status !== STREAM_STATUS.ACTIVE && isOutgoing ? (\n          <>\n            <DropdownMenuItem>\n              <button\n                type=\"button\"\n                className=\"inline-flex items-center font-semibold\"\n                onClick={controls.restart}\n              >\n                <StartIcon className=\"mr-4 flex-shrink-0\" />\n                <span>Start stream </span>\n                {' '}\n              </button>\n            </DropdownMenuItem>\n            <DropdownMenuDivider />\n          </>\n        ) : null}\n        {stream.status !== STREAM_STATUS.PAUSED ? (\n          <>\n            <DropdownMenuItem>\n              <button\n                type=\"button\"\n                className=\"inline-flex items-center font-semibold\"\n                onClick={onClickPause}\n              >\n                <PauseIcon className=\"mr-4 flex-shrink-0\" />\n                <span>Pause stream</span>\n              </button>\n            </DropdownMenuItem>\n            <DropdownMenuDivider />\n          </>\n        ) : null}\n\n        <DropdownMenuItem>\n          <button\n            type=\"button\"\n            className=\"inline-flex items-center font-semibold\"\n            onClick={controls.stop}\n          >\n            <StopIcon className=\"mr-4 flex-shrink-0\" />\n            <span> Stop stream </span>\n          </button>\n        </DropdownMenuItem>\n      </DropdownMenu>\n    </div>\n  );\n}\n","import classNames from 'classnames';\nimport { STREAM_AUTODEPOSIT_STATUS } from './lib';\n\nexport function StreamAutodepositStatus({\n  stream,\n  className,\n  disableMsg,\n  enableMsg,\n  ...rest\n}) {\n  const bindings = {\n    [STREAM_AUTODEPOSIT_STATUS.ENABLED]: {\n      colorClass: 'text-special-hold',\n      label: disableMsg || 'Enabled',\n    },\n    [STREAM_AUTODEPOSIT_STATUS.DISABLED]: {\n      colorClass: 'text-special-active',\n      label: enableMsg || 'Disabled',\n    },\n  };\n\n  const status = stream.is_auto_deposit_enabled ? 'enabled' : 'disabled';\n  const binding = bindings[status] || {};\n\n  return (\n    <div className={classNames(binding.colorClass, className)} {...rest}>\n      {binding.label}\n    </div>\n  );\n}\n","import React from 'react';\n\nexport function PlusIcon(props) {\n  return (\n    <svg\n      width=\"13\"\n      height=\"13\"\n      viewBox=\"0 0 13 13\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <path\n        d=\"M6.62713 1.5929L6.62709 6.50002M6.62705 11.4071L6.62709 6.50002M6.62709 6.50002L11.5342 6.50002M6.62709 6.50002L1.72001 6.50002\"\n        stroke=\"currentColor\"\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n      />\n    </svg>\n  );\n}\n","import React from 'react';\n\nexport function PlusGradientIcon(props) {\n  return (\n    <svg\n      width=\"30\"\n      height=\"30\"\n      viewBox=\"0 0 30 30\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <circle cx=\"14.5566\" cy=\"14.7314\" r=\"14.5\" fill=\"url(#paint0_linear)\" />\n      <path\n        d=\"M14.7506 10.7635L14.7506 14.7314M14.7506 18.6993L14.7506 14.7314M14.7506 14.7314L18.7185 14.7314M14.7506 14.7314L10.7827 14.7314\"\n        stroke=\"#1F1D37\"\n        strokeWidth=\"2.5\"\n        strokeLinecap=\"round\"\n      />\n      <defs>\n        <linearGradient\n          id=\"paint0_linear\"\n          x1=\"-2.34261\"\n          y1=\"7.84647\"\n          x2=\"34.6054\"\n          y2=\"32.139\"\n          gradientUnits=\"userSpaceOnUse\"\n        >\n          <stop stopColor=\"#FF856A\" />\n          <stop offset=\"1\" stopColor=\"#FFCD6A\" />\n        </linearGradient>\n      </defs>\n    </svg>\n  );\n}\n","import { STREAM_STATUS } from '../stream-control/lib';\n\nexport function streamDirection({ stream, account }) {\n  if (!account) return '';\n\n  if (stream.owner_id === account.account_id) {\n    return 'out';\n  } if (stream.receiver_id === account.account_id) {\n    return 'in';\n  }\n  return '';\n}\n\nexport function isIdling(stream) {\n  return (\n    stream.status === STREAM_STATUS.INITIALIZED\n    || stream.status === STREAM_STATUS.PAUSED\n  );\n}\n\nexport function isDead(stream) {\n  return (\n    stream.status === STREAM_STATUS.FINISHED\n    || stream.status === STREAM_STATUS.INTERRUPTED\n  );\n}\n\nexport function isFundable(stream) {\n  return stream.available_to_withdraw !== stream.balance;\n}\n","import React, { useState } from 'react';\nimport Modal from 'react-modal';\nimport { Button } from '../../components/kit/Button';\nimport { Input } from '../../components/kit/Input';\nimport { useStreamControl } from './useStreamControl';\nimport { useBool } from '../../lib/useBool';\nimport { PlusIcon } from '../../components/icons/Plus';\nimport { PlusGradientIcon } from '../../components/icons/PlusGradient';\nimport { isFundable } from '../stream-view/lib';\nimport { useTokenFormatter } from '../../lib/useTokenFormatter';\n\nfunction useDepositButton({ stream }) {\n  const controls = useStreamControl(stream.id);\n  const [deposit, setDeposit] = useState('');\n  const tf = useTokenFormatter(stream.ticker);\n  const modalControl = useBool(false);\n  const isDisabled = !isFundable(stream);\n\n  const modal = (\n    <Modal\n      isOpen={modalControl.on}\n      onRequestClose={modalControl.turnOff}\n      className=\"ModalContent\"\n      overlayClassName=\"ModalOverlay\"\n    >\n      <h2 className=\"text-2xl mb-6\">Amount to deposit</h2>\n      <Input className=\"mb-4\">\n        <input\n          placeholder={`0.00 ${stream.ticker}`}\n          className=\"text-black\"\n          value={deposit}\n          onChange={(e) => setDeposit(e.target.value)}\n        />\n      </Input>\n\n      <Button\n        className=\"w-full\"\n        variant=\"filled\"\n        type=\"button\"\n        onClick={() => controls.deposit({\n          token: stream.ticker,\n          deposit: tf.toInt(deposit),\n        })}\n      >\n        Add funds\n      </Button>\n    </Modal>\n  );\n\n  return {\n    isDisabled,\n    modal,\n    modalControl,\n  };\n}\n\nexport function StreamDepositButton({ stream, className }) {\n  const depositButton = useDepositButton({ stream });\n\n  return (\n    <>\n      <Button\n        variant=\"filled\"\n        type=\"button\"\n        onClick={depositButton.modalControl.turnOn}\n        disabled={depositButton.isDisabled}\n        className={className}\n      >\n        <PlusIcon className=\"mr-2\" />\n        Add funds\n      </Button>\n\n      {depositButton.modal}\n    </>\n  );\n}\n\nexport function StreamDepositButtonOutlined({ stream, variant = 'filled' }) {\n  const depositButton = useDepositButton({ stream });\n\n  return (\n    <>\n      <Button\n        disabled={depositButton.isDisabled}\n        variant={variant}\n        color=\"dark\"\n        type=\"button\"\n        onClick={depositButton.modalControl.turnOn}\n      >\n        <PlusGradientIcon className=\"mr-2\" />\n        Add funds\n      </Button>\n      {depositButton.modal}\n    </>\n  );\n}\n","import React from 'react';\nimport classNames from 'classnames';\nimport { useStreamControl } from './useStreamControl';\nimport { useNear } from '../near-connect/useNear';\nimport { DropdownOpener } from '../../components/kit/DropdownOpener';\nimport { DropdownMenu, DropdownMenuItem } from '../../components/kit/DropdownMenu';\nimport { StreamAutodepositStatus } from './StreamAutodepositStatus';\nimport { STREAM_STATUS } from './lib';\nimport { useBool } from '../../lib/useBool';\nimport { PauseIcon } from '../../components/icons/Pause';\nimport { StartIcon } from '../../components/icons/Start';\n\nexport function StreamAutodepositControls({\n  stream,\n  minimal,\n  className,\n  disableMsg,\n  enableMsg,\n}) {\n  const near = useNear();\n  const isOutgoing = near.near.accountId === stream.owner_id;\n  const isIncoming = near.near.accountId === stream.receiver_id;\n  const isExternalStream = !isOutgoing && !isIncoming;\n\n  const isDead = stream.status === STREAM_STATUS.INTERRUPTED\n    || stream.status === STREAM_STATUS.FINISHED;\n  const controls = useStreamControl(stream.id);\n  const menu = useBool(false);\n  const opened = menu.on && !controls.loading;\n\n  if (isDead || isExternalStream) {\n    return (\n      <StreamAutodepositStatus\n        stream={stream}\n        enableMsg={enableMsg}\n        disableMsg={disableMsg}\n      />\n    );\n  }\n\n  return (\n    <div className={classNames(className, 'relative inline-flex')}>\n      <DropdownOpener\n        minimal={minimal}\n        opened={opened}\n        onChange={menu.setOn}\n        className=\"flex-grow\"\n      >\n        <StreamAutodepositStatus\n          stream={stream}\n          enableMsg={enableMsg}\n          disableMsg={disableMsg}\n        />\n      </DropdownOpener>\n      <DropdownMenu\n        opened={opened}\n        className=\"top-full w-44\"\n        onClose={menu.turnOff}\n      >\n        {stream.is_auto_deposit_enabled ? (\n          <DropdownMenuItem>\n            <button\n              type=\"button\"\n              className=\"inline-flex items-center font-semibold w-full\"\n              onClick={controls.disable}\n            >\n              <PauseIcon className=\"mr-4 flex-shrink-0\" />\n              <span>Disable</span>\n            </button>\n          </DropdownMenuItem>\n        ) : (\n          <DropdownMenuItem>\n            <button\n              type=\"button\"\n              className=\"inline-flex items-center font-semibold w-full\"\n              onClick={controls.enable}\n            >\n              <StartIcon className=\"mr-4 flex-shrink-0\" />\n              <span>Enable</span>\n            </button>\n          </DropdownMenuItem>\n        )}\n      </DropdownMenu>\n    </div>\n  );\n}\n","export const formatDistanceLocale = {\n  xYears: '{{count}} years',\n  xMonths: '{{count}} months',\n  xDays: '{{count}}d',\n  xSeconds: '{{count}}s',\n  xMinutes: '{{count}}m',\n  xHours: '{{count}}h',\n};\n\nexport const shortEnLocale = {\n  formatDistance: (token, count) => formatDistanceLocale[token].replace('{{count}}', count),\n};\n\nexport function isValidDate(d) {\n  return d instanceof Date && !Number.isNaN(d);\n}\n","import React, { useEffect, useState } from 'react';\nimport { intervalToDuration, formatDuration } from 'date-fns';\nimport { shortEnLocale, isValidDate } from '../lib/date';\n\nexport function useDurationTimer({ untilTimestamp }) {\n  const untilDate = new Date(untilTimestamp);\n  const dateValid = isValidDate(untilDate);\n\n  const [expired, setExpired] = useState(\n    dateValid ? new Date().getTime() > untilDate.getTime() : true,\n  );\n  const [duration, setDuration] = useState(\n    expired ? null : intervalToDuration({ start: new Date(), end: untilDate }),\n  );\n\n  useEffect(() => {\n    const untilDateValue = new Date(untilTimestamp);\n\n    if (!isValidDate(untilDateValue)) return;\n\n    const id = setInterval(() => {\n      const isExpired = new Date().getTime() > untilDateValue.getTime();\n      setExpired(isExpired);\n      setDuration(null);\n\n      if (isExpired) {\n        return;\n      }\n\n      const newDurationValue = intervalToDuration({ start: new Date(), end: untilDateValue });\n      setDuration(newDurationValue);\n    }, 1000);\n\n    return () => clearInterval(id);\n  }, [untilTimestamp, expired]);\n\n  return {\n    duration,\n    dateValid,\n    expired,\n  };\n}\n\nexport function DurationTimer({ untilTimestamp, suffix, finishedText }) {\n  const { duration, dateValid, expired } = useDurationTimer({\n    untilTimestamp,\n  });\n\n  if (!dateValid) {\n    return <span>Invalid Date</span>;\n  }\n\n  if (!duration || expired) {\n    return <span>{finishedText}</span>;\n  }\n\n  if (duration.days || duration.weeks || duration.months || duration.years) {\n    duration.seconds = 0;\n  }\n\n  const formatted = formatDuration(duration, {\n    locale: shortEnLocale,\n  }) + (suffix || '');\n\n  return <span>{formatted}</span>;\n}\n","import { isDead, isFundable } from './lib';\n\nexport function streamViewData(stream, tokenFormatter) {\n  const tf = tokenFormatter;\n\n  // public link\n  const link = `${window.location.origin}/#/streams/${stream.id}`;\n\n  // time left calculations\n  const secondsLeft = tf.ticksToMs(\n    Math.round(\n      (stream.balance - stream.available_to_withdraw) / stream.tokens_per_tick,\n    ),\n  );\n\n  const dateEnd = new Date(new Date().getTime() + secondsLeft);\n  const timestampEnd = dateEnd.getTime();\n\n  // progress bar calculations\n  const full = Number(stream.balance) + Number(stream.tokens_total_withdrawn);\n  const withdrawn = Number(stream.tokens_total_withdrawn);\n  const streamed = Number(stream.tokens_total_withdrawn)\n    + Number(stream.available_to_withdraw);\n  const available = Number(stream.available_to_withdraw);\n\n  const left = full - streamed;\n  const progresses = [withdrawn / full, streamed / full];\n\n  const percentages = {\n    left: (full - streamed) / full,\n    streamed: streamed / full,\n    withdrawn: withdrawn / full,\n    available: available / full,\n  };\n\n  return {\n    dateEnd,\n    progresses,\n    tf,\n    isDead: isDead(stream),\n    isFundable: isFundable(stream),\n    percentages,\n    link,\n    timestampEnd,\n    secondsLeft,\n    progress: {\n      full,\n      withdrawn,\n      streamed,\n      left,\n      available,\n    },\n  };\n}\n","import React from 'react';\n\nexport function LinkIcon(props) {\n  return (\n    <svg\n      width=\"20\"\n      height=\"21\"\n      viewBox=\"0 0 20 21\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      {...props}\n    >\n      <g clipPath=\"url(#clip0)\">\n        <path\n          d=\"M8.31055 11.6724C8.66342 12.1442 9.11362 12.5345 9.63062 12.817C10.1476 13.0994 10.7193 13.2674 11.3069 13.3095C11.8945 13.3516 12.4843 13.2668 13.0363 13.0609C13.5883 12.855 14.0895 12.5328 14.506 12.1161L16.9711 9.65109C17.7194 8.87624 18.1335 7.83845 18.1242 6.76124C18.1148 5.68403 17.6827 4.65359 16.921 3.89186C16.1593 3.13013 15.1288 2.69805 14.0516 2.68869C12.9744 2.67933 11.9366 3.09344 11.1618 3.84181L9.74849 5.24689\"\n          stroke=\"currentColor\"\n          strokeWidth=\"1.64336\"\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n        />\n        <path\n          d=\"M11.5972 10.0291C11.2444 9.55731 10.7942 9.16697 10.2772 8.88451C9.76017 8.60205 9.18847 8.43408 8.60085 8.392C8.01323 8.34991 7.42344 8.4347 6.87147 8.6406C6.3195 8.8465 5.81826 9.1687 5.40176 9.58535L2.93672 12.0504C2.18835 12.8252 1.77424 13.863 1.7836 14.9402C1.79296 16.0175 2.22504 17.0479 2.98677 17.8096C3.7485 18.5714 4.77894 19.0034 5.85615 19.0128C6.93336 19.0222 7.97115 18.608 8.746 17.8597L10.1511 16.4546\"\n          stroke=\"currentColor\"\n          strokeWidth=\"1.64336\"\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n        />\n      </g>\n      <defs>\n        <clipPath id=\"clip0\">\n          <rect\n            width=\"19.7203\"\n            height=\"19.7203\"\n            fill=\"white\"\n            transform=\"translate(0.09375 0.990601)\"\n          />\n        </clipPath>\n      </defs>\n    </svg>\n  );\n}\n","import React from 'react';\nimport classNames from 'classnames';\n\ntype BulletProps = {\n  className: never;\n};\n\nexport function Bullet({ className, ...rest }: BulletProps) {\n  return (\n    <div\n      className={classNames(\n        'inline-block w-2 h-2 flex-shrink-9 rounded-full',\n        className,\n      )}\n      {...rest}\n    />\n  );\n}\n","import numbro from 'numbro';\nimport classNames from 'classnames';\nimport { Bullet } from '../../components/kit/Bullet';\n\nexport function StreamProgressPercentage({\n  label,\n  formattedFloatValue,\n  percentageValue,\n  colorClass,\n  className,\n  ...rest\n}) {\n  return (\n    <div className={className} {...rest}>\n      <Bullet className={classNames(colorClass, 'mr-1')} />\n      <span>\n        {label}\n        :\n        <span className=\"font-semibold\">\n          {formattedFloatValue}\n          {' '}\n        </span>\n        <span className=\"text-gray\">\n          {' '}\n          (\n          {numbro(percentageValue).format({\n            output: 'percent',\n            mantissa: 1,\n          })}\n          )\n        </span>\n      </span>\n    </div>\n  );\n}\n","import classNames from 'classnames';\nimport React from 'react';\nimport copy from 'clipboard-copy';\nimport { Link } from 'react-router-dom';\n\nimport { formatDuration, intervalToDuration } from 'date-fns';\nimport { StreamingSpeed } from './StreamingSpeed';\nimport { ProgressBar } from '../../components/kit/ProgressBar';\nimport { Button } from '../../components/kit/Button';\nimport { TokenImage } from '../../components/kit/TokenImage';\nimport {\n  StreamControls,\n  StreamAutodepositControls,\n  StreamDepositButton,\n} from '../stream-control';\nimport { DurationTimer } from '../../components/DurationTimer';\nimport { routes } from '../../lib/routing';\nimport { streamViewData } from './streamViewData';\nimport { LinkIcon } from '../../components/icons/Link';\nimport { StreamProgressPercentage } from './StreamProgressPercentage';\nimport { isIdling } from './lib';\nimport { useTokenFormatter } from '../../lib/useTokenFormatter';\nimport { shortEnLocale } from '../../lib/date';\n\nconst streamType = {\n  id: '51ofCnrPfZ8WA4NWJAnGYvNM1yqDfsVQqpaoxkYz3aZE',\n  description: 'qweqweqwe',\n  owner_id: 'ggoshanov.testnet',\n  receiver_id: 'sdf.testnet',\n  ticker: 'NEAR',\n  timestamp_created: '1633966709524321545',\n  balance: '1990000000000000000000000',\n  tokens_per_tick: '33333333333333',\n  is_auto_deposit_enabled: true,\n  status: 'ACTIVE',\n  tokens_total_withdrawn: '0',\n  available_to_withdraw: '1990000000000000000000000',\n  history_len: 4,\n  direction: 'out',\n};\n\nexport function StreamCard({ stream = streamType, direction, className }) {\n  const tf = useTokenFormatter(stream.ticker);\n\n  const {\n    dateEnd,\n    progresses,\n    timestampEnd,\n    percentages,\n    progress: { full, withdrawn, streamed },\n    link,\n  } = streamViewData(stream, tf);\n\n  const duration = intervalToDuration({\n    start: new Date(),\n    end: dateEnd,\n  });\n  const timeLeft = formatDuration(duration, {\n    locale: shortEnLocale,\n  });\n\n  return (\n    <div\n      className={classNames(\n        'grid grid-cols-12 gap-6 justify-items-center',\n        'p-10 bg-input rounded-3xl',\n        className,\n      )}\n    >\n      <Link\n        to={routes.stream(stream.id)}\n        className=\"w-full col-span-12 xl:col-span-6 justify-self-start\"\n      >\n        <div className=\"flex items-center\">\n          <TokenImage tokenName={stream.ticker} className=\"mr-4\" />\n          <div className=\"w-full gap-4 flex items-end flex-wrap\">\n            <div className=\"text-2xl whitespace-nowrap flex-shrink-0\">\n              {tf.amount(streamed)}\n              {' '}\n              of\n              {tf.amount(full)}\n              {' '}\n              <span className=\"uppercase\">{stream.ticker}</span>\n            </div>\n\n            <StreamingSpeed stream={stream} direction={direction} />\n\n            <div className=\"whitespace-nowrap\">\n              {isIdling(stream) ? (\n                timeLeft\n              ) : (\n                <DurationTimer\n                  untilTimestamp={timestampEnd}\n                  suffix=\" remaining\"\n                />\n              )}\n            </div>\n          </div>\n        </div>\n        <ProgressBar className=\"mt-5\" progresses={progresses} />\n        <div className=\"flex text-sm mt-3 mr-3\">\n          <StreamProgressPercentage\n            className=\"mr-4\"\n            label=\"Withdrawn\"\n            colorClass=\"bg-streams-withdrawn\"\n            formattedFloatValue={`${tf.amount(withdrawn)} ${stream.ticker}`}\n            percentageValue={percentages.withdrawn}\n          />\n          <StreamProgressPercentage\n            label=\"Streamed\"\n            colorClass=\"bg-streams-streamed\"\n            formattedFloatValue={`${tf.amount(streamed)} ${stream.ticker}`}\n            percentageValue={percentages.streamed}\n          />\n        </div>\n      </Link>\n      <div className=\"hidden xl:block\" />\n      <div className=\"flex gap-5 justify-between xl:justify-end col-span-12 xl:col-span-5 w-full items-center flex-wrap md:flex-nowrap\">\n        {direction === 'in' ? (\n          <div className=\"w-44\">\n            <div className=\"text-gray\">Sender:</div>\n            <div className=\"break-words\">{stream.owner_id}</div>\n          </div>\n        ) : (\n          <div className=\"w-44\">\n            <div className=\"text-gray\">Receiver:</div>\n            <div className=\"break-words\">{stream.receiver_id}</div>\n          </div>\n        )}\n        <div className=\"w-24\">\n          <div className=\"text-gray\">Status:</div>\n          <StreamControls className=\"w-full\" minimal stream={stream} />\n        </div>\n        {direction === 'out' ? (\n          <div className=\"col-span-1 mr-4\">\n            <div className=\"text-gray\">Auto&#8209;dep:</div>\n            <StreamAutodepositControls minimal stream={stream} />\n          </div>\n        ) : null}\n        <div className=\"flex items-start justify-end w-52\">\n          {direction === 'out' ? (\n            <StreamDepositButton className=\"flex-grow\" stream={stream} />\n          ) : null}\n          <Button\n            type=\"button\"\n            className=\"ml-3\"\n            variant=\"filled\"\n            onClick={() => copy(link)}\n            to={routes.stream(stream.id)}\n          >\n            <LinkIcon />\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\n\nexport function CopyIcon() {\n  return (\n    <svg\n      width=\"17\"\n      height=\"16\"\n      viewBox=\"0 0 17 16\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <path\n        d=\"M12.1884 4.70767H13.2423C14.6173 4.70767 15.7319 5.82227 15.7319 7.1972V12.6244C15.7319 13.9994 14.6173 15.114 13.2423 15.114H7.81509C6.44016 15.114 5.32556 13.9994 5.32556 12.6244V11.5705\"\n        stroke=\"currentColor\"\n        strokeWidth=\"1.65968\"\n      />\n      <rect\n        x=\"1.46289\"\n        y=\"1.3735\"\n        width=\"10.4063\"\n        height=\"10.4063\"\n        rx=\"2.48952\"\n        stroke=\"currentColor\"\n        strokeWidth=\"1.65968\"\n      />\n    </svg>\n  );\n}\n","import React from 'react';\nimport classNames from 'classnames';\nimport { format, formatDuration, intervalToDuration } from 'date-fns';\nimport numbro from 'numbro';\nimport copy from 'clipboard-copy';\nimport { isIdling, streamDirection } from './lib';\nimport { StreamingSpeed } from './StreamingSpeed';\nimport { streamViewData } from './streamViewData';\nimport { DurationTimer } from '../../components/DurationTimer';\nimport { CopyIcon } from '../../components/icons/Copy';\nimport { useNear } from '../near-connect/useNear';\nimport { useTokenFormatter } from '../../lib/useTokenFormatter';\nimport { shortEnLocale } from '../../lib/date';\n\nconst streamType = {\n  stream_id: 'FnVkAYZu4XED3o44pZPvrnghVEMxo3GiHszUT4orjYST',\n  description: 'test stream',\n  owner_id: 'kpr.testnet',\n  receiver_id: 'pinkinice.testnet',\n  token_name: 'NEAR',\n  timestamp_created: '1630964802206727665',\n  balance: '3472735225910300000000000',\n  tokens_per_tick: '100000000000',\n  auto_deposit_enabled: false,\n  status: 'ACTIVE',\n  tokens_total_withdrawn: '27264774089700000000000',\n  available_to_withdraw: '3472735225910300000000000',\n  history: [\n    {\n      actor: 'dev-1630964633889-96006156236045',\n      action_type: 'Deposit',\n      amount: '3500000000000000000000000',\n      timestamp: '1630964802206727665',\n    },\n  ],\n  direction: 'in',\n};\n\nfunction VerticalData({ label, children, ...rest }) {\n  return (\n    <div {...rest}>\n      <div className=\"text-gray text-sm\">{label}</div>\n      <div className=\"font-semibold text-lg break-words select-all\">\n        {children}\n      </div>\n    </div>\n  );\n}\n\nfunction HorizontalData({\n  label, children, className, ...rest\n}) {\n  return (\n    <div className={classNames('flex justify-between my-3', className)} {...rest}>\n      <div className=\"text-gray text-sm\">{label}</div>\n      <div className=\"text-sm text-right\">{children}</div>\n    </div>\n  );\n}\n\nexport function StreamOverviewCard({\n  stream = streamType,\n  account,\n  className,\n  ...rest\n}) {\n  const near = useNear();\n  const tf = useTokenFormatter(stream.ticker);\n  const {\n    dateEnd,\n    percentages,\n    timestampEnd,\n    progress: {\n      full, streamed, left, available,\n    },\n  } = streamViewData(stream, tf);\n\n  const duration = intervalToDuration({\n    start: new Date(),\n    end: dateEnd,\n  });\n  const timeLeft = formatDuration(duration, {\n    locale: shortEnLocale,\n  });\n  const direction = streamDirection({\n    stream,\n    account,\n  });\n\n  return (\n    <div\n      className={classNames('pt-10 p-9 bg-input rounded-3xl', className)}\n      {...rest}\n    >\n      <div className=\"flex text-center justify-between\">\n        {direction === 'in' ? (\n          <VerticalData label=\"Sender:\" className=\"w-1/2 mr-4\">\n            {stream.owner_id}\n          </VerticalData>\n        ) : (\n          <VerticalData label=\"Receiver:\" className=\"w-1/2 mr-4\">\n            {stream.receiver_id}\n          </VerticalData>\n        )}\n\n        <VerticalData label=\"Time Remaining:\" className=\"w-1/2\">\n          {isIdling(stream) ? (\n            timeLeft\n          ) : (\n            <DurationTimer\n              untilTimestamp={timestampEnd}\n              finishedText=\"Finished\"\n            />\n          )}\n        </VerticalData>\n      </div>\n      <div className=\"border-t border-border mt-8 mb-9\" />\n      <HorizontalData label=\"Stream Created:\">\n        {format(new Date(stream.timestamp_created / 1000000), 'Yo MMM do')}\n      </HorizontalData>\n      <HorizontalData label=\"Token:\">{stream.ticker}</HorizontalData>\n      <HorizontalData label=\"Total:\">\n        {tf.amount(full)}\n        {' '}\n        {stream.ticker}\n      </HorizontalData>\n      <HorizontalData label=\"Tokens Transferred:\">\n        <span>\n          {tf.amount(streamed)}\n          {' '}\n          {stream.ticker}\n          {' '}\n          <span className=\"text-gray\">\n            (\n            {numbro(percentages.streamed).format({\n              output: 'percent',\n              mantissa: 2,\n            })}\n            )\n          </span>\n        </span>\n      </HorizontalData>\n      <HorizontalData label=\"Tokens Left:\">\n        <span>\n          {tf.amount(left)}\n          {' '}\n          {stream.ticker}\n          {' '}\n          <span className=\"text-gray\">\n            (\n            {numbro(percentages.left).format({\n              output: 'percent',\n              mantissa: 2,\n            })}\n            )\n          </span>\n        </span>\n      </HorizontalData>\n      <HorizontalData label=\"Tokens Available:\">\n        {tf.amount(available)}\n        {' '}\n        {stream.ticker}\n      </HorizontalData>\n      <HorizontalData label=\"Stream update & withdrawal fee:\">\n        {tf.amount(\n          (stream.available_to_withdraw\n            * near.roketo.tokenMeta(stream.ticker).commission_percentage)\n            / 100,\n        )}\n        {' '}\n        {stream.ticker}\n        {' '}\n        <span className=\"text-gray\">\n          (\n          {numbro(\n            near.roketo.tokenMeta(stream.ticker).commission_percentage / 100,\n          ).format({\n            output: 'percent',\n            mantissa: 2,\n          })}\n          )\n        </span>\n      </HorizontalData>\n      <HorizontalData label=\"Speed:\">\n        <StreamingSpeed stream={stream} direction={null} />\n      </HorizontalData>\n\n      {direction === 'in' ? (\n        <HorizontalData label=\"Latest Withdrawal:\">\n          {format(new Date(account.last_action / 1000000), 'MMM dd, Yo  H:m')}\n        </HorizontalData>\n      ) : (\n        ''\n      )}\n      <HorizontalData label=\"Auto-deposit:\">\n        {stream.is_auto_deposit_enabled ? 'Enabled' : 'Disabled'}\n      </HorizontalData>\n\n      <HorizontalData label=\"Stream ID:\">\n        <div className=\"inline-block w-24 overflow-ellipsis overflow-hidden\">\n          {stream.id}\n        </div>\n        <button\n          type=\"button\"\n          onClick={() => copy(stream.id)}\n          className=\"hover:text-blue\"\n        >\n          <CopyIcon />\n        </button>\n      </HorizontalData>\n    </div>\n  );\n}\n","import { STREAM_DIRECTION } from '../stream-control/lib';\n\nexport function identifyStreamsDirection(streams, accountId) {\n  return streams.map((stream) => ({\n    ...stream,\n    direction:\n        stream.owner_id === accountId\n          ? STREAM_DIRECTION.OUT\n          : stream.receiver_id === accountId\n            ? STREAM_DIRECTION.IN\n            : null,\n  }));\n}\n","import React, { useState } from 'react';\nimport useSWR from 'swr';\nimport { STREAM_DIRECTION, STREAM_STATUS } from '../stream-control/lib';\nimport { identifyStreamsDirection } from './lib';\n\nasync function fetchStream({ streamId }, { near }) {\n  const stream = await near.contractApi.getStream({ streamId });\n\n  return stream;\n}\n\nasync function fetchStreamHistory({ streamId, from, to }, { near }) {\n  const streamHistory = await near.contractApi.getStreamHistory({\n    streamId,\n    from,\n    to,\n  });\n\n  return streamHistory;\n}\n\nasync function fetchStreams(streams, { near }) {\n  const fetchedStreams = await Promise.all(\n    streams.map((streamId) => near.contractApi.getStream({ streamId })),\n  );\n\n  const identified = identifyStreamsDirection(\n    fetchedStreams,\n    near.near.account.accountId,\n  );\n\n  return {\n    inputs: identified.filter((s) => s.direction === STREAM_DIRECTION.IN),\n    outputs: identified.filter((s) => s.direction === STREAM_DIRECTION.OUT),\n  };\n}\n\nexport function useAccount({ near }) {\n  const swr = useSWR(\n    ['account', near.near.accountId],\n    near.contractApi.getCurrentAccount,\n    {\n      errorRetryInterval: 250,\n    },\n  );\n\n  return swr;\n}\n\nexport function useStreams({ near, accountSWR }) {\n  const account = accountSWR.data;\n  const swr = useSWR(\n    () => {\n      const key = account\n        ? ['streams', account.account_id, account.last_action]\n        : false;\n\n      return key;\n    },\n    () => fetchStreams(\n      [\n        ...account.dynamic_inputs,\n        ...account.dynamic_outputs,\n        ...account.static_streams,\n      ],\n      {\n        near,\n      },\n    ),\n  );\n\n  return swr;\n}\n\nexport function useSingleStream({ streamId }, { near, accountSWR }) {\n  const account = accountSWR.data;\n  const swr = useSWR(\n    () => {\n      const key = account\n        ? ['stream', streamId, account.id, account.last_action]\n        : false;\n      return key;\n    },\n    async () => {\n      const stream = await fetchStream(\n        { streamId },\n        {\n          near,\n        },\n      );\n\n      return stream;\n    },\n    {\n      errorRetryInterval: 2000,\n      errorRetryCount: 3,\n    },\n  );\n\n  const stream = swr.data || {};\n\n  const isCompleted = stream.balance === stream.available_to_withdraw;\n\n  React.useEffect(() => {\n    const startPoller = () => setInterval(swr.mutate, 1000);\n\n    if (stream.status === STREAM_STATUS.ACTIVE && !isCompleted) {\n      const id = startPoller();\n      return () => clearInterval(id);\n    }\n\n    return undefined;\n  }, [stream.status, isCompleted, swr]);\n\n  return swr;\n}\n\nexport function useSingleStreamHistory(\n  { pageSize = 3 },\n  { near, accountSWR, streamSWR },\n) {\n  const PAGE_SIZE = pageSize;\n  const account = accountSWR.data;\n  const stream = streamSWR.data;\n  const streamId = stream ? stream.id : null;\n  const [page, setPage] = useState(0);\n  const ready = !!stream;\n\n  const maxPage = ready ? Math.ceil(stream.history_len / PAGE_SIZE) - 1 : 0;\n\n  const nextPage = () => {\n    setPage(page + 1);\n  };\n  const prevPage = () => {\n    setPage(page - 1);\n  };\n  const canGoBack = page > 1;\n\n  const swr = useSWR(\n    () => {\n      const key = stream\n        ? ['stream_history', stream.id, account.last_action, page]\n        : false;\n\n      return key;\n    },\n    async () => {\n      const streamHistory = await fetchStreamHistory(\n        {\n          streamId,\n          from: page * PAGE_SIZE,\n          to: (page + 1) * PAGE_SIZE,\n        },\n        {\n          near,\n        },\n      );\n      return streamHistory;\n    },\n    {\n      onError: (error) => {\n        console.debug('useSingleStreamHistory error', error);\n      },\n    },\n  );\n\n  // ebanuty hack to prefetch next page\n  useSWR(\n    () => {\n      const key = stream\n        ? ['stream_history', stream.id, account.last_action, page + 1]\n        : false;\n\n      return key;\n    },\n\n    async () => {\n      const params = {\n        streamId,\n        from: (page + 1) * PAGE_SIZE,\n        to: (page + 2) * PAGE_SIZE,\n      };\n\n      const streamHistory = await fetchStreamHistory(params, {\n        near,\n      });\n\n      return streamHistory;\n    },\n  );\n\n  return {\n    swr, canGoBack, nextPage, prevPage, maxPage, currentPage: page,\n  };\n}\n","import useSWR, { useSWRConfig } from 'swr';\nimport classNames from 'classnames';\nimport Modal from 'react-modal/lib/components/Modal';\nimport { useMemo } from 'react';\nimport { useNear } from '../near-connect/useNear';\nimport { useStreamControl } from './useStreamControl';\nimport { Button } from '../../components/kit/Button';\nimport { TokenImage } from '../../components/kit/TokenImage';\nimport { Tooltip } from '../../components/kit/Tooltip';\nimport { useAccount, useStreams } from '../xyiming-resources';\nimport { useTokenFormatter } from '../../lib/useTokenFormatter';\nimport { useBool } from '../../lib/useBool';\n\nfunction TokenBalance({ ticker, balance, className }) {\n  const near = useNear();\n  const tf = useTokenFormatter(ticker);\n  const token = near.tokens.get(ticker);\n  const balanceInt = tf.amount(balance);\n  return (\n    <div\n      className={classNames(\n        'inline-flex items-center p-2 rounded-lg bg-card2',\n        className,\n      )}\n    >\n      <TokenImage tokenName={ticker} className=\"mr-2\" />\n      {' '}\n      <div>\n        <div>\n          <span className=\"font-semibold\">{balanceInt}</span>\n          {' '}\n          <span className=\"text-gray\">{ticker}</span>\n        </div>\n        <div>{token.metadata.name}</div>\n      </div>\n    </div>\n  );\n}\n\nfunction useWithdrawReadyBalances() {\n  const near = useNear();\n  const accountSWR = useAccount({ near });\n\n  const streamsSWR = useStreams({ near, accountSWR });\n\n  const balances = useMemo(() => {\n    const balancesValue = {};\n    if (accountSWR.data && streamsSWR.data) {\n      accountSWR.data.ready_to_withdraw.forEach(([ticker, balance]) => {\n        balancesValue[ticker] = balancesValue[ticker] || 0;\n        balancesValue[ticker] += Number(balance);\n      });\n\n      streamsSWR.data.inputs.forEach((stream) => {\n        balancesValue[stream.ticker] = balancesValue[stream.ticker] || 0;\n        balancesValue[stream.ticker] += Number(stream.available_to_withdraw);\n      });\n    }\n\n    return balancesValue;\n  }, [accountSWR.data, streamsSWR.data]);\n\n  const tokensSWR = useSWR(\n    () => {\n      const balancesWithoutNear = { ...balances };\n      delete balancesWithoutNear.NEAR;\n      const keys = Object.keys(balancesWithoutNear);\n      keys.sort();\n      return JSON.stringify(keys);\n    },\n    (rawKeys) => {\n      const tickers = JSON.parse(rawKeys);\n\n      // [ticker, hasStorageBalance]\n      return Promise.all(\n        tickers.map(async (ticker) => [\n          ticker,\n          !!(await near.tokens.ftStorageBalance(ticker)),\n        ]),\n      );\n    },\n    {\n      refreshInterval: 5000,\n    },\n  );\n\n  const loading = !accountSWR.data || !streamsSWR.data || !tokensSWR.data;\n  const notRegisteredTokens = (tokensSWR.data || []).filter(\n    (t) => t[1] === false,\n  );\n\n  const tokensRequireManualDeposit = notRegisteredTokens.filter(\n    (token) => near.roketo.isBridged(token[0]),\n  );\n\n  const isSafeToWithdraw = tokensRequireManualDeposit.length === 0 && tokensSWR.data;\n\n  return {\n    balances: Object.entries(balances),\n    loading,\n    tokensRequireManualDeposit,\n    notRegisteredTokens,\n    isSafeToWithdraw,\n  };\n}\n\nexport function StreamWithdrawButton(props) {\n  const near = useNear();\n  const streamControl = useStreamControl();\n  const { mutate } = useSWRConfig();\n  const modalControl = useBool(false);\n\n  const {\n    balances, loading, isSafeToWithdraw, notRegisteredTokens,\n  } = useWithdrawReadyBalances();\n\n  async function updateAllAndWithdraw() {\n    await streamControl.updateAllAndWithdraw({\n      tokensWithoutStorage: notRegisteredTokens.length,\n    });\n    mutate(['account', near.near.accountId]);\n  }\n\n  async function showNEP141Popup() {\n    modalControl.setOn(true);\n  }\n\n  const modal = (\n    <Modal\n      isOpen={modalControl.on}\n      onRequestClose={modalControl.turnOff}\n      className=\"ModalContent\"\n      overlayClassName=\"ModalOverlay\"\n    >\n      <h2 className=\"text-2xl mb-6\">Restricted withdrawal</h2>\n      <p>\n        Due to NEP-141 issues you are required to do storage deposit before\n        withdrawing. You can do it by buying any amount of\n        {' '}\n        {notRegisteredTokens.map((token) => token[0]).join(', ')}\n        {' '}\n        tokens at any\n        DEX\n      </p>\n    </Modal>\n  );\n\n  const onClick = loading\n    ? () => {}\n    : () => {\n      if (isSafeToWithdraw) {\n        updateAllAndWithdraw();\n      } else {\n        showNEP141Popup();\n      }\n    };\n\n  return (\n    <>\n      <Tooltip\n        placement=\"bottom\"\n        align={{ offset: [0, 20] }}\n        offset={{ bottom: 20 }}\n        overlay={(\n          <div className=\"text-left\">\n            <p className=\"mb-4 text-gray\">\n              Move all received tokens to your wallet. With Roketo you can only\n              withdraw from all your streams simultaneously.\n            </p>\n            <div className=\"text-left\">\n              {loading ? (\n                <p className=\"font-semibold text-center\">Loading balances...</p>\n              ) : balances.length ? (\n                <>\n                  <p className=\"font-semibold mb-2\">Available balances:</p>\n                  <div>\n                    {balances.map(([ticker, balance]) => (\n                      <TokenBalance\n                        ticker={ticker}\n                        balance={balance}\n                        className=\"w-full mb-2\"\n                        key={ticker}\n                      />\n                    ))}\n                  </div>\n                </>\n              ) : (\n                <p className=\"font-semibold text-center\">\n                  You have nothing to withdraw\n                </p>\n              )}\n            </div>\n          </div>\n        )}\n      >\n        <Button\n          type=\"button\"\n          loadingText=\"Updating account...\"\n          {...props}\n          loading={streamControl.loading}\n          onClick={onClick}\n        />\n      </Tooltip>\n      {modalControl.on ? modal : null}\n    </>\n  );\n}\n","import React from 'react';\nimport classNames from 'classnames';\n\nimport { TokenImage } from '../../components/kit/TokenImage';\nimport { ArcProgressBar } from '../../components/kit/ProgressBar';\nimport { Tooltip } from '../../components/kit/Tooltip';\nimport { streamDirection } from './lib';\nimport { streamViewData } from './streamViewData';\nimport { StreamingSpeed } from './StreamingSpeed';\nimport {\n  StreamControls,\n  StreamAutodepositControls,\n  StreamDepositButtonOutlined,\n} from '../stream-control';\nimport { StreamWithdrawButton } from '../stream-control/StreamWithdrawButton';\nimport { StreamProgressPercentage } from './StreamProgressPercentage';\nimport { useTokenFormatter } from '../../lib/useTokenFormatter';\n\nexport function StreamDashboard({ stream, account }) {\n  const tf = useTokenFormatter(stream.ticker);\n\n  const {\n    progresses,\n    percentages,\n    isDead,\n    progress: { full, withdrawn, streamed },\n  } = streamViewData(stream, tf);\n  const direction = streamDirection({ stream, account });\n\n  return (\n    <div className={classNames('flex', 'flex-col', 'items-center')}>\n      <div className=\"-mb-32\">\n        <Tooltip\n          align={{ offset: [0, -20] }}\n          offset={{ top: 20 }}\n          overlay={(\n            <div className=\"text-left\">\n              <StreamProgressPercentage\n                className=\"whitespace-nowrap mb-2\"\n                label=\"Withdrawn\"\n                colorClass=\"bg-streams-withdrawn\"\n                formattedFloatValue={`${tf.amount(withdrawn)} ${stream.ticker}`}\n                percentageValue={percentages.withdrawn}\n              />\n              <StreamProgressPercentage\n                className=\"whitespace-nowrap\"\n                label=\"Streamed\"\n                colorClass=\"bg-streams-streamed\"\n                formattedFloatValue={`${tf.amount(streamed)} ${stream.ticker}`}\n                percentageValue={percentages.streamed}\n              />\n            </div>\n          )}\n        >\n          <ArcProgressBar className=\"w-96 h-48\" progresses={progresses} />\n        </Tooltip>\n\n        <div className=\"flex justify-between pt-5 -mx-2 text-gray\">\n          <div className=\"w-10 text-center\"> 0%</div>\n          <div className=\"w-10 text-center\"> 100%</div>\n        </div>\n      </div>\n\n      <TokenImage size={14} tokenName={stream.ticker} className=\"mb-8\" />\n      <div className=\"text-6xl font-semibold\">{tf.amount(streamed)}</div>\n      <div className=\"text-gray font-semibold\">\n        of\n        {' '}\n        {tf.amount(full)}\n        {' '}\n        {stream.ticker}\n      </div>\n      <StreamingSpeed\n        stream={stream}\n        direction={direction}\n        className=\"mt-6 mb-6\"\n      />\n      {isDead ? (\n        ''\n      ) : (\n        <>\n          <div className=\"flex relative z-10\">\n            <StreamControls stream={stream} className=\"mr-2\" />\n\n            {/* render withdraw of add funds button */}\n            {direction === 'out' ? (\n              <StreamDepositButtonOutlined variant=\"outlined\" stream={stream} />\n            ) : direction === 'in' ? (\n              <StreamWithdrawButton\n                loadingText=\"Withdrawing...\"\n                variant=\"outlined\"\n                color=\"dark\"\n              >\n                Withdraw from all streams\n              </StreamWithdrawButton>\n            ) : null}\n          </div>\n          {direction === 'out' ? (\n            <StreamAutodepositControls\n              stream={stream}\n              enableMsg=\"Enable auto-deposit\"\n              disableMsg=\"Disable auto-deposit\"\n              className=\"mt-4 w-72\"\n            />\n          ) : null}\n        </>\n      )}\n    </div>\n  );\n}\n","import { format } from 'date-fns';\nimport classNames from 'classnames';\nimport { timestamp } from '../../lib/formatting';\nimport { STREAM_ACTION_TYPE } from '../stream-control/lib';\nimport { useTokenFormatter } from '../../lib/useTokenFormatter';\n\nfunction ThCell({ children, className, ...rest }) {\n  return (\n    <th\n      className={classNames('text-gray font-normal text-left p-4', className)}\n      {...rest}\n    >\n      {children}\n    </th>\n  );\n}\n\nfunction TdCell({ children, className, ...rest }) {\n  return (\n    <td\n      className={classNames(\n        'first:rounded-l-xl last:rounded-r-xl p-4 font-normal text-left h-14 bg-input',\n        className,\n      )}\n      {...rest}\n    >\n      {children}\n    </td>\n  );\n}\n\nconst ACTION_TYPE_COLOR = {\n  [STREAM_ACTION_TYPE.INIT]: 'text-special-active',\n  [STREAM_ACTION_TYPE.DEPOSIT]: 'text-special-active',\n  [STREAM_ACTION_TYPE.START]: 'text-special-active',\n  [STREAM_ACTION_TYPE.WITHDRAW]: 'text-special-hold',\n  [STREAM_ACTION_TYPE.PAUSE]: 'text-special-inactive',\n  [STREAM_ACTION_TYPE.STOP]: 'text-special-inactive',\n};\n\nfunction ActionType({ actionType, className, ...rest }) {\n  return (\n    <span\n      className={classNames(ACTION_TYPE_COLOR[actionType], className)}\n      {...rest}\n    >\n      {actionType}\n    </span>\n  );\n}\nexport function StreamActionHistory({\n  stream,\n  history,\n  currentPage,\n  onNextPageClick,\n  onPrevPageClick,\n  maxPage,\n  pageSize,\n  loading,\n  className,\n  ...rest\n}) {\n  const tf = useTokenFormatter(stream.ticker);\n\n  return (\n    <div className={classNames('border-separate Table', className)} {...rest}>\n      <table className=\"border-separate Table w-full\">\n        <thead>\n          <tr>\n            <ThCell>Actor</ThCell>\n            <ThCell>Action Type</ThCell>\n            <ThCell>Amount</ThCell>\n            <ThCell>Commission</ThCell>\n            <ThCell>Timestamp</ThCell>\n          </tr>\n        </thead>\n        <tbody>\n          {loading\n            ? Array(pageSize)\n              .fill(null)\n              .map((_, i) => ( // eslint-disable-next-line react/no-array-index-key\n                <tr className=\"mb-2\" key={i}>\n                  <TdCell />\n                  <TdCell />\n                  <TdCell />\n                  <TdCell />\n                  <TdCell />\n                </tr>\n              ))\n            : history.map((entry) => (\n              <tr className=\"mb-2\" key={entry.timestamp + entry.action_type}>\n                <TdCell className=\"break-all w-42\">{entry.actor}</TdCell>\n                <TdCell>\n                  <ActionType actionType={entry.action_type} />\n                </TdCell>\n                <TdCell>\n                  {entry.amount\n                    ? `${tf.amount(entry.amount)} ${stream.ticker}`\n                    : ''}\n                </TdCell>\n                <TdCell>\n                  {entry.commission_on_withdraw\n                    ? `${tf.amount(entry.commission_on_withdraw)} ${\n                      stream.ticker\n                    }`\n                    : ''}\n                </TdCell>\n                <TdCell>\n                  {format(\n                    timestamp(entry.timestamp).fromNanosec(),\n                    'yyyy MMM dd HH:mm:ss',\n                  )}\n                </TdCell>\n              </tr>\n            ))}\n        </tbody>\n      </table>\n      <div\n        className={classNames(\n          'flex justify-between',\n          maxPage === 0 ? 'invisible' : '',\n        )}\n      >\n        <button\n          type=\"button\"\n          className={classNames(\n            'p-2 hover:bg-hover hover:border-hover border border-border rounded-xl',\n            currentPage <= 0 ? 'invisible' : '',\n          )}\n          onClick={onPrevPageClick}\n        >\n          Prev Page\n        </button>\n        <div\n          className={classNames(\n            'rounded-full border-border border w-10 h-10 inline-flex items-center justify-center',\n          )}\n        >\n          {currentPage + 1}\n        </div>\n        <button\n          type=\"button\"\n          className={classNames(\n            'p-2 hover:bg-hover hover:border-hover border border-border rounded-xl',\n            currentPage >= maxPage ? 'invisible' : '',\n          )}\n          onClick={onNextPageClick}\n        >\n          Next Page\n        </button>\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect, useMemo } from 'react';\n\nexport function useFilter({ options }) {\n  const keys = useMemo(() => Object.keys(options), [options]);\n\n  const [option, selectOption] = useState(keys[0]);\n\n  const filter = useMemo(\n    () => {\n      const currentFilterFunction = options[option];\n\n      return {\n        option,\n        selectOption,\n        options,\n        optionsArray: keys,\n        currentFilterFunction,\n      };\n    },\n    [options, option, keys],\n  );\n\n  return filter;\n}\n\nexport function useFilters({ items, filters }) {\n  const [filteredItems, setFilteredItems] = useState([]);\n  const [filterCounts, setFilterCounts] = useState([]);\n\n  useEffect(() => {\n    let filteredItemsValue = items;\n    const filterCountsValue = [];\n\n    filters.forEach((filter) => {\n      const filterRunResult = {};\n      // run filter for every possible function\n      Object.keys(filter.options).forEach((option) => {\n        const filtered = filteredItemsValue.filter(filter.options[option]);\n\n        filterRunResult[option] = filtered;\n      });\n\n      // calc counts for every option in filter\n      const currentFilterCount = {};\n      Object.keys(filterRunResult).forEach(\n        (option) => { currentFilterCount[option] = filterRunResult[option].length; },\n      );\n\n      filterCountsValue.push(currentFilterCount);\n      // set items to selected filter\n      filteredItemsValue = filterRunResult[filter.option];\n    });\n\n    setFilterCounts(filterCountsValue);\n    setFilteredItems(filteredItemsValue);\n  }, [items, filters]);\n\n  return {\n    filterCounts,\n    filteredItems,\n  };\n}\n","import { useMemo } from 'react';\nimport { useFilter, useFilters } from '../lib';\nimport { STREAM_STATUS, STREAM_DIRECTION } from '../../stream-control/lib';\n\nconst STREAM_TYPE_FILTER = {\n  ALL: 'All',\n  INCOMING: 'Incoming',\n  OUTGOING: 'Outgoing',\n};\n\nconst STREAM_STATUS_FILTER = {\n  ALL: 'All',\n  ACTIVE: 'Active',\n  PAUSED: 'Paused',\n  ARCHIVED: 'Archived',\n  [STREAM_STATUS.FINISHED]: 'Finished',\n  [STREAM_STATUS.INTERRUPTED]: 'Interrupted',\n};\n\nexport function useStreamFilters(streams) {\n  const statusOptions = useMemo(\n    () => ({\n      [STREAM_STATUS_FILTER.ALL]: () => true,\n      [STREAM_STATUS_FILTER.ACTIVE]: (stream) => stream.status === STREAM_STATUS.ACTIVE,\n      [STREAM_STATUS_FILTER.PAUSED]: (stream) => stream.status === STREAM_STATUS.PAUSED,\n      [STREAM_STATUS_FILTER.ARCHIVED]: (stream) => stream.status === STREAM_STATUS.ARCHIVED,\n      [STREAM_STATUS_FILTER[STREAM_STATUS.INTERRUPTED]]:\n        (stream) => stream.status === STREAM_STATUS.INTERRUPTED,\n      [STREAM_STATUS_FILTER[STREAM_STATUS.FINISHED]]:\n        (stream) => stream.status === STREAM_STATUS.FINISHED,\n    }),\n    [],\n  );\n  const directionOptions = useMemo(\n    () => ({\n      [STREAM_TYPE_FILTER.ALL]: () => true,\n      [STREAM_TYPE_FILTER.INCOMING]: (stream) => STREAM_DIRECTION.IN === stream.direction,\n      [STREAM_TYPE_FILTER.OUTGOING]: (stream) => STREAM_DIRECTION.OUT === stream.direction,\n    }),\n    [],\n  );\n\n  const statusFilter = useFilter({\n    options: statusOptions,\n  });\n\n  const directionFilter = useFilter({\n    options: directionOptions,\n  });\n\n  const combinedFilters = useMemo(\n    () => [directionFilter, statusFilter, directionFilter],\n    [directionFilter, statusFilter],\n  );\n\n  const result = useFilters({\n    items: streams,\n    filters: combinedFilters,\n  });\n\n  return {\n    statusFilter,\n    directionFilter,\n    result,\n  };\n}\n","import React, { useState } from 'react';\nimport classNames from 'classnames';\nimport { RadioButton } from '../RadioButton';\nimport { DropdownOpener } from '../DropdownOpener';\nimport { DropdownMenu, DropdownMenuItem } from '../DropdownMenu';\n\ntype FilterOptionWithCounterProps = {\n  count: never;\n  option: never;\n};\n\nexport function FilterOptionWithCounter({ count, option }: FilterOptionWithCounterProps) {\n  return (\n    <span>\n      {option}\n      {' '}\n      <span className=\"text-gray font-normal\">{count}</span>\n    </span>\n  );\n}\n\nexport type FilterOption = {\n  label: string;\n  fn: (a: any, b: any) => number;\n};\n\ntype FilterProps = {\n  label: never;\n  options: string[] | FilterOption[];\n  renderOption: (option: string | FilterOption, active: boolean) => React.ReactNode;\n  renderActive: (option: string | FilterOption) => React.ReactNode;\n  active: never;\n  minimal: never;\n  onChange: never;\n  className: never;\n};\n\nexport function Filter({\n  label,\n  options,\n  renderOption,\n  renderActive,\n  active,\n  minimal,\n  onChange,\n  className,\n}: FilterProps) {\n  const [opened, setOpened] = useState(false);\n\n  return (\n    <div className={classNames('inline-flex items-center relative', className)}>\n      <div className=\"text-gray mr-2\">{label}</div>\n      <DropdownOpener minimal={minimal} rounded onChange={setOpened}>\n        {renderActive ? renderActive(active) : active}\n      </DropdownOpener>\n\n      <DropdownMenu\n        opened={opened}\n        className=\"right-0\"\n        onClose={() => {\n          setOpened(false);\n        }}\n      >\n        {options.map((option) => (\n          <DropdownMenuItem key={typeof option === 'string' ? option : option.label}>\n            <RadioButton\n              label={\n                renderOption ? renderOption(option, active === option) : option\n              }\n              active={active === option}\n              value={option}\n              onChange={onChange}\n            />\n          </DropdownMenuItem>\n        ))}\n      </DropdownMenu>\n    </div>\n  );\n}\n","import React, { useEffect, useState } from 'react';\nimport classNames from 'classnames';\nimport { useStreamFilters } from './useStreamFilters';\nimport { Filter, FilterOptionWithCounter } from '../../../components/kit/Filter';\nimport { STREAM_STATUS } from '../../stream-control/lib';\n\nfunction compareBy(a, b, key) {\n  if (Number(a[key]) > Number(b[key])) {\n    return -1;\n  } if (Number(a[key]) < Number(b[key])) {\n    return 1;\n  }\n  return 0;\n}\n\nconst sorts = {\n  bigBalanceFirst: {\n    label: 'With big balances',\n    fn: (a, b) => compareBy(a, b, 'balance'),\n  },\n  highSpeedFirst: {\n    label: 'With high speed',\n    fn: (a, b) => compareBy(a, b, 'tokens_per_tick'),\n  },\n  highSpeedLast: {\n    label: 'With low speed',\n    fn: (a, b) => compareBy(a, b, 'tokens_per_tick') * -1,\n  },\n  mostRecent: {\n    label: 'Most recent',\n    fn: (a, b) => compareBy(a, b, 'timestamp_created'),\n  },\n};\nconst statusPriority = [\n  STREAM_STATUS.INITIALIZED,\n  STREAM_STATUS.ACTIVE,\n  STREAM_STATUS.PAUSED,\n  STREAM_STATUS.INTERRUPTED,\n  STREAM_STATUS.FINISHED,\n];\nfunction defaultStreamSort(a, b) {\n  return statusPriority.indexOf(a.status) - statusPriority.indexOf(b.status);\n}\n\nexport function StreamFilters({ items, onFilterDone, className }) {\n  const filter = useStreamFilters(items);\n  const [sorting, setSorting] = useState(sorts.mostRecent);\n  const sortOptions = Object.values(sorts);\n\n  useEffect(() => {\n    const sorted = [...filter.result.filteredItems];\n    sorted.sort(defaultStreamSort);\n    sorted.sort(sorting.fn);\n    onFilterDone(sorted);\n  }, [filter.result.filteredItems, onFilterDone, sorting.fn]);\n\n  return (\n    <div className={classNames('md:flex', className)}>\n      <Filter\n        className=\"mr-5 z-10\"\n        options={filter.directionFilter.optionsArray}\n        label=\"Type:\"\n        active={filter.directionFilter.option}\n        onChange={filter.directionFilter.selectOption}\n        renderOption={(option) => {\n          const counts = filter.result.filterCounts[0];\n          return (\n            <FilterOptionWithCounter\n              option={option}\n              count={counts ? counts[option] : ''}\n            />\n          );\n        }}\n      />\n      <Filter\n        className=\"z-10\"\n        options={filter.statusFilter.optionsArray}\n        label=\"Status:\"\n        active={filter.statusFilter.option}\n        onChange={filter.statusFilter.selectOption}\n        renderOption={(option) => {\n          const counts = filter.result.filterCounts[1];\n          return (\n            <FilterOptionWithCounter\n              option={option}\n              count={counts ? counts[option] : ''}\n            />\n          );\n        }}\n      />\n      <div className=\"flex-grow\" />\n      <Filter\n        className=\"mt-3 md:mt-0\"\n        minimal\n        options={sortOptions}\n        label=\"Show first:\"\n        active={sorting}\n        onChange={setSorting}\n        renderOption={(option) => <span>{option.label}</span>}\n        renderActive={(option) => <span>{option.label}</span>}\n      />\n    </div>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/RUSSIANS_HACK.83d68466.gif\";","export default __webpack_public_path__ + \"static/media/crab.3fbdb8f2.gif\";","import classNames from 'classnames';\nimport React from 'react';\nimport { Button } from './kit/Button';\nimport hackImage from '../images/RUSSIANS_HACK.gif';\nimport crabImage from '../images/crab.gif';\n\nexport function PageError({\n  message,\n  onRetry,\n  className,\n}) {\n  const rand = React.useRef(Math.random());\n\n  return (\n    <div className={classNames('text-center', className)}>\n      {rand.current > 0.5 ? (\n        <img\n          src={hackImage}\n          className=\"mx-auto\"\n          alt=\"funny hackers gif with bird dancing around\"\n        />\n      ) : (\n        <img\n          src={crabImage}\n          className=\"mx-auto\"\n          alt=\"crab with a knife tries to hurt people\"\n        />\n      )}\n\n      <h1 className=\"text-4xl font-semibold mb-6 mt-10\">\n        Something is broken.\n      </h1>\n      <p className=\"text-gray mb-4\">Finally we have something to fix</p>\n      {message && (\n        <code className=\"p-4 border-special-inactive border block text-special-inactive text-xs mb-4\">\n          {message}\n        </code>\n      )}\n      <Button\n        variant=\"outlined\"\n        color=\"dark\"\n        className=\"mt-10\"\n        onClick={onRetry}\n        type=\"button\"\n      >\n        Try again\n      </Button>\n      <p className=\"text-xs text-gray mt-2\">(that probably wont help)</p>\n    </div>\n  );\n}\n","import React, { useMemo, useState } from 'react';\nimport { useNear } from '../features/near-connect/useNear';\nimport { StreamCard } from '../features/stream-view';\nimport { StreamFilters } from '../features/filtering/streams';\nimport { Button } from '../components/kit/Button';\nimport { routes } from '../lib/routing';\nimport { useAccount, useStreams } from '../features/xyiming-resources';\nimport { StreamWithdrawButton } from '../features/stream-control/StreamWithdrawButton';\nimport { PageError } from '../components/PageError';\n\nconst INPUTS = [];\nconst OUTPUTS = [];\n\nexport function MyStreamsPage() {\n  const near = useNear();\n  const [filteredItems, setFiltered] = useState([]);\n  const accountSWR = useAccount({ near });\n  const streamsSWR = useStreams({ near, accountSWR });\n\n  const isIncomingStream = (stream) => {\n    if (stream.owner_id === near.near.accountId) {\n      return false;\n    }\n    return true;\n  };\n\n  const streams = streamsSWR.data;\n  const inputs = streams ? streams.inputs : INPUTS;\n  const outputs = streams ? streams.outputs : OUTPUTS;\n  const allStreams = useMemo(() => {\n    const concatted = inputs.concat(outputs);\n    return concatted;\n  }, [inputs, outputs]);\n  const error = accountSWR.error || streamsSWR.error;\n\n  return (\n    <div className=\"container mx-auto p-12\">\n      <div className=\"flex mb-12\">\n        <h1 className=\"text-3xl \">All Streams</h1>\n        <div className=\"flex-grow\" />\n        <StreamWithdrawButton variant=\"main\" size=\"normal\">\n          Update streams and withdraw\n        </StreamWithdrawButton>\n      </div>\n      <StreamFilters\n        items={allStreams}\n        onFilterDone={setFiltered}\n        className=\"mb-10 relative z-10\"\n      />\n\n      {error ? (\n        <PageError\n          className=\"max-w-2xl mx-auto py-32\"\n          message={error.message}\n          onRetry={() => {\n            accountSWR.mutate();\n            streamsSWR.mutate();\n          }}\n        />\n      ) : !streams ? (\n        <div>Loading</div>\n      ) : allStreams.length === 0 ? (\n        <div className=\"flex flex-col w-80 mx-auto\">\n          <h3 className=\"text-3xl text-center my-12 \">\n            You dont have any streams yet.\n          </h3>\n          <Button\n            variant=\"main\"\n            link\n            to={routes.send}\n            type=\"button\"\n          >\n            Create First Stream\n          </Button>\n        </div>\n      ) : filteredItems.length === 0 ? (\n        <h3 className=\"text-3xl text-center my-12 w-80 mx-auto\">\n          No streams matching your filters.\n          {' '}\n          <br />\n          Try selecting different filters!\n        </h3>\n      ) : (\n        filteredItems.map((stream) => (\n          <StreamCard\n            key={stream.id}\n            stream={stream}\n            className=\"mb-4\"\n            direction={isIncomingStream(stream) ? 'in' : 'out'}\n          />\n        ))\n      )}\n    </div>\n  );\n}\n","import React from 'react';\nimport { utils } from 'near-api-js';\nimport numbro from 'numbro';\nimport classNames from 'classnames';\nimport { useNear } from '../features/near-connect/useNear';\nimport { TokenImage } from './kit/TokenImage';\n\nexport function AccountStreamCard({\n  token,\n  balance,\n  streamsLength,\n  period = '',\n  showPeriod = true,\n  className,\n}) {\n  const near = useNear();\n  const tokenMeta = near.tokens.get(token);\n  console.debug(tokenMeta);\n  let multiplier = 1;\n  switch (period) {\n    case 'min':\n      multiplier = 60;\n      break;\n    case 'hour':\n      multiplier = 60 * 60;\n      break;\n    case 'day':\n      multiplier = 60 * 60 * 24;\n      break;\n\n    // no default\n  }\n\n  const balanceValue = utils.format.formatNearAmount(balance) * multiplier;\n\n  return (\n    <div\n      className={classNames(\n        'w-full rounded-lg bg-input flex items-center width-full p-6',\n        className,\n      )}\n    >\n      <div className=\"w-full lg:flex items-center\">\n        <div className=\"flex items-center\">\n          <div className=\"w-12 mr-4\">\n            <span className=\"flex-shrink-0 rounded-full bg-card2 inline-flex items-center justify-center w-12 h-12\">\n              <TokenImage tokenName={token} />\n            </span>\n          </div>\n          <div className=\"\">\n            <div className=\"font-bold\">\n              {tokenMeta.metadata.name}\n              ,\n              {token}\n            </div>\n            {streamsLength > 0 ? (\n              <div className=\"text-gray text-sm\">\n                from\n                {' '}\n                {streamsLength}\n                {' '}\n                steams\n              </div>\n            ) : (\n              ''\n            )}\n          </div>\n        </div>\n\n        <div className=\"ml-auto lg:mt-0 mt-4\">\n          <span className=\" text-3xl\">\n            {balanceValue < 0.001 ? '<0.001' : numbro(balanceValue).format({ mantissa: 3 })}\n          </span>\n          {showPeriod ? <span>{period !== '' ? `/${period}` : ''}</span> : ''}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React, { useState } from 'react';\nimport { AccountStreamCard } from './AccountStreamCard';\nimport { useNear } from '../features/near-connect';\nimport {\n  DropdownMenu,\n  DropdownMenuItem,\n} from './kit/DropdownMenu';\nimport { RadioButton } from './kit/RadioButton';\nimport { DropdownOpener } from './kit/DropdownOpener';\nimport { useFilter } from '../features/filtering/lib';\nimport { useAccount, useStreams } from '../features/xyiming-resources';\n\nconst PERIODS = {\n  sec: '/sec',\n  min: '/min',\n  hour: '/hour',\n  day: '/day',\n};\n\ntype AccountColumnProps = {\n  account: any;\n  header: string;\n  icon: React.ReactNode;\n  tokensField: string;\n  streamsType?: string;\n  showPeriod?: boolean;\n  className?: string;\n};\n\nexport function AccountColumn({\n  account,\n  header,\n  icon,\n  tokensField,\n  streamsType,\n  showPeriod = true,\n  className,\n}: AccountColumnProps) {\n  const near = useNear();\n  const accountSWR = useAccount({ near });\n  const streamsSWR = useStreams({ near, accountSWR });\n\n  const allStreams = streamsSWR.data;\n\n  let streams = [];\n  if (streamsType === 'inputs') {\n    streams = allStreams ? allStreams.inputs : [];\n  } else if (streamsType === 'outputs') {\n    streams = allStreams ? allStreams.outputs : [];\n  }\n\n  let streamGroups = {} as any;\n  if (streams !== undefined) {\n    streamGroups = streams.reduce((groups: any, item: any) => {\n      const group = groups[item.ticker] || [];\n      group.push(item);\n      groups[item.ticker] = group; // eslint-disable-line no-param-reassign\n      return groups;\n    }, {});\n  }\n\n  const tokensData = account !== undefined ? account[tokensField] : [];\n\n  const periodsOptions = useFilter({ options: PERIODS });\n  const [opened, setOpened] = useState(false);\n  const selectedPeriod = periodsOptions.option;\n\n  return (\n    <div className={className}>\n      <h2 className=\"text-xl mb-6 flex items-center\">\n        <span className=\"mr-3\">{icon}</span>\n        {header}\n        <span className=\"ml-2\">\n          {showPeriod ? (\n            <div className=\"inline-flex items-center relative\">\n              <DropdownOpener minimal rounded onChange={setOpened}>\n                {periodsOptions.options[selectedPeriod]}\n              </DropdownOpener>\n              <DropdownMenu\n                opened={opened}\n                className=\"right-0\"\n                onClose={() => setOpened(false)}\n              >\n                {periodsOptions.optionsArray.map((option) => (\n                  <DropdownMenuItem key={option}>\n                    <RadioButton\n                      label={option}\n                      active={selectedPeriod === option}\n                      value={option}\n                      onChange={periodsOptions.selectOption}\n                    />\n                  </DropdownMenuItem>\n                ))}\n              </DropdownMenu>\n            </div>\n          ) : (\n            ''\n          )}\n        </span>\n      </h2>\n      <div>\n        {tokensData.map((item: any) => (\n          <AccountStreamCard\n            token={item[0]}\n            balance={item[1]}\n            streamsLength={\n              streamGroups[item[0]] ? streamGroups[item[0]].length : 0\n            }\n            period={selectedPeriod}\n            showPeriod={showPeriod}\n            className=\"mb-4\"\n          />\n        ))}\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\n\nexport function HistoryIcon() {\n  return (\n    <svg\n      width=\"17\"\n      height=\"17\"\n      viewBox=\"0 0 17 17\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <path\n        d=\"M8.56036 0.603882C6.45869 0.609876 4.4396 1.4228 2.9201 2.87474V1.42369C2.9201 1.20626 2.83373 0.997741 2.67998 0.843997C2.52624 0.690254 2.31772 0.603882 2.10029 0.603882C1.88287 0.603882 1.67435 0.690254 1.5206 0.843997C1.36686 0.997741 1.28049 1.20626 1.28049 1.42369V5.11281C1.28049 5.33024 1.36686 5.53876 1.5206 5.6925C1.67435 5.84625 1.88287 5.93262 2.10029 5.93262H5.78942C6.00684 5.93262 6.21536 5.84625 6.36911 5.6925C6.52285 5.53876 6.60922 5.33024 6.60922 5.11281C6.60922 4.89539 6.52285 4.68687 6.36911 4.53312C6.21536 4.37938 6.00684 4.29301 5.78942 4.29301H3.82188C4.87597 3.19148 6.2809 2.49161 7.7951 2.31373C9.3093 2.13584 10.8382 2.49105 12.1189 3.31829C13.3995 4.14554 14.352 5.39311 14.8125 6.84653C15.2729 8.29994 15.2127 9.86838 14.642 11.2822C14.0714 12.696 13.026 13.8668 11.6856 14.5933C10.3452 15.3198 8.79358 15.5567 7.2975 15.2631C5.80141 14.9695 4.45434 14.1639 3.48789 12.9847C2.52144 11.8056 1.996 10.3265 2.00192 8.80194C2.00192 8.58451 1.91554 8.37599 1.7618 8.22225C1.60806 8.0685 1.39954 7.98213 1.18211 7.98213C0.964684 7.98213 0.756164 8.0685 0.60242 8.22225C0.448677 8.37599 0.362305 8.58451 0.362305 8.80194C0.362305 10.4234 0.843112 12.0084 1.74393 13.3565C2.64474 14.7047 3.9251 15.7555 5.4231 16.376C6.9211 16.9964 8.56945 17.1588 10.1597 16.8425C11.75 16.5261 13.2107 15.7454 14.3573 14.5988C15.5038 13.4523 16.2846 11.9916 16.6009 10.4013C16.9172 8.81103 16.7549 7.16268 16.1344 5.66468C15.5139 4.16668 14.4631 2.88632 13.115 1.9855C11.7668 1.08469 10.1818 0.603882 8.56036 0.603882ZM8.56036 5.52272C8.34293 5.52272 8.13441 5.60909 7.98067 5.76283C7.82693 5.91657 7.74055 6.12509 7.74055 6.34252V8.80194C7.74055 9.01936 7.82693 9.22788 7.98067 9.38163C8.13441 9.53537 8.34293 9.62174 8.56036 9.62174H11.8396C12.057 9.62174 12.2655 9.53537 12.4193 9.38163C12.573 9.22788 12.6594 9.01936 12.6594 8.80194C12.6594 8.58451 12.573 8.37599 12.4193 8.22225C12.2655 8.0685 12.057 7.98213 11.8396 7.98213H9.38017V6.34252C9.38017 6.12509 9.29379 5.91657 9.14005 5.76283C8.98631 5.60909 8.77779 5.52272 8.56036 5.52272Z\"\n        fill=\"#9794B6\"\n      />\n    </svg>\n  );\n}\n","import React from 'react';\n\nexport function StreamWithdrawIcon() {\n  return (\n    <svg\n      width=\"20\"\n      height=\"24\"\n      viewBox=\"0 0 20 24\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <path\n        d=\"M10.0818 9.73921L10.0818 21.718M10.0818 21.718L18.5945 13.2589M10.0818 21.718L1.5691 13.2589M10.0823 4.3827L10.0823 1.78194\"\n        stroke=\"#8DA6FF\"\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n      />\n    </svg>\n  );\n}\n","import React from 'react';\n\nexport function CronIcon() {\n  return (\n    <svg\n      width=\"19\"\n      height=\"20\"\n      viewBox=\"0 0 19 20\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <path\n        d=\"M12.7791 5.19588C11.8893 4.62312 10.83 4.29083 9.69317 4.29083C6.54008 4.29083 3.98401 6.84691 3.98401 9.99999C3.98401 13.1531 6.54008 15.7092 9.69317 15.7092C10.7261 15.7092 11.695 15.4348 12.5309 14.9551L15.0815 17.5057C13.5648 18.5965 11.704 19.2389 9.69317 19.2389C4.59064 19.2389 0.454224 15.1025 0.454224 9.99999C0.454224 4.89746 4.59064 0.761047 9.69317 0.761047C11.8064 0.761047 13.754 1.47057 15.3106 2.66438L12.7791 5.19588Z\"\n        fill=\"white\"\n      />\n      <path\n        d=\"M17.6556 5.31123L15.0215 7.94539C15.2675 8.58293 15.4023 9.27571 15.4023 9.99999C15.4023 10.8324 15.2242 11.6232 14.904 12.3363L17.5041 14.9365C18.4085 13.5084 18.9321 11.8154 18.9321 9.99999C18.9321 8.2885 18.4667 6.6857 17.6556 5.31123Z\"\n        fill=\"white\"\n      />\n    </svg>\n  );\n}\n","import React from 'react';\nimport Modal from 'react-modal/lib/components/Modal';\nimport { useNear } from '../near-connect';\nimport { useAccount } from '../xyiming-resources';\nimport { Button } from '../../components/kit/Button';\nimport { CronIcon } from '../../components/icons/Cron';\nimport { useBool } from '../../lib/useBool';\n\nconst CRON_STATUS = {\n  RUNNING: 'RUNNING',\n  NOT_RUNNING: 'NOT_RUNNING',\n  INITIALIZING: 'INITIALIZING',\n};\n\n// const CronTaskCreateScheme = Yup.object().shape({\n//   cronDeposit: Yup.string().required('Deposit is a required'),\n//   cadence: Yup.string().required('Period is a required'),\n// });\n\nexport function CroncatButton() {\n  const near = useNear();\n  const modalControl = useBool(false);\n  const accountSWR = useAccount({ near });\n  // const tf = useTokenFormatter('NEAR');\n\n  // useEffect(() => {\n  //   async function fetchTasks() {\n  //     const tasks = await near.croncat.getAllTasks({});\n  //     console.debug('My Tasks:', tasks);\n  //   }\n  //   fetchTasks();\n  // }, []);\n\n  function cronSubscribeClick() {\n    modalControl.turnOn();\n  }\n\n  // async function createTask({cadence, cronDeposit}) {\n  //   console.debug('Creating task', {\n  //     cadence,\n  //     cronDeposit,\n  //   });\n  //   await near.croncat.createTask({\n  //     amount: tf.toInt(cronDeposit),\n  //     cadence,\n  //   });\n  // }\n\n  const accountData = accountSWR.data;\n\n  const cronStatus = accountData\n    ? accountData.cron_task\n      ? CRON_STATUS.RUNNING\n      : CRON_STATUS.NOT_RUNNING\n    : CRON_STATUS.INITIALIZING;\n\n  // const cadences = [\n  //   {\n  //     value: '*/10 * * * * *',\n  //     label: 'Every 10 minutes',\n  //   },\n  //   {\n  //     value: '0 0-23 * * * *',\n  //     label: 'Every hour',\n  //   },\n  //   {\n  //     value: '0 0 * * * *',\n  //     label: 'Every day',\n  //   },\n  // ];\n\n  const modal = (\n    <Modal\n      isOpen={modalControl.on}\n      onRequestClose={modalControl.turnOff}\n      className=\"ModalContent\"\n      overlayClassName=\"ModalOverlay\"\n    >\n      <h2 className=\"text-2xl mb-6\">CRON subscription</h2>\n      <p>\n        We provide Cron via Croncat. Croncat is temporary disabled due to\n        technical issues, we are helping them to resolve\n      </p>\n    </Modal>\n  );\n\n  // const modal = (\n  //   <Modal\n  //     isOpen={modalControl.on}\n  //     onRequestClose={modalControl.turnOff}\n  //     className=\"ModalContent\"\n  //     overlayClassName=\"ModalOverlay\"\n  //   >\n  //     <h2 className=\"text-2xl mb-6\">CRON setup</h2>\n  //     <Formik\n  //       initialValues={{\n  //         cadence: cadences[1].value,\n  //         cronDeposit: 1,\n  //       }}\n  //       validationSchema={CronTaskCreateScheme}\n  //       onSubmit={createTask}\n  //       validateOnBlur={false}\n  //       validateOnChange={false}\n  //       validateOnMount={false}\n  //     >\n  //       {({\n  //         values,\n  //         setFieldValue,\n  //         setFieldTouched,\n  //         handleSubmit,\n  //         isSubmitting,\n  //         errors,\n  //       }) => {\n  //         console.debug(errors);\n  //         return (\n  //           <form onSubmit={handleSubmit}>\n  //             <Field name=\"cronDeposit\">\n  //               {({\n  //                 field, // { name, value, onChange, onBlur }\n  //                 form: {touched, errors},\n  //                 meta,\n  //               }) => (\n  //                 <FormField\n  //                   label=\"Cron Deposit:\"\n  //                   className=\"mb-4\"\n  //                   error={meta.error}\n  //                 >\n  //                   <Input error={meta.error}>\n  //                     <input placeholder={'1 NEAR'} {...field} />\n  //                   </Input>\n  //                 </FormField>\n  //               )}\n  //             </Field>\n  //             <Field name=\"cadence\">\n  //               {({\n  //                 field, // { name, value, onChange, onBlur }\n  //                 form: {touched, errors},\n  //                 meta,\n  //               }) => {\n  //                 return (\n  //                   <FormField label=\"Withdraw funds:\" error={meta.error}>\n  //                     <div className=\"flex flex-col spacy-y-3\">\n  //                       {cadences.map((option) => {\n  //                         return (\n  //                           <RadioButton\n  //                             label={\n  //                               <div className=\"inline-flex items-center\">\n  //                                 {option.label}\n  //                               </div>\n  //                             }\n  //                             active={field.value === option.value}\n  //                             value={option.value}\n  //                             onChange={(value) => {\n  //                               setFieldValue(field.name, value, false);\n  //                               setFieldTouched(field.name, true, false);\n  //                             }}\n  //                           />\n  //                         );\n  //                       })}\n  //                     </div>\n  //                   </FormField>\n  //                 );\n  //               }}\n  //             </Field>\n  //             <Button\n  //               className=\"w-full mt-6\"\n  //               variant=\"filled\"\n  //               type=\"submit\"\n  //               disabled={isSubmitting}\n  //             >\n  //               Add funds\n  //             </Button>\n  //           </form>\n  //         );\n  //       }}\n  //     </Formik>\n  //   </Modal>\n  // );\n\n  return (\n    <>\n      <Button\n        type=\"button\"\n        variant=\"main\"\n        size=\"normal\"\n        className=\"p-0\"\n        onClick={(e) => cronSubscribeClick(e)}\n      >\n        <span className=\"mr-2\">\n          <CronIcon />\n        </span>\n        {cronStatus === CRON_STATUS.RUNNING\n          ? 'Update task'\n          : cronStatus === CRON_STATUS.NOT_RUNNING\n            ? 'Subscribe to CRON'\n            : cronStatus === CRON_STATUS.INITIALIZING\n              ? 'Initializing CRON'\n              : ''}\n      </Button>\n      {modalControl.on ? modal : null}\n    </>\n  );\n}\n","import React from 'react';\nimport { formatDistance } from 'date-fns';\nimport { useNear } from '../features/near-connect/useNear';\nimport { AccountColumn } from '../components/AccountColumn';\nimport { HistoryIcon } from '../components/icons/History';\nimport { StreamWithdrawIcon } from '../components/icons/StreamWithdraw';\nimport { StreamOutIcon } from '../components/icons/StreamOut';\nimport { StreamInIcon } from '../components/icons/StreamIn';\nimport { useAccount } from '../features/xyiming-resources';\nimport { PageError } from '../components/PageError';\nimport { CroncatButton } from '../features/croncat/CroncatButton';\n\nexport function AccountPage() {\n  const near = useNear();\n  const accountSWR = useAccount({ near });\n\n  // const balanceSWR = useSWR(\n  //   () => {\n  //     return true;\n  //   },\n  //   async () => {\n  //     const tokenBalances = await Promise.all(\n  //       near.tokens.tickers.map(async (ticker) => {\n  //         return {balance: await near.tokens.balance(ticker), ticker};\n  //       }),\n  //     );\n  //     return tokenBalances;\n  //   },\n  // );\n  // console.debug(balanceSWR.error);\n\n  // async function cronSubscribeClick(e) {\n  //   e.preventDefault();\n  //   await near.contractApi.startCron();\n  // }\n\n  const account = accountSWR.data;\n  console.debug(account);\n\n  const pageError = accountSWR.error;\n\n  return (\n    <div className=\"container mx-auto p-12\">\n      <div className=\"md:flex justify-between items-center mb-10\">\n        <h1 className=\"text-3xl\">My Account</h1>\n        <div className=\"flex items-center md:mt-0 mt-4\">\n          {account && account.last_action !== null ? (\n            <div className=\"mr-12 text-gray flex items-center\">\n              <span className=\"mr-2\">\n                <HistoryIcon />\n              </span>\n\n              <span>\n                Last updated&nbsp;\n                {formatDistance(\n                  new Date(account.last_action / 1000 / 1000),\n                  new Date(),\n                  {\n                    addSuffix: true,\n                  },\n                )}\n              </span>\n            </div>\n          ) : (\n            ''\n          )}\n\n          <CroncatButton />\n        </div>\n      </div>\n\n      {pageError ? (\n        <PageError\n          className=\"max-w-2xl mx-auto py-32\"\n          message={pageError.message}\n          onRetry={accountSWR.mutate}\n        />\n      ) : (\n        <div className=\"grid grid-cols-3 gap-4\">\n          <AccountColumn\n            icon={<StreamInIcon />}\n            header=\"Receiving\"\n            account={account}\n            tokensField=\"total_incoming\"\n            streamsType=\"inputs\"\n            key=\"AccountInputs\"\n          />\n          <AccountColumn\n            icon={<StreamOutIcon />}\n            header=\"Sending\"\n            account={account}\n            tokensField=\"total_outgoing\"\n            streamsType=\"outputs\"\n            key=\"AccountOutputs\"\n          />\n          <AccountColumn\n            icon={<StreamWithdrawIcon />}\n            header=\"Withdrawn\"\n            account={account}\n            tokensField=\"total_received\"\n            key=\"AccountWithdrawn\"\n            showPeriod={false}\n          />\n        </div>\n      )}\n    </div>\n  );\n}\n","import React from 'react';\nimport { NearAuthButton } from '../features/near-auth/NearAuthButton';\n\nexport function AuthorizePage() {\n  return (\n    <div className=\"flex h-screen mx-3\">\n      <div\n        className=\"lg:m-auto mx-auto my-auto lg:w-2/5 bg-gray-90 rounded-3xl p-5\"\n        style={{ backgroundColor: '#0D0B26' }}\n      >\n        <div className=\"my-24 text-center\">\n          <h1 className=\"text-3xl mb-4 font-semibold\">\n            {' '}\n            Login via NEAR Network\n            {' '}\n          </h1>\n          <p className=\"text-gray\">\n            Click button below to login or create new account\n          </p>\n          <NearAuthButton\n            variant=\"main\"\n            className=\"mt-10 rounded-lg py-4 px-8\"\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\n\nexport function ArrowLeftIcon() {\n  return (\n    <svg\n      width=\"9\"\n      height=\"14\"\n      viewBox=\"0 0 9 14\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <path\n        d=\"M7.44798 12.8541L1.86072 7.26685L7.44798 1.67958\"\n        stroke=\"white\"\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n      />\n    </svg>\n  );\n}\n","import React from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport copy from 'clipboard-copy';\nimport classNames from 'classnames';\nimport { useNear } from '../features/near-connect/useNear';\nimport {\n  streamViewData,\n  StreamOverviewCard,\n  StreamActionHistory,\n} from '../features/stream-view';\nimport {\n  useAccount,\n  useSingleStream,\n  useSingleStreamHistory,\n} from '../features/xyiming-resources';\nimport { StreamDashboard } from '../features/stream-view/StreamDashboard';\nimport { LinkIcon } from '../components/icons/Link';\nimport { ArrowLeftIcon } from '../components/icons/ArrowLeft';\nimport { routes } from '../lib/routing';\nimport { PageError } from '../components/PageError';\nimport { useTokenFormatter } from '../lib/useTokenFormatter';\n\nfunction BackButton({ to, className, ...rest }) {\n  return (\n    <Link\n      to={to}\n      className={classNames('group flex items-center', className)}\n      {...rest}\n    >\n      <div className=\"flex items-center justify-center h-11 w-11 rounded-full border-border border group-hover:bg-border mr-4\">\n        <ArrowLeftIcon />\n      </div>\n      <span className=\"uppercase text-gray text-xs\"> Back </span>\n    </Link>\n  );\n}\n\nfunction StreamCopyUrlBlock({ className, link, ...rest }) {\n  return (\n    <div className={className} {...rest}>\n      <div className=\"mb-4 text-gray text-center\">\n        Public link to view the stream:\n      </div>\n      <div className=\"border border-border bg-input py-4 px-5 rounded-2xl flex items-center\">\n        <div className=\"break-all select-all\">{link}</div>\n        <div className=\"w-px bg-border mx-6 self-stretch flex-shrink-0\" />\n        <button\n          type=\"button\"\n          className=\"whitespace-nowrap text-blue py-2 px-3 font-semibold text-sm inline-flex bg-transparent hover:bg-hover active:bg-input rounded-lg transition\"\n          onClick={() => copy(link)}\n          variant=\"filled\"\n        >\n          <LinkIcon className=\"mr-2\" />\n          Copy Link\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport function StreamPage() {\n  const near = useNear();\n  const params = useParams();\n\n  const accountSWR = useAccount({ near });\n  const streamSWR = useSingleStream(\n    { streamId: params.id },\n    {\n      near,\n      accountSWR,\n    },\n  );\n\n  const PAGE_SIZE = 10;\n\n  const {\n    swr: streamHistorySWR,\n    nextPage,\n    prevPage,\n    maxPage,\n    currentPage,\n  } = useSingleStreamHistory(\n    { pageSize: 10 },\n    {\n      near,\n      accountSWR,\n      streamSWR,\n    },\n  );\n\n  const account = accountSWR.data;\n  const stream = streamSWR.data;\n  const tf = useTokenFormatter(stream ? stream.ticker : '');\n\n  const streamHistory = streamHistorySWR.data || [];\n\n  const pageError = streamSWR.error || accountSWR.error;\n  const pageReady = stream && account;\n\n  const renderStreamData = () => {\n    const { link } = streamViewData(stream, tf);\n    return (\n      <>\n        <div className=\"flex flex-col lg:flex-row justify-between\">\n          <div className=\"flex flex-col items-center flex-grow\">\n            <StreamDashboard stream={stream} account={account} />\n            <StreamCopyUrlBlock link={link} className=\"max-w-xl w-full mt-28\" />\n          </div>\n          <StreamOverviewCard\n            className=\"mt-10 w-full lg:mt-0 lg:w-1/3 self-start\"\n            stream={stream}\n            account={account}\n          />\n        </div>\n        <StreamActionHistory\n          pageSize={PAGE_SIZE}\n          loading={!streamHistorySWR.data}\n          stream={stream}\n          history={streamHistory}\n          className=\"mx-auto max-w-6xl my-24 w-full\"\n          onPrevPageClick={prevPage}\n          onNextPageClick={nextPage}\n          maxPage={maxPage}\n          currentPage={currentPage}\n        />\n      </>\n    );\n  };\n\n  return (\n    <div className=\"container mx-auto p-12\">\n      <div className=\"mb-10\">\n        <BackButton to={routes.myStreams} />\n      </div>\n      {pageError ? (\n        <PageError\n          className=\"max-w-2xl mx-auto py-32\"\n          message={pageError.message}\n          onRetry={() => {\n            accountSWR.mutate();\n            streamSWR.mutate();\n          }}\n        />\n      ) : stream === null ? (\n        <div>\n          <h1 className=\"text-center my-32 text-2xl text-semibold\">\n            {' '}\n            Stream does not exists\n            {' '}\n          </h1>\n        </div>\n      ) : !pageReady ? (\n        <div className=\"py-32 text-center text-gray text-2xl\">Loading...</div>\n      ) : (\n        renderStreamData()\n      )}\n    </div>\n  );\n}\n","import React from 'react';\nimport 'error-polyfill';\nimport './App.scss';\nimport {\n  HashRouter as Router,\n  Route,\n  Switch,\n  Redirect,\n} from 'react-router-dom';\nimport SendPage from './pages/Send';\nimport { Header } from './components/Header';\nimport { NearContext, useCreateNear } from './features/near-connect/useNear';\nimport { MyStreamsPage } from './pages/MyStreams';\nimport { AccountPage } from './pages/Account';\nimport { AuthorizePage } from './pages/Authorize';\nimport { StreamPage } from './pages/StreamPage';\n\n// A wrapper for <Route> that redirects to the login\n// screen if you're not yet authenticated.\nfunction PrivateRoute({\n  children, allowed, redirect, ...rest\n}) {\n  return (\n    <Route\n      {...rest}\n      render={() => (allowed ? children : redirect)}\n    />\n  );\n}\n\nfunction AppFn() {\n  const near = useCreateNear();\n\n  const { inited } = near;\n\n  return (\n    <NearContext.Provider value={near}>\n      <div className=\"bg-dark text-white\">\n        {inited ? (\n          <Router basename={process.env.PUBLIC_URL}>\n            <Header />\n\n            <Switch>\n              <PrivateRoute\n                exact\n                redirect={<Redirect to=\"/\" />}\n                allowed={!near.auth.signedIn}\n                path=\"/authorize\"\n              >\n                <AuthorizePage />\n              </PrivateRoute>\n              <PrivateRoute\n                exact\n                redirect={<Redirect to=\"/authorize\" />}\n                allowed={near.auth.signedIn}\n                path=\"/\"\n              >\n                <SendPage />\n              </PrivateRoute>\n              <PrivateRoute\n                exact\n                redirect={<Redirect to=\"/authorize\" />}\n                allowed={near.auth.signedIn}\n                path=\"/account\"\n              >\n                <AccountPage />\n              </PrivateRoute>\n\n              <Route exact path=\"/streams/:id\">\n                <StreamPage />\n              </Route>\n              <PrivateRoute\n                exact\n                redirect={<Redirect to=\"/authorize\" />}\n                allowed={near.auth.signedIn}\n                path=\"/streams\"\n              >\n                <MyStreamsPage />\n              </PrivateRoute>\n            </Switch>\n          </Router>\n        ) : null}\n      </div>\n    </NearContext.Provider>\n  );\n}\n\nexport default AppFn;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Modal from 'react-modal';\nimport App from './App';\nimport './styles/index.scss';\n\nconst rootEl = document.getElementById('root')!;\n\nModal.setAppElement(rootEl);\nReactDOM.render(<App />, rootEl);\n"],"sourceRoot":""}