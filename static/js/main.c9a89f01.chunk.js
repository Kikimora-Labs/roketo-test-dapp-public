(this["webpackJsonproketo-dapp"]=this["webpackJsonproketo-dapp"]||[]).push([[0],{10:function(e,t,a){e.exports={wrapper:"styles_wrapper__CegNU",root:"styles_root__1apvt",centeredFlex:"styles_centeredFlex__1HZSf",infoRow:"styles_infoRow__2vMrz",numericProgress:"styles_numericProgress__2AuoP",breadbrumbs:"styles_breadbrumbs__BUT8d",streamsLink:"styles_streamsLink__L0U7w",breadbrumb:"styles_breadbrumb__NNWx2",id:"styles_id__16P2T",stream:"styles_stream__3Fr_5",left:"styles_left__1kdhS",right:"styles_right__vZBRd",tile:"styles_tile__2fhhc",remaining:"styles_remaining__2iHJj",blockTitle:"styles_blockTitle__TMhpt",main:"styles_main__18lFE",closeBadge:"styles_closeBadge__oSZpP",tokenIcon:"styles_tokenIcon__2BgHM",buttons:"styles_buttons__kZcO7",divider:"styles_divider__hCiPy",speed:"styles_speed__3klLg",commentBody:"styles_commentBody__1ywdK",copyTitle:"styles_copyTitle__2hQ0e",copyButton:"styles_copyButton__10iJH",linkIcon:"styles_linkIcon__1XYWy",link:"styles_link__24b3y",infoTile:"styles_infoTile__2Te2a",blockHeader:"styles_blockHeader__1zEQa",sectionHeader:"styles_sectionHeader__2S7fb",dropdownOpener:"styles_dropdownOpener__374xe",infoTitle:"styles_infoTitle__wuj-6",font16:"styles_font16__3CMGR",font14:"styles_font14__2T9bM",font12:"styles_font12__eO0Tl",streamID:"styles_streamID__2QzEw",grey:"styles_grey__3NsWF"}},11:function(e,t,a){e.exports={wrapper:"styles_wrapper__waQWy",root:"styles_root__19PW7",centeredFlex:"styles_centeredFlex__idtVt",infoRow:"styles_infoRow__DynnT",numericProgress:"styles_numericProgress__3WX9j",breadbrumbs:"styles_breadbrumbs__3R-VX",streamsLink:"styles_streamsLink__z_oX2",breadbrumb:"styles_breadbrumb__35lMb",id:"styles_id__3U16x",stream:"styles_stream__15zYj",left:"styles_left__2Gn-B",right:"styles_right__2t6b3",tile:"styles_tile__2S_fe",remaining:"styles_remaining__2xbtE",blockTitle:"styles_blockTitle__AVORE",main:"styles_main__EZ9Ad",tokenIcon:"styles_tokenIcon__1ECAS",buttons:"styles_buttons__1knN9",divider:"styles_divider__LJnOh",speed:"styles_speed__16A6R",commentBody:"styles_commentBody__1f5OU",copyTitle:"styles_copyTitle__5Y0V9",copyButton:"styles_copyButton__LRE-Z",linkIcon:"styles_linkIcon__2jhgt",link:"styles_link__3w_CQ",infoTile:"styles_infoTile__3vchd",blockHeader:"styles_blockHeader__2hHfE",sectionHeader:"styles_sectionHeader__3bPFB",dropdownOpener:"styles_dropdownOpener__2WSze",infoTitle:"styles_infoTitle__1j4ai",font16:"styles_font16__1E8_k",font14:"styles_font14__34e9m",font12:"styles_font12__2Fhe5",streamID:"styles_streamID__bjGsg",grey:"styles_grey__1goqK"}},110:function(e,t,a){e.exports={root:"styles_root__1_66R",radio:"styles_radio__3I1ek",radioActive:"styles_radioActive__2fx8l",text:"styles_text__21Txd"}},111:function(e,t,a){e.exports={root:"styles_root__HwxLP",dropdownWrapper:"styles_dropdownWrapper__32byB",dropdownMenu:"styles_dropdownMenu__1RS3q",dropdownInactive:"styles_dropdownInactive__34nZF"}},112:function(e,t,a){e.exports={root:"styles_root__2b5hR",description:"styles_description__256I8",checkbox:"styles_checkbox__JfL1O",error:"styles_error__3vxG-"}},137:function(e,t,a){e.exports={root:"authorization_root__3Nfgj",name:"authorization_name__GjBzW",logoutButton:"authorization_logoutButton__2sCaP"}},138:function(e,t,a){e.exports={root:"styles_root__9Q_y8",arrow:"styles_arrow__dmtxI",rotate:"styles_rotate__3bkvh"}},139:function(e,t,a){e.exports={menu:"styles_menu__oG1pK",menuDivider:"styles_menuDivider__3rvtk",hidden:"styles_hidden__3JyX9"}},140:function(e,t,a){e.exports={root:"styles_root__2IVIz",sort:"styles_sort__2oMly",active:"styles_active__3vMTz"}},141:function(e,t,a){e.exports={root:"styles_root__12V-i",filtersWrapper:"styles_filtersWrapper__3lX2U",sortWithOrder:"styles_sortWithOrder__2gTJ0"}},142:function(e,t,a){e.exports={flexCenter:"styles_flexCenter__1ROiJ",name:"styles_name__HgeGm",nameLabel:"styles_nameLabel__1iFRt"}},143:function(e,t,a){e.exports={root:"styles_root__1_PXp",sort:"styles_sort__3sdm0",active:"styles_active__2U1h-"}},144:function(e,t,a){e.exports={root:"styles_root__1C2L3",filtersWrapper:"styles_filtersWrapper__3sIgz",sortWithOrder:"styles_sortWithOrder__2yZvk"}},145:function(e,t,a){e.exports={card:"styles_card__chYY0",title:"styles_title__cc9o3",finance:"styles_finance__wsZi_"}},146:function(e,t,a){e.exports={badge:"styles_badge__2AKuG",blue:"styles_blue__3vwgm",orange:"styles_orange__23CY5"}},147:function(e,t,a){e.exports={block:"styles_block__3xJQm",hint:"styles_hint__2cJLP",content:"styles_content__10idn"}},176:function(e,t,a){e.exports={defaultOverlay:"styles_defaultOverlay__3nR8o",defaultIcon:"styles_defaultIcon__hJLMj"}},177:function(e,t,a){e.exports={wrapper:"styles_wrapper__oqa_T",spinner:"styles_spinner__3Ptbo",spin:"styles_spin__1Vf_l"}},178:function(e,t,a){e.exports={root:"styles_root__3OdL8",linkButton:"styles_linkButton__oY6_t"}},179:function(e,t,a){e.exports={root:"styles_root__2s9Jd",pageLink:"styles_pageLink__3rg8i"}},180:function(e,t,a){e.exports={input:"styles_input__KeAvj",error:"styles_error__1dP_7"}},181:function(e,t,a){e.exports={profileForm:"ProfileForm_profileForm__6KCp0",loaderWrapper:"ProfileForm_loaderWrapper__1tIAk",label:"ProfileForm_label__3P7Uk",inputName:"ProfileForm_inputName__3fFmI"}},182:function(e,t,a){e.exports={textarea:"styles_textarea__1lPSs",error:"styles_error__3C3Rv"}},183:function(e,t,a){e.exports={formfield:"styles_formfield__2DZrP",textLimitCounter:"styles_textLimitCounter__2B7mB"}},184:function(e,t,a){e.exports={flexCenter:"styles_flexCenter__B0Jt1",name:"styles_name__25-53"}},185:function(e,t,a){e.exports={root:"styles_root__2iwP4",linkButton:"styles_linkButton__1laX_"}},19:function(e,t,a){e.exports={relative:"styles_relative__2QiFJ",controlButton:"styles_controlButton__1vq4p",statusPadded:"styles_statusPadded__3UL71",button:"styles_button__1UW_h",modalContent:"styles_modalContent__3f34e",modalOverlay:"styles_modalOverlay__ZnuwA",modalHeader:"styles_modalHeader__2-Oti",modalButtons:"styles_modalButtons__367QE",modalButton:"styles_modalButton__uHmah",modalSecondary:"styles_modalSecondary__1y73P",modalWarning:"styles_modalWarning__aeSV8",modalDanger:"styles_modalDanger__2FJKr",controlsMenu:"styles_controlsMenu__h4rsZ",dropdownOpener:"styles_dropdownOpener__KpUjE",notAllowed:"styles_notAllowed__AgwS0",start:"styles_start__AVZHt",active:"styles_active__1J1qI",pause:"styles_pause__AS7EK",stop:"styles_stop__IMPS5"}},20:function(e,t,a){e.exports={relative:"styles_relative__yWBD-",controlButton:"styles_controlButton__1sUCZ",statusPadded:"styles_statusPadded__3delP",button:"styles_button__18c-7",modalContent:"styles_modalContent__1ddyy",modalOverlay:"styles_modalOverlay__1UpG0",modalHeader:"styles_modalHeader__1wI_9",modalButtons:"styles_modalButtons__3ze2c",modalButton:"styles_modalButton__2LWw5",modalSecondary:"styles_modalSecondary__3V_0f",modalWarning:"styles_modalWarning__1UbkD",modalDanger:"styles_modalDanger__3abDR",controlsMenu:"styles_controlsMenu__2Z6nr",dropdownOpener:"styles_dropdownOpener__2fJW3",start:"styles_start__1Jd1k",active:"styles_active__1vNpj",pause:"styles_pause__jEqEC",stop:"styles_stop__19ozh"}},233:function(e,t,a){e.exports={layout:"styles_layout__2ac3i"}},24:function(e,t,a){e.exports={root:"styles_root__3FXzU",text:"styles_text__3Ccy_",status:"styles_status__2XG4U",grey:"styles_grey__6V1Y1",overlay:"styles_overlay__vPDRx",tooltip:"styles_tooltip__17_8O",innerStatus:"styles_innerStatus__294En",smaller:"styles_smaller__35jwv",speed:"styles_speed__2gSeJ",remained:"styles_remained__2GAOw",clock:"styles_clock__1TglA",progress:"styles_progress__lFlGb",streamed:"styles_streamed__3msIw",withdrawn:"styles_withdrawn__28DlC"}},243:function(e,t,a){e.exports={rotate:"styles_rotate__ZjzwB"}},244:function(e,t,a){e.exports={container:"styles_container__1AC1F",logo:"styles_logo__3ciI3"}},247:function(e,t,a){e.exports={root:"styles_root__20iY_"}},25:function(e,t,a){e.exports={root:"styles_root__38B64",text:"styles_text__11atI",status:"styles_status__3b_ey",grey:"styles_grey__36o2c",overlay:"styles_overlay__3rasY",tooltip:"styles_tooltip__23VN9",innerStatus:"styles_innerStatus__132Fk",smaller:"styles_smaller__HXT1f",speed:"styles_speed__1i2og",remained:"styles_remained__2-6rd",clock:"styles_clock__2q7yf",progress:"styles_progress__YG-x-",streamed:"styles_streamed__2mtn0",withdrawn:"styles_withdrawn__SfaXK"}},27:function(e,t,a){e.exports={root:"styles_root__1XQku",dropdownOpener:"styles_dropdownOpener__3kQgF",dropdownMenu:"styles_dropdownMenu___vHNq",container:"styles_container__aPnlt",loader:"styles_loader__3dO2x",header:"styles_header__1d9ir",date:"styles_date__2TpB4",divider:"styles_divider__KqyfJ",notification:"styles_notification__3Zr3E",unread:"styles_unread__3ngZd",icon:"styles_icon__3IYnm",notificationBody:"styles_notificationBody__3G1w8",primaryText:"styles_primaryText__3lpJr",secondaryText:"styles_secondaryText__30aDU",time:"styles_time__1xidu",compact:"styles_compact__1AVk6",mainText:"styles_mainText__1Fr7u"}},286:function(e,t){},296:function(e,t){},314:function(e,t){},33:function(e,t,a){e.exports={root:"styles_root__1zlKm",title:"styles_title__39adN",description:"styles_description__12RAl",form:"styles_form__1ud4S",row:"styles_row__Pz5Iu",rowItem:"styles_rowItem__TexQO",checkboxes:"styles_checkboxes__OfA8Y",submitError:"styles_submitError__1B7Gd",actionButtonsWrapper:"styles_actionButtonsWrapper__1E6yB",feeDisclaimer:"styles_feeDisclaimer__WNlqw",feeDisclaimerRow:"styles_feeDisclaimerRow__11c8e",amount:"styles_amount__1l7_V",subDescription:"styles_subDescription__1OTIx"}},330:function(e,t,a){},442:function(e,t,a){},443:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(43),c=a.n(s),o=a(44),i=a.n(o),l=(a(190),a(22)),u=a(26),d=a(3),j=a.n(d),m={root:{path:"/"},authorize:{path:"/authorize",title:"Authorize"},streams:{path:"/streams",title:"Streams"},stream:{path:"/streams/:id",title:"Stream"}};function b(e){return"".concat(window.location.origin,"/#/streams/").concat(e)}var p,h,f=a(6),_=a(0);!function(e){e.COLORED="colored",e.CURRENT_COLOR="current-color"}(h||(h={}));var O=(p={},Object(f.a)(p,h.COLORED,(function(e){var t=e.className;return Object(_.jsxs)("svg",{width:"85",height:"37",viewBox:"0 0 85 37",fill:"none",className:t,children:[Object(_.jsx)("path",{d:"M27.2243 21.6559L25.1382 26.3574C24.9976 26.6743 25.3083 27.0039 25.6314 26.8807L33.2506 23.9755C37.4638 22.3691 42.9334 16.8281 42.9334 13.7051C42.9334 10.8974 37.5108 4.89742 33.3857 3.5349L22.7464 0.0207055C22.3964 -0.0949031 22.0975 0.297465 22.3004 0.606068L24.4608 3.89078C24.7026 4.2583 24.4683 4.75193 24.0316 4.79531L11.5321 6.03692C11.1728 6.07261 11.0519 6.5378 11.3481 6.74504L14.751 9.12589C15.0895 9.36266 15.0825 9.86755 14.7377 10.0948L9.62698 13.4638C9.35407 13.6437 9.03165 13.7328 8.70543 13.7185L0.406475 13.3549C-0.00343963 13.337 -0.157883 13.8858 0.200859 14.0857L9.40222 19.2108C9.74603 19.4023 10.1494 19.456 10.5311 19.361L14.6051 18.3475C15.1342 18.2159 15.6933 18.3718 16.0787 18.7586L19.1812 21.8717C19.5854 22.2774 20.179 22.4277 20.7267 22.2631L26.291 20.5912C26.9277 20.3999 27.4946 21.0466 27.2243 21.6559Z",fill:"url(#paint0_linear_25_2458)"}),Object(_.jsx)("path",{d:"M40.6818 26.4196V36.3357C40.6818 36.6675 40.9498 36.9364 41.2804 36.9364H51.0314C51.362 36.9364 51.63 36.6675 51.63 36.3357V26.4213C51.63 26.0896 51.898 25.8207 52.2286 25.8207L64.6597 25.8207C64.8659 25.8207 65.0576 25.9271 65.167 26.1025L71.793 36.7182C71.9025 36.8935 72.0942 37 72.3004 37H84.4004C84.8768 37 85.1623 36.4688 84.9006 36.0694L76.5735 23.3575C76.5713 23.3541 76.5701 23.3502 76.5701 23.3462C76.5701 23.3349 76.5793 23.3257 76.5905 23.3256C80.5584 23.293 84.2732 19.6259 84.2732 13.0961C84.2732 5.84535 77.8859 1.84441 73.0585 1.84397L73.0559 1.84319V1.82211C73.0559 1.81792 73.0525 1.81451 73.0483 1.81451H41.2804C41.036 1.81451 40.8258 1.96149 40.7328 2.17217C41.1621 5.93024 44.6468 10.0091 52.2641 10.0091L67.8871 10.0098C69.5984 10.0098 71.8625 11.4284 71.8625 13.9989C71.8625 16.3234 70.5333 17.6246 69.1201 17.6254L52.2641 17.6254V17.6315C43.9975 17.6315 40.5981 22.4353 40.6889 26.4196H40.6818Z",fill:"#2B313B"}),Object(_.jsx)("defs",{children:Object(_.jsxs)("linearGradient",{id:"paint0_linear_25_2458",x1:"1.29563",y1:"14.7557",x2:"38.3082",y2:"14.3339",gradientUnits:"userSpaceOnUse",children:[Object(_.jsx)("stop",{offset:"0",stopColor:"#E61A11"}),Object(_.jsx)("stop",{offset:"0.554808",stopColor:"#E9712E"}),Object(_.jsx)("stop",{offset:"1",stopColor:"#FFD231"})]})})]})})),Object(f.a)(p,h.CURRENT_COLOR,(function(e){var t=e.className;return Object(_.jsxs)("svg",{viewBox:"0 0 57 25",fill:"none",className:t,children:[Object(_.jsx)("path",{d:"M17.9487 14.2217L16.5734 17.3093C16.4807 17.5174 16.6855 17.7338 16.8986 17.6529L21.9219 15.7451C24.6995 14.6901 28.3056 11.0512 28.3056 9.00033C28.3056 7.15649 24.7306 3.2162 22.0109 2.32141L14.9965 0.0135976C14.7657 -0.0623242 14.5687 0.195349 14.7025 0.398013L16.1268 2.55513C16.2862 2.79648 16.1317 3.12066 15.8438 3.14914L7.60302 3.96452C7.36611 3.98797 7.2864 4.29346 7.48169 4.42956L9.72523 5.99309C9.94834 6.14858 9.94376 6.48015 9.71643 6.62942L6.34698 8.84184C6.16706 8.95998 5.95449 9.01851 5.73941 9.00912L0.267985 8.77036C-0.00226772 8.75857 -0.104091 9.11902 0.132424 9.25024L6.1988 12.616C6.42547 12.7418 6.6914 12.777 6.94303 12.7147L9.629 12.049C9.97782 11.9626 10.3465 12.065 10.6006 12.319L12.646 14.3634C12.9125 14.6298 13.3038 14.7286 13.6649 14.6205L17.3334 13.5225C17.7532 13.3969 18.127 13.8216 17.9487 14.2217Z",fill:"currentColor"}),Object(_.jsx)("path",{d:"M26.8203 17.3502V23.8622C26.8203 24.0801 26.997 24.2567 27.215 24.2567H33.6438C33.8617 24.2567 34.0384 24.0801 34.0384 23.8622V17.3513C34.0384 17.1334 34.2151 16.9568 34.4331 16.9568L42.6288 16.9568C42.7647 16.9568 42.8911 17.0267 42.9632 17.1419L47.3317 24.1134C47.4039 24.2285 47.5302 24.2984 47.6662 24.2984H55.6437C55.9577 24.2984 56.1459 23.9496 55.9734 23.6873L50.4834 15.3392C50.482 15.337 50.4812 15.3344 50.4812 15.3318C50.4812 15.3244 50.4872 15.3184 50.4946 15.3183C53.1107 15.2969 55.5598 12.8886 55.5598 8.60041C55.5598 3.83876 51.3486 1.21128 48.166 1.211L48.1643 1.21048V1.19664C48.1643 1.19388 48.162 1.19165 48.1593 1.19165H27.215C27.0538 1.19165 26.9152 1.28817 26.8539 1.42653C27.137 3.89451 29.4344 6.57314 34.4564 6.57314L44.7565 6.5736C45.8848 6.5736 47.3775 7.50521 47.3775 9.19332C47.3775 10.7199 46.5012 11.5744 45.5694 11.5749L34.4564 11.5749V11.5789C29.0064 11.5789 26.7651 14.7336 26.825 17.3502H26.8203Z",fill:"currentColor"})]})})),p),x=function(e){var t=e.type,a=void 0===t?h.COLORED:t,n=e.className,r=O[a];return Object(_.jsx)(r,{className:n})},v=a(233),y=a.n(v),w=function(e){var t=e.children,a=e.className;return Object(_.jsx)("div",{className:j()(y.a.layout,a),children:t})},g=a(7),k=a(5),N=a(2),C=a.n(N),S=a(21),I="testnet",L="testnet",B="https://rpc.testnet.near.org",A="streaming-r-v2.dcversus.testnet",M="https://wallet.testnet.near.org",R="",F="priceoracle.testnet",T="oracle-1.testnet",H="wrap.testnet",E="https://api.test.roke.to",P="200000000000000";function V(){return D.apply(this,arguments)}function D(){return(D=Object(g.a)(C.a.mark((function e(){var t,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new S.keyStores.BrowserLocalStorageKeyStore,e.next=3,Object(S.connect)({nodeUrl:B,walletUrl:M,networkId:L,keyStore:t,headers:{}});case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e){return Z.apply(this,arguments)}function Z(){return Z=Object(g.a)(C.a.mark((function e(t){var a,n,r,s,c,o,i;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=function(){return(i=Object(g.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.signOut();case 2:window.location.reload();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},o=function(){return i.apply(this,arguments)},c=function(){return(c=Object(g.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"Roketo Token Streaming Service",e.next=3,t.requestSignIn(A,"Roketo Token Streaming Service");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},s=function(){return c.apply(this,arguments)},e.next=6,t.getAccountId();case 6:return a=e.sent,e.next=9,t.account();case 9:if(n=e.sent,!a){e.next=14;break}return e.next=13,n.getAccountBalance();case 13:r=e.sent;case 14:return e.abrupt("return",{balance:r,account:n,signedIn:!!a,accountId:a,login:s,logout:o});case 15:case"end":return e.stop()}}),e)}))),Z.apply(this,arguments)}var q=a(12),U=a(13),z=a(14),Y=a.n(z),J=a(444),X={xYears:"{{count}} years",xMonths:"{{count}} months",xDays:"{{count}}d",xSeconds:"{{count}}s",xMinutes:"{{count}}m",xHours:"{{count}}h"},K={formatDistance:function(e,t){return X[e].replace("{{count}}",t)}};var G="Initialized",Q="Active",$="Paused",ee="Finished",te=function(e){return e.status===Q};function ae(e){return e.status===G||e.status===$}function ne(e){return"object"===typeof(null===e||void 0===e?void 0:e.status)&&ee in e.status}function re(e){if(ae(e))return new Y.a(0);var t,a=Object(J.a)(Date.now())-(t=e.last_action,Number(t)/1e3/1e3/1e3);return Y.a.minimum(e.balance,Number(e.tokens_per_sec)*a)}var se=function(){function e(t){var a=t.contract,n=t.account;Object(q.a)(this,e),this.contract=void 0,this.account=void 0,this.contract=a,this.account=n}return Object(U.a)(e,[{key:"getAccount",value:function(){var e=Object(g.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.account.accountId){e.next=2;break}return e.abrupt("return",{active_incoming_streams:0,active_outgoing_streams:0,deposit:"0",inactive_incoming_streams:0,inactive_outgoing_streams:0,is_cron_allowed:!0,last_created_stream:"any",stake:"0",total_incoming:{},total_outgoing:{},total_received:{}});case 2:return e.prev=2,e.next=5,this.contract.get_account({account_id:this.account.accountId});case 5:return t=e.sent,e.abrupt("return",t);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",{active_incoming_streams:0,active_outgoing_streams:0,deposit:"0",inactive_incoming_streams:0,inactive_outgoing_streams:0,is_cron_allowed:!0,last_created_stream:"any",stake:"0",total_incoming:{},total_outgoing:{},total_received:{}});case 12:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"getAccountIncomingStreams",value:function(){var e=Object(g.a)(C.a.mark((function e(t){var a,n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.from,n=t.limit,e.prev=1,e.next=4,this.contract.get_account_incoming_streams({account_id:this.account.accountId,from:a,limit:n});case 4:return r=e.sent,e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getAccountOutgoingStreams",value:function(){var e=Object(g.a)(C.a.mark((function e(t){var a,n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.from,n=t.limit,e.prev=1,e.next=4,this.contract.get_account_outgoing_streams({account_id:this.account.accountId,from:a,limit:n});case 4:return r=e.sent,e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getStream",value:function(){var e=Object(g.a)(C.a.mark((function e(t){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.streamId,e.next=3,this.contract.get_stream({stream_id:a});case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getDao",value:function(){var e=Object(g.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contract.get_dao();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createStream",value:function(){var e=Object(g.a)(C.a.mark((function e(t){var a,n,r,s,c,o,i,l,u,d,j,m,b,p,h;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.comment,n=t.deposit,r=t.receiverId,s=t.tokenAccountId,c=t.commissionOnCreate,o=t.tokensPerSec,i=t.cliffPeriodSec,l=t.delayed,u=void 0!==l&&l,d=t.isExpirable,j=t.isLocked,m=t.callbackUrl,b=t.handleTransferStream,p=new Y.a(n).plus(c).toFixed(),h={description:JSON.stringify({comment:a}),balance:n,owner_id:this.account.accountId,receiver_id:r,token_name:s,tokens_per_sec:BigInt(o),cliff_period_sec:i,is_locked:j,is_auto_start_enabled:!u,is_expirable:d},e.abrupt("return",b(h,p,m));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"startStream",value:function(){var e=Object(g.a)(C.a.mark((function e(t){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.streamId,e.next=3,this.contract.start_stream({stream_id:a},P,"1");case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"pauseStream",value:function(){var e=Object(g.a)(C.a.mark((function e(t){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.streamId,e.next=3,this.contract.pause_stream({stream_id:a},P,"1");case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"stopStream",value:function(){var e=Object(g.a)(C.a.mark((function e(t){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.streamId,e.next=3,this.contract.stop_stream({stream_id:a},P,"1");case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=Object(g.a)(C.a.mark((function e(t){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.streamIds,e.next=3,this.contract.withdraw({stream_ids:a},P,"1");case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function ce(e){return oe.apply(this,arguments)}function oe(){return(oe=Object(g.a)(C.a.mark((function e(t){var a,n,r,s,c,o,i,l,u;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.account,n=new S.Contract(a,A,{viewMethods:["get_stats","get_dao","get_token","get_stream","get_account","get_account_incoming_streams","get_account_outgoing_streams","get_account_ft"],changeMethods:["start_stream","pause_stream","stop_stream","withdraw"]}),r=new se({contract:n,account:a}),s=r.getAccount(),c=r.getDao(),e.next=7,Promise.all([s,c]);case 7:return o=e.sent,i=Object(k.a)(o,2),l=i[0],u=i[1],e.abrupt("return",{api:r,dao:u,account:l});case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ie,le,ue=a(46),de=a.n(ue),je=a(4),me=3600,be=86400,pe=604800,he=2419200,fe=29030400;!function(e){e.Second="second",e.Minute="minute",e.Hour="hour",e.Day="day"}(le||(le={}));var _e=(ie={},Object(f.a)(ie,le.Hour,"/h"),Object(f.a)(ie,le.Day,"/d"),Object(f.a)(ie,le.Minute,"/m"),Object(f.a)(ie,le.Second,"/s"),ie),Oe={signInButton:"signInButton",signOutButton:"signOutButton",availableForWithdrawalCaption:"availableForWithdrawalCaption",withdrawAllButton:"withdrawAllButton",createStreamButton:"createStreamButton",withdrawButton:"withdrawButton",withdrawTooltip:"withdrawTooltip",withdrawLoadingCaption:"withdrawLoadingCaption",streamProgressCaption:"streamProgressCaption",streamControlsDropdown:"streamControlsDropdown",streamStartButton:"streamStartButton",streamPauseButton:"streamPauseButton",streamStopButton:"streamStopButton",createStreamReceiverInput:"createStreamReceiverInput",createStreamAmountInput:"createStreamAmountInput",createStreamMonthsInput:"createStreamMonthsInput",createStreamDaysInput:"createStreamDaysInput",createStreamHoursInput:"createStreamHoursInput",createStreamMinutesInput:"createStreamMinutesInput",createStreamCommentInput:"createStreamCommentInput",createStreamDelayedCheckbox:"createStreamDelayedCheckbox",createStreamLockedCheckbox:"createStreamLockedCheckbox",createStreamCancelButton:"createStreamCancelButton",createStreamSubmitButton:"createStreamSubmitButton",openNotificationsButton:"openNotificationsButton",notificationsLoader:"notificationsLoader",notificationElement:"notificationElement",notificationPrimaryCaption:"notificationPrimaryCaption",notificationSecondaryCaption:"notificationSecondaryCaption"},xe=(Object.keys(Oe).reduce((function(e,t){return Object(je.a)(Object(je.a)({},e),{},Object(f.a)({},t,'[data-testid="'.concat(Oe[t],'"]')))}),{}),function(){function e(t){Object(q.a)(this,e),this.tokenDecimals=void 0,this.MP=void 0,this.tokenDecimals=t,this.MP=Math.pow(10,t)}return Object(U.a)(e,[{key:"amount",value:function(e){var t=de()(e).divide(this.MP).value(),a=de()(t).format({mantissa:3,trimMantissa:!0,optionalMantissa:!0,average:!0});return 0===t?"0":0!==e&&t<.001?"<0.001":a}},{key:"toYocto",value:function(e){return de()(e).multiply(this.MP).format({mantissa:0})}},{key:"toHumanReadableValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return de()(e).divide(this.MP).format({mantissa:t,trimMantissa:!0,optionalMantissa:!0})}},{key:"tokensPerMeaningfulPeriod",value:function(t){var a,n=this,r=[1,60,me,be,pe,he,fe],s=(a={1:"second"},Object(f.a)(a,60,"minute"),Object(f.a)(a,me,"hour"),Object(f.a)(a,be,"day"),Object(f.a)(a,pe,"week"),Object(f.a)(a,he,"month"),Object(f.a)(a,fe,"year"),a),c=r.find((function(e){return de()(t).multiply(e).divide(n.MP).value()>.1}))||fe,o=de()(t).multiply(c).divide(this.MP).value();return{formattedValue:e.formatSmartly(o),unit:s[c]}}}],[{key:"formatSmartly",value:function(e){return 0===e?"0":e<.001?"<0.001":de()(e).format({mantissa:3,trimMantissa:!0,optionalMantissa:!0,average:!0})}}]),e}()),ve=a(234),ye=a.n(ve);function we(e){return e===H}var ge=function(){function e(t,a){var n=this;Object(q.a)(this,e),this.contract=void 0,this.tokenAccountId=void 0,this.account=void 0,this.transfer=function(){var e=Object(g.a)(C.a.mark((function e(t,a,r){var s,c,o,i,l,u,d,j;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.getIsRegistered(t.owner_id),n.getIsRegistered(t.receiver_id)]);case 2:return s=e.sent,c=Object(k.a)(s,2),o=c[0],i=c[1],l=[S.transactions.functionCall("ft_transfer_call",{receiver_id:A,amount:new Y.a(a).toFixed(),memo:"Roketo transfer",msg:ye.a.stringify({Create:{request:t}})},"100000000000000",1)],u=new Y.a(0),d=S.utils.format.parseNearAmount("0.00125"),o||(l.unshift(S.transactions.functionCall("storage_deposit",{account_id:t.owner_id},"30000000000000",d)),u=u.plus(d)),i||(l.unshift(S.transactions.functionCall("storage_deposit",{account_id:t.receiver_id},"30000000000000",d)),u=u.plus(d)),we(n.tokenAccountId)&&l.unshift(S.transactions.functionCall("near_deposit",{},"30000000000000",new Y.a(a).plus(u).toFixed())),j=n.account.signAndSendTransaction({receiverId:n.tokenAccountId,walletCallbackUrl:r,actions:l}),e.abrupt("return",j);case 14:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),this.tokenAccountId=a,this.account=t,this.contract=new S.Contract(t,a,{viewMethods:["ft_balance_of","ft_metadata","storage_balance_of"],changeMethods:["ft_transfer_call","storage_deposit","near_deposit"]})}return Object(U.a)(e,[{key:"getMetadata",value:function(){var e=Object(g.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contract.ft_metadata();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getBalance",value:function(){var e=Object(g.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.account.accountId){e.next=2;break}return e.abrupt("return","0");case 2:return e.next=4,this.contract.ft_balance_of({account_id:this.account.accountId});case 4:return t=e.sent,e.abrupt("return",t);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getIsRegistered",value:function(){var e=Object(g.a)(C.a.mark((function e(t){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contract.storage_balance_of({account_id:t});case 2:return a=e.sent,e.abrupt("return",a&&"0"!==a.total);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function ke(e){return Ne.apply(this,arguments)}function Ne(){return Ne=Object(g.a)(C.a.mark((function e(t){var a,n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.account,n=t.tokens,r={},e.next=4,Promise.all(Object.keys(n).map(function(){var e=Object(g.a)(C.a.mark((function e(t){var s,c,o,i,l,u;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=new ge(a,t),e.next=3,Promise.all([s.getMetadata(),s.getBalance()]);case 3:c=e.sent,o=Object(k.a)(c,2),i=o[0],l=o[1],u=new xe(i.decimals),r[t]={api:s,formatter:u,roketoMeta:n[t],meta:i,balance:l};case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:return e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)}))),Ne.apply(this,arguments)}var Ce=Math.pow(10,24),Se=Math.pow(10,18),Ie={"wrap.testnet":Ce,"dai.fakes.testnet":Se,"wrap.near":Ce,"dai.bridge.near":Se},Le=["get_assets","get_asset","get_price_data"],Be=[],Ae=function(e,t){return e.reduce((function(e,a){var n=Object(k.a)(a,2),r=n[0],s=n[1].reports.find((function(e){return e.oracle_id===t}));return s?Object(je.a)(Object(je.a)({},e),{},Object(f.a)({},r,s.price)):e}),{})},Me=function(e,t){return function(a,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,s=e[a],c=t[a];if(!s||!c)return"0";var o=s.multiplier,i=s.decimals;return de()(n).multiply(c).multiply(Number(o)).divide(Math.pow(10,i)).format({mantissa:r,trimMantissa:!0})}},Re=function(){var e=Object(g.a)(C.a.mark((function e(t){var a,n,r,s,c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.account,n=new S.Contract(a,F,{viewMethods:Le,changeMethods:Be}),e.next=4,n.get_assets({});case 4:return r=e.sent,s=Ae(r,T),c=Me(s,Ie),e.abrupt("return",{getPriceInUsd:c});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Fe=r.a.createContext(null);function Te(e){var t=e.children,a=Object(n.useState)(null),r=Object(k.a)(a,2),s=r[0],c=r[1];return Object(n.useEffect)((function(){var e=function(){var e=Object(g.a)(C.a.mark((function e(){var t,a,n,r,s,o,i,l;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:return t=e.sent,a=new S.WalletConnection(t,A),e.next=6,W(a);case 6:return n=e.sent,e.next=9,Promise.all([ce({account:n.account}),Re({account:n.account})]);case 9:return r=e.sent,s=Object(k.a)(r,2),o=s[0],i=s[1],e.next=15,ke({account:n.account,tokens:o.dao.tokens});case 15:l=e.sent,c({auth:n,near:t,roketo:o,priceOracle:i,walletConnection:a,tokens:l});case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(_.jsx)(Fe.Provider,{value:s,children:s?t:null})}var He=new Error("Near context is not found");function Ee(){var e=Object(n.useContext)(Fe);if(!e)throw He;return e}var Pe,Ve,De=a(18),We=a(91),Ze=a.n(We),qe=["type","displayMode","disabled","link","children","className","onClick","testId"];!function(e){e.button="button",e.submit="submit"}(Pe||(Pe={})),function(e){e.primary="primary",e.simple="simple",e.secondary="secondary",e.action="action",e.invisible="invisible"}(Ve||(Ve={}));var Ue=function(e){var t,a=e.type,n=void 0===a?Pe.button:a,r=e.displayMode,s=void 0===r?Ve.action:r,c=e.disabled,o=void 0!==c&&c,i=e.link,u=e.children,d=e.className,m=e.onClick,b=e.testId,p=Object(De.a)(e,qe),h=j()(Ze.a.root,(t={},Object(f.a)(t,Ze.a.primary,s===Ve.primary),Object(f.a)(t,Ze.a.secondary,s===Ve.secondary),Object(f.a)(t,Ze.a.action,s===Ve.action),Object(f.a)(t,Ze.a.simple,s===Ve.simple),t),d),O=Object(_.jsx)("button",Object(je.a)(Object(je.a)({type:n,className:h,onClick:m,disabled:o},p),{},{"data-testid":b,children:u}));return i?Object(_.jsx)(l.b,{to:i,children:O}):O},ze=function(e){var t=e.className;return Object(_.jsx)("svg",{className:t,width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",children:Object(_.jsx)("path",{d:"M7.09 12.59L8.5 14L13.5 9L8.5 4L7.09 5.41L9.67 8H0V10H9.67L7.09 12.59ZM16 0H2C0.89 0 0 0.9 0 2V6H2V2H16V16H2V12H0V16C0 17.1 0.89 18 2 18H16C17.1 18 18 17.1 18 16V2C18 0.9 17.1 0 16 0Z",fill:"currentColor"})})},Ye=a(137),Je=a.n(Ye),Xe=function(){var e=Ee().auth,t=e.login,a=e.logout;return e.signedIn?Object(_.jsx)("button",{type:"button",onClick:a,className:Je.a.logoutButton,"data-testid":Oe.signOutButton,children:Object(_.jsx)(ze,{})}):Object(_.jsxs)(Ue,{onClick:t,className:Je.a.root,testId:Oe.signInButton,children:[Object(_.jsx)("span",{className:Je.a.name,children:"Sign in with NEAR Wallet"}),Object(_.jsx)(ze,{})]})},Ke={legacyStreams:{path:"/streams/legacy",title:"Streams (legacy)"},legacyStream:{path:"/streams/legacy/:id"}};function Ge(e){return"".concat(window.location.origin,"/#/streams/legacy/").concat(e)}var Qe=a(66),$e=a.n(Qe),et=a(449),tt=a(446),at=function(e){var t=e.width,a=void 0===t?10:t,n=e.height,r=void 0===n?20:n,s=e.className;return Object(_.jsx)("svg",{className:s,width:a,height:r,viewBox:"0 0 10 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(_.jsx)("path",{d:"M10 15L10 11L8 11L8 15C8 16.65 6.65 18 5 18C3.35 18 2 16.65 2 15L2 11L-4.80825e-07 11L-6.55671e-07 15C-7.76314e-07 17.76 2.24 20 5 20C7.76 20 10 17.76 10 15ZM2 9L2 5C2 3.35 3.35 2 5 2C6.65 2 8 3.35 8 5L8 9L10 9L10 5C10 2.24 7.76 -9.79135e-08 5 -2.18557e-07C2.24 -3.392e-07 -9.79135e-08 2.24 -2.18557e-07 5L-3.93402e-07 9L2 9ZM6 6L6 14L4 14L4 6L6 6Z",fill:"currentColor"})})},nt=(a(330),["icon","children","className","size","loading","disabled","loadingText","color","variant"]),rt="main",st="filled",ct="outlined";function ot(e){var t=e.icon,a=e.children,n=e.className,r=e.size,s=e.loading,c=e.disabled,o=e.loadingText,i=e.color,u=void 0===i?"light":i,d=e.variant,m=void 0===d?"outlined":d,b=Object(De.a)(e,nt),p="",h="",f="";m===rt?(p="Button--main",h="normal"===r?"px-5 py-4  rounded-2xl font-semibold":"big"===r?"px-12 py-6 rounded-3xl font-bold":""):m===ct?(p="border-solid border font-semibold rounded-lg ",f="light"===u?"border-blue hover:bg-blue":"dark"===u?"border-border hover:bg-hover hover:border-hover":""):m===st&&(p="bg-dark hover:bg-hover font-semibold rounded-lg active:bg-transparent");var O={disabled:s||c,className:j()("inline-flex items-center justify-center p-3  whitespace-nowrap",p,h,f,c?"Button--disabled":"","transition-all",n)},x=s?o:Object(_.jsxs)(_.Fragment,{children:[t?Object(_.jsx)("div",{className:"mr-2",children:t}):null,a]});return b.link?Object(_.jsx)(l.b,Object(je.a)(Object(je.a)(Object(je.a)({},O),b),{},{children:x})):Object(_.jsx)("button",Object(je.a)(Object(je.a)(Object(je.a)({},O),b),{},{type:"button"===b.type?"button":"submit",children:x}))}var it=a.p+"static/media/RUSSIANS_HACK.83d68466.gif",lt=a.p+"static/media/crab.3fbdb8f2.gif";function ut(e){var t=e.message,a=e.onRetry,n=e.className,s=r.a.useRef(Math.random());return Object(_.jsxs)("div",{className:j()("text-center",n),children:[s.current>.5?Object(_.jsx)("img",{src:it,className:"mx-auto",alt:"funny hackers gif with bird dancing around"}):Object(_.jsx)("img",{src:lt,className:"mx-auto",alt:"crab with a knife tries to hurt people"}),Object(_.jsx)("h1",{className:"text-4xl font-semibold mb-6 mt-10",children:"Something is broken."}),Object(_.jsx)("p",{className:"text-gray mb-4",children:"Finally we have something to fix"}),t&&Object(_.jsx)("code",{className:"p-4 border-special-inactive border block text-special-inactive text-xs mb-4",children:t}),Object(_.jsx)(ot,{variant:"outlined",color:"dark",className:"mt-10",onClick:a,type:"button",children:"Try again"}),Object(_.jsx)("p",{className:"text-xs text-gray mt-2",children:"(that probably wont help)"})]})}var dt=function(e){var t=e.width,a=void 0===t?8:t,n=e.height,r=void 0===n?6:n,s=e.className;return Object(_.jsx)("div",{className:s,children:Object(_.jsx)("svg",{width:a,height:r,viewBox:"0 0 8 6",fill:"none",children:Object(_.jsx)("path",{d:"M7.06 0.726562L4 3.7799L0.94 0.726562L0 1.66656L4 5.66656L8 1.66656L7.06 0.726562Z",fill:"currentColor"})})})},jt=a(138),mt=a.n(jt),bt=["opened","className","children","onChange","testId"];function pt(e){var t=e.opened,a=e.className,n=e.children,r=e.onChange,s=e.testId,c=Object(De.a)(e,bt),o=j()(mt.a.arrow,Object(f.a)({},mt.a.rotate,t));return Object(_.jsxs)("button",Object(je.a)(Object(je.a)({type:"button",onClick:function(){return r(!t)},className:j()(mt.a.root,a),"data-testid":s},c),{},{children:[n,Object(_.jsx)(dt,{className:o})]}))}var ht=a(51),ft=a(248),_t=a(239),Ot={receiver:"",streamName:"",token:H,speed:0,deposit:0,delayed:!1,comment:"",isLocked:!1},xt=function(e,t){if(e<=0)return"none";var a=t.formatter,n=t.meta,r=a.tokensPerMeaningfulPeriod(e),s=r.formattedValue,c=r.unit;return"".concat(s," ").concat(n.symbol," / ").concat(c)},vt=function(e,t){var a=new Y.a(e),n=new Y.a(t);return a.isEqualTo(0)||n.isEqualTo(0)?new Y.a(0):a.dividedBy(n).multipliedBy(100)},yt=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return vt(e,t).dp(a)},wt=a(92),gt=a.n(wt),kt=function(e){var t=e.total,a=e.streamed,n=e.withdrawn,r=e.className,s=yt(a,t),c=yt(n,a);return Object(_.jsx)("div",{className:j()(gt.a.progressBar,r),children:Object(_.jsx)("div",{className:j()(gt.a.progress,gt.a.streamed),style:{width:"".concat(s,"%")},children:Object(_.jsx)("div",{className:j()(gt.a.progress,gt.a.withdrawn),style:{width:"".concat(c,"%")}})})})},Nt=["tokenAccountId","className"];function Ct(e){return Object(_.jsx)("svg",Object(je.a)(Object(je.a)({version:"1.0",xmlns:"http://www.w3.org/2000/svg",width:"20pt",height:"20pt",viewBox:"0 0 864.000000 864.000000",preserveAspectRatio:"xMidYMid meet"},e),{},{children:Object(_.jsx)("g",{transform:"translate(0.000000,864.000000) scale(0.100000,-0.100000)",fill:"#FFFFFF",stroke:"none",children:Object(_.jsx)("path",{d:"M2490 6461 c-164 -53 -265 -156 -314 -320 -14 -49 -16 -226 -16 -1821 0 -1595 2 -1772 16 -1821 25 -85 62 -148 118 -205 179 -178 476 -178 650 0 30 30 249 347 519 749 518 772 502 742 438 799 -21 19 -42 28 -66 28 -40 0 -6 28 -555 -449 -283 -246 -411 -351 -425 -349 -20 3 -20 11 -20 1238 l0 1235 21 3 c16 2 286 -315 1376 -1621 746 -892 1372 -1637 1392 -1654 94 -83 187 -113 351 -113 169 0 275 39 371 134 56 57 93 120 118 205 14 49 16 226 16 1821 0 1595 -2 1772 -16 1821 -25 85 -62 148 -118 205 -179 178 -476 178 -650 0 -30 -30 -249 -347 -519 -749 -518 -772 -502 -742 -438 -799 21 -19 42 -28 66 -28 40 0 6 -28 555 449 283 246 411 351 425 349 20 -3 20 -11 20 -1238 l0 -1235 -21 -3 c-16 -2 -286 315 -1376 1621 -746 892 -1372 1637 -1392 1654 -95 85 -187 113 -356 112 -82 0 -131 -5 -170 -18z"})})}))}function St(e){return Object(_.jsx)("svg",Object(je.a)(Object(je.a)({version:"1.0",xmlns:"http://www.w3.org/2000/svg",width:"20pt",height:"20pt",viewBox:"0 0 864.000000 864.000000",preserveAspectRatio:"xMidYMid meet"},e),{},{children:Object(_.jsx)("g",{transform:"translate(0.000000,864.000000) scale(0.100000,-0.100000)",fill:"#FFFFFF",stroke:"none",children:Object(_.jsx)("path",{d:"M2490 6461 c-164 -53 -265 -156 -314 -320 -14 -49 -16 -226 -16 -1821 0 -1595 2 -1772 16 -1821 25 -85 62 -148 118 -205 179 -178 476 -178 650 0 30 30 249 347 519 749 518 772 502 742 438 799 -21 19 -42 28 -66 28 -40 0 -6 28 -555 -449 -283 -246 -411 -351 -425 -349 -20 3 -20 11 -20 1238 l0 1235 21 3 c16 2 286 -315 1376 -1621 746 -892 1372 -1637 1392 -1654 94 -83 187 -113 351 -113 169 0 275 39 371 134 56 57 93 120 118 205 14 49 16 226 16 1821 0 1595 -2 1772 -16 1821 -25 85 -62 148 -118 205 -179 178 -476 178 -650 0 -30 -30 -249 -347 -519 -749 -518 -772 -502 -742 -438 -799 21 -19 42 -28 66 -28 40 0 6 -28 555 449 283 246 411 351 425 349 20 -3 20 -11 20 -1238 l0 -1235 -21 -3 c-16 -2 -286 315 -1376 1621 -746 892 -1372 1637 -1392 1654 -95 85 -187 113 -356 112 -82 0 -131 -5 -170 -18z"})})}))}var It={"wrap.testnet":Ct,"wrap.near":Ct};function Lt(e){var t,a,n=e.tokenAccountId,r=e.className,s=Object(De.a)(e,Nt),c=null===(t=Ee().tokens[n])||void 0===t||null===(a=t.meta)||void 0===a?void 0:a.icon;if(c)return Object(_.jsx)("img",Object(je.a)({src:c,alt:n,className:r},s));var o=n in It?It[n]:St;return Object(_.jsx)(o,Object(je.a)({className:r},s))}function Bt(e){var t=e.tokenAccountId,a=e.size,n=void 0===a?8:a,r=e.className;return Object(_.jsx)("div",{className:j()("p-1 flex-shrink-0 rounded-full bg-black inline-flex items-center justify-center","w-".concat(n," h-").concat(n),r),children:Object(_.jsx)(Lt,{className:"w-full h-full rounded-full",tokenAccountId:t})})}var At="INITIALIZED",Mt="ACTIVE",Rt="PAUSED",Ft="FINISHED",Tt="INTERRUPTED",Ht="in",Et="out",Pt="factory.bridge.near",Vt=["get_account","get_stream","get_stream_history","get_status"],Dt=["create_stream","deposit","update_account","start_stream","pause_stream","stop_stream","change_auto_deposit","start_cron"],Wt=a(139),Zt=a.n(Wt),qt=["children","className"];function Ut(e){var t=e.opened,a=e.children,n=e.className,s=e.onClose,c=r.a.useRef(null);return function(e,t){var a=function(a){var n=a.target;e.current&&n instanceof HTMLElement&&!e.current.contains(n)&&t()};r.a.useEffect((function(){return document.addEventListener("click",a),function(){document.removeEventListener("click",a)}}))}(c,(function(){t&&s()})),Object(_.jsx)("div",{ref:c,className:j()(Zt.a.menu,Object(f.a)({},Zt.a.hidden,!t),n),children:a})}function zt(e){var t=e.children,a=e.className,n=Object(De.a)(e,qt);return Object(_.jsx)("div",Object(je.a)(Object(je.a)({className:a},n),{},{children:t}))}function Yt(){return Object(_.jsx)("div",{className:Zt.a.menuDivider})}function Jt(e){var t=r.a.useState(e),a=Object(k.a)(t,2),n=a[0],s=a[1];return{on:n,off:!n,toggle:function(){return s(!n)},turnOff:function(){return s(!1)},turnOn:function(){return s(!0)},setOn:s}}function Xt(){return Kt.apply(this,arguments)}function Kt(){return(Kt=Object(g.a)(C.a.mark((function e(){var t,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new S.keyStores.BrowserLocalStorageKeyStore,e.next=3,Object(S.connect)({nodeUrl:B,walletUrl:M,networkId:L,keyStore:t,headers:{}});case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gt(e){var t=e.getAccountId();function a(){return(a=Object(g.a)(C.a.mark((function t(){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"Roketo Token Streaming Service",t.next=3,e.requestSignIn("dev-1635510732093-17387698050424","Roketo Token Streaming Service");case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function n(){return(n=Object(g.a)(C.a.mark((function t(){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.signOut();case 2:window.location.reload();case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return{account:e.account(),signedIn:!!t,accountId:t,login:function(){return a.apply(this,arguments)},logout:function(){return n.apply(this,arguments)}}}var Qt=["ft_balance_of"],$t=["ft_transfer","ft_transfer_call"],ea="dev-1635510732093-17387698050424",ta="200000000000000",aa=1e9;function na(e){return e.status===Ft||e.status===Tt}function ra(e){return e.status===Mt}var sa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"any";return{account_id:e,dynamic_inputs:[],dynamic_outputs:[],static_streams:[],last_action:null,ready_to_withdraw:[],total_incoming:[],total_outgoing:[],total_received:[],is_external_update_enabled:!1,cron_task:null}};function ca(e){var t=e.contract,a=e.ft,n=e.walletConnection,r=e.account,s=e.operationalCommission,c=e.tokens,o=function(){var e=Object(g.a)(C.a.mark((function e(a){var n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=sa(a),e.prev=1,e.next=4,t.get_account({account_id:a});case 4:return r=e.sent,e.abrupt("return",r||n);case 8:e.prev=8,e.t0=e.catch(1),console.debug("[RoketoContractApi]: nearerror",e.t0);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return{getCurrentAccount:function(){return o(n.getAccountId())},updateAccount:function(){var e=Object(g.a)(C.a.mark((function e(a){var n,c,o;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.tokensWithoutStorage,c=void 0===n?0:n,e.next=3,t.update_account({account_id:r.accountId},ta,new Y.a(1e22).multipliedBy(c).plus(s).toFixed());case 3:return o=e.sent,e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getAccount:o,createStream:function(){var e=Object(g.a)(C.a.mark((function e(r){var s,o,i,l,u,d,j,m,b,p,h,f,_=arguments;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=r.deposit,o=r.receiverId,i=r.token,l=r.speed,u=r.description,d=r.isAutoStartEnabled,j=void 0===d||d,m=_.length>1&&void 0!==_[1]?_[1]:{},b=m.callbackUrl,h=c[i].commission_on_create,e.prev=3,"NEAR"!==i){e.next=10;break}return e.next=7,t.create_stream({args:{owner_id:n.getAccountId(),receiver_id:o,token_name:i,tokens_per_tick:l,description:u,is_auto_deposit_enabled:!1,is_auto_start_enabled:j},gas:ta,amount:new Y.a(s).plus(h).toFixed(),callbackUrl:b});case 7:p=e.sent,e.next=14;break;case 10:return f=a[i].contract,e.next=13,f.ft_transfer_call({args:{receiver_id:t.contractId,amount:new Y.a(s).plus(h).toFixed(),memo:"Roketo transfer",msg:JSON.stringify({Create:{description:u,owner_id:n.getAccountId(),receiver_id:o,token_name:i,tokens_per_tick:l,balance:s,is_auto_deposit_enabled:!1,is_auto_start_enabled:j}})},gas:ta,amount:1,callbackUrl:b});case 13:p=e.sent;case 14:return e.abrupt("return",p);case 17:throw e.prev=17,e.t0=e.catch(3),console.debug(e.t0),e.t0;case 21:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(t){return e.apply(this,arguments)}}(),depositStream:function(){var e=Object(g.a)(C.a.mark((function e(n){var r,s,c,o;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.streamId,s=n.token,c=n.deposit,"NEAR"!==s){e.next=6;break}return e.next=4,t.deposit({stream_id:r},ta,c);case 4:e.next=9;break;case 6:return o=a[s].contract,e.next=9,o.ft_transfer_call({receiver_id:t.contractId,amount:c,msg:JSON.stringify({Deposit:r})},ta,1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pauseStream:function(){var e=Object(g.a)(C.a.mark((function e(a){var n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.streamId,e.next=3,t.pause_stream({stream_id:n},ta,s);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),startStream:function(){var e=Object(g.a)(C.a.mark((function e(a){var n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.streamId,e.next=3,t.start_stream({stream_id:n},ta,s);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),stopStream:function(){var e=Object(g.a)(C.a.mark((function e(a){var n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.streamId,e.next=3,t.stop_stream({stream_id:n},ta,s);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getStream:function(){var e=Object(g.a)(C.a.mark((function e(a){var n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.streamId,e.next=3,t.get_stream({stream_id:n});case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getStatus:function(){var e=Object(g.a)(C.a.mark((function e(){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get_status({});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getStreamHistory:function(){var e=Object(g.a)(C.a.mark((function e(a){var n,r,s,c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.streamId,r=a.from,s=a.to,e.next=3,t.get_stream_history({stream_id:n,from:r,to:s});case 3:return c=e.sent,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}var oa=function(e){var t={};return e.forEach((function(e){t[e.ticker]=e})),t};function ia(e){return la.apply(this,arguments)}function la(){return(la=Object(g.a)(C.a.mark((function e(t){var a,n,r,s,c,o,i,l,u;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.walletConnection,e.next=3,a.account();case 3:n=e.sent,e.next=6;break;case 6:return r=new S.Contract(n,ea,{viewMethods:Vt,changeMethods:Dt}),e.next=9,r.get_status({});case 9:return s=e.sent,c={},o=oa(s.tokens),s.tokens.forEach((function(e){c[e.ticker]={name:e.ticker,address:e.account_id,contract:new S.Contract(n,e.account_id,{viewMethods:Qt,changeMethods:$t})}})),i=ca({contract:r,ft:c,walletConnection:a,account:n,operationalCommission:s.operational_commission,tokens:o}),l=function(e){return s.tokens.find((function(t){return t.ticker===e}))},u=function(e){var t=l(e);return Boolean(null===t||void 0===t?void 0:t.account_id.endsWith(Pt))},e.abrupt("return",{api:i,status:s,tokenMeta:l,isBridged:u});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ua=Object(U.a)((function e(t){var a=t.ticker,n=t.metadata;Object(q.a)(this,e),this.ticker=void 0,this.metadata=void 0,this.ticker=a,this.metadata=n}));var da=new ua({ticker:"NEAR",metadata:{spec:null,name:"Near Protocol",symbol:"NEAR",icon:"",reference:null,reference_hash:null,decimals:24}}),ja=function(){function e(t){var a=this,n=t.tokens,r=t.account;Object(q.a)(this,e),this.__tokens=void 0,this.__account=void 0,this.__contracts=void 0,this.tokens=void 0,this.__tokens=n,this.__account=r,this.__contracts={},this.tokens={},n&&r&&n.forEach((function(e){a.__contracts[e.ticker]=function(e,t){return new S.Contract(e,t,{viewMethods:["ft_balance_of","ft_metadata","storage_balance_of"],changeMethods:["ft_transfer","ft_transfer_call"]})}(r,e.account_id)}))}return Object(U.a)(e,[{key:"tickers",get:function(){return Object.keys(this.tokens)}},{key:"contract",value:function(e){return this.__contracts[e]}},{key:"get",value:function(e){return this.tokens[e]||new ua({ticker:e,metadata:{spec:null,name:e,symbol:e,icon:"",reference:null,reference_hash:null,decimals:24}})}},{key:"init",value:function(){var e=Object(g.a)(C.a.mark((function e(){var t=this;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(this.__tokens.map(function(){var e=Object(g.a)(C.a.mark((function e(a){var n,r,s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("NEAR"!==a.ticker){e.next=4;break}n=da,e.next=15;break;case 4:if(a.account_id){e.next=8;break}n=new ua({ticker:a.ticker,metadata:{spec:null,name:a.ticker,symbol:a.ticker,icon:"",reference:null,reference_hash:null,decimals:24}}),e.next=15;break;case 8:return r=t.contract(a.ticker),e.next=11,r.ft_metadata();case 11:if(!((s=e.sent).decimals<8)){e.next=14;break}return e.abrupt("return");case 14:n=new ua({ticker:a.ticker,metadata:s});case 15:t.tokens[a.ticker]=n;case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"balance",value:function(){var e=Object(g.a)(C.a.mark((function e(t){var a,n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("NEAR"!==t){e.next=5;break}return e.next=3,this.__account.getAccountBalance();case 3:return a=e.sent,e.abrupt("return",a.total);case 5:return n=this.contract(t),e.next=8,n.ft_balance_of({account_id:this.__account.accountId});case 8:return r=e.sent,e.abrupt("return",r);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ftStorageBalance",value:function(){var e=Object(g.a)(C.a.mark((function e(t){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.contract(t),e.next=3,a.storage_balance_of({account_id:this.__account.accountId});case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ma=r.a.createContext(null);function ba(e){var t=e.children,a=Object(n.useState)(null),r=Object(k.a)(a,2),s=r[0],c=r[1];return Object(n.useEffect)((function(){var e=function(){var e=Object(g.a)(C.a.mark((function e(){var t,a,n,r,s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xt();case 2:return t=e.sent,a=new S.WalletConnection(t,A),n=Gt(a),e.next=7,ia({walletConnection:a});case 7:return r=e.sent,s=new ja({account:a.account(),tokens:r.status.tokens}),e.next=11,s.init();case 11:c({auth:n,near:t,roketo:r,walletConnection:a,tokens:s});case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(_.jsx)(ma.Provider,{value:s,children:s?t:null})}var pa,ha=new Error("Near context is not found");function fa(){var e=Object(n.useContext)(ma);if(!e)throw ha;return e}var _a=(pa={},Object(f.a)(pa,At,{label:"Initialized"}),Object(f.a)(pa,Mt,{label:"Active"}),Object(f.a)(pa,Rt,{label:"Paused"}),Object(f.a)(pa,Ft,{label:"Finished"}),Object(f.a)(pa,Tt,{label:"Finished"}),pa);function Oa(e){var t=e.stream,a=e.className,n=_a[t.status];return Object(_.jsx)("div",{className:j()(a),children:n.label})}var xa=a(20),va=a.n(xa);function ya(){return Object(_.jsx)("svg",{width:"8",height:"10",viewBox:"0 0 8 10",fill:"none",children:Object(_.jsx)("path",{d:"M1.66634 2.76016L5.17968 5.00016L1.66634 7.24016V2.76016ZM0.333008 0.333496V9.66683L7.66634 5.00016L0.333008 0.333496Z",fill:"currentColor"})})}function wa(){return Object(_.jsx)("svg",{width:"8",height:"10",viewBox:"0 0 8 10",fill:"none",children:Object(_.jsx)("path",{d:"M0 9.66659H2.66667V0.333252H0V9.66659ZM5.33333 0.333252V9.66659H8V0.333252H5.33333Z",fill:"currentColor"})})}function ga(){return Object(_.jsx)("svg",{width:"8",height:"8",viewBox:"0 0 8 8",fill:"none",children:Object(_.jsx)("path",{d:"M6.66667 1.33333V6.66667H1.33333V1.33333H6.66667ZM8 0H0V8H8V0Z",fill:"currentColor"})})}function ka(e){var t=e.modalControl,a=e.onConfirm;return Object(_.jsxs)(i.a,{isOpen:t.on,onRequestClose:t.turnOff,className:va.a.modalContent,overlayClassName:va.a.modalOverlay,children:[Object(_.jsx)("h2",{className:va.a.modalHeader,children:"Are you sure?"}),Object(_.jsx)("p",{children:"As a stream receiver, you will not be able to resume stream. Only stream owners can resume streams."}),Object(_.jsxs)("div",{className:va.a.modalButtons,children:[Object(_.jsx)("button",{type:"button",onClick:t.turnOff,className:j()(va.a.modalButton,va.a.modalSecondary),children:"Cancel"}),Object(_.jsx)("button",{type:"button",onClick:function(){t.turnOff(),a()},className:j()(va.a.modalButton,va.a.modalWarning),children:"Pause"})]})]})}function Na(e){var t=e.modalControl,a=e.onConfirm;return Object(_.jsxs)(i.a,{isOpen:t.on,onRequestClose:t.turnOff,className:va.a.modalContent,overlayClassName:va.a.modalOverlay,children:[Object(_.jsx)("h2",{className:va.a.modalHeader,children:"Stop stream"}),Object(_.jsx)("p",{children:"This action will completely shut down the stream. After that, it can't be turned on."}),Object(_.jsxs)("div",{className:va.a.modalButtons,children:[Object(_.jsx)("button",{type:"button",onClick:t.turnOff,className:j()(va.a.modalButton,va.a.modalSecondary),children:"Cancel"}),Object(_.jsx)("button",{type:"button",onClick:function(){t.turnOff(),a()},className:j()(va.a.modalButton,va.a.modalDanger),children:"Stop"})]})]})}function Ca(e){var t,a=e.stream,r=e.className,s=fa(),c=s.auth,o=s.roketo,i=Jt(!1),l=Jt(!1),u=Object(n.useState)(!1),d=Object(k.a)(u,2),m=d[0],b=d[1],p=Object(n.useState)(!1),h=Object(k.a)(p,2),O=h[0],x=h[1],v=c.accountId===a.owner_id,y=c.accountId===a.receiver_id,w=!v&&!y,N=function(){var e=Object(g.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.next=3,o.api.pauseStream({streamId:a.id});case 3:b(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(g.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.next=3,o.api.startStream({streamId:a.id});case 3:b(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(g.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.next=3,o.api.stopStream({streamId:a.id});case 3:b(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(na(a)||w)return Object(_.jsx)(Oa,{className:r,stream:a});var L=O&&!m,B=a.status!==Mt&&v,A=a.status===Mt,M=(t={},Object(f.a)(t,va.a.active,ra(a)),Object(f.a)(t,va.a.pause,function(e){return e.status===Rt}(a)),Object(f.a)(t,va.a.stop,na(a)),t);return Object(_.jsxs)("div",{className:j()(va.a.relative,r),children:[Object(_.jsx)(ka,{modalControl:i,onConfirm:N}),Object(_.jsx)(Na,{modalControl:l,onConfirm:I}),Object(_.jsx)(pt,{opened:L,onChange:x,className:j()(va.a.dropdownOpener,M),children:m?"Loading...":Object(_.jsx)(Oa,{stream:a,className:va.a.statusPadded})}),Object(_.jsxs)(Ut,{onClose:function(){return x(!1)},opened:L,className:va.a.controlsMenu,children:[B&&Object(_.jsx)(zt,{children:Object(_.jsxs)("button",{type:"button",onClick:S,className:j()(va.a.controlButton,va.a.start),children:[Object(_.jsx)(ya,{}),Object(_.jsx)("span",{children:"Start"})," "]})}),A&&Object(_.jsx)(zt,{children:Object(_.jsxs)("button",{type:"button",onClick:function(){x(!1),y?i.turnOn():N()},className:j()(va.a.controlButton,va.a.pause),children:[Object(_.jsx)(wa,{}),Object(_.jsx)("span",{children:"Pause"})]})}),(B||A)&&Object(_.jsx)(Yt,{}),Object(_.jsx)(zt,{children:Object(_.jsxs)("button",{type:"button",onClick:function(){x(!1),l.turnOn()},className:j()(va.a.controlButton,va.a.stop),children:[Object(_.jsx)(ga,{}),Object(_.jsx)("span",{children:"Stop"})]})})]})]})}var Sa="in",Ia="out";function La(e){var t=fa().auth;return e.receiver_id===t.accountId?Sa:e.owner_id===t.accountId?Ia:null}var Ba=a(15),Aa=a(40),Ma=a(240),Ra=a(450),Fa=a(445);function Ta(e,t){return e.map((function(e){return Object(je.a)(Object(je.a)({},e),{},{direction:e.owner_id===t?Et:e.receiver_id===t?Ht:null})}))}function Ha(){var e=fa(),t=e.auth,a=e.roketo;return Object(Aa.a)(["account",t.accountId],a.api.getCurrentAccount,{errorRetryInterval:250})}function Ea(e,t,a){if(!ra(e))return e;var n=Object(Ma.a)(Date.now(),a);return Object(je.a)(Object(je.a)({},e),{},{available_to_withdraw:String(Math.min(Number(t)+Number(e.tokens_per_tick)*aa*n,Number(e.balance)))})}var Pa={values:{},cachedAt:0};function Va(e){var t=e.account,a=fa(),s=a.auth,c=a.roketo,o=Object(n.useRef)(Pa),i=Object(n.useRef)(0),l=Object(Aa.a)((function(){return!!t&&["streams",t.account_id,t.last_action]}),Object(g.a)(C.a.mark((function e(){var a,n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[].concat(Object(Ba.a)((null===t||void 0===t?void 0:t.dynamic_inputs)||[]),Object(Ba.a)((null===t||void 0===t?void 0:t.dynamic_outputs)||[]),Object(Ba.a)((null===t||void 0===t?void 0:t.static_streams)||[])),e.next=3,Promise.all(a.map((function(e){return c.api.getStream({streamId:e})})));case 3:return n=e.sent,r=Ta(n,s.accountId).filter((function(e){return!na(e)})),o.current={values:r.reduce((function(e,t){return Object.assign(e,Object(f.a)({},t.id,t.available_to_withdraw))}),{}),cachedAt:Date.now()},i.current=29,e.abrupt("return",{inputs:r.filter((function(e){return e.direction===Ht})),outputs:r.filter((function(e){return e.direction===Et}))});case 8:case"end":return e.stop()}}),e)}))));return r.a.useEffect((function(){var e=setTimeout((function(){if(!l.data||i.current<=0)l.mutate();else{i.current-=1;var e=function(e){return Ea(e,o.current.values[e.id],o.current.cachedAt)};l.mutate({inputs:l.data.inputs.map(e),outputs:l.data.outputs.map(e)},{revalidate:!1})}}),1e3);return function(){return clearTimeout(e)}}),[l]),l}var Da={value:"",cachedAt:0};function Wa(e,t){if(function(e){return e.status===At||e.status===Rt}(e))return null;var a=new Y.a(e.tokens_per_tick).multipliedBy(1e6);return Number(e.timestamp_created)/1e6+t.dividedBy(a).toNumber()}function Za(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=290304e5,n=t?new Y.a(e.available_to_withdraw):new Y.a(0),r=Y.a.minimum(a,new Y.a(e.balance).minus(n).dividedBy(e.tokens_per_tick).dividedBy(aa).toFixed()).toNumber(),s=Object(Ra.a)({start:0,end:1e3*r});(s.days||s.weeks||s.months||s.years)&&(s.seconds=0);var c=Object(Fa.a)(s,{locale:K}),o=new Y.a(e.balance),i=o.plus(e.tokens_total_withdrawn),l=new Y.a(e.tokens_total_withdrawn),u=l.plus(n),d=i.minus(u),j=[l.dividedBy(i).toNumber(),u.dividedBy(i).toNumber()],m={left:i.minus(u).dividedBy(i).toNumber(),streamed:u.dividedBy(i).toNumber(),withdrawn:l.dividedBy(i).toNumber(),available:n.dividedBy(i).toNumber()};return{secondsLeft:r,progresses:j,isDead:na(e),percentages:m,timeLeft:c,streamEndInfo:Wa(e,o),progress:{full:i.toFixed(),withdrawn:l.toFixed(),streamed:u.toFixed(),left:d.toFixed(),available:n.toFixed()}}}function qa(e){var t=e.className;return Object(_.jsx)("svg",{className:t,width:"8",height:"12",viewBox:"0 0 8 12",fill:"none",children:Object(_.jsx)("path",{d:"M0.895051 11.6285C0.745051 11.6285 0.603384 11.5702 0.495051 11.4535C0.295051 11.2285 0.311718 10.8869 0.528384 10.6869L5.836 5.90328L0.495028 1.27828C0.270028 1.07828 0.261695 0.736613 0.461695 0.511613C0.661695 0.294947 1.00336 0.27828 1.22836 0.47828L6.97766 5.46995C7.23599 5.70328 7.23599 6.10328 6.97766 6.33662L1.26172 11.4869C1.15338 11.5869 1.02838 11.6285 0.895051 11.6285Z",fill:"currentColor"})})}var Ua=a(11),za=a.n(Ua),Ya=a(89),Ja=(a(429),a(176)),Xa=a.n(Ja);function Ka(e){var t=e.placement,a=void 0===t?"top":t,n=e.children,r=e.overlay,s=e.align,c=e.overlayClassName;return Object(_.jsx)(Ya.a,{align:s,placement:a,overlay:r,overlayClassName:j()(Xa.a.defaultOverlay,c),children:n||Object(_.jsx)("span",{className:Xa.a.defaultIcon,children:"?"})})}function Ga(e){console.assert(e,"Provide stream id to use stream methods")}function Qa(e){var t=Ee().tokens;return we(e)&&(t[e].meta.symbol="NEAR"),t["NEAR"===e?H:e]}var $a=["NEAR"];function en(e){var t=e.ticker,a=e.balance,n=e.className,r=Qa(t).formatter.amount(a);return Object(_.jsxs)("div",{className:j()("inline-flex items-center p-2 rounded-lg border",n),style:{borderColor:"#A7B0BE"},children:[Object(_.jsx)(Bt,{tokenAccountId:t,className:"mr-2"})," ",Object(_.jsxs)("div",{children:[Object(_.jsxs)("div",{children:[Object(_.jsx)("span",{className:"font-semibold",children:r})," ",Object(_.jsx)("span",{className:"text-gray",children:t})]}),Object(_.jsx)("div",{children:t})]})]})}function tn(e){var t=fa().auth,a=function(e){var t=fa().roketo,a=r.a.useState(!1),n=Object(k.a)(a,2),s=n[0],c=n[1];function o(){return(o=Object(g.a)(C.a.mark((function e(a){var n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.tokensWithoutStorage,r=void 0===n?0:n,e.next=3,t.api.updateAccount({tokensWithoutStorage:r});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function i(){return(i=Object(g.a)(C.a.mark((function a(n){var r,s;return C.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=n.token,s=n.deposit,Ga(e),a.next=4,t.api.depositStream({token:r,deposit:s,streamId:e});case 4:case"end":return a.stop()}}),a)})))).apply(this,arguments)}function l(){return(l=Object(g.a)(C.a.mark((function a(){var n;return C.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return Ga(e),console.debug("pausing",e),a.next=4,t.api.pauseStream({streamId:e});case 4:n=a.sent,console.debug("pausing res",n);case 6:case"end":return a.stop()}}),a)})))).apply(this,arguments)}function u(){return(u=Object(g.a)(C.a.mark((function a(){var n;return C.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return Ga(e),console.debug("restarting",e),a.next=4,t.api.startStream({streamId:e});case 4:n=a.sent,console.debug("restarting res",n);case 6:case"end":return a.stop()}}),a)})))).apply(this,arguments)}function d(){return(d=Object(g.a)(C.a.mark((function a(){var n;return C.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return Ga(e),console.debug("Stop called stopping",e),a.next=4,t.api.stopStream({streamId:e});case 4:n=a.sent,console.debug("stopping res",n);case 6:case"end":return a.stop()}}),a)})))).apply(this,arguments)}function j(e){return Object(g.a)(C.a.mark((function t(){var a=arguments;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!s){t.next=2;break}return t.abrupt("return");case 2:return c(!0),t.prev=3,t.next=6,e.apply(void 0,a);case 6:return t.prev=6,c(!1),t.finish(6);case 9:case"end":return t.stop()}}),t,null,[[3,,6,9]])})))}return{loading:s,updateAllAndWithdraw:j((function(e){return o.apply(this,arguments)})),pause:j((function(){return l.apply(this,arguments)})),restart:j((function(){return u.apply(this,arguments)})),stop:j((function(){return d.apply(this,arguments)})),deposit:j((function(e){return i.apply(this,arguments)}))}}(),s=Object(Aa.b)().mutate,c=Jt(!1),o=function(){var e=fa(),t=e.roketo,a=e.tokens,r=Ha(),s=Va({account:r.data}),c=Object(n.useMemo)((function(){var e={};return r.data&&s.data&&(r.data.ready_to_withdraw.forEach((function(t){var a=Object(k.a)(t,2),n=a[0],r=a[1];e[n]=e[n]||0,e[n]+=Number(r)})),s.data.inputs.forEach((function(t){e[t.ticker]=e[t.ticker]||0,e[t.ticker]+=Number(t.available_to_withdraw)}))),e}),[r.data,s.data]),o=Object(Aa.a)((function(){c.NEAR;var e=Object(De.a)(c,$a),t=Object.keys(e);return t.sort(),JSON.stringify(t)}),(function(e){var t=JSON.parse(e);return Promise.all(t.map(function(){var e=Object(g.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.t1=Boolean,e.next=4,a.ftStorageBalance(t);case 4:return e.t2=e.sent,e.t3=(0,e.t1)(e.t2),e.abrupt("return",{ticker:e.t0,hasStorageBalance:e.t3});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}),{refreshInterval:5e3}),i=!r.data||!s.data||!o.data,l=(o.data||[]).filter((function(e){return!e.hasStorageBalance})),u=l.filter((function(e){var a=e.ticker;return t.isBridged(a)})),d=0===u.length&&o.data;return{balances:Object.entries(c),loading:i,tokensRequireManualDeposit:u,notRegisteredTokens:l,isSafeToWithdraw:d}}(),l=o.balances,u=o.loading,d=o.isSafeToWithdraw,j=o.notRegisteredTokens;function m(){return(m=Object(g.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.updateAllAndWithdraw({tokensWithoutStorage:j.length});case 2:s(["account",t.accountId]);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return(b=Object(g.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.setOn(!0);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var p=Object(_.jsxs)(i.a,{isOpen:c.on,onRequestClose:c.turnOff,className:"ModalContent",overlayClassName:"ModalOverlay",children:[Object(_.jsx)("h2",{className:"text-2xl mb-6",children:"Restricted withdrawal"}),Object(_.jsxs)("p",{children:["Due to NEP-141 issues you are required to do storage deposit before withdrawing. You can do it by buying any amount of"," ",j.map((function(e){return e.ticker})).join(", ")," ","tokens at any DEX"]})]}),h=u?function(){}:function(){d?function(){m.apply(this,arguments)}():function(){b.apply(this,arguments)}()};return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(Ka,{placement:"bottom",align:{offset:[0,20]},overlay:Object(_.jsxs)("div",{className:"text-left",children:[Object(_.jsx)("p",{className:"mb-4 text-gray",children:"Move all received tokens to your wallet. With Roketo you can only withdraw from all your legacy streams simultaneously."}),Object(_.jsx)("div",{className:"text-left",children:u?Object(_.jsx)("p",{className:"font-semibold text-center",children:"Loading balances..."}):l.length?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("p",{className:"font-semibold mb-2",children:"Available balances:"}),Object(_.jsx)("div",{children:l.map((function(e){var t=Object(k.a)(e,2),a=t[0],n=t[1];return Object(_.jsx)(en,{ticker:a,balance:n,className:"w-full mb-2"},a)}))})]}):Object(_.jsx)("p",{className:"font-semibold text-center",children:"You have nothing to withdraw"})})]}),children:Object(_.jsx)(Ue,Object(je.a)(Object(je.a)({},e),{},{onClick:h,displayMode:Ve.action}))}),c.on?p:null]})}function an(e){var t=e.stream,a=Ee().tokens["NEAR"===t.ticker?H:t.ticker],n=a.meta,r=a.formatter,s=Za(t).progress,c=s.streamed,o=s.withdrawn,i=s.full;return Object(_.jsxs)("div",{children:[Object(_.jsxs)("div",{className:za.a.numericProgress,children:[Object(_.jsx)(Bt,{tokenAccountId:"NEAR"===t.ticker?H:t.ticker,className:za.a.tokenIcon}),Object(_.jsx)("span",{children:"".concat(n.symbol," ").concat(r.amount(c)," of ").concat(r.amount(i))})]}),Object(_.jsx)(kt,{total:Number(i),streamed:Number(c),withdrawn:Number(o)})]})}function nn(e){var t=e.stream,a=Za(t).isDead,n=La(t);return a?null:Object(_.jsxs)("div",{className:za.a.buttons,children:[Object(_.jsx)(Ca,{stream:t}),n===Sa&&t.status===Mt&&"0"!==t.available_to_withdraw&&Object(_.jsx)(tn,{children:"Withdraw all"})]})}function rn(e){var t=e.stream,a=Ee().tokens;return Object(_.jsxs)("div",{children:[Object(_.jsx)("span",{className:za.a.blockTitle,children:"Speed"}),Object(_.jsx)("div",{className:za.a.speed,children:xt(Number(t.tokens_per_tick)*aa,a["NEAR"===t.ticker?H:t.ticker])})]})}function sn(e){var t=e.stream,a="";try{a=JSON.parse(t.description).comment}catch(n){a=t.description}return""===a?null:Object(_.jsxs)("div",{children:[Object(_.jsx)("span",{className:za.a.blockTitle,children:"Comment"}),Object(_.jsx)("div",{className:za.a.commentBody,children:a})]})}function cn(e){var t=e.stringToCopy;return Object(_.jsx)("button",{type:"button",className:za.a.copyButton,onClick:function(){return $e()(t)},children:Object(_.jsx)(at,{className:za.a.linkIcon})})}function on(e){var t=Ge(e.stream.id);return Object(_.jsxs)("div",{children:[Object(_.jsxs)("div",{className:j()(za.a.blockTitle,za.a.copyTitle),children:["Public link to view the stream",Object(_.jsx)(cn,{stringToCopy:t})]}),Object(_.jsx)("div",{className:za.a.link,children:t})]})}function ln(e){var t=e.title,a=e.children;return Object(_.jsxs)("div",{className:za.a.infoRow,children:[Object(_.jsx)("span",{className:za.a.infoTitle,children:t}),a]})}function un(e){var t=e.stream,a=La(t),r=Ee().tokens,s=Za(t),c=s.streamEndInfo,o=s.timeLeft,i=s.progress,l=i.streamed,u=i.left,d=i.full,m=yt(l,d).toNumber(),b=yt(u,d).toNumber(),p=Number(t.available_to_withdraw),h=r["NEAR"===t.ticker?H:t.ticker],f=h.meta,O=h.formatter,x=Object(n.useState)(!1),v=Object(k.a)(x,2),y=v[0],w=v[1];return Object(_.jsxs)("div",{className:j()(za.a.tile,za.a.infoTile),children:[Object(_.jsx)("div",{className:za.a.blockHeader,children:"Stream info"}),Object(_.jsx)(ln,{title:"Sender",children:Object(_.jsx)("span",{className:za.a.font16,children:a===Ia?"You":t.owner_id})}),Object(_.jsx)(ln,{title:"Receiver",children:Object(_.jsx)("span",{className:za.a.font16,children:a===Sa?"You":t.receiver_id})}),Object(_.jsx)(ln,{title:"Amount",children:Object(_.jsxs)("span",{className:za.a.font14,children:[O.amount(d),"\xa0",Object(_.jsx)("span",{className:za.a.font12,children:f.symbol})]})}),Object(_.jsx)(ln,{title:"Stream Created",children:Object(_.jsx)("span",{className:za.a.font14,children:Object(et.a)(new Date(Number(t.timestamp_created)/1e6),"PP 'at' p")})}),null!==c&&Object(_.jsx)(ln,{title:Object(tt.a)(c)?"Stream Ended":"Stream Ends",children:Object(_.jsx)("span",{className:za.a.font14,children:Object(et.a)(new Date(c),"PP 'at' p")})}),Object(_.jsx)(ln,{title:"Token",children:Object(_.jsxs)("span",{className:za.a.font14,children:[f.name,",\xa0",Object(_.jsx)("span",{className:za.a.font12,children:f.symbol})]})}),Object(_.jsx)("div",{className:za.a.divider}),Object(_.jsx)(pt,{className:za.a.dropdownOpener,opened:y,onChange:function(e){w(e)},children:Object(_.jsx)("h3",{className:za.a.sectionHeader,children:"Other info"})}),y&&Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(ln,{title:"Stream ID",children:Object(_.jsxs)("div",{className:za.a.centeredFlex,children:[Object(_.jsx)("span",{className:j()(za.a.font14,za.a.streamID),children:t.id}),Object(_.jsx)(cn,{stringToCopy:t.id})]})}),Object(_.jsx)(ln,{title:"Remaining",children:Object(_.jsx)("span",{className:za.a.font14,children:o||"Finished"})}),Object(_.jsx)(ln,{title:"Tokens Transferred",children:Object(_.jsxs)("span",{className:za.a.font14,children:[O.amount(l),"\xa0",Object(_.jsxs)("span",{className:za.a.font12,children:[f.symbol," ",Object(_.jsxs)("span",{className:za.a.grey,children:["(",m,"%)"]})]})]})}),Object(_.jsx)(ln,{title:"Tokens Left",children:Object(_.jsxs)("span",{className:za.a.font14,children:[O.amount(u),"\xa0",Object(_.jsxs)("span",{className:za.a.font12,children:[f.symbol," ",Object(_.jsxs)("span",{className:za.a.grey,children:["(",b,"%)"]})]})]})}),Object(_.jsx)(ln,{title:"Tokens Available",children:Object(_.jsxs)("span",{className:za.a.font14,children:[O.amount(p),"\xa0",Object(_.jsx)("span",{className:za.a.font12,children:f.symbol})]})})]})]})}function dn(){var e=Object(u.h)().id,t=function(e,t){var a=fa().roketo,s=Object(n.useRef)(Da),c=Object(n.useRef)(0),o=Object(Aa.a)((function(){return!!t&&["stream",e,t.account_id,t.last_action]}),Object(g.a)(C.a.mark((function t(){var n;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.api.getStream({streamId:e});case 2:return n=t.sent,s.current={value:n.available_to_withdraw,cachedAt:Date.now()},c.current=9,t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)}))),{errorRetryInterval:2e3,errorRetryCount:3}),i=o.data||{balance:null,available_to_withdraw:null,status:null},l=i.balance===i.available_to_withdraw;return r.a.useEffect((function(){if(i.status===Mt&&!l){var e=setTimeout((function(){!o.data||c.current<=0?o.mutate():(c.current-=1,o.mutate(Ea(o.data,s.current.value,s.current.cachedAt),{revalidate:!1}))}),1e3);return function(){return clearTimeout(e)}}}),[i.status,l,o]),o}(e,Ha().data),a=t.data,s=t.error;return Object(_.jsx)("div",{className:za.a.root,children:Object(_.jsxs)(w,{children:[Object(_.jsxs)("div",{className:za.a.breadbrumbs,children:[Object(_.jsx)(l.b,{to:Ke.legacyStreams.path,className:za.a.streamsLink,children:"Streams (legacy)"}),Object(_.jsx)(qa,{className:za.a.breadbrumb}),Object(_.jsx)("span",{className:za.a.id,children:e})]}),s&&Object(_.jsx)(ut,{className:"max-w-2xl mx-auto py-32",message:s.message,onRetry:function(){t.mutate()}}),!s&&!a&&Object(_.jsx)("div",{className:"py-32 text-center text-gray text-2xl",children:"Loading..."}),!s&&a&&Object(_.jsxs)("main",{className:za.a.stream,children:[Object(_.jsxs)("div",{className:za.a.left,children:[Object(_.jsxs)("div",{className:j()(za.a.tile,za.a.remaining),children:[Object(_.jsx)("span",{className:za.a.blockTitle,children:"Remaining"}),Object(_.jsx)("span",{children:Za(a).timeLeft||"Finished"})]}),Object(_.jsxs)("div",{className:j()(za.a.tile,za.a.main),children:[Object(_.jsx)(an,{stream:a}),Object(_.jsx)(nn,{stream:a}),Object(_.jsx)(rn,{stream:a}),Object(_.jsx)("div",{className:za.a.divider}),Object(_.jsx)(sn,{stream:a}),Object(_.jsx)(on,{stream:a})]})]}),Object(_.jsx)("div",{className:za.a.right,children:Object(_.jsx)(un,{stream:a})})]})]})})}var jn,mn=a(243),bn=a.n(mn);!function(e){e.asc="ascending",e.desc="descending"}(jn||(jn={}));var pn=function(e){var t=e.width,a=void 0===t?24:t,n=e.height,r=void 0===n?24:n,s=e.type,c=void 0===s?jn.desc:s,o=e.className;return Object(_.jsx)("div",{className:j()(Object(f.a)({},bn.a.rotate,c===jn.asc),o),children:Object(_.jsx)("svg",{width:a,height:r,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(_.jsx)("path",{d:"M3 18H9V16H3V18ZM3 6V8H21V6H3ZM3 13H15V11H3V13Z",fill:"#2B313B"})})})},hn=a(110),fn=a.n(hn);function _n(e){var t=e.active,a=e.label,n=e.value,r=e.onChange;return Object(_.jsxs)("label",{className:fn.a.root,children:[Object(_.jsx)("input",{type:"radio",className:"invisible w-0 h-0 absolute",checked:t,onChange:function(){return r(n)}}),Object(_.jsx)("div",{className:j()(fn.a.radio,Object(f.a)({},fn.a.radioActive,t))}),Object(_.jsx)("div",{className:fn.a.text,children:a})]})}var On=a(111),xn=a.n(On);function vn(e){var t=e.count,a=e.option;return Object(_.jsxs)("span",{children:[a," ",Object(_.jsx)("span",{className:"text-gray font-normal",children:t})]})}function yn(e){var t=e.label,a=e.options,r=e.renderOption,s=e.renderActive,c=e.active,o=e.onChange,i=e.className,l=e.isDisabled,u=Object(n.useState)(!1),d=Object(k.a)(u,2),m=d[0],b=d[1];return Object(_.jsxs)("div",{className:j()(xn.a.root,i),children:[t&&Object(_.jsx)("div",{className:"text-gray mr-2",children:t}),Object(_.jsxs)("div",{className:xn.a.dropdownWrapper,children:[Object(_.jsx)(pt,{className:j()(l&&xn.a.dropdownInactive,l&&"text-gray"),opened:!l&&m,onChange:b,children:s?s(c):c}),Object(_.jsx)(Ut,{opened:!l&&m,className:xn.a.dropdownMenu,onClose:function(){b(!1)},children:a.map((function(e){return Object(_.jsx)(_n,{label:r?r(e,c===e):e,active:c===e,value:e,onChange:o})}))})]})]})}var wn,gn=a(140),kn=a.n(gn),Nn=function(e){var t=e.directions,a=e.activeDirection,n=e.onDirectionClick,r=e.isInactive;return Object(_.jsx)("div",{className:kn.a.root,children:t.map((function(e){return Object(_.jsx)(Ue,{className:j()(kn.a.sort,Object(f.a)({},kn.a.active,e===a)),onClick:function(){return n(e)},disabled:r,children:e},e)}))})};function Cn(e){var t=e.options,a=Object(n.useMemo)((function(){return Object.keys(t)}),[t]),r=Object(n.useState)(a[0]),s=Object(k.a)(r,2),c=s[0],o=s[1];return Object(n.useMemo)((function(){var e=t[c];return{option:c,selectOption:o,options:t,optionsArray:a,currentFilterFunction:e}}),[t,c,a])}var Sn="All",In="Incoming",Ln="Outgoing",Bn=(wn={ALL:"All"},Object(f.a)(wn,At,"Initialized"),Object(f.a)(wn,Mt,"Active"),Object(f.a)(wn,Rt,"Paused"),wn);function An(e){var t=Ee().auth,a=Object(n.useMemo)((function(){var e;return e={},Object(f.a)(e,Bn.ALL,(function(){return!0})),Object(f.a)(e,Bn[At],(function(e){return e.status===At})),Object(f.a)(e,Bn[Mt],(function(e){return e.status===Mt})),Object(f.a)(e,Bn[Rt],(function(e){return e.status===Rt})),e}),[]),r=Object(n.useMemo)((function(){var e;return e={},Object(f.a)(e,Sn,(function(){return!0})),Object(f.a)(e,In,(function(e){return t.accountId===e.receiver_id})),Object(f.a)(e,Ln,(function(e){return t.accountId===e.owner_id})),e}),[t.accountId]),s=Cn({options:a}),c=Cn({options:r}),o=function(e){var t=e.items,a=e.filters,r=Object(n.useState)(void 0),s=Object(k.a)(r,2),c=s[0],o=s[1],i=Object(n.useState)([]),l=Object(k.a)(i,2),u=l[0],d=l[1];return Object(n.useEffect)((function(){var e=t,n=[];a.forEach((function(t){var a={};Object.keys(t.options).forEach((function(n){var r;a[n]=null===(r=e)||void 0===r?void 0:r.filter(t.options[n])}));var r={};Object.keys(a).forEach((function(e){r[e]=(a[e]||[]).length})),n.push(r),e=a[t.option]})),d(n),o(e)}),[t,a]),{filterCounts:u,filteredItems:c}}({items:e,filters:Object(n.useMemo)((function(){return[c,s]}),[c,s])});return{statusFilter:s,directionFilter:c,result:o}}var Mn=a(141),Rn=a.n(Mn);function Fn(e,t,a){return Number(t[a])-Number(e[a])}var Tn={bigBalanceFirst:{label:"With high amount",order:jn.desc,fn:function(e,t){return Fn(e,t,"balance")}},highSpeedFirst:{label:"With high speed",order:jn.desc,fn:function(e,t){return Fn(e,t,"tokens_per_tick")}},highSpeedLast:{label:"With low speed",order:jn.asc,fn:function(e,t){return-1*Fn(e,t,"tokens_per_tick")}},mostRecent:{label:"Most recent",order:jn.desc,fn:function(e,t){return Fn(e,t,"timestamp_created")}}};function Hn(e){var t=e.items,a=e.onFilterDone,r=e.className,s=An(t),c=s.result.filteredItems,o=Object(n.useState)(Tn.mostRecent),i=Object(k.a)(o,2),l=i[0],u=i[1],d=Object.values(Tn),m=!t||0===t.length;return Object(n.useEffect)((function(){if(c){var e=Object(Ba.a)(c);e.sort(l.fn),a(e)}else a(c)}),[c,a,l.fn]),Object(_.jsxs)("div",{className:j()(Rn.a.root,r),children:[Object(_.jsx)(Nn,{directions:s.directionFilter.optionsArray,activeDirection:s.directionFilter.option,onDirectionClick:s.directionFilter.selectOption,isInactive:m}),Object(_.jsxs)("div",{className:Rn.a.filtersWrapper,children:[Object(_.jsx)(yn,{options:s.statusFilter.optionsArray,label:"Status:",active:s.statusFilter.option,onChange:s.statusFilter.selectOption,isDisabled:m,renderOption:function(e){var t=s.result.filterCounts[1];return Object(_.jsx)(vn,{option:e,count:t?t[e]:""},e)}}),Object(_.jsx)(yn,{options:d,label:"Show first:",active:l,onChange:u,isDisabled:m,renderOption:function(e){return Object(_.jsx)("span",{children:e.label})},renderActive:function(e){return Object(_.jsxs)("div",{className:Rn.a.sortWithOrder,children:[e.order&&Object(_.jsx)(pn,{type:e.order}),Object(_.jsx)("span",{children:e.label})]})}})]})]})}var En=a(177),Pn=a.n(En),Vn=function(e){var t=e.wrapperClassName,a=e.spinnerClassName,n=e.testId;return Object(_.jsx)("div",{className:j()(Pn.a.wrapper,t),"data-testid":n,children:Object(_.jsx)("div",{className:j()(Pn.a.spinner,a)})})},Dn=a(142),Wn=a.n(Dn),Zn=function(e){var t=e.name,a=e.label;return Object(_.jsxs)("div",{className:Wn.a.flexCenter,children:[Object(_.jsx)("span",{className:Wn.a.name,children:t}),a&&Object(_.jsx)("span",{className:Wn.a.nameLabel,children:a})]})};function qn(e){var t=e.className;return Object(_.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",className:t,children:Object(_.jsx)("path",{d:"M8.99169 0.666504C4.39169 0.666504 0.666687 4.39984 0.666687 8.99984C0.666687 13.5998 4.39169 17.3332 8.99169 17.3332C13.6 17.3332 17.3334 13.5998 17.3334 8.99984C17.3334 4.39984 13.6 0.666504 8.99169 0.666504ZM9.00002 15.6665C5.31669 15.6665 2.33335 12.6832 2.33335 8.99984C2.33335 5.3165 5.31669 2.33317 9.00002 2.33317C12.6834 2.33317 15.6667 5.3165 15.6667 8.99984C15.6667 12.6832 12.6834 15.6665 9.00002 15.6665ZM9.41669 4.83317H8.16669V9.83317L12.5417 12.4582L13.1667 11.4332L9.41669 9.20817V4.83317Z",fill:"black"})})}var Un=a(24),zn=a.n(Un),Yn={points:["tl","bc"],offset:[-24,10]},Jn=function(e){var t=e.stream,a=e.className,n=t.ticker,r=t.tokens_per_tick,s=Number(r)*aa,c=Za(t),o=c.progress,i=c.timeLeft,l=Qa(n).formatter,u="NEAR"===t.ticker?H:t.ticker,d=Number(l.toHumanReadableValue(o.streamed,3)),m=Number(l.toHumanReadableValue(o.withdrawn,3)),b=Number(l.toHumanReadableValue(o.full,3)),p=xe.formatSmartly(d),h=xe.formatSmartly(m),f=yt(d,b,1),O=yt(m,d,1),x="".concat(p," of ").concat(b),v=l.tokensPerMeaningfulPeriod(s),y=v.formattedValue,w=v.unit;return Object(_.jsx)(Ya.a,{overlayClassName:zn.a.overlay,destroyTooltipOnHide:!0,align:Yn,placement:"bottom",overlay:Object(_.jsxs)("div",{className:j()(zn.a.tooltip,zn.a.text),children:[Object(_.jsxs)("div",{className:zn.a.innerStatus,children:[Object(_.jsx)("span",{children:x})," ",Object(_.jsx)("span",{className:j()(zn.a.grey,zn.a.smaller),children:u})]}),Object(_.jsx)(kt,{total:b,streamed:d,withdrawn:m}),Object(_.jsxs)("div",{className:j()(zn.a.status,zn.a.speed),children:[y," ",Object(_.jsxs)("span",{className:j()(zn.a.grey,zn.a.smaller),children:[u," / ",w]})]}),i&&Object(_.jsxs)("div",{className:zn.a.remained,children:[Object(_.jsx)(qn,{className:zn.a.clock}),i]}),Object(_.jsxs)("div",{className:j()(zn.a.progress,zn.a.streamed),children:["Streamed: ",p," ",Object(_.jsx)("span",{className:j()(zn.a.grey,zn.a.smaller),children:"".concat(f,"%")})]}),Object(_.jsxs)("div",{className:j()(zn.a.progress,zn.a.withdrawn),children:["Withdrawn: ",h," ",Object(_.jsx)("span",{className:j()(zn.a.grey,zn.a.smaller),children:"".concat(O,"%")})]})]}),children:Object(_.jsxs)("div",{className:j()(zn.a.root,zn.a.text,a),children:[Object(_.jsxs)("div",{className:zn.a.status,children:[Object(_.jsx)("span",{children:x})," ",Object(_.jsx)("span",{className:zn.a.grey,children:u})]}),Object(_.jsx)(kt,{total:b,streamed:d,withdrawn:m})]})})},Xn=a(178),Kn=a.n(Xn),Gn=function(e){var t=e.onCLick;return Object(_.jsx)("button",{className:Kn.a.linkButton,type:"button",onClick:t,children:Object(_.jsx)(at,{})})},Qn=function(e){var t=e.className,a=e.stream,r=a.id,s=Object(n.useCallback)((function(e){e.preventDefault();var t=Ge(r);$e()(t)}),[r]);return Object(_.jsxs)("div",{className:j()(Kn.a.root,t),children:[Object(_.jsx)(Ca,{stream:a}),Object(_.jsx)(Gn,{onCLick:s})]})},$n=a(93),er=a.n($n),tr=function(e){var t=e.stream,a=e.className,n=t.id,r=t.description,s="";try{s=JSON.parse(r).comment}catch(m){s=r}var c=La(t)===Sa,o=c?t.owner_id:t.receiver_id,i=c?void 0:"Sending",d=Object(u.f)(Ke.legacyStream.path,{id:n});return Object(_.jsxs)("div",{className:j()(er.a.root,a),children:[Object(_.jsx)(l.b,{to:d,className:er.a.name,children:Object(_.jsx)(Zn,{name:o,label:i})}),Object(_.jsx)(Jn,{stream:t,className:er.a.withMarginRight}),Object(_.jsx)(l.b,{to:d,className:"col-span-2 grow-0",children:Object(_.jsx)("p",{className:er.a.comment,children:s})}),Object(_.jsx)(Qn,{stream:t,className:j()(er.a.controls,"col-span-2 grow-0")})]})},ar=a(47),nr=a.n(ar),rr=function(e){var t=e.children;return Object(_.jsx)("div",{className:nr.a.emptyState,children:t})},sr=function(e){var t,a=e.className,n=e.displayingStreams,r=e.onCreateStreamClick,s=Va({account:Ha().data}).data,c=s||{},o=c.inputs,i=void 0===o?[]:o,l=c.outputs,u=void 0===l?[]:l,d=[].concat(Object(Ba.a)(i),Object(Ba.a)(u)).length,m=null!==(t=null===n||void 0===n?void 0:n.length)&&void 0!==t?t:0;return s?s&&0===d?Object(_.jsxs)(rr,{children:[Object(_.jsx)("div",{children:"You don't have any streams yet."}),Object(_.jsx)(Ue,{onClick:r,children:"Create First Stream"})]}):s&&0!==d&&0===m?Object(_.jsx)(rr,{children:Object(_.jsx)("div",{children:"No streams matching your filters. Try selecting different ones"})}):Object(_.jsx)("div",{className:j()(nr.a.container,a),children:Object(_.jsxs)("section",{className:nr.a.flexColumn,children:[Object(_.jsxs)("div",{className:j()(nr.a.withPaddings,"grid grid-cols-6 gap-x-10"),children:[Object(_.jsx)("h3",{className:nr.a.title,children:"Wallet address"}),Object(_.jsx)("h3",{className:nr.a.title,children:"Amount to stream"}),Object(_.jsx)("h3",{className:nr.a.title,children:"Comment"})]}),null===n||void 0===n?void 0:n.map((function(e){return Object(_.jsx)(tr,{stream:e,className:j()(nr.a.withPaddings,"grid grid-cols-6 gap-x-10")},e.id)}))]})}):Object(_.jsx)(rr,{children:Object(_.jsx)(Vn,{wrapperClassName:nr.a.loader})})},cr=a(57),or=a.n(cr),ir=function(){var e=Va({account:Ha().data}).data||{},t=e.inputs,a=e.outputs,r=Object(n.useMemo)((function(){return(t||a)&&[].concat(Object(Ba.a)(t||[]),Object(Ba.a)(a||[]))}),[t,a]),s=Object(n.useState)([]),c=Object(k.a)(s,2),o=c[0],i=c[1],l=Object(n.useState)(!1),u=Object(k.a)(l,2),d=u[0],m=u[1],b=Object(n.useCallback)((function(){return m(!d)}),[m,d]);return Object(_.jsx)("div",{className:or.a.root,children:Object(_.jsxs)(w,{children:[Object(_.jsxs)("section",{className:j()(or.a.flex,or.a.header),children:[Object(_.jsx)("h1",{className:or.a.title,children:"Streams (legacy)"}),Object(_.jsx)("div",{className:j()(or.a.flex,or.a.buttonsWrapper),children:Object(_.jsx)(tn,{children:"Withdraw all"})})]}),Object(_.jsx)(Hn,{items:r,onFilterDone:i,className:or.a.streamFilters}),Object(_.jsx)(sr,{displayingStreams:o,className:or.a.section,onCreateStreamClick:b})]})})};var lr=function(e){var t,a;return null!==(t=null===(a=window)||void 0===a?void 0:a.matchMedia(e).matches)&&void 0!==t&&t};function ur(e){var t=Object(n.useState)((function(){return lr(e)})),a=Object(k.a)(t,2),r=a[0],s=a[1];return Object(n.useEffect)((function(){var t=window.matchMedia(e);function a(){s(lr(e))}return a(),t.addListener?t.addListener(a):t.addEventListener("change",a),function(){t.removeListener?t.removeListener(a):t.removeEventListener("change",a)}}),[e,s]),r}var dr,jr=function(e){var t=e.to,a=e.className,n=e.children,r=e.onClick;return Object(_.jsx)(l.b,{to:t,className:a,onClick:r,children:n})},mr=a(179),br=a.n(mr),pr=function(e){var t=e.pageRoutes,a=void 0===t?[]:t;return 0===a.length?null:Object(_.jsx)("ul",{className:br.a.root,children:a.map((function(e){return Object(_.jsx)("li",{className:br.a.pageLink,children:Object(_.jsx)(jr,{to:e.path,children:e.title})},e.path)}))})},hr=function(e){var t=e.width,a=void 0===t?17:t,n=e.height,r=void 0===n?16:n,s=e.className;return Object(_.jsx)("div",{className:s,children:Object(_.jsx)("svg",{width:a,height:r,viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(_.jsx)("path",{d:"M15.5 4.06667V2.16667C15.5 1.25 14.75 0.5 13.8333 0.5H2.16667C1.24167 0.5 0.5 1.25 0.5 2.16667V13.8333C0.5 14.75 1.24167 15.5 2.16667 15.5H13.8333C14.75 15.5 15.5 14.75 15.5 13.8333V11.9333C15.9917 11.6417 16.3333 11.1167 16.3333 10.5V5.5C16.3333 4.88333 15.9917 4.35833 15.5 4.06667ZM14.6667 5.5V10.5H8.83333V5.5H14.6667ZM2.16667 13.8333V2.16667H13.8333V3.83333H8.83333C7.91667 3.83333 7.16667 4.58333 7.16667 5.5V10.5C7.16667 11.4167 7.91667 12.1667 8.83333 12.1667H13.8333V13.8333H2.16667Z",fill:"#626F84"})})})},fr=function(e){var t=e.width,a=void 0===t?20:t,n=e.height,r=void 0===n?16:n,s=e.className;return Object(_.jsx)("div",{className:s,children:Object(_.jsx)("svg",{width:a,height:r,viewBox:"0 0 20 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(_.jsx)("path",{d:"M17.5 0.508362H2.49998C1.58331 0.508362 0.833313 1.25836 0.833313 2.17503V5.50003H2.49998V2.15836H17.5V13.85H2.49998V10.5H0.833313V13.8417C0.833313 14.7584 1.58331 15.4917 2.49998 15.4917H17.5C18.4166 15.4917 19.1666 14.7584 19.1666 13.8417V2.17503C19.1666 1.25003 18.4166 0.508362 17.5 0.508362ZM9.16665 11.3334L12.5 8.00003L9.16665 4.6667V7.1667H0.833313V8.83336H9.16665V11.3334ZM17.5 0.508362H2.49998C1.58331 0.508362 0.833313 1.25836 0.833313 2.17503V5.50003H2.49998V2.15836H17.5V13.85H2.49998V10.5H0.833313V13.8417C0.833313 14.7584 1.58331 15.4917 2.49998 15.4917H17.5C18.4166 15.4917 19.1666 14.7584 19.1666 13.8417V2.17503C19.1666 1.25003 18.4166 0.508362 17.5 0.508362ZM9.16665 11.3334L12.5 8.00003L9.16665 4.6667V7.1667H0.833313V8.83336H9.16665V11.3334Z",fill:"#626F84"})})})},_r=function(e){var t=e.width,a=void 0===t?17:t,n=e.height,r=void 0===n?16:n,s=e.className;return Object(_.jsx)("div",{className:s,children:Object(_.jsxs)("svg",{width:a,height:r,viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(_.jsx)("path",{d:"M12.1667 12.1666L16.3333 7.99998L12.1667 3.83331L10.9917 5.00831L13.1417 7.16665H5.5V8.83331H13.1417L10.9917 10.9916L12.1667 12.1666Z",fill:"#626F84"}),Object(_.jsx)("path",{d:"M13.8333 13.8333H2.16667V2.16667H13.8333V3.83333H15.5V2.16667C15.5 1.25 14.7583 0.5 13.8333 0.5H2.16667C1.25 0.5 0.5 1.25 0.5 2.16667V13.8333C0.5 14.75 1.25 15.5 2.16667 15.5H13.8333C14.7583 15.5 15.5 14.75 15.5 13.8333V12.1667H13.8333V13.8333Z",fill:"#626F84"})]})})};function Or(e){var t=Ee().tokens;return we(e)&&(t[e].meta.symbol="NEAR"),t[e]}function xr(e){var t,a=e.tokenAccountId,n=e.className,r=e.mode,s=void 0===r?dr.CRYPTO:r,c=Ee(),o=c.auth,i=c.priceOracle,l=Or(a),u=l.balance,d=l.formatter,j=l.meta,m=we(a)?(null===(t=o.balance)||void 0===t?void 0:t.available)||"0":u,b=d.amount(m),p=s===dr.USD,h=p?i.getPriceInUsd(a,b):b,f=p?"$":j.symbol;return Object(_.jsx)("span",{className:n,children:"Balance: ".concat(f," ").concat(h)})}!function(e){e.USD="USD",e.CRYPTO="CRYPTO",e.BOTH="BOTH"}(dr||(dr={}));var vr;!function(e){e.income="total_incoming",e.outcome="total_outgoing"}(vr||(vr={}));var yr=function(e){var t=e.type,a=e.period,n=e.className,r=Ee(),s=r.roketo,c=r.priceOracle,o=r.tokens,i=s.account[t],l=Object.keys(i).reduce((function(e,t){var n=o[t].formatter,r=function(e,t){var a=new Y.a(e);switch(t){case le.Minute:return a.multipliedBy(60);case le.Hour:return a.multipliedBy(me);case le.Day:return a.multipliedBy(be);default:return a}}(i[t],a).toFixed(),s=n.toHumanReadableValue(r,3),l=c.getPriceInUsd(t,s);return e+Number(l)}),0);return Object(_.jsx)("div",{className:n,children:"".concat(l," $ ").concat(_e[a])})},wr=a(68),gr=a.n(wr),kr=function(e){var t=e.className;return Object(_.jsxs)("div",{className:j()(gr.a.root,t),children:[Object(_.jsxs)("div",{className:gr.a.wrapper,children:[Object(_.jsx)(_r,{}),Object(_.jsx)(yr,{className:gr.a.balance,type:vr.outcome,period:le.Hour})]}),Object(_.jsxs)("div",{className:gr.a.wrapper,children:[Object(_.jsx)(fr,{}),Object(_.jsx)(yr,{className:gr.a.balance,type:vr.income,period:le.Hour})]}),Object(_.jsxs)("div",{className:gr.a.wrapper,children:[Object(_.jsx)(hr,{}),Object(_.jsx)(xr,{className:gr.a.balance,tokenAccountId:H,mode:dr.USD})]})]})},Nr=a(69),Cr={baseServer:new Nr.ServerConfiguration(E,{})},Sr=function(){function e(){Object(q.a)(this,e),this.initialized=!1,this.token=null,this.authApiClient=new Nr.AuthApi(Nr.createConfiguration(Object(je.a)({},Cr)))}return Object(U.a)(e,[{key:"getToken",value:function(){return this.token||(this.token=this.getRefreshedToken()),this.token}},{key:"refreshToken",value:function(){this.token=this.getRefreshedToken()}},{key:"getRefreshedToken",value:function(){var e=Object(g.a)(C.a.mark((function e(){var t,a,n,r,s,c,o;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getAccountIdAndNear();case 3:if(t=e.sent,a=t.accountId,"roketoApiAccessToken",n="".concat("roketoApiAccessToken",":").concat(a),this.initialized){e.next=12;break}if(this.initialized=!0,!(r=localStorage[n]||null)||this.containsUnicode(r)){e.next=12;break}return e.abrupt("return",r);case 12:return delete localStorage[n],e.next=15,this.generateLoginParams();case 15:return s=e.sent,e.next=18,this.authApiClient.login(s);case 18:return c=e.sent,o=c.accessToken,localStorage[n]=o,e.abrupt("return",o);case 24:throw e.prev=24,e.t0=e.catch(0),this.token=null,e.t0;case 28:case"end":return e.stop()}}),e,this,[[0,24]])})));return function(){return e.apply(this,arguments)}}()},{key:"getAccountIdAndNear",value:function(){var e=Object(g.a)(C.a.mark((function e(){var t,a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:return t=e.sent,a=new S.WalletConnection(t,A),n=a.getAccountId(),e.abrupt("return",{accountId:n,near:t});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"generateLoginParams",value:function(){var e=Object(g.a)(C.a.mark((function e(){var t,a,n,r,s,c,o,i;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAccountIdAndNear();case 2:return t=e.sent,a=t.accountId,n=t.near,e.next=7,n.config.keyStore.getKey(n.config.networkId,a);case 7:return r=e.sent,s=Date.now(),c=r.sign((new TextEncoder).encode(String(s))),o=c.signature,i=Array.from(o),e.abrupt("return",{accountId:a,timestamp:s,signature:i});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"containsUnicode",value:function(e){return e!==encodeURIComponent(e)}}]),e}(),Ir=new Sr,Lr=function(){var e=Object(g.a)(C.a.mark((function e(t,a,n,r,s){var c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=s.retryCount,!(t.message.startsWith("HTTP-Code: 401")&&c<=3)){e.next=5;break}return e.next=4,Ir.refreshToken();case 4:r({retryCount:c});case 5:case"end":return e.stop()}}),e)})));return function(t,a,n,r,s){return e.apply(this,arguments)}}(),Br=Nr.createConfiguration(Object(je.a)(Object(je.a)({},Cr),{},{authMethods:{bearer:{tokenProvider:Ir}}})),Ar=new Nr.UsersApi(Br);function Mr(){var e=Ee().auth;return Object(Aa.a)(e.accountId?"user":null,(function(){return Ar.findOne(e.accountId)}),{onErrorRetry:Lr})}var Rr=Nr.User,Fr=new Nr.NotificationsApi(Br);var Tr=a(180),Hr=a.n(Tr),Er=["className","hasError"],Pr=function(e){var t=e.className,a=e.hasError,n=void 0!==a&&a,r=Object(De.a)(e,Er);return Object(_.jsx)("input",Object(je.a)({className:j()(Hr.a.input,Object(f.a)({},Hr.a.error,n),t)},r))},Vr=a(94),Dr=a.n(Vr),Wr=["children","isRequired","label","description","error","className"],Zr=function(e){var t=e.children,a=e.isRequired,n=void 0!==a&&a,r=e.label,s=e.description,c=e.error,o=e.className,i=Object(De.a)(e,Wr);return Object(_.jsxs)("div",Object(je.a)(Object(je.a)({className:j()(Dr.a.root,o)},i),{},{children:[r&&Object(_.jsx)("label",{className:j()(Dr.a.label,Object(f.a)({},Dr.a.required,n)),children:r}),t,s&&Object(_.jsx)("div",{className:Dr.a.description,children:s}),c&&Object(_.jsx)("div",{className:Dr.a.error,children:c})]}))},qr=a(181),Ur=a.n(qr),zr="nameInput",Yr="emailInput";function Jr(){var e=Ee().auth,t=Object(n.useState)(""),a=Object(k.a)(t,2),r=a[0],s=a[1],c=Object(n.useState)(""),o=Object(k.a)(c,2),i=o[0],l=o[1],u=Object(n.useState)(!1),d=Object(k.a)(u,2),j=d[0],m=d[1],b=Mr();Object(n.useEffect)((function(){var e,t,a,n;s(null!==(e=null===(t=b.data)||void 0===t?void 0:t.name)&&void 0!==e?e:""),l(null!==(a=null===(n=b.data)||void 0===n?void 0:n.email)&&void 0!==a?a:"")}),[b.data]);var p=Object(n.useRef)(null),h=Object(n.useCallback)(function(){var t=Object(g.a)(C.a.mark((function t(a){var n,r,s,c,o;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),b.data){t.next=3;break}return t.abrupt("return");case 3:return m(!0),s=null===(n=p.current)||void 0===n?void 0:n.nameInput.value,c=null===(r=p.current)||void 0===r?void 0:r.emailInput.value,o=b.data,t.next=9,b.mutate(Object(g.a)(C.a.mark((function t(){var a;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={name:s,email:c},t.next=4,Ar.update(e.accountId,a);case 4:return t.abrupt("return",Object.assign(new Rr,o,a));case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",o);case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),{revalidate:!1,optimisticData:Object(je.a)(Object(je.a)({},b.data),{},{name:s}),rollbackOnError:!0});case 9:m(!1);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e.accountId,b]),f=b.isValidating||j;return Object(_.jsxs)("form",{className:Ur.a.profileForm,onSubmit:h,ref:p,children:[f&&Object(_.jsx)(Vn,{wrapperClassName:Ur.a.loaderWrapper}),Object(_.jsx)(Zr,{label:"User name",children:Object(_.jsx)(Pr,{placeholder:"Name",name:zr,value:r,onChange:function(e){return s(e.target.value)},disabled:f})}),Object(_.jsx)(Zr,{label:"Email",description:"Email address is used for notifications",children:Object(_.jsx)(Pr,{placeholder:"Email",name:Yr,value:i,onChange:function(e){return l(e.target.value)},disabled:f})}),Object(_.jsx)(Ue,{type:Pe.submit,disabled:f,children:"Save"})]})}var Xr=a(75),Kr=a.n(Xr),Gr=function(){var e,t=Object(n.useState)(!1),a=Object(k.a)(t,2),r=a[0],s=a[1],c=Object(n.useState)(!1),o=Object(k.a)(c,2),i=o[0],l=o[1],u=Ee().auth,d=null!==(e=Mr().data)&&void 0!==e?e:{},j=d.name,m=d.email,b=u.accountId;return Object(_.jsxs)("div",{className:Kr.a.profile,children:[Object(_.jsxs)(pt,{onChange:s,className:Kr.a.dropdownOpener,opened:r,children:[Object(_.jsx)("span",{className:Kr.a.name,children:j||b}),i?Object(_.jsx)("svg",{className:Kr.a.avatar}):Object(_.jsx)("img",{className:Kr.a.avatar,src:"".concat(E,"/users/").concat(b,"/avatar?email=").concat(m),alt:"",onError:function(){return l(!0)}})]}),Object(_.jsx)(Ut,{opened:r,onClose:function(){return s(!1)},className:Kr.a.dropdownMenu,children:Object(_.jsx)(Jr,{})})]})},Qr=a(132),$r=a(447),es=a(448),ts="in",as="out";function ns(e){var t=Ee().auth;return e.receiver_id===t.accountId?ts:e.owner_id===t.accountId?as:null}function rs(e){var t=e.swr,a=e.revalidationPeriod,r=e.isEnabled,s=void 0===r||r,c=Object(n.useState)(a),o=Object(k.a)(c,2),i=o[0],l=o[1];Object(n.useEffect)((function(){if(s){var e=setTimeout((function(){i<=0?(l(a),t.mutate()):l((function(e){return e-1}))}),1e3);return function(){return clearTimeout(e)}}}),[t,i,a,s])}function ss(){var e=Ee(),t=e.auth,a=e.roketo,n=Object(Aa.a)(["streams",t.accountId,a.account.last_created_stream],Object(g.a)(C.a.mark((function e(){var t,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.api.getAccountIncomingStreams({from:0,limit:100});case 2:return t=e.sent,e.next=5,a.api.getAccountOutgoingStreams({from:0,limit:100});case 5:return n=e.sent,e.abrupt("return",{inputs:t,outputs:n});case 7:case"end":return e.stop()}}),e)}))));return rs({swr:n,revalidationPeriod:30}),n}function cs(e,t){if(ae(e))return null;var a=new Y.a(e.tokens_per_sec).dividedBy(1e3);return e.last_action/1e6+t.dividedBy(a).toNumber()}function os(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=290304e5,n=t?re(e):new Y.a(0),r=Y.a.minimum(a,new Y.a(e.balance).minus(n).dividedBy(e.tokens_per_sec).toFixed()).toNumber(),s=Object(Ra.a)({start:0,end:1e3*r});(s.days||s.weeks||s.months||s.years)&&(s.seconds=0);var c=Object(Fa.a)(s,{locale:K}),o=new Y.a(e.balance),i=o.plus(e.tokens_total_withdrawn),l=new Y.a(e.tokens_total_withdrawn),u=l.plus(n),d=i.minus(u),j=[l.dividedBy(i).toNumber(),u.dividedBy(i).toNumber()],m={left:i.minus(u).dividedBy(i).toNumber(),streamed:u.dividedBy(i).toNumber(),withdrawn:l.dividedBy(i).toNumber(),available:n.dividedBy(i).toNumber()};return{secondsLeft:r,progresses:j,isDead:ne(e),percentages:m,timeLeft:c,streamEndInfo:cs(e,o),progress:{full:i.toFixed(),withdrawn:l.toFixed(),streamed:u.toFixed(),left:d.toFixed(),available:n.toFixed()}}}var is=a(27),ls=a.n(is);function us(e){var t=e.className,a=e.withBadge;return Object(_.jsxs)("svg",{className:t,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[Object(_.jsx)("path",{d:"M15.375 17.5556H8.625M15.375 17.5556H21L19.4194 15.9944C19.2071 15.7848 19.0387 15.5358 18.9239 15.2619C18.809 14.9879 18.75 14.6943 18.75 14.3978V10.8889C18.7502 9.50993 18.3175 8.16482 17.5116 7.03876C16.7057 5.91271 15.5662 5.06107 14.25 4.60111V4.22222C14.25 3.63285 14.0129 3.06762 13.591 2.65087C13.169 2.23413 12.5967 2 12 2C11.4033 2 10.831 2.23413 10.409 2.65087C9.98705 3.06762 9.75 3.63285 9.75 4.22222V4.60111C7.12875 5.51667 5.25 7.98667 5.25 10.8889V14.3989C5.25 14.9967 5.00925 15.5711 4.58063 15.9944L3 17.5556H8.625H15.375ZM15.375 17.5556V18.6667C15.375 19.5507 15.0194 20.3986 14.3865 21.0237C13.7536 21.6488 12.8951 22 12 22C11.1049 22 10.2464 21.6488 9.61351 21.0237C8.98058 20.3986 8.625 19.5507 8.625 18.6667V17.5556H15.375Z",stroke:a?"#3E65F2":"#2B313B",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),a&&Object(_.jsx)("circle",{cx:"19",cy:"5",r:"5",fill:"#D80A1F",stroke:"white",strokeWidth:"2"})]})}function ds(e){var t=e.className;return Object(_.jsxs)("svg",{className:t,width:"44",height:"44",viewBox:"0 0 44 44",fill:"none",children:[Object(_.jsx)("rect",{width:"44",height:"44",rx:"22",fill:"#F1F6FE"}),Object(_.jsx)("path",{d:"M22 14.9167V19.5M14.5 29.5V26.1667V29.5ZM14.5 26.1667V16.1667C14.5 15.7246 14.6756 15.3007 14.9882 14.9882C15.3007 14.6756 15.7246 14.5 16.1667 14.5H21.5833L22.4167 15.3333H29.5L27 20.3333L29.5 25.3333H22.4167L21.5833 24.5H16.1667C15.7246 24.5 15.3007 24.6756 14.9882 24.9882C14.6756 25.3007 14.5 25.7246 14.5 26.1667V26.1667Z",stroke:"#3E65F2",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}function js(e){var t=e.className;return Object(_.jsxs)("svg",{className:t,width:"44",height:"44",viewBox:"0 0 44 44",fill:"none",children:[Object(_.jsx)("rect",{width:"44",height:"44",rx:"22",fill:"#F2FCF5"}),Object(_.jsx)("path",{d:"M28.3128 19.7147L20.9824 15.0357C20.6368 14.815 20.235 14.6883 19.82 14.6692C19.405 14.6501 18.9923 14.7393 18.6262 14.9273C18.26 15.1153 17.9541 15.3949 17.7411 15.7364C17.5281 16.0779 17.4161 16.4683 17.417 16.866V26.2217C17.4169 26.6191 17.5296 27.0089 17.7429 27.3498C17.9562 27.6906 18.2622 27.9697 18.6282 28.1571C18.9942 28.3446 19.4065 28.4334 19.8211 28.4141C20.2358 28.3948 20.6371 28.2682 20.9824 28.0477L28.3128 23.3687C28.6268 23.1683 28.8843 22.8968 29.0624 22.5783C29.2405 22.2597 29.3337 21.904 29.3337 21.5428C29.3337 21.1815 29.2405 20.8258 29.0624 20.5073C28.8843 20.1888 28.6268 19.9173 28.3128 19.7169V19.7147Z",stroke:"#1EBA52",strokeWidth:"2.75",strokeLinecap:"round",strokeLinejoin:"round"})]})}function ms(e){var t=e.className;return Object(_.jsxs)("svg",{className:t,width:"44",height:"44",viewBox:"0 0 44 44",fill:"none",children:[Object(_.jsx)("rect",{width:"44",height:"44",rx:"22",fill:"#FFF7EE"}),Object(_.jsx)("path",{d:"M18.333 16.5V27.5M25.6663 16.5V27.5",stroke:"#FF8C19",strokeWidth:"3.66667",strokeLinecap:"round",strokeLinejoin:"round"})]})}function bs(e){var t=e.className;return Object(_.jsxs)("svg",{width:"44",height:"44",viewBox:"0 0 44 44",fill:"none",className:t,children:[Object(_.jsx)("rect",{width:"44",height:"44",rx:"22",fill:"#FFEEF0"}),Object(_.jsx)("path",{d:"M20.5833 24.3833H23.9167V13.425H20.5833V24.3833ZM22.125 31.3C22.6806 31.3 23.1319 31.1264 23.4792 30.7792C23.8264 30.4319 24 29.9806 24 29.425C24 28.8972 23.8264 28.4458 23.4792 28.0708C23.1319 27.6958 22.6806 27.5083 22.125 27.5083C21.5694 27.5083 21.1181 27.6958 20.7708 28.0708C20.4236 28.4458 20.25 28.8972 20.25 29.425C20.25 29.9806 20.4236 30.4319 20.7708 30.7792C21.1181 31.1264 21.5694 31.3 22.125 31.3Z",fill:"#D80A1F"})]})}function ps(e){var t=e.type,a=function(){switch(t){case"StreamStarted":case"StreamContinued":return js;case"StreamPaused":return ms;case"StreamFinished":return ds;case"StreamIsDue":return bs;default:throw new Error("This should never happen")}}();return Object(_.jsx)(a,{className:ls.a.icon})}function hs(e){var t=e.children;return Object(_.jsx)("div",{className:ls.a.primaryText,"data-testid":Oe.notificationPrimaryCaption,children:t})}function fs(e){var t=e.children;return Object(_.jsx)("div",{className:ls.a.secondaryText,"data-testid":Oe.notificationSecondaryCaption,children:t})}function _s(e){var t=e.notification,a=t.type,n=t.payload,r=Ee().tokens,s=ns(n),c=os(n,false),o=c.progress,i=o.full,l=o.streamed,u=o.left,d=c.timeLeft,j=r[n.token_account_id],m=j.meta.symbol,b=j.formatter;switch(a){case"StreamStarted":return Object(_.jsxs)("div",{className:ls.a.notificationBody,children:[Object(_.jsx)(hs,{children:s===ts?Object(_.jsxs)(_.Fragment,{children:[n.owner_id," ",Object(_.jsx)("strong",{children:"started"})," a stream for you to receive."]}):Object(_.jsxs)(_.Fragment,{children:["You\u2019ve successfully ",Object(_.jsx)("strong",{children:"started"})," a stream to ",n.receiver_id,"."]})}),Object(_.jsxs)(fs,{children:["Total streaming amount: ",Object(_.jsxs)("strong",{children:[b.amount(i),"\xa0",m]})]}),Object(_.jsxs)(fs,{children:["Stream duration: ",Object(_.jsx)("strong",{children:d})]})]});case"StreamPaused":return Object(_.jsxs)("div",{className:ls.a.notificationBody,children:[Object(_.jsxs)(hs,{children:["The stream ",s===ts?"from ".concat(n.owner_id):"to ".concat(n.receiver_id)," is ",Object(_.jsx)("strong",{children:"paused"}),"."]}),Object(_.jsxs)(fs,{children:["Already streamed: ",Object(_.jsxs)("strong",{children:[b.amount(l),"\xa0",m]})]}),Object(_.jsxs)(fs,{children:["Amount left: ",Object(_.jsxs)("strong",{children:[b.amount(u),"\xa0",m]})]})]});case"StreamFinished":return Object(_.jsxs)("div",{className:ls.a.notificationBody,children:[Object(_.jsxs)(hs,{children:["The stream ",s===ts?"from ".concat(n.owner_id):"to ".concat(n.receiver_id)," has ",Object(_.jsx)("strong",{children:"ended"}),"."]}),Object(_.jsxs)(fs,{children:["Total amount streamed: ",Object(_.jsxs)("strong",{children:[b.amount(i),"\xa0",m]})]})]});case"StreamIsDue":return Object(_.jsxs)("div",{className:ls.a.notificationBody,children:[Object(_.jsxs)(hs,{children:["The stream from ",n.owner_id," is ",Object(_.jsx)("strong",{children:"due"}),"."]}),Object(_.jsxs)(fs,{children:["Available for withdrawal: ",Object(_.jsxs)("strong",{children:[b.amount(u),"\xa0",m]})]})]});case"StreamContinued":return Object(_.jsxs)("div",{className:ls.a.notificationBody,children:[Object(_.jsx)(hs,{children:s===ts?Object(_.jsxs)(_.Fragment,{children:[n.owner_id," has ",Object(_.jsx)("strong",{children:"continued"})," the stream."]}):Object(_.jsxs)(_.Fragment,{children:["The stream to ",n.receiver_id," was ",Object(_.jsx)("strong",{children:"continued"}),"."]})}),Object(_.jsxs)(fs,{children:["Amount left: ",Object(_.jsxs)("strong",{children:[b.amount(u),"\xa0",m]})]}),Object(_.jsxs)(fs,{children:["Time left: ",Object(_.jsx)("strong",{children:d})]})]});default:throw new Error("This should never happen")}}function Os(){var e,t,a,s,c=ur("(max-width: 645px)"),o=Object(n.useState)(!1),i=Object(k.a)(o,2),d=i[0],b=i[1],p=function(){var e=Ee().auth,t=Object(Aa.a)(e.accountId?"notifications":null,(function(){return Fr.findAll()}),{onErrorRetry:Lr});return Object(n.useEffect)((function(){setTimeout(t.mutate,5e3)}),[t]),t}(),h=Object(n.useCallback)((function(){b(!1),p.data&&p.mutate(function(){var e=Object(g.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fr.markAllRead();case 2:return e.abrupt("return",null===t||void 0===t?void 0:t.map((function(e){return e.isRead?e:Object(je.a)(Object(je.a)({},e),{},{isRead:!0})})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[p]),f=null!==(e=null===(t=p.data)||void 0===t?void 0:t.some((function(e){return!e.isRead})))&&void 0!==e&&e;return Object(_.jsxs)("div",{className:ls.a.root,children:[Object(_.jsx)(pt,{onChange:b,className:ls.a.dropdownOpener,opened:d,testId:Oe.openNotificationsButton,children:Object(_.jsx)(us,{withBadge:f})}),Object(_.jsx)(Ut,{opened:d,onClose:h,className:j()(ls.a.dropdownMenu,c&&ls.a.compact),children:Object(_.jsxs)("div",{className:ls.a.container,children:[Object(_.jsx)("header",{className:ls.a.header,children:"Notifications"}),!p.data&&Object(_.jsx)(Vn,{wrapperClassName:ls.a.loader,testId:Oe.notificationsLoader}),0===(null===(a=p.data)||void 0===a?void 0:a.length)&&Object(_.jsx)("h3",{className:"text-3xl text-center my-12 mx-auto",children:"Your notifications will be displayed here."}),null===(s=p.data)||void 0===s?void 0:s.map((function(e,t,a){return Object(_.jsxs)(r.a.Fragment,{children:[0!==t&&Object(_.jsx)("div",{className:ls.a.divider}),(0===t||!Object(Qr.a)(a[t-1].createdAt,e.createdAt))&&Object(_.jsx)("div",{className:ls.a.date,children:Object($r.a)(e.createdAt)?"Today":Object(es.a)(e.createdAt)?"Yesterday":Object(et.a)(e.createdAt,"PP")}),Object(_.jsxs)(l.b,{to:Object(u.f)(m.stream.path,{id:e.payload.id}),className:j()(ls.a.notification,!e.isRead&&ls.a.unread),onClick:h,"data-testid":Oe.notificationElement,children:[Object(_.jsx)(ps,{type:e.type}),Object(_.jsx)(_s,{notification:e}),Object(_.jsx)("div",{className:ls.a.time,children:Object(et.a)(new Date(e.createdAt),"HH:mm")})]})]},e.id)}))]})})]})}var xs,vs,ys,ws=a(45),gs=a.n(ws),ks=[m.streams],Ns=function(){var e=Ee().auth,t=!ur("(min-width: 1280px)"),a=function(){var e=Va({account:Ha().data}).data;return e&&(e.inputs.length>0||e.outputs.length>0)}();return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("div",{className:gs.a.wrapper,children:Object(_.jsxs)(w,{className:gs.a.root,children:[Object(_.jsxs)("div",{className:gs.a.left,children:[Object(_.jsx)(l.b,{to:"/",className:gs.a.unshrinkable,children:Object(_.jsx)(x,{className:gs.a.logo})}),e.signedIn&&Object(_.jsx)(pr,{pageRoutes:a?[].concat(ks,[Ke.legacyStreams]):ks})]}),Object(_.jsxs)("div",{className:gs.a.right,children:[e.signedIn&&!t&&Object(_.jsx)(kr,{className:gs.a.marginRight}),e.signedIn&&Object(_.jsx)(Gr,{}),e.signedIn&&!t&&Object(_.jsx)(Os,{}),!t&&Object(_.jsx)(Xe,{})]})]})}),e.signedIn&&t&&Object(_.jsx)("div",{className:gs.a.secondWrapper,children:Object(_.jsxs)(w,{className:gs.a.secondRoot,children:[Object(_.jsx)(kr,{className:gs.a.marginRight}),Object(_.jsxs)("div",{className:gs.a.right,children:[Object(_.jsx)(Os,{}),Object(_.jsx)(Xe,{})]})]})})]})},Cs=a(244),Ss=a.n(Cs);function Is(){return Object(_.jsx)("div",{className:j()("py-4 px-6","absolute w-full pt-8","flex justify-center"),children:Object(_.jsx)(x,{className:Ss.a.logo})})}function Ls(){return Object(u.i)(m.authorize.path)?Object(_.jsx)(Is,{}):Object(_.jsx)(Ns,{})}function Bs(e){var t=e.children,a=e.allowed,n=e.redirect,r=e.path,s=e.exact,c=void 0!==s&&s;return Object(_.jsx)(u.b,{exact:c,path:r,render:function(){return a?t:n}})}var As=["title","titleId"];function Ms(){return Ms=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ms.apply(this,arguments)}function Rs(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Fs(e,t){var a=e.title,r=e.titleId,s=Rs(e,As);return n.createElement("svg",Ms({width:"auto",height:"auto",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},s),a?n.createElement("title",{id:r},a):null,xs||(xs=n.createElement("path",{d:"M8.14141 20.601C7.50192 20.601 7.61064 20.3595 7.39007 19.7506L5.50977 13.5625L19.9838 4.97559",fill:"currentColor"})),vs||(vs=n.createElement("path",{d:"M8.14062 20.6012C8.63406 20.6012 8.85199 20.3755 9.12749 20.1078L11.7591 17.5488L8.47649 15.5693",fill:"#8E909C"})),ys||(ys=n.createElement("path",{d:"M8.47667 15.5697L16.4308 21.4463C17.3386 21.9471 17.9935 21.6877 18.2197 20.6037L21.4574 5.34624C21.7888 4.01726 20.9508 3.41429 20.0824 3.80854L1.07041 11.1395C-0.227316 11.66 -0.219585 12.3841 0.833894 12.7066L5.71279 14.2295L17.008 7.10352C17.5412 6.78015 18.0307 6.95384 17.629 7.31043",fill:"currentColor"})))}var Ts,Hs=n.forwardRef(Fs),Es=(a.p,function(e){var t=e.className;return Object(_.jsx)("div",{className:t,children:Object(_.jsx)(Hs,{})})}),Ps=["title","titleId"];function Vs(){return Vs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Vs.apply(this,arguments)}function Ds(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Ws(e,t){var a=e.title,r=e.titleId,s=Ds(e,Ps);return n.createElement("svg",Vs({width:"auto",height:"auto",viewBox:"0 0 24 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},s),a?n.createElement("title",{id:r},a):null,Ts||(Ts=n.createElement("path",{d:"M7.57758 21.9092C16.5744 21.9092 21.4944 13.5154 21.4944 6.2365C21.4944 5.99809 21.4901 5.76075 21.4806 5.52449C22.4356 4.74696 23.2657 3.77667 23.9204 2.67212C23.044 3.11083 22.1009 3.40615 21.1115 3.53932C22.1214 2.85737 22.8966 1.77862 23.2624 0.492616C22.3174 1.12355 21.2708 1.58212 20.1565 1.8297C19.2639 0.759024 17.9932 0.0893555 16.5862 0.0893555C13.885 0.0893555 11.6946 2.55622 11.6946 5.59697C11.6946 6.02922 11.7376 6.44967 11.8215 6.85297C7.75628 6.62261 4.15156 4.4307 1.73908 1.09777C1.31902 1.91181 1.0768 2.8574 1.0768 3.86636C1.0768 5.77743 1.94032 7.46453 3.25344 8.4515C2.45096 8.42358 1.69712 8.1755 1.03824 7.76257C1.03752 7.78568 1.03752 7.80822 1.03752 7.83292C1.03752 10.5006 2.72352 12.7279 4.9616 13.2326C4.55059 13.3588 4.11816 13.4264 3.67184 13.4264C3.35715 13.4264 3.05056 13.3916 2.75256 13.3271C3.37526 15.5158 5.18096 17.1084 7.32176 17.1529C5.64768 18.6307 3.5388 19.5108 1.2468 19.5108C0.852482 19.5108 0.462934 19.4855 0.0800781 19.4345C2.2448 20.9971 4.8152 21.9089 7.57784 21.9089",fill:"currentColor"})))}var Zs,qs=n.forwardRef(Ws),Us=(a.p,function(e){var t=e.className;return Object(_.jsx)("div",{className:t,children:Object(_.jsx)(qs,{})})}),zs=["title","titleId"];function Ys(){return Ys=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ys.apply(this,arguments)}function Js(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Xs(e,t){var a=e.title,r=e.titleId,s=Js(e,zs);return n.createElement("svg",Ys({width:"auto",height:"auto",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},s),a?n.createElement("title",{id:r},a):null,Zs||(Zs=n.createElement("path",{d:"M12.0001 0C5.3735 0 0 5.50144 0 12.2881C0 17.7173 3.43839 22.3234 8.2064 23.9482C8.80613 24.062 9.0263 23.6817 9.0263 23.3571C9.0263 23.0641 9.01518 22.0961 9.01001 21.0693C5.67157 21.8127 4.96712 19.6195 4.96712 19.6195C4.42125 18.1992 3.63473 17.8215 3.63473 17.8215C2.54596 17.0588 3.7168 17.0745 3.7168 17.0745C4.92181 17.1612 5.55632 18.3408 5.55632 18.3408C6.6266 20.2194 8.36359 19.6763 9.04836 19.3623C9.15607 18.5681 9.46706 18.026 9.81024 17.7191C7.14486 17.4084 4.34295 16.3548 4.34295 11.6463C4.34295 10.3047 4.81172 9.20855 5.57937 8.34801C5.45477 8.0385 5.04402 6.78869 5.69562 5.0961C5.69562 5.0961 6.70331 4.76584 8.9965 6.35568C9.95372 6.08341 10.9803 5.94687 12.0001 5.94219C13.0199 5.94687 14.0473 6.08341 15.0063 6.35568C17.2967 4.76584 18.303 5.0961 18.303 5.0961C18.9562 6.78869 18.5452 8.0385 18.4206 8.34801C19.1901 9.20855 19.6557 10.3047 19.6557 11.6463C19.6557 16.366 16.8484 17.4052 14.1762 17.7094C14.6067 18.0907 14.9902 18.8385 14.9902 19.985C14.9902 21.6291 14.9763 22.9524 14.9763 23.3571C14.9763 23.6841 15.1923 24.0673 15.8006 23.9466C20.566 22.32 24 17.7155 24 12.2881C24 5.50144 18.6273 0 12.0001 0ZM4.49443 17.5047C4.468 17.5657 4.3742 17.584 4.28876 17.5421C4.20172 17.502 4.15283 17.4188 4.18105 17.3575C4.20688 17.2947 4.30088 17.2772 4.38772 17.3193C4.47495 17.3594 4.52463 17.4434 4.49443 17.5047ZM5.0847 18.044C5.02747 18.0983 4.91559 18.0731 4.83968 17.9872C4.76119 17.9016 4.74648 17.787 4.80451 17.7318C4.86353 17.6775 4.97203 17.7029 5.05072 17.7886C5.12921 17.8753 5.14451 17.9891 5.0847 18.044ZM5.48965 18.734C5.41612 18.7863 5.2959 18.7373 5.22158 18.628C5.14805 18.5188 5.14805 18.3877 5.22317 18.3352C5.29769 18.2827 5.41612 18.3299 5.49144 18.4384C5.56476 18.5495 5.56476 18.6805 5.48965 18.734ZM6.1745 19.5332C6.10873 19.6075 5.96863 19.5876 5.86609 19.4862C5.76117 19.3871 5.73196 19.2465 5.79793 19.1722C5.8645 19.0978 6.00539 19.1187 6.10873 19.2193C6.21285 19.3181 6.24465 19.4598 6.1745 19.5332ZM7.05961 19.803C7.0306 19.8993 6.89567 19.943 6.75975 19.9021C6.62402 19.86 6.5352 19.7473 6.56262 19.65C6.59084 19.5531 6.72636 19.5076 6.86328 19.5513C6.9988 19.5932 7.08783 19.7052 7.05961 19.803ZM8.0669 19.9175C8.07028 20.0188 7.95502 20.1028 7.81235 20.1047C7.66887 20.1079 7.55282 20.0259 7.55123 19.9262C7.55123 19.8239 7.6639 19.7406 7.80738 19.7382C7.95006 19.7353 8.0669 19.8167 8.0669 19.9175ZM9.05645 19.8786C9.07354 19.9775 8.97438 20.0791 8.8327 20.1061C8.6934 20.1322 8.56443 20.0711 8.54674 19.973C8.52945 19.8717 8.6304 19.7702 8.7695 19.7439C8.91139 19.7187 9.03837 19.7781 9.05645 19.8786Z",fill:"currentColor"})))}var Ks=n.forwardRef(Xs),Gs=(a.p,function(e){var t=e.className;return Object(_.jsx)("div",{className:t,children:Object(_.jsx)(Ks,{})})}),Qs=a.p+"static/media/Privacy_policy.d5afb133.pdf",$s=a(48),ec=a.n($s),tc=function(){return Object(_.jsx)("footer",{className:ec.a.root,children:Object(_.jsxs)(w,{className:ec.a.layout,children:[Object(_.jsxs)("section",{className:ec.a.section,children:[Object(_.jsx)(x,{className:ec.a.logo,type:h.CURRENT_COLOR}),Object(_.jsxs)("div",{className:ec.a.links,children:[Object(_.jsx)("a",{href:"https://www.roke.to/#page-top",target:"_blank",rel:"noreferrer",children:"About"}),Object(_.jsx)("a",{href:"https://www.roke.to/#how-work",target:"_blank",rel:"noreferrer",children:"Features"}),Object(_.jsx)("a",{href:"https://www.roke.to/#used-technologies",target:"_blank",rel:"noreferrer",children:"Docs"}),Object(_.jsx)("a",{href:"https://www.roke.to/#team",target:"_blank",rel:"noreferrer",children:"Team"}),Object(_.jsx)("a",{href:"https://www.roke.to/#blog",target:"_blank",rel:"noreferrer",children:"Blog"}),Object(_.jsx)("a",{href:"https://kikimora-labs.notion.site/Jobs-68acb030fcac42a18ae7c62a56779d5b",target:"_blank",rel:"noreferrer",children:"Jobs"})]})]}),Object(_.jsxs)("section",{className:ec.a.section,children:[Object(_.jsxs)("div",{className:ec.a.legal,children:[Object(_.jsx)("a",{href:Qs,target:"_blank",rel:"noreferrer",children:"Privacy Policy"}),Object(_.jsx)("a",{href:"https://uploads-ssl.webflow.com/6136222580031d054842f5d6/617993de0d09ef005611beac_Cookie_Policy_of_Roketo.pdf",target:"_blank",rel:"noreferrer",children:"Cookie Policy"})]}),Object(_.jsxs)("div",{className:ec.a.socials,children:[Object(_.jsx)("a",{href:"https://twitter.com/roketostream",target:"_blank",rel:"noreferrer",children:Object(_.jsx)(Us,{})}),Object(_.jsx)("a",{href:"https://t.me/roketochat",target:"_blank",rel:"noreferrer",children:Object(_.jsx)(Es,{})}),Object(_.jsx)("a",{href:"https://github.com/roke-to",target:"_blank",rel:"noreferrer",children:Object(_.jsx)(Gs,{})})]})]}),Object(_.jsxs)("section",{className:ec.a.jurInfo,children:["ROKETO LABS LTD",Object(_.jsx)("br",{}),"Registered address: Intershore Chambers, Road Town, Tortola, British Virgin Islands",Object(_.jsx)("br",{}),"Registration number: 2089289"]})]})})},ac=a(76),nc=a.n(ac),rc=function(e){var t=e.title,a=e.children,n=e.isOpen,r=void 0===n||n,s=e.onCloseModal;return Object(_.jsx)(i.a,{isOpen:r,onRequestClose:s,className:nc.a.content,overlayClassName:nc.a.overlay,bodyOpenClassName:nc.a.bodyOverflowHidden,children:Object(_.jsxs)("div",{children:[Object(_.jsx)("span",{className:nc.a.close,onClick:s}),Object(_.jsx)("h2",{className:nc.a.title,children:t}),Object(_.jsx)("div",{className:nc.a.contentContainer,children:a})]})})},sc=a(55),cc=a(49),oc=a.n(cc);function ic(){var e,t=Ee(),a=t.tokens,n=t.roketo,r=ss().data,s=(r||{}).inputs,c=(void 0===s?[]:s).filter(te),o={},i=[],l=[],u=Object(sc.a)(c);try{for(u.s();!(e=u.n()).done;){var d=e.value,j=d.token_account_id,m=re(d);if("0"!==m.toFixed()&&l.push(d.id),o[j])o[j].available=o[j].available.plus(m);else{var b={available:m,tokenAccountId:j};i.push(b),o[j]=b}}}catch(O){u.e(O)}finally{u.f()}var p=i.map((function(e){var t=a[e.tokenAccountId],n=t.formatter,r=t.meta.symbol,s=n.amount(e.available.toFixed());return{tokenAccountId:e.tokenAccountId,amount:s,symbol:r}})),h=r&&0!==p.length,f=r&&0===p.length;return Object(_.jsx)(Ka,{placement:"bottom",align:{offset:[0,20]},overlay:Object(_.jsxs)("div",{className:oc.a.root,children:[Object(_.jsx)("p",{className:oc.a.description,children:"Move all received tokens to your wallet."}),Object(_.jsxs)("div",{className:oc.a.preparedTokensWrapper,"data-testid":Oe.withdrawTooltip,children:[!r&&Object(_.jsx)("p",{className:oc.a.description,"data-testid":Oe.withdrawLoadingCaption,children:"Loading..."}),h&&p.map((function(e){return Object(_.jsxs)("div",{className:oc.a.preparedToken,children:[Object(_.jsx)(Bt,{tokenAccountId:e.tokenAccountId}),Object(_.jsxs)("div",{className:oc.a.info,children:[Object(_.jsx)("span",{className:oc.a.amount,children:e.amount}),Object(_.jsx)("span",{className:oc.a.symbol,children:e.symbol})]})]},e.tokenAccountId)})),f&&Object(_.jsx)("p",{className:oc.a.description,children:"You have nothing to withdraw"})]})]}),children:Object(_.jsx)(Ue,{onClick:function(){l.length>0&&n.api.withdraw({streamIds:l})},testId:Oe.withdrawAllButton,displayMode:h?Ve.action:Ve.secondary,children:"Withdraw tokens"})})}var lc,uc=a(143),dc=a.n(uc),jc=function(e){var t=e.directions,a=e.activeDirection,n=e.onDirectionClick,r=e.isInactive;return Object(_.jsx)("div",{className:dc.a.root,children:t.map((function(e){return Object(_.jsx)(Ue,{className:j()(dc.a.sort,Object(f.a)({},dc.a.active,e===a)),onClick:function(){return n(e)},disabled:r,children:e},e)}))})};function mc(e){var t=e.options,a=Object(n.useMemo)((function(){return Object.keys(t)}),[t]),r=Object(n.useState)(a[0]),s=Object(k.a)(r,2),c=s[0],o=s[1];return Object(n.useMemo)((function(){var e=t[c];return{option:c,selectOption:o,options:t,optionsArray:a,currentFilterFunction:e}}),[t,c,a])}var bc="All",pc="Incoming",hc="Outgoing",fc=(lc={ALL:"All"},Object(f.a)(lc,G,"Initialized"),Object(f.a)(lc,Q,"Active"),Object(f.a)(lc,$,"Paused"),lc);function _c(e){var t=Ee().auth,a=Object(n.useMemo)((function(){var e;return e={},Object(f.a)(e,fc.ALL,(function(){return!0})),Object(f.a)(e,fc[G],(function(e){return e.status===G})),Object(f.a)(e,fc[Q],(function(e){return e.status===Q})),Object(f.a)(e,fc[$],(function(e){return e.status===$})),e}),[]),r=Object(n.useMemo)((function(){var e;return e={},Object(f.a)(e,bc,(function(){return!0})),Object(f.a)(e,pc,(function(e){return t.accountId===e.receiver_id})),Object(f.a)(e,hc,(function(e){return t.accountId===e.owner_id})),e}),[t.accountId]),s=mc({options:a}),c=mc({options:r}),o=function(e){var t=e.items,a=e.filters,r=Object(n.useState)(void 0),s=Object(k.a)(r,2),c=s[0],o=s[1],i=Object(n.useState)([]),l=Object(k.a)(i,2),u=l[0],d=l[1];return Object(n.useEffect)((function(){var e=t,n=[];a.forEach((function(t){var a={};Object.keys(t.options).forEach((function(n){var r;a[n]=null===(r=e)||void 0===r?void 0:r.filter(t.options[n])}));var r={};Object.keys(a).forEach((function(e){r[e]=(a[e]||[]).length})),n.push(r),e=a[t.option]})),d(n),o(e)}),[t,a]),{filterCounts:u,filteredItems:c}}({items:e,filters:Object(n.useMemo)((function(){return[c,s]}),[c,s])});return{statusFilter:s,directionFilter:c,result:o}}var Oc=a(144),xc=a.n(Oc);function vc(e,t,a){return Number(t[a])-Number(e[a])}var yc={bigBalanceFirst:{label:"With high amount",order:jn.desc,fn:function(e,t){return vc(e,t,"balance")}},highSpeedFirst:{label:"With high speed",order:jn.desc,fn:function(e,t){return vc(e,t,"tokens_per_sec")}},highSpeedLast:{label:"With low speed",order:jn.asc,fn:function(e,t){return-1*vc(e,t,"tokens_per_sec")}},mostRecent:{label:"Most recent",order:jn.desc,fn:function(e,t){return vc(e,t,"timestamp_created")}}};function wc(e){var t=e.items,a=e.onFilterDone,r=e.className,s=_c(t),c=s.result.filteredItems,o=Object(n.useState)(yc.mostRecent),i=Object(k.a)(o,2),l=i[0],u=i[1],d=Object.values(yc),m=!t||0===t.length;return Object(n.useEffect)((function(){if(c){var e=Object(Ba.a)(c);e.sort(l.fn),a(e)}else a(c)}),[c,a,l.fn]),Object(_.jsxs)("div",{className:j()(xc.a.root,r),children:[Object(_.jsx)(jc,{directions:s.directionFilter.optionsArray,activeDirection:s.directionFilter.option,onDirectionClick:s.directionFilter.selectOption,isInactive:m}),Object(_.jsxs)("div",{className:xc.a.filtersWrapper,children:[Object(_.jsx)(yn,{options:s.statusFilter.optionsArray,label:"Status:",active:s.statusFilter.option,onChange:s.statusFilter.selectOption,isDisabled:m,renderOption:function(e){var t=s.result.filterCounts[1];return Object(_.jsx)(vn,{option:e,count:t?t[e]:""},e)}}),Object(_.jsx)(yn,{options:d,label:"Show first:",active:l,onChange:u,isDisabled:m,renderOption:function(e){return Object(_.jsx)("span",{children:e.label})},renderActive:function(e){return Object(_.jsxs)("div",{className:xc.a.sortWithOrder,children:[e.order&&Object(_.jsx)(pn,{type:e.order}),Object(_.jsx)("span",{children:e.label})]})}})]})]})}var gc=a(61),kc=function(e){var t=e.width,a=void 0===t?20:t,n=e.height,r=void 0===n?20:n,s=e.className;return Object(_.jsx)("div",{className:s,children:Object(_.jsx)("svg",{width:a,height:r,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(_.jsx)("path",{d:"M10 0C4.48 0 0 4.48 0 10C0 15.52 4.48 20 10 20C15.52 20 20 15.52 20 10C20 4.48 15.52 0 10 0ZM11 15H9V13H11V15ZM11 11H9V5H11V11Z",fill:"#D80A1F"})})})},Nc=["placeholder","description","isRequired","className","field","form","label"],Cc=function(e){var t=e.placeholder,a=e.description,n=e.isRequired,r=e.className,s=e.field,c=e.form,o=e.label,i=Object(De.a)(e,Nc),l=c.errors[s.name];return Object(_.jsx)(Zr,{isRequired:n,className:r,description:a,label:o,error:l,children:Object(_.jsx)(Pr,Object(je.a)(Object(je.a)({required:n,hasError:Boolean(l),placeholder:t},s),i))})},Sc=a(112),Ic=a.n(Sc),Lc=["description","className","hasError"],Bc=function(e){var t=e.description,a=e.className,n=e.hasError,r=void 0!==n&&n,s=Object(De.a)(e,Lc);return Object(_.jsxs)("label",{className:j()(Ic.a.root,a),children:[Object(_.jsx)("input",Object(je.a)({type:"checkbox",className:j()(Ic.a.checkbox,Object(f.a)({},Ic.a.error,r))},s)),t&&Object(_.jsx)("div",{className:Ic.a.description,children:t})]})},Ac=["description","isRequired","className","label","field","form"],Mc=function(e){var t=e.description,a=e.isRequired,n=e.className,r=e.label,s=e.field,c=e.form,o=Object(De.a)(e,Ac),i=c.errors[s.name];return Object(_.jsx)(Zr,{isRequired:a,className:n,label:r,error:i,children:Object(_.jsx)(Bc,Object(je.a)(Object(je.a)({description:t,required:a,hasError:Boolean(i)},s),o))})},Rc=a(182),Fc=a.n(Rc),Tc=["className","hasError"],Hc=function(e){var t=e.className,a=e.hasError,n=void 0!==a&&a,r=Object(De.a)(e,Tc);return Object(_.jsx)("textarea",Object(je.a)({className:j()(Fc.a.textarea,Object(f.a)({},Fc.a.error,n),t)},r))},Ec=a(183),Pc=a.n(Ec),Vc=["placeholder","description","isRequired","className","maxLength","field","label","form"],Dc=function(e){var t,a=e.placeholder,n=e.description,r=e.isRequired,s=e.className,c=e.maxLength,o=e.field,i=e.label,l=e.form,u=Object(De.a)(e,Vc),d=l.errors[o.name];return Object(_.jsxs)(Zr,{isRequired:r,className:j()(Pc.a.formfield,s),description:n,label:i,error:d,children:[Object(_.jsx)(Hc,Object(je.a)(Object(je.a)({required:r,hasError:Boolean(d),placeholder:a,maxLength:c},o),u)),c&&Object(_.jsx)("span",{className:Pc.a.textLimitCounter,children:"".concat((null===o||void 0===o||null===(t=o.value)||void 0===t?void 0:t.length)||0,"/").concat(c)})]})};var Wc=/^[0-9]+$/,Zc=a(59),qc=a.n(Zc),Uc=function(e){var t=e.className,a=e.value,n=e.onChange,r=e.label,s=e.testId;return Object(_.jsxs)("div",{className:j()(qc.a.speedInput,t),children:[Object(_.jsx)(Pr,{placeholder:"0",value:a,onChange:n,className:qc.a.input,"data-testid":s}),Object(_.jsx)("label",{className:qc.a.label,children:r})]})},zc=function(e){var t=e.form,a=e.field,r=e.label,s=e.deposit,c=e.className,o=e.isRequired,i=e.description,l=e.onSpeedChange,u=e.tokenAccountId,d=Ee().tokens[u],m=d.formatter,b=t.errors[a.name],p=a.value,h=Object(n.useState)(0),f=Object(k.a)(h,2),O=f[0],x=f[1],v=Object(n.useState)(0),y=Object(k.a)(v,2),w=y[0],g=y[1],N=Object(n.useState)(0),C=Object(k.a)(N,2),S=C[0],I=C[1],L=Object(n.useState)(0),B=Object(k.a)(L,2),A=B[0],M=B[1],R=m.toYocto(s),F=function(e,t,a,n){return(Object(ft.a)(Object(_t.a)(new Date,e),new Date)+t)*be+60*n+a*me}(O,w,A,S),T=function(e,t){var a=new Y.a(e).dividedToIntegerBy(t).toFixed();return"Infinity"!==a&&"NaN"!==a?a:"0"}(R,F),H=function(e){var t=Object(n.useRef)(null);return Object(n.useEffect)((function(){t.current=e}),[e]),t.current}(T);Object(n.useEffect)((function(){H!==T&&l(T)}),[T,l,H]);var E=function(e,t){return function(a){var n,r=a.target.value||"0";n=r,Wc.test(n)&&Number(r)<=t&&e(Number(r))}},P=xt(p,d),V=Object(_.jsxs)("div",{className:qc.a.formLabel,children:[r,Object(_.jsx)("span",{className:j()(qc.a.speed,qc.a.label),children:"Streaming speed: ".concat(P)})]});return Object(_.jsx)(Zr,{isRequired:o,className:j()(qc.a.formField,c),description:i,label:V,error:b,children:Object(_.jsxs)("div",{className:qc.a.wrapper,children:[Object(_.jsx)(Uc,{value:O,onChange:E(x,12),label:"Months, max: 12",testId:Oe.createStreamMonthsInput}),Object(_.jsx)(Uc,{value:w,onChange:E(g,31),label:"Days, max: 31",testId:Oe.createStreamDaysInput}),Object(_.jsx)(Uc,{value:A,onChange:E(M,24),label:"Hours, max: 24",testId:Oe.createStreamHoursInput}),Object(_.jsx)(Uc,{value:S,onChange:E(I,60),label:"Minutes, max: 60",testId:Oe.createStreamMinutesInput})]})})},Yc=a(95),Jc=a.n(Yc),Xc=function(e){var t=e.token,a=e.onClick,n=e.className,r=j()(Jc.a.tokenOption,n),s=Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(Bt,{tokenAccountId:t.roketoMeta.account_id}),Object(_.jsx)("span",{children:"".concat(t.meta.name,", ").concat(t.meta.symbol)})]});return a?Object(_.jsx)("button",{type:"button",className:r,onClick:a,children:s}):Object(_.jsx)("div",{className:r,children:s})},Kc=function(e){var t=e.form,a=e.label,r=e.field,s=e.className,c=e.isRequired,o=e.description,i=e.onTokenChoose,l=e.activeTokenAccountId,u=Ee().tokens,d=Object(n.useState)(!1),j=Object(k.a)(d,2),m=j[0],b=j[1],p=Object.values(u),h=u[l],f=t.errors[r.name];return Object(_.jsx)(Zr,{isRequired:c,className:s,description:o,label:a,error:f,children:Object(_.jsxs)("div",{className:Jc.a.dropdownWrapper,children:[Object(_.jsx)(pt,{onChange:b,className:Jc.a.dropdownOpener,opened:m,children:Object(_.jsx)(Xc,{token:h})}),Object(_.jsx)(Ut,{opened:m,onClose:function(){return b(!1)},className:Jc.a.dropdownMenu,children:p.map((function(e){return Object(_.jsx)(Xc,{token:e,onClick:function(){return function(e){b(!1),i(e.roketoMeta.account_id)}(e)},className:Jc.a.withHover})}))})]})})},Gc=function(e){var t=e.tokenAccountId,a=e.className,n=Ee().tokens[t],r=n.meta,s=n.formatter,c=n.roketoMeta;return r&&Object(_.jsx)("div",{className:a,children:"You will be charged \n        ".concat(s.amount(c.commission_on_create)," \n        ").concat(r.symbol," fee for the stream")})},Qc=a(33),$c=a.n(Qc),eo=function(e){var t=e.children,a=e.className;return Object(_.jsx)("div",{className:j()($c.a.row,a),children:t})},to=function(e){var t=e.error;return Object(_.jsxs)("div",{className:$c.a.submitError,children:[Object(_.jsx)(kc,{}),Object(_.jsx)("span",{children:t})]})},ao=Object(_.jsxs)("div",{children:["Delayed start",Object(_.jsxs)("div",{className:$c.a.subDescription,children:["If you select this field, the stream",Object(_.jsx)("br",{}),"won't start immediately"]})]}),no=Object(_.jsxs)("div",{children:["Uneditable stream",Object(_.jsxs)("div",{className:$c.a.subDescription,children:["If you select this field, you will not be able",Object(_.jsx)("br",{}),"to carry out any actions on the stream"]})]}),ro=function(e){var t=e.onFormCancel,a=e.onFormSubmit,r=Ee(),s=r.near,c=r.auth,o=Object(n.useState)(null),i=Object(k.a)(o,2),l=i[0],u=i[1],d=function(e,t){return ht.c().shape({receiver:ht.d().required("Receiver is required").test("receiver-not-equal-owner","Receiver can not be the same as the owner",(function(e){return e!==t})).test("receiver-is-valida-address","Address does not exists",function(){var t=Object(g.a)(C.a.mark((function t(a){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,t.t0=Boolean,t.t1=a,!t.t1){t.next=7;break}return t.next=6,e.connection.provider.query({request_type:"view_account",finality:"final",account_id:a});case 6:t.t1=t.sent;case 7:return t.t2=t.t1,t.abrupt("return",(0,t.t0)(t.t2));case 11:return t.prev=11,t.t3=t.catch(0),t.abrupt("return",!1);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()),streamName:ht.d().max(100,"Stream name must be less or equal 100 symbols"),token:ht.d().required(),deposit:ht.b().required("Deposit is required").moreThan(0,"Deposit should be more than 0"),speed:ht.b().required("Stream duration is required").moreThan(0,"Choose stream duration"),autoStart:ht.a(),isLocked:ht.a(),comment:ht.d().max(80)})}(s,c.accountId);return Object(_.jsxs)("div",{className:$c.a.root,children:[Object(_.jsx)("h2",{className:$c.a.title,children:"Create Stream"}),Object(_.jsx)(gc.b,{initialValues:Ot,onSubmit:function(e){a(e).catch((function(e){return u(e)}))},validateOnBlur:!0,validationSchema:d,validateOnChange:!1,validateOnMount:!1,children:function(e){var a=e.values,n=e.handleSubmit,r=e.setFieldValue,s=e.setFieldTouched,c=a.token;return Object(_.jsxs)("form",{onSubmit:n,className:$c.a.form,children:[Object(_.jsx)(eo,{children:Object(_.jsx)(gc.a,{isRequired:!0,name:"receiver",label:"Receiver:",component:Cc,placeholder:"receiver.".concat(I),className:$c.a.rowItem,"data-testid":Oe.createStreamReceiverInput})}),Object(_.jsxs)(eo,{className:$c.a.amount,children:[Object(_.jsx)(gc.a,{isRequired:!0,name:"deposit",label:"Amount to stream:",component:Cc,placeholder:"Amount to stream",className:$c.a.rowItem,description:Object(_.jsx)(xr,{tokenAccountId:c,mode:dr.CRYPTO}),"data-testid":Oe.createStreamAmountInput}),Object(_.jsx)(gc.a,{isRequired:!0,name:"token",label:"Token",activeTokenAccountId:a.token,onTokenChoose:function(e){r("token",e,!1),s("token",!0,!1)},component:Kc,className:$c.a.rowItem})]}),Object(_.jsx)(eo,{children:Object(_.jsx)(gc.a,{tokenAccountId:c,isRequired:!0,name:"speed",label:"Stream duration:",deposit:a.deposit,component:zc,onSpeedChange:function(e){r("speed",e,!1),s("speed",!0,!1)},className:$c.a.rowItem})}),Object(_.jsx)(eo,{children:Object(_.jsx)(gc.a,{maxLength:80,name:"comment",label:"Comment:",placeholder:"Enter comment",component:Dc,className:$c.a.rowItem,"data-testid":Oe.createStreamCommentInput})}),Object(_.jsxs)(eo,{className:$c.a.checkboxes,children:[Object(_.jsx)(gc.a,{name:"delayed",description:ao,type:"checkbox",component:Mc,"data-testid":Oe.createStreamDelayedCheckbox}),Object(_.jsx)(gc.a,{name:"isLocked",description:no,type:"checkbox",component:Mc,"data-testid":Oe.createStreamLockedCheckbox})]}),Object(_.jsx)(eo,{children:Object(_.jsx)(Gc,{tokenAccountId:c,className:$c.a.feeDisclaimer})}),Object(_.jsxs)("div",{className:$c.a.actionButtonsWrapper,children:[l&&Object(_.jsx)(to,{error:l.message}),Object(_.jsx)(Ue,{displayMode:Ve.simple,onClick:t,testId:Oe.createStreamCancelButton,children:"Cancel"}),Object(_.jsx)(Ue,{type:Pe.submit,displayMode:Ve.action,testId:Oe.createStreamSubmitButton,children:"Create"})]})]})}})]})},so=a(145),co=a.n(so),oo=function(e){var t=e.title,a=e.total,n=e.streamed,r=e.withdrawn,s=e.withProgressBar,c=void 0===s||s,o=e.testId,i=n?"$ ".concat(n," of ").concat(a):"$ ".concat(a);return Object(_.jsxs)("div",{className:co.a.card,children:[Object(_.jsx)("h3",{className:co.a.title,children:t}),Object(_.jsx)("span",{className:co.a.finance,"data-testid":o,children:i}),c&&Object(_.jsx)(kt,{total:a,streamed:n||0,withdrawn:r||0})]})},io=new Y.a(0),lo=function(e,t,a){var n={total:io,streamed:io,withdrawn:io},r=e.reduce((function(e,n){var r=n.token_account_id,s=t[r].formatter,c=os(n).progress,o=s.toHumanReadableValue(c.streamed,3),i=a.getPriceInUsd(r,o),l=s.toHumanReadableValue(c.full,3),u=a.getPriceInUsd(r,l),d=s.toHumanReadableValue(c.withdrawn,3),j=a.getPriceInUsd(r,d);return{total:e.total.plus(u),streamed:e.streamed.plus(i),withdrawn:e.withdrawn.plus(j)}}),n);return{total:Number(r.total.toFixed(0)),streamed:Number(r.streamed.toFixed(0)),withdrawn:Number(r.withdrawn.toFixed(0))}},uo=a(247),jo=a.n(uo),mo=function(e){var t=e.className,a=Ee(),n=a.tokens,r=a.priceOracle,s=ss().data||{},c=s.inputs,o=void 0===c?[]:c,i=s.outputs,l=void 0===i?[]:i,u=o.filter(te),d=l.filter(te),m=lo(d,n,r),b=lo(u,n,r),p=function(e,t,a){var n=e.reduce((function(e,n){var r=n.token_account_id,s=t[r].formatter,c=re(n).toFixed(),o=s.toHumanReadableValue(c,3),i=a.getPriceInUsd(r,o);return e.plus(i)}),io);return Number(n.toFixed(0))}(u,n,r);return Object(_.jsxs)("section",{className:j()(jo.a.root,t),children:[Object(_.jsx)(oo,{title:"Sending",total:m.total,streamed:m.streamed,withdrawn:m.withdrawn}),Object(_.jsx)(oo,{title:"Receiving",total:b.total,streamed:b.streamed,withdrawn:b.withdrawn}),Object(_.jsx)(oo,{title:"Available for withdrawal",total:p,withProgressBar:!1,testId:Oe.availableForWithdrawalCaption})]})},bo=a(146),po=a.n(bo);function ho(e){var t=e.isOrange,a=e.children,n=e.className;return Object(_.jsx)("span",{className:j()(po.a.badge,t?po.a.orange:po.a.blue,n),children:a})}var fo,_o=a(184),Oo=a.n(_o),xo=function(e){var t=e.name,a=e.isOutgoing,n=e.isLocked;return Object(_.jsxs)("div",{className:Oo.a.flexCenter,children:[Object(_.jsx)("span",{className:Oo.a.name,children:t}),a&&Object(_.jsx)(ho,{children:"Sending"}),n&&Object(_.jsx)(ho,{isOrange:!0,children:"Locked"})]})},vo=a(25),yo=a.n(vo),wo={points:["tl","bc"],offset:[-24,10]},go=function(e){var t=e.stream,a=e.className,n=t.token_account_id,r=t.tokens_per_sec,s=os(t),c=s.progress,o=s.timeLeft,i=Or(n),l=i.formatter,u=i.meta.symbol,d=Number(l.toHumanReadableValue(c.streamed,3)),m=Number(l.toHumanReadableValue(c.withdrawn,3)),b=Number(l.toHumanReadableValue(c.full,3)),p=xe.formatSmartly(d),h=xe.formatSmartly(m),f=yt(d,b,1),O=yt(m,d,1),x="".concat(p," of ").concat(b),v=l.tokensPerMeaningfulPeriod(r),y=v.formattedValue,w=v.unit;return Object(_.jsx)(Ya.a,{overlayClassName:yo.a.overlay,destroyTooltipOnHide:!0,align:wo,placement:"bottom",overlay:Object(_.jsxs)("div",{className:j()(yo.a.tooltip,yo.a.text),children:[Object(_.jsxs)("div",{className:yo.a.innerStatus,children:[Object(_.jsx)("span",{children:x})," ",Object(_.jsx)("span",{className:j()(yo.a.grey,yo.a.smaller),children:u})]}),Object(_.jsx)(kt,{total:b,streamed:d,withdrawn:m}),Object(_.jsxs)("div",{className:j()(yo.a.status,yo.a.speed),children:[y," ",Object(_.jsxs)("span",{className:j()(yo.a.grey,yo.a.smaller),children:[u," / ",w]})]}),o&&Object(_.jsxs)("div",{className:yo.a.remained,children:[Object(_.jsx)(qn,{className:yo.a.clock}),o]}),Object(_.jsxs)("div",{className:j()(yo.a.progress,yo.a.streamed),children:["Streamed: ",p," ",Object(_.jsx)("span",{className:j()(yo.a.grey,yo.a.smaller),children:"".concat(f,"%")})]}),Object(_.jsxs)("div",{className:j()(yo.a.progress,yo.a.withdrawn),children:["Withdrawn: ",h," ",Object(_.jsx)("span",{className:j()(yo.a.grey,yo.a.smaller),children:"".concat(O,"%")})]})]}),children:Object(_.jsxs)("div",{className:j()(yo.a.root,yo.a.text,a),children:[Object(_.jsxs)("div",{className:yo.a.status,children:[Object(_.jsx)("span",{"data-testid":Oe.streamProgressCaption,children:x})," ",Object(_.jsx)("span",{className:yo.a.grey,children:u})]}),Object(_.jsx)(kt,{total:b,streamed:d,withdrawn:m})]})})};function ko(e){var t=e.stream,a=Ee(),n=a.tokens,r=a.roketo,s=re(t),c=n[t.token_account_id].formatter.amount(s.toFixed());return Object(_.jsx)(Ue,{disabled:0===Number(c),type:Pe.button,displayMode:Ve.primary,onClick:function(e){e.preventDefault(),r.api.withdraw({streamIds:[t.id]})},testId:Oe.withdrawButton,children:"Withdraw"})}function No(e){var t=r.a.useState(e),a=Object(k.a)(t,2),n=a[0],s=a[1];return{on:n,off:!n,toggle:function(){return s(!n)},turnOff:function(){return s(!1)},turnOn:function(){return s(!0)},setOn:s}}var Co=(fo={},Object(f.a)(fo,G,{label:"Initialized"}),Object(f.a)(fo,Q,{label:"Active"}),Object(f.a)(fo,$,{label:"Paused"}),Object(f.a)(fo,ee,{label:"Finished"}),fo);function So(e){var t=e.stream,a=e.className,n="string"===typeof t.status?Co[t.status]:Co[ee];return Object(_.jsx)("div",{className:j()(a),children:n.label})}var Io=a(19),Lo=a.n(Io);function Bo(){return Object(_.jsx)("svg",{width:"8",height:"10",viewBox:"0 0 8 10",fill:"none",children:Object(_.jsx)("path",{d:"M1.66634 2.76016L5.17968 5.00016L1.66634 7.24016V2.76016ZM0.333008 0.333496V9.66683L7.66634 5.00016L0.333008 0.333496Z",fill:"currentColor"})})}function Ao(){return Object(_.jsx)("svg",{width:"8",height:"10",viewBox:"0 0 8 10",fill:"none",children:Object(_.jsx)("path",{d:"M0 9.66659H2.66667V0.333252H0V9.66659ZM5.33333 0.333252V9.66659H8V0.333252H5.33333Z",fill:"currentColor"})})}function Mo(){return Object(_.jsx)("svg",{width:"8",height:"8",viewBox:"0 0 8 8",fill:"none",children:Object(_.jsx)("path",{d:"M6.66667 1.33333V6.66667H1.33333V1.33333H6.66667ZM8 0H0V8H8V0Z",fill:"currentColor"})})}function Ro(e){var t=e.modalControl,a=e.onConfirm;return Object(_.jsxs)(i.a,{isOpen:t.on,onRequestClose:t.turnOff,className:Lo.a.modalContent,overlayClassName:Lo.a.modalOverlay,children:[Object(_.jsx)("h2",{className:Lo.a.modalHeader,children:"Are you sure?"}),Object(_.jsx)("p",{children:"As a stream receiver, you will not be able to resume stream. Only stream owners can resume streams."}),Object(_.jsxs)("div",{className:Lo.a.modalButtons,children:[Object(_.jsx)("button",{type:"button",onClick:t.turnOff,className:j()(Lo.a.modalButton,Lo.a.modalSecondary),children:"Cancel"}),Object(_.jsx)("button",{type:"button",onClick:function(){t.turnOff(),a()},className:j()(Lo.a.modalButton,Lo.a.modalWarning),children:"Pause"})]})]})}function Fo(e){var t=e.modalControl,a=e.onConfirm;return Object(_.jsxs)(i.a,{isOpen:t.on,onRequestClose:t.turnOff,className:Lo.a.modalContent,overlayClassName:Lo.a.modalOverlay,children:[Object(_.jsx)("h2",{className:Lo.a.modalHeader,children:"Stop stream"}),Object(_.jsx)("p",{children:"This action will completely shut down the stream. After that, it can't be turned on."}),Object(_.jsxs)("div",{className:Lo.a.modalButtons,children:[Object(_.jsx)("button",{type:"button",onClick:t.turnOff,className:j()(Lo.a.modalButton,Lo.a.modalSecondary),children:"Cancel"}),Object(_.jsx)("button",{type:"button",onClick:function(){t.turnOff(),a()},className:j()(Lo.a.modalButton,Lo.a.modalDanger),children:"Stop"})]})]})}function To(e){var t,a=e.stream,r=e.className,s=Ee(),c=s.auth,o=s.roketo,i=No(!1),l=No(!1),u=Object(n.useState)(!1),d=Object(k.a)(u,2),m=d[0],b=d[1],p=Object(n.useState)(!1),h=Object(k.a)(p,2),O=h[0],x=h[1],v=c.accountId===a.owner_id,y=c.accountId===a.receiver_id,w=!v&&!y,N=function(){var e=Object(g.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.next=3,o.api.pauseStream({streamId:a.id});case 3:b(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(g.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.next=3,o.api.startStream({streamId:a.id});case 3:b(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(g.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.next=3,o.api.stopStream({streamId:a.id});case 3:b(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(ne(a)||w)return Object(_.jsx)(So,{className:r,stream:a});var L=O&&!m,B=a.status!==Q&&v,A=a.status===Q,M=(t={},Object(f.a)(t,Lo.a.active,te(a)),Object(f.a)(t,Lo.a.pause,function(e){return e.status===$}(a)),Object(f.a)(t,Lo.a.stop,ne(a)),t);return function(e){var t=e.is_locked,a=e.status;return t&&a!==G}(a)?Object(_.jsx)("div",{className:j()(Lo.a.relative,r),children:Object(_.jsx)("button",{type:"button",className:j()(Lo.a.dropdownOpener,Lo.a.notAllowed),children:Object(_.jsx)(So,{stream:a})})}):Object(_.jsxs)("div",{className:j()(Lo.a.relative,r),children:[Object(_.jsx)(Ro,{modalControl:i,onConfirm:N}),Object(_.jsx)(Fo,{modalControl:l,onConfirm:I}),Object(_.jsx)(pt,{opened:L,onChange:x,className:j()(Lo.a.dropdownOpener,M),testId:Oe.streamControlsDropdown,children:m?"Loading...":Object(_.jsx)(So,{stream:a,className:Lo.a.statusPadded})}),Object(_.jsxs)(Ut,{onClose:function(){return x(!1)},opened:L,className:Lo.a.controlsMenu,children:[B&&Object(_.jsx)(zt,{children:Object(_.jsxs)("button",{type:"button",onClick:S,className:j()(Lo.a.controlButton,Lo.a.start),"data-testid":Oe.streamStartButton,children:[Object(_.jsx)(Bo,{}),Object(_.jsx)("span",{children:"Start"})," "]})}),A&&Object(_.jsx)(zt,{children:Object(_.jsxs)("button",{type:"button",onClick:function(){x(!1),y?i.turnOn():N()},className:j()(Lo.a.controlButton,Lo.a.pause),"data-testid":Oe.streamPauseButton,children:[Object(_.jsx)(Ao,{}),Object(_.jsx)("span",{children:"Pause"})]})}),(B||A)&&Object(_.jsx)(Yt,{}),Object(_.jsx)(zt,{children:Object(_.jsxs)("button",{type:"button",onClick:function(){x(!1),l.turnOn()},className:j()(Lo.a.controlButton,Lo.a.stop),"data-testid":Oe.streamStopButton,children:[Object(_.jsx)(Mo,{}),Object(_.jsx)("span",{children:"Stop"})]})})]})]})}var Ho=a(185),Eo=a.n(Ho),Po=function(e){var t=e.onCLick;return Object(_.jsx)("button",{className:Eo.a.linkButton,type:"button",onClick:t,children:Object(_.jsx)(at,{})})},Vo=function(e){var t=e.className,a=e.stream,r=a.id,s=Object(n.useCallback)((function(e){e.preventDefault();var t=b(r);$e()(t)}),[r]),c=ns(a)===ts&&te(a);return Object(_.jsxs)("div",{className:j()(Eo.a.root,t),children:[c&&Object(_.jsx)(ko,{stream:a}),Object(_.jsx)(To,{stream:a}),Object(_.jsx)(Po,{onCLick:s})]})},Do=a(96),Wo=a.n(Do),Zo=function(e){var t=e.stream,a=e.className,n=t.id,r=t.description,s="";try{s=JSON.parse(r).comment}catch(d){s=r}var c=ns(t)===ts,o=c?t.owner_id:t.receiver_id,i=Object(u.f)(m.stream.path,{id:n});return Object(_.jsxs)("div",{className:j()(Wo.a.root,a),children:[Object(_.jsx)(l.b,{to:i,className:Wo.a.name,children:Object(_.jsx)(xo,{name:o,isOutgoing:!c,isLocked:t.is_locked})}),Object(_.jsx)(go,{stream:t,className:Wo.a.withMarginRight}),Object(_.jsx)(l.b,{to:i,className:"col-span-2 grow-0",children:Object(_.jsx)("p",{className:Wo.a.comment,children:s})}),Object(_.jsx)(Vo,{stream:t,className:j()(Wo.a.controls,"col-span-2 grow-0")})]})},qo=a(50),Uo=a.n(qo),zo=function(e){var t=e.children;return Object(_.jsx)("div",{className:Uo.a.emptyState,children:t})},Yo=function(e){var t,a=e.className,n=e.displayingStreams,r=e.onCreateStreamClick,s=ss().data,c=s||{},o=c.inputs,i=void 0===o?[]:o,l=c.outputs,u=void 0===l?[]:l,d=[].concat(Object(Ba.a)(i),Object(Ba.a)(u)).length,m=null!==(t=null===n||void 0===n?void 0:n.length)&&void 0!==t?t:0;return s?s&&0===d?Object(_.jsxs)(zo,{children:[Object(_.jsx)("div",{children:"You don't have any streams yet."}),Object(_.jsx)(Ue,{onClick:r,children:"Create First Stream"})]}):s&&0!==d&&0===m?Object(_.jsx)(zo,{children:Object(_.jsx)("div",{children:"No streams matching your filters. Try selecting different ones"})}):Object(_.jsx)("div",{className:j()(Uo.a.container,a),children:Object(_.jsxs)("section",{className:Uo.a.flexColumn,children:[Object(_.jsxs)("div",{className:j()(Uo.a.withPaddings,"grid grid-cols-6 gap-x-10"),children:[Object(_.jsx)("h3",{className:Uo.a.title,children:"Wallet address"}),Object(_.jsx)("h3",{className:Uo.a.title,children:"Amount to stream"}),Object(_.jsx)("h3",{className:Uo.a.title,children:"Comment"})]}),null===n||void 0===n?void 0:n.map((function(e){return Object(_.jsx)(Zo,{stream:e,className:j()(Uo.a.withPaddings,"grid grid-cols-6 gap-x-10")},e.id)}))]})}):Object(_.jsx)(zo,{children:Object(_.jsx)(Vn,{wrapperClassName:Uo.a.loader})})},Jo=a(60),Xo=a.n(Jo),Ko=Object(u.f)(m.streams.path),Go="".concat(window.location.origin,"/#").concat(Ko),Qo=function(){var e=Ee(),t=e.roketo,a=e.tokens,r=ss().data||{},s=r.inputs,c=r.outputs,o=Object(n.useMemo)((function(){return(s||c)&&[].concat(Object(Ba.a)(s||[]),Object(Ba.a)(c||[]))}),[s,c]),i=Object(n.useState)([]),l=Object(k.a)(i,2),u=l[0],d=l[1],m=Object(n.useState)(!1),b=Object(k.a)(m,2),p=b[0],h=b[1],f=Object(n.useCallback)((function(){return h(!p)}),[h,p]),O=function(){var e=Object(g.a)(C.a.mark((function e(n){var r,s,c,o,i,l,u,d,j,m,b;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.receiver,s=n.delayed,c=n.comment,o=n.deposit,i=n.speed,l=n.token,u=n.isLocked,d=a[l],j=d.formatter,m=d.api,b=d.roketoMeta,e.next=4,t.api.createStream({deposit:j.toYocto(o),comment:c,receiverId:r,tokenAccountId:l,commissionOnCreate:b.commission_on_create,tokensPerSec:i,delayed:s,callbackUrl:Go,handleTransferStream:m.transfer,isLocked:u});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(_.jsx)("div",{className:Xo.a.root,children:Object(_.jsxs)(w,{children:[Object(_.jsxs)("section",{className:j()(Xo.a.flex,Xo.a.header),children:[Object(_.jsx)("h1",{className:Xo.a.title,children:"Streams"}),Object(_.jsxs)("div",{className:j()(Xo.a.flex,Xo.a.buttonsWrapper),children:[Object(_.jsx)(ic,{}),Object(_.jsx)(Ue,{onClick:f,testId:Oe.createStreamButton,children:"Create a stream"}),Object(_.jsx)(rc,{isOpen:p,onCloseModal:f,children:Object(_.jsx)(ro,{onFormCancel:f,onFormSubmit:O})})]})]}),Object(_.jsx)(mo,{}),Object(_.jsx)(wc,{items:o,onFilterDone:d,className:Xo.a.streamFilters}),Object(_.jsx)(Yo,{displayingStreams:u,className:Xo.a.section,onCreateStreamClick:f})]})})},$o=a(147),ei=a.n($o);function ti(){return Object(_.jsx)("div",{className:"flex h-screen mx-3",children:Object(_.jsx)("div",{className:j()("lg:m-auto mx-auto my-auto lg:w-2/5 bg-gray-90 rounded-3xl p-5",ei.a.block),children:Object(_.jsxs)("div",{className:j()("my-24",ei.a.content),children:[Object(_.jsxs)("h1",{className:"text-3xl mb-4 font-semibold",children:[" ","Login via NEAR Network"," "]}),Object(_.jsx)("p",{className:j()("mb-4",ei.a.hint),children:"Click button below to login or create new account"}),Object(_.jsx)(Xe,{})]})})})}var ai=a(10),ni=a.n(ai);function ri(e){var t=e.className;return Object(_.jsx)("svg",{className:t,width:"8",height:"12",viewBox:"0 0 8 12",fill:"none",children:Object(_.jsx)("path",{d:"M0.895051 11.6285C0.745051 11.6285 0.603384 11.5702 0.495051 11.4535C0.295051 11.2285 0.311718 10.8869 0.528384 10.6869L5.836 5.90328L0.495028 1.27828C0.270028 1.07828 0.261695 0.736613 0.461695 0.511613C0.661695 0.294947 1.00336 0.27828 1.22836 0.47828L6.97766 5.46995C7.23599 5.70328 7.23599 6.10328 6.97766 6.33662L1.26172 11.4869C1.15338 11.5869 1.02838 11.6285 0.895051 11.6285Z",fill:"currentColor"})})}function si(e){var t=e.stream,a=Ee().tokens[t.token_account_id],n=a.meta,r=a.formatter,s=os(t).progress,c=s.streamed,o=s.withdrawn,i=s.full;return Object(_.jsxs)("div",{children:[Object(_.jsxs)("div",{className:ni.a.numericProgress,children:[Object(_.jsx)(Bt,{tokenAccountId:t.token_account_id,className:ni.a.tokenIcon}),Object(_.jsx)("span",{children:"".concat(n.symbol," ").concat(r.amount(c)," of ").concat(r.amount(i))})]}),Object(_.jsx)(kt,{total:Number(i),streamed:Number(c),withdrawn:Number(o)})]})}function ci(e){var t=e.stream,a=os(t).isDead,n=ns(t);return a?null:Object(_.jsxs)("div",{className:ni.a.buttons,children:[Object(_.jsx)(To,{stream:t}),n===ts&&t.status===Q&&Object(_.jsx)(ko,{stream:t})]})}function oi(e){var t=e.stream,a=Ee().tokens;return Object(_.jsxs)("div",{children:[Object(_.jsx)("span",{className:ni.a.blockTitle,children:"Speed"}),Object(_.jsx)("div",{className:ni.a.speed,children:xt(Number(t.tokens_per_sec),a[t.token_account_id])})]})}function ii(e){var t=e.stream,a="";try{a=JSON.parse(t.description).comment}catch(n){a=t.description}return""===a?null:Object(_.jsxs)("div",{children:[Object(_.jsx)("span",{className:ni.a.blockTitle,children:"Comment"}),Object(_.jsx)("div",{className:ni.a.commentBody,children:a})]})}function li(e){var t=e.stringToCopy;return Object(_.jsx)("button",{type:"button",className:ni.a.copyButton,onClick:function(){return $e()(t)},children:Object(_.jsx)(at,{className:ni.a.linkIcon})})}function ui(e){var t=b(e.stream.id);return Object(_.jsxs)("div",{children:[Object(_.jsxs)("div",{className:j()(ni.a.blockTitle,ni.a.copyTitle),children:["Public link to view the stream",Object(_.jsx)(li,{stringToCopy:t})]}),Object(_.jsx)("div",{className:ni.a.link,children:t})]})}function di(e){var t=e.title,a=e.children;return Object(_.jsxs)("div",{className:ni.a.infoRow,children:[Object(_.jsx)("span",{className:ni.a.infoTitle,children:t}),a]})}function ji(e){var t=e.stream,a=ns(t),r=Ee().tokens,s=os(t),c=s.streamEndInfo,o=s.timeLeft,i=s.progress,l=i.streamed,u=i.left,d=i.full,m=yt(l,d).toNumber(),b=yt(u,d).toNumber(),p=re(t).toNumber(),h=r[t.token_account_id],f=h.meta,O=h.formatter,x=Object(n.useState)(!1),v=Object(k.a)(x,2),y=v[0],w=v[1];return Object(_.jsxs)("div",{className:j()(ni.a.tile,ni.a.infoTile),children:[Object(_.jsx)("div",{className:ni.a.blockHeader,children:"Stream info"}),Object(_.jsx)(di,{title:"Sender",children:Object(_.jsx)("span",{className:ni.a.font16,children:a===as?"You":t.owner_id})}),Object(_.jsx)(di,{title:"Receiver",children:Object(_.jsx)("span",{className:ni.a.font16,children:a===ts?"You":t.receiver_id})}),Object(_.jsx)(di,{title:"Amount",children:Object(_.jsxs)("span",{className:ni.a.font14,children:[O.amount(d),"\xa0",Object(_.jsx)("span",{className:ni.a.font12,children:f.symbol})]})}),Object(_.jsx)(di,{title:"Stream Created",children:Object(_.jsx)("span",{className:ni.a.font14,children:Object(et.a)(new Date(Number(t.timestamp_created)/1e6),"PP 'at' p")})}),null!==c&&Object(_.jsx)(di,{title:Object(tt.a)(c)?"Stream Ended":"Stream Ends",children:Object(_.jsx)("span",{className:ni.a.font14,children:Object(et.a)(new Date(c),"PP 'at' p")})}),Object(_.jsx)(di,{title:"Token",children:Object(_.jsxs)("span",{className:ni.a.font14,children:[f.name,",\xa0",Object(_.jsx)("span",{className:ni.a.font12,children:f.symbol})]})}),Object(_.jsx)("div",{className:ni.a.divider}),Object(_.jsx)(pt,{className:ni.a.dropdownOpener,opened:y,onChange:function(e){w(e)},children:Object(_.jsx)("h3",{className:ni.a.sectionHeader,children:"Other info"})}),y&&Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(di,{title:"Stream ID",children:Object(_.jsxs)("div",{className:ni.a.centeredFlex,children:[Object(_.jsx)("span",{className:j()(ni.a.font14,ni.a.streamID),children:t.id}),Object(_.jsx)(li,{stringToCopy:t.id})]})}),Object(_.jsx)(di,{title:"Remaining",children:Object(_.jsx)("span",{className:ni.a.font14,children:o||"Finished"})}),Object(_.jsx)(di,{title:"Tokens Transferred",children:Object(_.jsxs)("span",{className:ni.a.font14,children:[O.amount(l),"\xa0",Object(_.jsxs)("span",{className:ni.a.font12,children:[f.symbol," ",Object(_.jsxs)("span",{className:ni.a.grey,children:["(",m,"%)"]})]})]})}),t.timestamp_created!==t.last_action&&Object(_.jsx)(di,{title:"Latest Withdrawal",children:Object(_.jsx)("span",{className:ni.a.font14,children:Object(et.a)(new Date(Number(t.last_action)/1e6),"PP 'at' p")})}),Object(_.jsx)(di,{title:"Tokens Left",children:Object(_.jsxs)("span",{className:ni.a.font14,children:[O.amount(u),"\xa0",Object(_.jsxs)("span",{className:ni.a.font12,children:[f.symbol," ",Object(_.jsxs)("span",{className:ni.a.grey,children:["(",b,"%)"]})]})]})}),Object(_.jsx)(di,{title:"Tokens Available",children:Object(_.jsxs)("span",{className:ni.a.font14,children:[O.amount(p),"\xa0",Object(_.jsx)("span",{className:ni.a.font12,children:f.symbol})]})})]})]})}function mi(){var e=Object(u.h)().id,t=function(e){var t,a=Ee().roketo,n=Object(Aa.a)((function(){return!!a.account&&["stream",e,a.account.last_created_stream]}),Object(g.a)(C.a.mark((function t(){var n;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.api.getStream({streamId:e});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)}))),{errorRetryInterval:2e3,errorRetryCount:3});return rs({swr:n,revalidationPeriod:10,isEnabled:(null===(t=n.data)||void 0===t?void 0:t.status)===Q}),n}(e),a=t.data,n=t.error;return Object(_.jsx)("div",{className:ni.a.root,children:Object(_.jsxs)(w,{children:[Object(_.jsxs)("div",{className:ni.a.breadbrumbs,children:[Object(_.jsx)(l.b,{to:m.streams.path,className:ni.a.streamsLink,children:"Streams"}),Object(_.jsx)(ri,{className:ni.a.breadbrumb}),Object(_.jsx)("span",{className:ni.a.id,children:e})]}),n&&Object(_.jsx)(ut,{className:"max-w-2xl mx-auto py-32",message:n.message,onRetry:function(){t.mutate()}}),!n&&!a&&Object(_.jsx)("div",{className:"py-32 text-center text-gray text-2xl",children:"Loading..."}),!n&&a&&Object(_.jsxs)("main",{className:ni.a.stream,children:[Object(_.jsxs)("div",{className:ni.a.left,children:[Object(_.jsxs)("div",{className:j()(ni.a.tile,ni.a.remaining),children:[Object(_.jsx)("span",{className:ni.a.blockTitle,children:"Remaining"}),Object(_.jsx)("span",{children:os(a).timeLeft||"Finished"})]}),Object(_.jsxs)("div",{className:j()(ni.a.tile,ni.a.main),children:[a.is_locked&&Object(_.jsx)(ho,{isOrange:!0,className:ni.a.closeBadge,children:"Locked"}),Object(_.jsx)(si,{stream:a}),Object(_.jsx)(ci,{stream:a}),Object(_.jsx)(oi,{stream:a}),Object(_.jsx)("div",{className:ni.a.divider}),Object(_.jsx)(ii,{stream:a}),Object(_.jsx)(ui,{stream:a})]})]}),Object(_.jsx)("div",{className:ni.a.right,children:Object(_.jsx)(ji,{stream:a})})]})]})})}var bi=a(77),pi=a.n(bi);function hi(){return Object(_.jsxs)("div",{className:pi.a.root,children:[Object(_.jsxs)("div",{className:pi.a.big404,children:["4",Object(_.jsx)("span",{className:pi.a.big0,children:"0"}),"4"]}),Object(_.jsx)("div",{className:pi.a.pageNotFound,children:"Page not found"}),Object(_.jsxs)("div",{className:pi.a.weAreSorry,children:["We're sorry the page",Object(_.jsx)("br",{}),"you requested was not found."]}),Object(_.jsx)(Ue,{className:pi.a.backButton,displayMode:Ve.action,onClick:function(){return window.history.back()},children:"Back"})]})}var fi=["transactionHashes","errorCode","errorMessage"];function _i(){Object(n.useEffect)((function(){var e=new URL(window.location.href);fi.forEach((function(t){e.searchParams.has(t)&&e.searchParams.delete(t)})),window.history.replaceState(null,"",e)}));var e=Ee().auth,t=m.root,a=m.stream,r=m.streams,s=m.authorize,c=Ke.legacyStream,o=Ke.legacyStreams;return Object(_.jsxs)(l.a,{basename:R,children:[Object(_.jsx)(Ls,{}),Object(_.jsxs)(u.d,{children:[Object(_.jsx)(Bs,{exact:!0,redirect:Object(_.jsx)(u.a,{to:r.path}),allowed:!e.signedIn,path:t.path,children:Object(_.jsx)(u.a,{to:s.path})}),Object(_.jsx)(Bs,{exact:!0,redirect:Object(_.jsx)(u.a,{to:r.path}),allowed:!e.signedIn,path:s.path,children:Object(_.jsx)(ti,{})}),Object(_.jsx)(u.b,{exact:!0,path:c.path,children:Object(_.jsx)(dn,{})}),Object(_.jsx)(Bs,{exact:!0,redirect:Object(_.jsx)(u.a,{to:s.path}),allowed:e.signedIn,path:o.path,children:Object(_.jsx)(ir,{})}),Object(_.jsx)(u.b,{exact:!0,path:a.path,children:Object(_.jsx)(mi,{})}),Object(_.jsx)(Bs,{exact:!0,redirect:Object(_.jsx)(u.a,{to:s.path}),allowed:e.signedIn,path:r.path,children:Object(_.jsx)(Qo,{})}),Object(_.jsx)(u.b,{render:hi})]}),Object(_.jsx)(tc,{})]})}a(442);var Oi=function(){return Object(_.jsx)(Te,{children:Object(_.jsx)(ba,{children:Object(_.jsx)(_i,{})})})},xi=document.getElementById("root");i.a.setAppElement(xi),c.a.render(Object(_.jsx)(Oi,{}),xi)},45:function(e,t,a){e.exports={wrapper:"styles_wrapper__2vwX1",secondWrapper:"styles_secondWrapper__20xn3",root:"styles_root__3L49I",secondRoot:"styles_secondRoot__3T4F3",unshrinkable:"styles_unshrinkable__1q8kB",logo:"styles_logo__1dFWz",left:"styles_left__fS0Yp",right:"styles_right__19YK4",marginRight:"styles_marginRight__3EZCk"}},47:function(e,t,a){e.exports={container:"styles_container__2hqfN",flexColumn:"styles_flexColumn__2kzF4",withPaddings:"styles_withPaddings__3uH1h",title:"styles_title__1uH5S",emptyState:"styles_emptyState__2YAVd",loader:"styles_loader__FohDd"}},48:function(e,t,a){e.exports={root:"styles_root__1wORt",layout:"styles_layout__3xx--",section:"styles_section__2r57z",logo:"styles_logo__w4rz3",links:"styles_links__2CP2p",legal:"styles_legal__1I5Mf",socials:"styles_socials__pFfwm",jurInfo:"styles_jurInfo__p5KY0"}},49:function(e,t,a){e.exports={root:"styles_root__2_gZI",description:"styles_description__9SwXr",preparedTokensWrapper:"styles_preparedTokensWrapper__1n7o-",preparedToken:"styles_preparedToken__3wMsS",info:"styles_info__OjsX3",amount:"styles_amount__2Pqv4",symbol:"styles_symbol__HcQ7S"}},50:function(e,t,a){e.exports={container:"styles_container__2E2rA",flexColumn:"styles_flexColumn__vggyT",withPaddings:"styles_withPaddings__3K5aA",title:"styles_title__284Zv",emptyState:"styles_emptyState__3rrQX",loader:"styles_loader__xExeF"}},57:function(e,t,a){e.exports={root:"styles_root__14vNy",section:"styles_section__2FRx-",flex:"styles_flex__2TXuX",header:"styles_header__UtN1L",buttonsWrapper:"styles_buttonsWrapper__ANSH3",title:"styles_title__3qFk7",streamFilters:"styles_streamFilters__3D0RW"}},59:function(e,t,a){e.exports={wrapper:"styles_wrapper__TAkqw",speedInput:"styles_speedInput__pndxz",input:"styles_input__2-TTa",label:"styles_label__1NoFr",formLabel:"styles_formLabel__2w0iu",formField:"styles_formField__GA6eY",speed:"styles_speed__M079a"}},60:function(e,t,a){e.exports={root:"styles_root__2UE9y",section:"styles_section__2YjD4",flex:"styles_flex__5E-Gn",header:"styles_header__2fhvP",buttonsWrapper:"styles_buttonsWrapper__KUQAt",title:"styles_title__1SNWA",streamFilters:"styles_streamFilters__ZRc30"}},68:function(e,t,a){e.exports={root:"styles_root__3Kyti",wrapper:"styles_wrapper__P7W3S",balance:"styles_balance__o5yA-"}},75:function(e,t,a){e.exports={profile:"profile_profile__Dw7tT",dropdownOpener:"profile_dropdownOpener__rb_O7",name:"profile_name__2iGU9",avatar:"profile_avatar__20etB",dropdownMenu:"profile_dropdownMenu__2a3bk"}},76:function(e,t,a){e.exports={overlay:"styles_overlay__2aFDm",bodyOverflowHidden:"styles_bodyOverflowHidden__1QZAq",content:"styles_content__2Cjkl",title:"styles_title__1w-yg",close:"styles_close__1xZ3p"}},77:function(e,t,a){e.exports={root:"styles_root__17WVD",big404:"styles_big404__1ZrOC",big0:"styles_big0__1G3uC",pageNotFound:"styles_pageNotFound__2_Tlm",weAreSorry:"styles_weAreSorry__-XpXJ",backButton:"styles_backButton__2uRdQ"}},91:function(e,t,a){e.exports={root:"styles_root__2eQAJ",primary:"styles_primary__F4Fip",action:"styles_action__ZCYgS",simple:"styles_simple__2Db_y",secondary:"styles_secondary__3blHx"}},92:function(e,t,a){e.exports={progressBar:"styles_progressBar__WfqVp",streamed:"styles_streamed__2JSLG",progress:"styles_progress__1Vfwm",withdrawn:"styles_withdrawn__2eocI"}},93:function(e,t,a){e.exports={root:"styles_root__gqzta",controls:"styles_controls__1VcAv",name:"styles_name__1n32K",comment:"styles_comment__1PgxT",withMarginRight:"styles_withMarginRight__2dPrt"}},94:function(e,t,a){e.exports={root:"styles_root__37pAo",label:"styles_label__1Z1u2",description:"styles_description__3HMUq",error:"styles_error__iK_dp",required:"styles_required__eL5Iv"}},95:function(e,t,a){e.exports={dropdownWrapper:"styles_dropdownWrapper__1mfn5",dropdownOpener:"styles_dropdownOpener__xnUU_",tokenOption:"styles_tokenOption__2nenl",withHover:"styles_withHover__17YXX",dropdownMenu:"styles_dropdownMenu__1M_bV"}},96:function(e,t,a){e.exports={root:"styles_root__1Ickw",controls:"styles_controls__35vzk",name:"styles_name__26X88",comment:"styles_comment__z2oIA",withMarginRight:"styles_withMarginRight__20A25"}}},[[443,1,2]]]);
//# sourceMappingURL=main.c9a89f01.chunk.js.map