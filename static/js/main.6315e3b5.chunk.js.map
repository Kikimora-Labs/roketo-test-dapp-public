{"version":3,"sources":["shared/ui/components/Checkbox/styles.module.scss","shared/kit/DropdownOpener/styles.module.scss","shared/kit/DropdownMenu/styles.module.scss","shared/kit/Filter/styles.module.scss","features/filtering/DirectionSorts/styles.module.scss","widgets/financialStatus/ui/FinancialInfo/styles.module.scss","widgets/streamsList/ui/Name/styles.module.scss","pages/authorize/styles.module.scss","features/stream-control/StreamControls/styles.module.scss","shared/ui/components/Input/styles.module.scss","widgets/header/ui/PagesList/styles.module.scss","shared/kit/Tooltip/styles.module.scss","features/filtering/StreamFilters/styles.module.scss","widgets/streamsList/ui/Controls/styles.module.scss","widgets/streamsList/ui/StreamProgress/styles.module.scss","shared/ui/components/Layout/styles.module.scss","shared/ui/icons/Sort/styles.module.scss","widgets/financialStatus/ui/FinancialStatus/styles.module.scss","features/authorization/Notifications/styles.module.scss","features/create-stream/CreateStream/styles.module.scss","features/authorization/index.module.scss","shared/helpers/routing.ts","shared/images/dark-logo-stream.svg","shared/ui/icons/Logo/index.tsx","shared/ui/components/Layout/index.tsx","shared/config.ts","shared/api/near/index.ts","shared/helpers/date.ts","shared/api/roketo/constants.ts","shared/api/roketo/helpers.ts","shared/api/roketo/contract-api.ts","shared/api/roketo/index.ts","shared/constants.ts","shared/api/ft/token-formatter.ts","shared/helpers/isWNearTokenId.ts","shared/api/ft/ft-api.ts","shared/api/ft/index.ts","shared/api/price-oracle/constants.ts","shared/api/price-oracle/index.ts","app/roketo-context.tsx","shared/api/roketo-web/roketo-web.ts","shared/ui/icons/ArrowDown/index.tsx","shared/kit/DropdownOpener/DropdownOpener.tsx","shared/hooks/useOutsideClick.ts","shared/kit/DropdownMenu/DropdownMenu.tsx","shared/ui/components/Button/index.tsx","shared/ui/components/Input/index.tsx","widgets/profile-form/index.tsx","shared/ui/icons/LogOut/index.tsx","shared/hooks/useGetStreamDirection.ts","features/roketo-resource/index.ts","features/authorization/Notifications/BellIcon.tsx","features/authorization/Notifications/FinishIcon.tsx","features/authorization/Notifications/StartIcon.tsx","features/authorization/Notifications/PauseIcon.tsx","features/authorization/Notifications/index.tsx","features/authorization/ui.tsx","shared/components/Balance/index.tsx","shared/components/NavigationLink/index.tsx","widgets/header/ui/PagesList/index.tsx","shared/ui/icons/Wallet/index.tsx","shared/ui/icons/Income/index.tsx","shared/ui/icons/Outcome/index.tsx","shared/hooks/useToken.ts","shared/helpers/speed.ts","widgets/header/ui/TokenAmountSpeed/index.tsx","widgets/header/ui/FinancialActivity/index.tsx","widgets/header/Header.tsx","shared/components/Header.tsx","shared/components/PrivateRoute.tsx","shared/components/Modal/index.tsx","shared/kit/Tooltip/Tooltip.tsx","shared/icons/Tokens.tsx","shared/kit/TokenImage/index.tsx","features/stream-control/WithdrawAllButton/index.tsx","shared/ui/icons/Sort/index.tsx","shared/kit/RadioButton/RadioButton.tsx","shared/kit/Filter/Filter.tsx","features/filtering/DirectionSorts/index.tsx","features/filtering/lib.ts","features/filtering/useStreamFilters.ts","features/filtering/StreamFilters/index.tsx","shared/ui/icons/ErrorSign/index.tsx","shared/ui/components/FormField/index.tsx","shared/components/FormikInput/index.tsx","shared/ui/components/Checkbox/index.tsx","shared/components/FormikCheckbox/index.tsx","shared/helpers/validation.ts","features/create-stream/lib.ts","features/create-stream/StreamSpeedCalcField/index.tsx","shared/hooks/usePrev.ts","features/create-stream/TokenSelector/index.tsx","features/create-stream/FeeDisclaimer/index.tsx","features/create-stream/constants.ts","features/create-stream/CreateStream/index.tsx","shared/helpers/math.ts","shared/ui/components/ProgressBar/index.tsx","widgets/financialStatus/ui/FinancialInfo/index.tsx","widgets/financialStatus/lib.ts","widgets/financialStatus/ui/FinancialStatus/index.tsx","widgets/streamsList/ui/Name/index.tsx","shared/icons/Clock.tsx","widgets/streamsList/ui/StreamProgress/index.tsx","shared/ui/icons/Link/index.tsx","features/stream-control/WithdrawButton.tsx","shared/hooks/useBool.ts","features/stream-control/StreamStatus.tsx","features/stream-control/StreamControls/StartIcon.tsx","features/stream-control/StreamControls/PauseIcon.tsx","features/stream-control/StreamControls/StopIcon.tsx","features/stream-control/StreamControls/index.tsx","widgets/streamsList/ui/Controls/index.tsx","widgets/streamsList/ui/StreamCard/index.tsx","widgets/streamsList/ui/StreamsList/index.tsx","pages/streams/index.tsx","pages/authorize/index.tsx","shared/kit/Button/Button.tsx","shared/images/RUSSIANS_HACK.gif","shared/images/crab.gif","shared/components/PageError.tsx","pages/stream/BreadcrumbIcon.tsx","pages/stream/index.tsx","pages/not-found/index.tsx","pages/index.tsx","app/index.tsx","index.tsx","features/stream-control/WithdrawAllButton/styles.module.scss","pages/streams/styles.module.scss","widgets/header/ui/FinancialActivity/styles.module.scss","features/create-stream/StreamSpeedCalcField/styles.module.scss","widgets/streamsList/ui/StreamsList/styles.module.scss","widgets/profile-form/index.module.scss","shared/components/Modal/styles.module.scss","pages/not-found/styles.module.scss","widgets/header/styles.module.scss","shared/ui/components/FormField/styles.module.scss","features/create-stream/TokenSelector/styles.module.scss","shared/ui/components/ProgressBar/styles.module.scss","widgets/streamsList/ui/StreamCard/styles.module.scss","pages/stream/styles.module.scss","shared/ui/components/Button/styles.module.scss","shared/kit/RadioButton/styles.module.scss"],"names":["module","exports","ROUTES_MAP","root","path","authorize","title","streams","stream","getStreamLink","streamId","window","location","origin","DarkLogo","props","className","src","darkLogoSvg","alt","Layout","children","classNames","cn","styles","layout","env","process","GAS_SIZE","createNearInstance","a","keyStore","keyStores","BrowserLocalStorageKeyStore","connect","nodeUrl","walletUrl","networkId","headers","near","getNearAuth","walletConnection","login","logout","signOut","reload","requestSignIn","getAccountId","accountId","account","getAccountBalance","balance","signedIn","formatDistanceLocale","xYears","xMonths","xDays","xSeconds","xMinutes","xHours","shortEnLocale","formatDistance","token","count","replace","STREAM_STATUS","isActiveStream","status","isDead","getAvailableToWithdraw","isIdling","BigNumber","value","period","millisecondsToSeconds","Date","now","last_action","Number","minimum","tokens_per_sec","RoketoContractApi","contract","this","active_incoming_streams","active_outgoing_streams","deposit","inactive_incoming_streams","inactive_outgoing_streams","is_cron_allowed","last_created_stream","stake","total_incoming","total_outgoing","total_received","get_account","account_id","from","limit","get_account_incoming_streams","res","get_account_outgoing_streams","get_stream","stream_id","console","log","get_dao","description","receiverId","tokenAccountId","commissionOnCreate","tokensPerSec","cliffPeriodSec","isAutoStart","isExpirable","isLocked","callbackUrl","handleTransferStream","totalAmount","plus","toFixed","transferPayload","owner_id","receiver_id","token_name","BigInt","cliff_period_sec","is_locked","is_auto_start_enabled","is_expirable","start_stream","pause_stream","stop_stream","streamIds","withdraw","stream_ids","initRoketo","nearAPI","viewMethods","changeMethods","api","roketoUserAccountPromise","getAccount","daoPromise","getDao","Promise","all","roketoUserAccount","dao","TimePeriod","SECONDS_IN_HOUR","SECONDS_IN_MINUTE","SECONDS_IN_DAY","SECONDS_IN_WEEK","SECONDS_IN_MONTH","SECONDS_IN_YEAR","TIME_PERIOD_SIGNS","Hour","Day","Minute","Second","testIds","signInButton","availableForWithdrawalCaption","withdrawAllButton","createStreamButton","withdrawButton","streamControlsDropdown","streamStartButton","streamPauseButton","streamStopButton","createStreamReceiverInput","createStreamAmountInput","createStreamMonthsInput","createStreamDaysInput","createStreamHoursInput","createStreamMinutesInput","createStreamCommentInput","createStreamAutostartCheckbox","createStreamCancelButton","createStreamSubmitButton","openNotificationsButton","notificationElement","notificationPrimaryCaption","notificationSecondaryCaption","TokenFormatter","Object","keys","reduce","selectors","key","tokenDecimals","MP","amount","numbro","divide","formatted","format","mantissa","trimMantissa","optionalMantissa","average","multiply","decimals","multipliers","unit","firstGoodLookingMultiplier","find","multiplier","formattedValue","formatSmartly","isWNearTokenId","FTApi","transfer","payload","getIsRegistered","isRegisteredSender","isRegisteredReceiver","actions","transactions","functionCall","memo","msg","JSONbig","stringify","Create","request","depositSumm","depositAmmount","utils","parseNearAmount","unshift","signAndSendTransaction","walletCallbackUrl","Contract","ft_metadata","ft_balance_of","storage_balance_of","total","initFT","tokens","richTokens","map","getMetadata","getBalance","meta","formatter","roketoMeta","NEAR_MULTIPLIER","DAI_MULTIPLIER","TOKEN_MULTIPLIER_MAP","CONTRACT_VIEW_METHODS_LIST","CONTRACT_CHANGE_METHODS_LIST","convertRawPriceToTokenMap","tokenPrices","relyingSourceOracleId","accumulatorMap","priceToken","tokenId","desiredSourceOracle","reports","oracle_id","price","convertTokenToUsdFactory","priceTokenMap","tokenToMultiplierMap","shownDecimals","tokenPrice","tokenMultiplier","initPriceOracle","priceOracleContract","get_assets","rawAssets","tokenMap","getPriceInUsd","AppContext","React","createContext","RoketoContextProvider","useState","context","setContext","useEffect","init","WalletConnection","auth","roketo","priceOracle","Provider","ERR_NOT_IN_NEAR_CONTEXT","Error","useRoketoContext","useContext","serverConfig","baseServer","client","TokenProvider","initialized","authApiClient","getRefreshedToken","getAccountIdAndNear","savedToken","localStorage","containsUnicode","generateLoginParams","loginParams","accessToken","config","getKey","keyPair","timestamp","sign","TextEncoder","encode","String","Uint8Signature","signature","Array","encodeURIComponent","tokenProvider","onErrorRetry","error","revalidate","retryCount","message","startsWith","refreshToken","apiConfig","authMethods","bearer","usersApiClient","useUser","useSWR","findOne","User","notificationsApiClient","ArrowDown","width","height","viewBox","fill","d","DropdownOpener","opened","onChange","testId","rest","arrowClassName","arrow","rotate","type","onClick","DropdownMenu","onClose","ref","useRef","callback","handleClick","target","current","HTMLElement","contains","document","addEventListener","removeEventListener","useOutsideClick","menu","hidden","DropdownMenuItem","DropdownMenuDivider","menuDivider","ButtonType","DisplayMode","Button","button","displayMode","action","disabled","link","restTooltipProps","buttonClassName","primary","simple","to","Input","hasError","input","NAME_INPUT","EMAIL_INPUT","ProfileForm","name","setName","email","setEmail","isMutating","setIsMutating","userSWR","data","formRef","updateUser","useCallback","e","preventDefault","newName","newEmail","cachedUser","mutate","updateUserDto","update","assign","optimisticData","rollbackOnError","busy","isValidating","profileForm","onSubmit","label","inputName","placeholder","submit","LogoutIcon","STREAM_DIRECTION","useGetStreamDirection","useExtrapolation","swr","revalidationPeriod","isEnabled","secondsTillRevalidation","setSecondsTillRevalidation","id","setTimeout","secondsLeft","clearTimeout","useStreams","getAccountIncomingStreams","inputs","getAccountOutgoingStreams","outputs","streamViewData","withExtrapolation","MAX_SEC","availableToWithdraw","minus","dividedBy","toNumber","duration","intervalToDuration","start","end","days","weeks","months","years","seconds","timeLeft","formatDuration","locale","full","tokens_total_withdrawn","withdrawn","streamed","left","progresses","percentages","available","progress","BellIcon","withBadge","stroke","strokeWidth","strokeLinecap","strokeLinejoin","cx","cy","r","FinishIcon","rx","StartIcon","PauseIcon","NotificationIcon","IconComponent","icon","PrimaryText","primaryText","SecondaryText","secondaryText","NotificationBody","notification","direction","token_account_id","symbol","notificationBody","Notifications","isDropdownOpened","setIsDropdownOpened","notificationsSWR","findAll","useNotifications","closeDropdown","notifications","markAllRead","isRead","hasUnreadNotifications","some","dropdownOpener","dropdownMenu","container","header","length","index","divider","differenceInDays","createdAt","date","isToday","isYesterday","generatePath","unread","time","Authorization","profile","avatar","logoutButton","NavigationLink","PageList","pageRoutes","route","pageLink","WalletIcon","xmlns","IncomeIcon","OutcomeIcon","useToken","Balance","mode","CRYPTO","actualCryptoBalance","displayedCryptoAmount","showInUSD","USD","currencySymbol","StreamType","TokenAmountSpeed","tokensBalanceMap","totalAmountInUSD","balancePerDesiredPeriod","balancePerSecond","balanceSpeedPerSecond","multipliedBy","getBalancePerDesiredPeriod","formattedBalance","toHumanReadableValue","usdAmount","FinancialActivity","wrapper","outcome","income","ROUTES_TO_DISPLAY","Header","logo","right","MinifiedHeader","useRouteMatch","PrivateRoute","allowed","redirect","exact","render","Modal","isOpen","onCloseModal","onRequestClose","content","overlayClassName","overlay","bodyOpenClassName","bodyOverflowHidden","close","contentContainer","Tooltip","placement","align","defaultOverlay","defaultIcon","NearTokenImage","version","preserveAspectRatio","transform","FallbackTokenImage","currentTokens","TokenIcon","image","Component","TokenImage","size","WithdrawAllButton","activeInputs","filter","tokensData","tmpResult","push","preparedTokenData","offset","preparedTokensWrapper","preparedToken","info","OrderType","SortIcon","desc","asc","RadioButton","active","checked","radio","radioActive","text","FilterOptionWithCounter","option","Filter","options","renderOption","renderActive","setOpened","dropdownWrapper","DirectionSorts","directions","activeDirection","onDirectionClick","sort","useFilter","useMemo","selectOption","currentFilterFunction","optionsArray","STREAM_TYPE_FILTER","STREAM_STATUS_FILTER","ALL","useStreamFilters","statusOptions","directionOptions","statusFilter","directionFilter","result","items","filters","undefined","filteredItems","setFilteredItems","filterCounts","setFilterCounts","filteredItemsValue","filterCountsValue","forEach","filterRunResult","currentFilterCount","useFilters","compareBy","b","sorts","bigBalanceFirst","order","fn","highSpeedFirst","highSpeedLast","mostRecent","StreamFilters","onFilterDone","sorting","setSorting","sortOptions","values","sortedStreams","filtersWrapper","counts","sortWithOrder","ErrorSign","FormField","isRequired","required","FormikInput","field","form","errors","Boolean","Checkbox","checkbox","FormikCheckbox","NUMBER_PATTERN","getStreamingSpeed","speedInSeconds","tokensPerMeaningfulPeriod","SpeedInput","speedInput","StreamSpeedCalcField","onSpeedChange","currentStreamingSpeed","setMonths","setDays","minutes","setMinutes","hours","setHours","depositInYocto","toYocto","durationInSeconds","addMonths","getDurationInSeconds","dividedToIntegerBy","getTokensPerSecondCount","prevSpeed","usePrev","handleInputChangeFactory","setValue","event","stringLikeNumber","safeValue","test","meaningfulSpeed","labelWithStreamingSpeed","formLabel","speed","TokenOption","tokenOption","TokenSelector","onTokenChoose","activeTokenAccountId","allAvailableTokens","activeToken","handleChooseTokenOptions","withHover","FeeDisclaimer","tokenMeta","commission_on_create","INITIAL_FORM_VALUES","receiver","streamName","autoStart","comment","Row","row","StreamCreationError","submitError","CreateStream","onFormCancel","onFormSubmit","setError","validationSchema","Yup","shape","connection","provider","query","request_type","finality","max","moreThan","getFormValidationSchema","initialValues","formValues","catch","validateOnBlur","validateOnChange","validateOnMount","handleSubmit","setFieldValue","setFieldTouched","component","rowItem","feeDisclaimer","actionButtonsWrapper","ButtonDisplayMode","getExactPercentageRatio","aBN","bBN","isEqualTo","getRoundedPercentageRatio","roundRatio","dp","ProgressBar","streamedToTotalPercentageRatio","withdrawnToStreamedPercentageRatio","progressBar","style","FinancialInfo","withProgressBar","financialContent","card","finance","INITIAL_VALUE","collectTotalFinancialAmountInfo","initialInfo","totalFinancialInfo","financialInfoAccumulator","streamedAmountForDisplay","streamedUSD","fullAmountForDisplay","fullUSD","withdrawnAmountForDisplay","withdrawnUSD","FinancialStatus","activeInputStreams","activeOutputStreams","outcomeAmountInfo","incomeAmountInfo","availableForWithdrawal","withdrawalSum","inputStream","withdrawal","amountForDisplay","amountInUSD","countTotalUSDWithdrawal","Name","flexCenter","nameLabel","ClockIcon","TOOLTIP_ALIGN","points","StreamProgress","streamedText","withdrawnText","streamedPercentage","withdrawnPercentage","progressText","speedFormattedValue","speedUnit","destroyTooltipOnHide","tooltip","innerStatus","grey","smaller","remained","clock","LinkIcon","WithdrawButton","useBool","initial","on","setOn","off","toggle","turnOff","turnOn","bindings","StreamStatus","binding","StopIcon","PauseConfirmModal","modalControl","onConfirm","modalContent","modalOverlay","modalHeader","modalButtons","modalButton","modalSecondary","modalWarning","StopConfirmModal","modalDanger","StreamControls","pauseModalControl","stopModalControl","loading","setLoading","menuOpened","setMenuOpened","isOutgoing","isIncoming","isExternalStream","handlePause","pauseStream","handleStart","startStream","handleStop","stopStream","shouldShowStartButton","shouldShowPauseButton","statusClassName","pause","isPausedStream","stop","relative","statusPadded","controlsMenu","controlButton","StreamLinkButton","onCLick","linkButton","Controls","handleLinkClick","streamLink","copy","showWithdraw","StreamCard","isIncomingStream","streamPageLink","withMarginRight","controls","EmptyState","emptyState","StreamsList","displayingStreams","onCreateStreamClick","allStreamsLength","displayingStreamsLength","flexColumn","withPaddings","redirectUrl","returnPath","StreamsPage","allStreams","setFiltered","isModalOpened","setIsModalOpened","toggleModal","handleCreateStream","createStream","flex","spaceBetween","buttonsWrapper","section","AuthorizePage","block","hint","variants","loadingText","color","variant","restProps","variantStyles","sizeStyles","colorStyles","commonProps","PageError","onRetry","rand","Math","random","hackImage","crabImage","BreadcrumbIcon","numericProgress","tokenIcon","StreamButtons","buttons","StreamSpeed","blockTitle","StreamComment","commentBody","CopyButton","stringToCopy","copyButton","linkIcon","StreamCopyUrlBlock","copyTitle","InfoRow","infoRow","infoTitle","StreamData","leftToTotalPercentageRatio","tile","infoTile","bigHeader","font16","font14","font12","OtherInfo","centeredFlex","timestamp_created","StreamPage","useParams","streamSWR","getStream","errorRetryInterval","errorRetryCount","useSingleStream","pageError","breadbrumbs","streamsLink","breadbrumb","remaining","main","NotFoundPage","big404","big0","pageNotFound","weAreSorry","backButton","history","back","TRASH_QUERY_PARAMS","Routing","url","URL","href","param","searchParams","has","delete","replaceState","basename","App","rootEl","getElementById","setAppElement","ReactDOM"],"mappings":"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","file":"static/js/main.6315e3b5.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"styles_root__2b5hR\",\"description\":\"styles_description__256I8\",\"checkbox\":\"styles_checkbox__JfL1O\",\"error\":\"styles_error__3vxG-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"styles_root__9Q_y8\",\"arrow\":\"styles_arrow__dmtxI\",\"rotate\":\"styles_rotate__3bkvh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menu\":\"styles_menu__oG1pK\",\"menuDivider\":\"styles_menuDivider__3rvtk\",\"hidden\":\"styles_hidden__3JyX9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"styles_root__HwxLP\",\"dropdownWrapper\":\"styles_dropdownWrapper__32byB\",\"dropdownMenu\":\"styles_dropdownMenu__1RS3q\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"styles_root__1_PXp\",\"sort\":\"styles_sort__3sdm0\",\"active\":\"styles_active__2U1h-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"styles_card__chYY0\",\"title\":\"styles_title__cc9o3\",\"finance\":\"styles_finance__wsZi_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"flexCenter\":\"styles_flexCenter__B0Jt1\",\"name\":\"styles_name__25-53\",\"nameLabel\":\"styles_nameLabel__3d_tt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"block\":\"styles_block__3xJQm\",\"hint\":\"styles_hint__2cJLP\",\"content\":\"styles_content__10idn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"relative\":\"styles_relative__2QiFJ\",\"controlButton\":\"styles_controlButton__1vq4p\",\"statusPadded\":\"styles_statusPadded__3UL71\",\"button\":\"styles_button__1UW_h\",\"modalContent\":\"styles_modalContent__3f34e\",\"modalOverlay\":\"styles_modalOverlay__ZnuwA\",\"modalHeader\":\"styles_modalHeader__2-Oti\",\"modalButtons\":\"styles_modalButtons__367QE\",\"modalButton\":\"styles_modalButton__uHmah\",\"modalSecondary\":\"styles_modalSecondary__1y73P\",\"modalWarning\":\"styles_modalWarning__aeSV8\",\"modalDanger\":\"styles_modalDanger__2FJKr\",\"controlsMenu\":\"styles_controlsMenu__h4rsZ\",\"dropdownOpener\":\"styles_dropdownOpener__KpUjE\",\"start\":\"styles_start__AVZHt\",\"active\":\"styles_active__1J1qI\",\"pause\":\"styles_pause__AS7EK\",\"stop\":\"styles_stop__IMPS5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"input\":\"styles_input__KeAvj\",\"error\":\"styles_error__1dP_7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"styles_root__2s9Jd\",\"pageLink\":\"styles_pageLink__3rg8i\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"defaultOverlay\":\"styles_defaultOverlay__3nR8o\",\"defaultIcon\":\"styles_defaultIcon__hJLMj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"filtersWrapper\":\"styles_filtersWrapper__3sIgz\",\"sortWithOrder\":\"styles_sortWithOrder__2yZvk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"styles_root__2iwP4\",\"linkButton\":\"styles_linkButton__1laX_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"styles_root__38B64\",\"text\":\"styles_text__11atI\",\"status\":\"styles_status__3b_ey\",\"grey\":\"styles_grey__36o2c\",\"overlay\":\"styles_overlay__3rasY\",\"tooltip\":\"styles_tooltip__23VN9\",\"innerStatus\":\"styles_innerStatus__132Fk\",\"smaller\":\"styles_smaller__HXT1f\",\"speed\":\"styles_speed__1i2og\",\"remained\":\"styles_remained__2-6rd\",\"clock\":\"styles_clock__2q7yf\",\"progress\":\"styles_progress__YG-x-\",\"streamed\":\"styles_streamed__2mtn0\",\"withdrawn\":\"styles_withdrawn__SfaXK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"layout\":\"styles_layout__2ac3i\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"rotate\":\"styles_rotate__ZjzwB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"styles_root__20iY_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"styles_root__3I6iW\",\"dropdownOpener\":\"styles_dropdownOpener__2GRYw\",\"dropdownMenu\":\"styles_dropdownMenu__16J-B\",\"container\":\"styles_container__3IeNW\",\"header\":\"styles_header__22ruj\",\"date\":\"styles_date__38Uz_\",\"divider\":\"styles_divider__3lUvY\",\"notification\":\"styles_notification__3HcwN\",\"unread\":\"styles_unread__mnflv\",\"icon\":\"styles_icon__wnAbs\",\"notificationBody\":\"styles_notificationBody__1bRBx\",\"primaryText\":\"styles_primaryText__a_IqR\",\"secondaryText\":\"styles_secondaryText__2zZb-\",\"time\":\"styles_time__2T_ZI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"styles_root__1zlKm\",\"title\":\"styles_title__39adN\",\"description\":\"styles_description__12RAl\",\"form\":\"styles_form__1ud4S\",\"row\":\"styles_row__Pz5Iu\",\"rowItem\":\"styles_rowItem__TexQO\",\"submitError\":\"styles_submitError__1B7Gd\",\"actionButtonsWrapper\":\"styles_actionButtonsWrapper__1E6yB\",\"feeDisclaimer\":\"styles_feeDisclaimer__WNlqw\",\"feeDisclaimerRow\":\"styles_feeDisclaimerRow__11c8e\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"authorization_root__3Nfgj\",\"profile\":\"authorization_profile__1t6u1\",\"dropdownOpener\":\"authorization_dropdownOpener__1tQP4\",\"name\":\"authorization_name__GjBzW\",\"avatar\":\"authorization_avatar__1ISVb\",\"dropdownMenu\":\"authorization_dropdownMenu__1sdyu\",\"logoutButton\":\"authorization_logoutButton__2sCaP\"};","export type Route = {\n  path: string,\n  title: String,\n}\n\nexport const ROUTES_MAP = {\n  root: {\n    path: '/',\n  },\n  authorize: {\n    path: '/authorize',\n    title: 'Authorize',\n  },\n  streams: {\n    path: '/streams',\n    title: 'Streams',\n  },\n  stream: {\n    path: '/streams/:id',\n    title: 'Stream'\n  },\n};\n\nexport function getStreamLink(streamId: string | undefined) {\n  return `${window.location.origin}/#/streams/${streamId}`;\n}\n","export default __webpack_public_path__ + \"static/media/dark-logo-stream.d340f193.svg\";","import React from 'react';\n\nimport darkLogoSvg from 'shared/images/dark-logo-stream.svg';\n\ntype Props = {\n  className?: string,\n}\n\nexport const DarkLogo = (props: Props) => {\n  const {className} = props;\n\n  return (\n    <div className={className}>\n      <img src={darkLogoSvg} alt=\"Roketo logo\"/>\n    </div>\n  );\n};\n","import React from 'react';\nimport cn from 'classnames';\n\nimport styles from './styles.module.scss';\n\ntype LayoutProps = {\n  children?: React.ReactNode,\n  className?: string,\n}\n\nexport const Layout = (props: LayoutProps) => {\n  const {\n    children,\n    className,\n  } = props;\n\n  const classNames = cn(\n    \"container mx-auto\",\n    styles.layout,\n    className\n  );\n\n  return (\n    <div className={classNames}>\n      {children}\n    </div>\n  );\n};\n","type EnvType = {\n  ACCOUNT_SUFFIX: string;\n  NEAR_NETWORK_ID: string;\n  NEAR_NODE_URL: string;\n  ROKETO_CONTRACT_NAME: string;\n  WALLET_URL: string;\n  PUBLIC_URL: string;\n  PRICE_ORACLE_CONTRACT_NAME: string,\n  PRICE_ORACLE_SOURCE_ID: string,\n  WNEAR_ID: string;\n  WEB_API_URL: string;\n}\n\nexport const env = {\n  ACCOUNT_SUFFIX: process.env.REACT_APP_NEAR_ACCOUNT_SUFFIX,\n  NEAR_NETWORK_ID: process.env.REACT_APP_NEAR_NETWORK_ID,\n  NEAR_NODE_URL: process.env.REACT_APP_NEAR_NODE_URL,\n  ROKETO_CONTRACT_NAME: process.env.REACT_APP_ROKETO_CONTRACT_NAME,\n  WALLET_URL: process.env.REACT_APP_WALLET_URL,\n  PUBLIC_URL: process.env.PUBLIC_URL,\n  PRICE_ORACLE_CONTRACT_NAME: process.env.REACT_APP_PRICE_ORACLE_CONTRACT_NAME,\n  PRICE_ORACLE_SOURCE_ID: process.env.REACT_APP_PRICE_ORACLE_SOURCE_ID,\n  WNEAR_ID: process.env.REACT_APP_WNEAR_ID,\n  WEB_API_URL: process.env.REACT_APP_WEB_API_URL,\n} as EnvType;\n\nexport const GAS_SIZE = \"200000000000000\";\n","import { connect, keyStores, WalletConnection, ConnectedWalletAccount,  } from 'near-api-js';\nimport { AccountBalance } from 'near-api-js/lib/account';\n\nimport { env } from 'shared/config';\n\nexport async function createNearInstance() {\n  const keyStore = new keyStores.BrowserLocalStorageKeyStore();\n  const near = await connect({\n    nodeUrl: env.NEAR_NODE_URL,\n    walletUrl: env.WALLET_URL,\n    networkId: env.NEAR_NETWORK_ID,\n    keyStore,\n    headers: {},\n  });\n\n  return near;\n}\n\nexport type NearAuth = {\n  balance?: AccountBalance;\n  account: ConnectedWalletAccount;\n  signedIn: boolean;\n  accountId: string;\n  login: () => void,\n  logout: () => void,\n}\n\nexport async function getNearAuth(walletConnection: WalletConnection): Promise<NearAuth> {\n  const accountId = await walletConnection.getAccountId();\n  const account = await walletConnection.account();\n\n  let balance;\n\n  if (accountId) {\n    balance = await account.getAccountBalance();\n  }\n\n  async function login() {\n    const appTitle = 'Roketo Token Streaming Service';\n  \n    await walletConnection.requestSignIn(\n      env.ROKETO_CONTRACT_NAME,\n      appTitle,\n    );\n  }\n  \n  async function logout() {\n    await walletConnection.signOut();\n\n    window.location.reload(); \n  }\n\n  return {\n    balance,\n    account,\n    signedIn: !!accountId,\n    accountId,\n    login,\n    logout,\n  }\n}\n\n\n\n","const formatDistanceLocale = {\n  xYears: '{{count}} years',\n  xMonths: '{{count}} months',\n  xDays: '{{count}}d',\n  xSeconds: '{{count}}s',\n  xMinutes: '{{count}}m',\n  xHours: '{{count}}h',\n} as const;\n\ntype TokenType = keyof typeof formatDistanceLocale;\n\nexport const shortEnLocale = {\n  formatDistance: (token: TokenType, count: string) => formatDistanceLocale[token].replace('{{count}}', count),\n};\n\nexport function fromNanosecToSec(value: number | string) {\n  return Number(value) / 1000 / 1000 / 1000;\n}\n","export const STREAM_STATUS = {\n  Initialized: 'Initialized',\n  Active: 'Active',\n  Paused: 'Paused',\n  Finished: 'Finished'\n} as const;\n","import BigNumber from 'bignumber.js';\nimport { millisecondsToSeconds } from 'date-fns';\n\nimport { fromNanosecToSec } from 'shared/helpers/date';\n\nimport { STREAM_STATUS } from './constants';\nimport { RoketoStream, RoketoAccount } from './interfaces/entities';\n\nexport const isActiveStream = (stream: RoketoStream) => stream.status === STREAM_STATUS.Active;\nexport const isPausedStream = (stream: RoketoStream) => stream.status === STREAM_STATUS.Paused;\n\nfunction isIdling(stream: RoketoStream) {\n  return (\n    stream.status === STREAM_STATUS.Initialized\n    || stream.status === STREAM_STATUS.Paused\n  );\n}\n\nexport function isDead(stream?: RoketoStream) {\n  return typeof stream?.status === 'object' && STREAM_STATUS.Finished in stream.status;\n}\n\nexport function getAvailableToWithdraw(stream: RoketoStream): BigNumber {\n  if (isIdling(stream)) {\n    return new BigNumber(0);\n  }\n\n  const nowSec = millisecondsToSeconds(Date.now());\n  const lastActionSec = fromNanosecToSec(stream.last_action);\n  const period = nowSec - lastActionSec;\n\n  return BigNumber.minimum(\n    stream.balance, \n    Number(stream.tokens_per_sec) * period\n  );\n}\n\nexport const getEmptyAccount = (): RoketoAccount => ({\n  active_incoming_streams: 0,\n  active_outgoing_streams: 0,\n  deposit: \"0\",\n  inactive_incoming_streams: 0,\n  inactive_outgoing_streams: 0,\n  is_cron_allowed: true,\n  last_created_stream: \"any\",\n  stake: \"0\",\n  total_incoming: {},\n  total_outgoing: {},\n  total_received: {}\n});\n","import { Account } from 'near-api-js';\nimport BigNumber from 'bignumber.js';\n\nimport { GAS_SIZE } from 'shared/config';\nimport { RoketoContract } from './interfaces/contracts';\nimport { RoketoAccount, RoketoStream } from './interfaces/entities';\nimport { CreateStreamApiProps, RoketoApi, StreamsProps } from './interfaces/roketo-api';\nimport { getEmptyAccount } from './helpers';\n\ntype NewRoketoApiProps = {\n  account: Account;\n  contract: RoketoContract;\n}\n\nexport class RoketoContractApi implements RoketoApi {\n  contract: RoketoContract;\n\n  account: Account;\n\n  constructor({\n    contract,\n    account,\n  }: NewRoketoApiProps) {\n    this.contract = contract;\n\n    this.account = account;\n  }\n\n  async getAccount(): Promise<RoketoAccount> {\n    if (!this.account.accountId) {\n      return getEmptyAccount();\n    }\n\n    try {\n      const account = await this.contract.get_account({ account_id: this.account.accountId });\n  \n      return account;\n    } catch {\n      return getEmptyAccount();\n    }\n  }\n\n  async getAccountIncomingStreams({ from, limit }: StreamsProps): Promise<RoketoStream[]> {\n    try {\n      const res = await this.contract.get_account_incoming_streams({ account_id: this.account.accountId, from, limit });\n\n      return res;\n    } catch {\n      return [];\n    }\n  }\n\n  async getAccountOutgoingStreams({ from, limit }: StreamsProps): Promise<RoketoStream[]> {\n    try {\n      const res = await this.contract.get_account_outgoing_streams({ account_id: this.account.accountId, from, limit });\n      \n      return res;\n    } catch {\n      return [];\n    }\n  }\n\n  async getStream({ streamId }: { streamId: string }) {\n    const res = await this.contract.get_stream({\n      stream_id: streamId,\n    });\n    console.log('res', res)\n\n    return res;\n  }\n\n  async getDao() {\n    const res = await this.contract.get_dao();\n    console.log('res', res)\n\n    return res;\n  }\n\n  async createStream({\n    description,\n    deposit,\n    receiverId,\n    tokenAccountId,\n    commissionOnCreate,\n    tokensPerSec,\n    cliffPeriodSec,\n    isAutoStart = true,\n    isExpirable,\n    isLocked,\n    callbackUrl,\n    handleTransferStream,\n  }: CreateStreamApiProps) {\n    const totalAmount = new BigNumber(deposit).plus(commissionOnCreate).toFixed();\n    const transferPayload = {\n      description,\n      balance: deposit,\n      owner_id: this.account.accountId,\n      receiver_id: receiverId,\n      token_name: tokenAccountId,\n      tokens_per_sec: BigInt(tokensPerSec),\n      cliff_period_sec: cliffPeriodSec,\n      is_locked: isLocked,\n      is_auto_start_enabled: isAutoStart,\n      is_expirable: isExpirable,\n    };\n\n    return handleTransferStream(\n      transferPayload,\n      totalAmount,\n      callbackUrl\n    );\n  }\n\n  async startStream({ streamId }: { streamId: string }) {\n    const res = await this.contract.start_stream(\n      { stream_id: streamId },\n      GAS_SIZE,\n      '1'\n    );\n\n    return res;\n  }\n\n  async pauseStream({ streamId }: { streamId: string }) {\n    const res = await this.contract.pause_stream(\n      { stream_id: streamId },\n      GAS_SIZE,\n      '1'\n    );\n\n    return res;\n  }\n\n  async stopStream({ streamId }: { streamId: string }) {\n    const res = await this.contract.stop_stream(\n      { stream_id: streamId },\n      GAS_SIZE,\n      '1'\n    );\n    return res;\n  }\n\n  async withdraw({ streamIds }: { streamIds: string[] }) {\n    const res = await this.contract.withdraw(\n      { stream_ids: streamIds },\n      GAS_SIZE,\n      '1'\n    );\n    return res;\n  }\n}\n","import * as nearAPI from \"near-api-js\";\nimport { Account } from \"near-api-js\";\n\nimport { env } from \"shared/config\";\n\nimport { RoketoContract } from './interfaces/contracts';\nimport { RoketoContractApi } from \"./contract-api\";\nimport { RoketoAccount, RoketoDao } from \"./interfaces/entities\";\n\nexport interface Roketo {\n  api: RoketoContractApi;\n  dao: RoketoDao;\n  account: RoketoAccount;\n}\n\nexport async function initRoketo({\n  account,\n}: {\n  account: Account;\n}): Promise<Roketo> {\n  const contract = new nearAPI.Contract(account, env.ROKETO_CONTRACT_NAME, {\n    viewMethods: [\n      \"get_stats\",\n      \"get_dao\",\n      \"get_token\",\n      \"get_stream\",\n      \"get_account\",\n      \"get_account_incoming_streams\",\n      \"get_account_outgoing_streams\",\n      \"get_account_ft\",\n    ],\n    changeMethods: [\n      \"start_stream\",\n      \"pause_stream\",\n      \"stop_stream\",\n      \"withdraw\",\n    ],\n  }) as RoketoContract;\n\n  // create high level api for outside usage\n  const api = new RoketoContractApi({\n    contract,\n    account,\n  });\n\n  const roketoUserAccountPromise = api.getAccount();\n\n  const daoPromise = api.getDao();\n\n  const [\n    roketoUserAccount,\n    dao\n  ] = await Promise.all([\n    roketoUserAccountPromise,\n    daoPromise,\n  ]);\n\n  return {\n    api,\n    dao,\n    account: roketoUserAccount,\n  };\n}\n","\nexport const SECONDS_IN_MINUTE = 60;\nexport const SECONDS_IN_HOUR = SECONDS_IN_MINUTE * 60;\nexport const SECONDS_IN_DAY = SECONDS_IN_HOUR * 24;\nexport const SECONDS_IN_WEEK = SECONDS_IN_DAY * 7;\nexport const SECONDS_IN_MONTH = SECONDS_IN_WEEK * 4;\nexport const SECONDS_IN_YEAR = SECONDS_IN_MONTH * 12;\n\nexport enum TimePeriod {\n  Second = 'second',\n  Minute = 'minute',\n  Hour = 'hour',\n  Day = 'day',\n}\n\nexport const TIME_PERIOD_SIGNS = {\n  [TimePeriod.Hour]: '/h',\n  [TimePeriod.Day]: '/d',\n  [TimePeriod.Minute]: '/m',\n  [TimePeriod.Second]: '/s',\n}\n\nexport const testIds = {\n  signInButton: 'signInButton',\n  availableForWithdrawalCaption: 'availableForWithdrawalCaption',\n  withdrawAllButton: 'withdrawAllButton',\n  createStreamButton: 'createStreamButton',\n  withdrawButton: 'withdrawButton',\n  streamControlsDropdown: 'streamControlsDropdown',\n  streamStartButton: 'streamStartButton',\n  streamPauseButton: 'streamPauseButton',\n  streamStopButton: 'streamStopButton',\n  createStreamReceiverInput: 'createStreamReceiverInput',\n  createStreamAmountInput: 'createStreamAmountInput',\n  createStreamMonthsInput: 'createStreamMonthsInput',\n  createStreamDaysInput: 'createStreamDaysInput',\n  createStreamHoursInput: 'createStreamHoursInput',\n  createStreamMinutesInput: 'createStreamMinutesInput',\n  createStreamCommentInput: 'createStreamCommentInput',\n  createStreamAutostartCheckbox: 'createStreamAutostartCheckbox',\n  createStreamCancelButton: 'createStreamCancelButton',\n  createStreamSubmitButton: 'createStreamSubmitButton',\n  openNotificationsButton: 'openNotificationsButton',\n  notificationElement: 'notificationElement',\n  notificationPrimaryCaption: 'notificationPrimaryCaption',\n  notificationSecondaryCaption: 'notificationSecondaryCaption',\n} as const;\n\nconst testIdsKeys = Object.keys(testIds) as Array<keyof typeof testIds>;\n\nexport const testSelectors = testIdsKeys.reduce(\n  (selectors, key) => ({ ...selectors, [key]: `[data-testid=\"${testIds[key]}\"]` }),\n  {} as Record<keyof typeof testIds, string>\n);\n","\nimport numbro from 'numbro';\n\nimport {\n  SECONDS_IN_YEAR,\n  SECONDS_IN_MONTH,\n  SECONDS_IN_WEEK,\n  SECONDS_IN_DAY,\n  SECONDS_IN_HOUR,\n  SECONDS_IN_MINUTE\n} from 'shared/constants';\n\nexport class TokenFormatter {\n  tokenDecimals: number;\n\n  MP: number;\n\n  constructor(tokenDecimals: number ) {\n    this.tokenDecimals = tokenDecimals;\n    this.MP = 10 ** tokenDecimals;\n  }\n\n  static formatSmartly(value: number) {\n    if (value === 0) {\n      return '0';\n    }\n\n    if (value < 0.001) {\n      return '<0.001';\n    }\n\n    return numbro(value).format({\n     mantissa: 3,\n     trimMantissa: true,\n     optionalMantissa: true,\n     average: true,\n   })\n  }\n\n  // for display purposes, converts from yocto values\n  amount(amount: number | string) {\n    const value = numbro(amount).divide(this.MP).value();\n\n    const formatted = numbro(value).format({\n      mantissa: 3,\n      trimMantissa: true,\n      optionalMantissa: true,\n      average: true,\n    });\n\n    if (value === 0) {\n      return '0';\n    }\n\n    if (amount !== 0 && value < 0.001) {\n      return '<0.001';\n    }\n\n    return formatted;\n  }\n\n  toYocto(value: number | string) {\n    return numbro(value)\n      .multiply(this.MP)\n      .format({ mantissa: 0 });\n  }\n\n  toHumanReadableValue(amount: number | string, decimals: number = 0): string {\n    return numbro(amount)\n      .divide(this.MP)\n      .format({\n        mantissa: decimals,\n        trimMantissa: true,\n        optionalMantissa: true,\n      });\n  }\n\n  // tries to find the best interval for display\n  // to avoid 0.0000000000000000000000000009839248 tokens per sec\n  tokensPerMeaningfulPeriod(tokensPerSec: number | string) {\n    const multipliers = [\n      1,\n      SECONDS_IN_MINUTE,\n      SECONDS_IN_HOUR,\n      SECONDS_IN_DAY,\n      SECONDS_IN_WEEK,\n      SECONDS_IN_MONTH,\n      SECONDS_IN_YEAR,\n    ];\n    const unit = {\n      1: 'second',\n      [SECONDS_IN_MINUTE]: 'minute',\n      [SECONDS_IN_HOUR]: 'hour',\n      [SECONDS_IN_DAY]: 'day',\n      [SECONDS_IN_WEEK]: 'week',\n      [SECONDS_IN_MONTH]: 'month',\n      [SECONDS_IN_YEAR]: 'year',\n    };\n\n    const firstGoodLookingMultiplier = multipliers.find((multiplier) => {\n      const value = numbro(tokensPerSec)\n        .multiply(multiplier)\n        .divide(this.MP)\n        .value();\n\n      const isOk = value > 0.1;\n      return isOk;\n    }) || SECONDS_IN_YEAR;\n\n    const value = numbro(tokensPerSec)\n      .multiply(firstGoodLookingMultiplier)\n      .divide(this.MP)\n      .value();\n\n    return {\n      formattedValue: TokenFormatter.formatSmartly(value),\n      unit: unit[firstGoodLookingMultiplier],\n    };\n  }\n}\n","import { env } from \"shared/config\";\n\nexport function isWNearTokenId(tokenAccountId: string) {\n  return tokenAccountId === env.WNEAR_ID;\n}","import { Account, Contract, utils, transactions } from 'near-api-js';\nimport BigNumber from 'bignumber.js';\nimport JSONbig from 'json-bigint';\n\nimport { isWNearTokenId } from 'shared/helpers/isWNearTokenId';\nimport { env } from 'shared/config';\n\nimport { TokenMetadata } from './types';\nimport { RoketoCreateRequest } from '../roketo/interfaces/entities';\n\ntype FTContract = Contract & {\n  ft_balance_of: (options: { account_id: string }) => Promise<string>;\n  storage_balance_of: (options: { account_id: string }) => Promise<{ total: string, available: string }>;\n  ft_metadata: () => Promise<TokenMetadata>;\n  near_deposit: (options: { }, gas: string, deposit: string) => Promise<never>;\n  storage_deposit: (options: { }, gas: string, deposit: string | null) => Promise<never>;\n  ft_transfer_call: ({ args, gas, callbackUrl, amount }: { args: any, gas: string, callbackUrl: string, amount: number }) => Promise<never>\n};\n\nexport class FTApi {\n  contract: FTContract;\n\n  tokenAccountId: string;\n\n  account: Account;\n\n  constructor(account: Account, tokenAccountId: string) {\n    this.tokenAccountId = tokenAccountId;\n    this.account = account;\n\n    this.contract = new Contract(account, tokenAccountId, {\n      viewMethods: ['ft_balance_of', 'ft_metadata', 'storage_balance_of'],\n      changeMethods: ['ft_transfer_call', 'storage_deposit', 'near_deposit'],\n    }) as FTContract;\n  }\n\n  async getMetadata(): Promise<TokenMetadata> {\n    const res = await this.contract.ft_metadata();\n\n    return res;\n  }\n\n  async getBalance(): Promise<string> {\n    if (!this.account.accountId) {\n      return '0';\n    }\n\n    const res = await this.contract.ft_balance_of({ account_id: this.account.accountId });\n\n    return res;\n  }\n\n  async getIsRegistered(accountId: string): Promise<boolean> {\n    const res = await this.contract.storage_balance_of({ account_id: accountId });\n\n    return res && res.total !== '0';\n  }\n\n  transfer = async (payload: RoketoCreateRequest, amount: string, callbackUrl?: string) => {\n    const [ isRegisteredSender, isRegisteredReceiver ] = await Promise.all([\n      this.getIsRegistered(payload.owner_id),\n      this.getIsRegistered(payload.receiver_id)\n    ]);\n\n    const actions = [\n      transactions.functionCall(\n        'ft_transfer_call',\n        {\n          receiver_id: env.ROKETO_CONTRACT_NAME,\n          amount: new BigNumber(amount).toFixed(),\n          memo: 'Roketo transfer',\n          msg: JSONbig.stringify({\n            Create: {\n              request: payload\n            }\n          }),\n        },\n        '100000000000000',\n        1\n      )\n    ];\n\n    let depositSumm = new BigNumber(0);\n    const depositAmmount =  utils.format.parseNearAmount('0.00125') as string; // account creation costs 0.00125 NEAR for storage\n\n    if (!isRegisteredSender) {\n      actions.unshift(\n        transactions.functionCall(\n          \"storage_deposit\",\n          { account_id: payload.owner_id },\n          '30000000000000',\n          depositAmmount\n        )\n      )\n\n      depositSumm = depositSumm.plus(depositAmmount);\n    }\n\n    if (!isRegisteredReceiver) {\n      actions.unshift(\n        transactions.functionCall(\n          \"storage_deposit\",\n          { account_id: payload.receiver_id },\n          '30000000000000',\n          depositAmmount\n        )\n      )\n\n      depositSumm = depositSumm.plus(depositAmmount);\n    }\n\n    if(isWNearTokenId(this.tokenAccountId)) {\n      actions.unshift(\n        transactions.functionCall(\n          \"near_deposit\",\n          {},\n          '30000000000000',\n          new BigNumber(amount).plus(depositSumm).toFixed()\n        ),\n      )\n    }\n\n    // @ts-ignore\n    const res = this.account.signAndSendTransaction({\n      receiverId: this.tokenAccountId,\n      walletCallbackUrl: callbackUrl,\n      actions\n    });\n\n    return res;\n  }\n}\n","import { Account } from 'near-api-js';\n\nimport { RoketoDao, RoketoTokenMeta } from 'shared/api/roketo/interfaces/entities';\n\nimport { TokenMetadata } from './types';\nimport { TokenFormatter } from './token-formatter';\nimport { FTApi } from './ft-api';\n\nexport type RichToken = {\n  api: FTApi;\n  roketoMeta: RoketoTokenMeta;\n  formatter: TokenFormatter;\n  meta: TokenMetadata;\n  balance: string;\n};\n\nexport type RichTokens = {\n  [tokenAccountId: string]: RichToken,\n}\n\ntype InitFRProps = {\n  account: Account;\n  tokens: RoketoDao['tokens'];\n}\n\nexport async function initFT({ account, tokens }: InitFRProps) {\n  const richTokens: RichTokens = {};\n\n  await Promise.all(Object.keys(tokens).map(async (tokenAccountId: string) => {\n    const api = new FTApi(account, tokenAccountId);\n    const [ meta, balance ] = await Promise.all([\n      api.getMetadata(),\n      api.getBalance(),\n    ])\n    const formatter = new TokenFormatter(meta.decimals);\n\n    richTokens[tokenAccountId] = {\n      api,\n      formatter,\n      roketoMeta: tokens[tokenAccountId],\n      meta,\n      balance\n    };\n  }));\n\n  return richTokens;\n}\n","const NEAR_MULTIPLIER = 10 ** 24;\nconst DAI_MULTIPLIER = 10 ** 18;\n\nexport const TOKEN_MULTIPLIER_MAP = {\n  // TestNet\n  'wrap.testnet': NEAR_MULTIPLIER,\n  'dai.fakes.testnet': DAI_MULTIPLIER,\n\n  // MainNet\n  'wrap.near': NEAR_MULTIPLIER,\n  'dai.bridge.near': DAI_MULTIPLIER,\n};\n\nexport const CONTRACT_VIEW_METHODS_LIST = [\n  'get_assets',\n  'get_asset',\n  'get_price_data',\n];\nexport const CONTRACT_CHANGE_METHODS_LIST = [];\n","import numbro from 'numbro';\nimport * as nearAPI from 'near-api-js';\n\nimport {env} from 'shared/config';\n\nimport {TokenAccountId, TokenMultiplierMap, TokenPriceCollection, TokenPriceRaw} from './interfaces/entites';\nimport {PriceOracleContract} from './interfaces/contract';\nimport {CONTRACT_CHANGE_METHODS_LIST, CONTRACT_VIEW_METHODS_LIST, TOKEN_MULTIPLIER_MAP,} from './constants';\n\nexport interface PriceOracle {\n  getPriceInUsd: (tokenId: TokenAccountId, amount: number | string, shownDecimals?: number) => string,\n}\n\nconst convertRawPriceToTokenMap = (\n  tokenPrices: TokenPriceRaw[], relyingSourceOracleId: string\n): TokenPriceCollection => {\n  const priceTokenMap = tokenPrices.reduce((accumulatorMap, priceToken) => {\n    const [tokenId, {reports}] = priceToken;\n\n    const desiredSourceOracle = reports.find(\n      ({oracle_id}) => oracle_id === relyingSourceOracleId\n    );\n    if (!desiredSourceOracle) {\n      return accumulatorMap;\n    }\n\n    return {\n      ...accumulatorMap,\n      [tokenId]: desiredSourceOracle.price,\n    };\n  }, {});\n\n  return priceTokenMap;\n};\n\n\n/**\n * 5 NEAR = 5 * 10**24 \"wrap.near\"\n * 50 DAI = 50 * 10**18 \"dai.bridge.near\"\n *\n * Price NEAR { multiplier: 1000, decimals: 26 }\n * 5 NEAR in USD = 5 * 10**24 * 1000 / 10**(26 - 18) = 50 * 10**18\n * Price DAI { multiplier: 101, decimals: 20 }\n * 50 DAI in USD = 50 * 10**18 * 101 / 10**(20 - 18) = 505 * 10**17\n *\n * more: https://github.com/NearDeFi/price-oracle/blob/c2a10765a629dd013eeaa0f49d5631cbc0470b76/src/utils.rs#L18\n */\nconst convertTokenToUsdFactory = (\n  priceTokenMap: TokenPriceCollection,\n  tokenToMultiplierMap: TokenMultiplierMap,\n) => (\n  tokenAccountId: TokenAccountId,\n  amount: number | string,\n  shownDecimals: number = 3\n) => {\n  const tokenPrice = priceTokenMap[tokenAccountId];\n  const tokenMultiplier = tokenToMultiplierMap[tokenAccountId];\n\n  if (!tokenPrice || !tokenMultiplier) {\n    return '0';\n  }\n\n  const {multiplier, decimals} = tokenPrice;\n\n  return numbro(amount)\n    .multiply(tokenMultiplier)\n    .multiply(Number(multiplier))\n    .divide(10 ** decimals)\n    .format({\n      mantissa: shownDecimals,\n      trimMantissa: true,\n    });\n};\n\nexport const initPriceOracle = async (\n  {account}: {account: nearAPI.ConnectedWalletAccount}\n): Promise<PriceOracle> => {\n  const priceOracleContract = new nearAPI.Contract(account, env.PRICE_ORACLE_CONTRACT_NAME, {\n    viewMethods: CONTRACT_VIEW_METHODS_LIST,\n    changeMethods: CONTRACT_CHANGE_METHODS_LIST,\n  }) as PriceOracleContract;\n\n  const rawAssets = await priceOracleContract.get_assets({});\n  const tokenMap = convertRawPriceToTokenMap(rawAssets, env.PRICE_ORACLE_SOURCE_ID);\n\n  const getPriceInUsd = convertTokenToUsdFactory(tokenMap, TOKEN_MULTIPLIER_MAP);\n\n  return {\n    getPriceInUsd,\n  };\n};\n","import React, { useEffect, useState, useContext } from 'react';\nimport { Near, WalletConnection } from 'near-api-js';\n\nimport { env } from 'shared/config';\nimport { createNearInstance, getNearAuth, NearAuth } from 'shared/api/near';\nimport { initRoketo, Roketo } from 'shared/api/roketo';\nimport { initFT, RichTokens } from 'shared/api/ft';\nimport { initPriceOracle, PriceOracle } from 'shared/api/price-oracle';\n\ntype AppServices = {\n  auth: NearAuth;\n  tokens: RichTokens;\n  roketo: Roketo;\n  priceOracle: PriceOracle,\n  near: Near;\n  walletConnection: WalletConnection;\n};\nconst AppContext = React.createContext<AppServices | null>(null);\n\nexport function RoketoContextProvider({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  const [context, setContext] = useState<AppServices | null>(null);\n\n  useEffect(() => {\n    const init = async () => {\n      const near = await createNearInstance();\n      const walletConnection = new WalletConnection(near, env.ROKETO_CONTRACT_NAME);\n      const auth = await getNearAuth(walletConnection);\n\n      const [roketo, priceOracle] = await Promise.all([\n        initRoketo({\n          account: auth.account,\n        }),\n        initPriceOracle({account: auth.account}),\n      ]);\n\n      const tokens = await initFT({\n        account: auth.account,\n        tokens: roketo.dao.tokens,\n      });\n\n      setContext({\n        auth,\n        near,\n        roketo,\n        priceOracle,\n        walletConnection,\n        tokens, \n      });\n    };\n\n    init();\n  }, []);\n\n  return (\n    <AppContext.Provider value={context}>\n      {context ? children : null}\n    </AppContext.Provider>\n  );\n}\n\nconst ERR_NOT_IN_NEAR_CONTEXT = new Error('Near context is not found');\n\nexport function useRoketoContext() {\n  const context = useContext(AppContext);\n\n  if (!context) {\n    throw ERR_NOT_IN_NEAR_CONTEXT;\n  }\n\n  return context;\n}\n","import useSWR, { SWRResponse } from 'swr';\nimport type { PublicConfiguration } from 'swr/dist/types';\nimport * as client from '@roketo/api-client';\nimport { WalletConnection } from 'near-api-js';\n\nimport { useRoketoContext } from 'app/roketo-context';\nimport { env } from 'shared/config';\nimport { createNearInstance } from '../near';\n\nconst serverConfig = { baseServer: new client.ServerConfiguration(env.WEB_API_URL, {}) };\n\nclass TokenProvider {\n  private initialized: boolean = false;\n\n  private token: null | Promise<string> = null;\n\n  private readonly authApiClient = new client.AuthApi(client.createConfiguration({ ...serverConfig }));\n\n  getToken() {\n    if (!this.token) {\n      this.token = this.getRefreshedToken();\n    }\n\n    return this.token;\n  }\n\n  refreshToken() {\n    this.token = this.getRefreshedToken();\n  }\n\n  private async getRefreshedToken(): Promise<string> {\n    try {\n      const { accountId } = await this.getAccountIdAndNear();\n\n      const ROKETO_API_ACCESS_TOKEN_KEY_PREFIX = 'roketoApiAccessToken';\n\n      const key = `${ROKETO_API_ACCESS_TOKEN_KEY_PREFIX}:${accountId}`;\n\n      if (!this.initialized) {\n        this.initialized = true;\n\n        const savedToken = localStorage[key] || null;\n\n        if (savedToken && !this.containsUnicode(savedToken)) {\n          return savedToken;\n        }\n      }\n\n      delete localStorage[key];\n\n      const loginParams = await this.generateLoginParams();\n\n      const { accessToken } = await this.authApiClient.login(loginParams);\n\n      localStorage[key] = accessToken;\n\n      return accessToken;\n    } catch (e) {\n      // TODO: Think of better handling of failing login.\n      this.token = null;\n\n      throw e;\n    }\n  }\n\n  private async getAccountIdAndNear() {\n    const near = await createNearInstance();\n    const walletConnection = new WalletConnection(near, env.ROKETO_CONTRACT_NAME);\n    const accountId = walletConnection.getAccountId();\n\n    return { accountId, near };\n  }\n\n  private async generateLoginParams(): Promise<client.LoginDto> {\n    const { accountId, near } = await this.getAccountIdAndNear();\n\n    const keyPair = await near.config.keyStore.getKey(near.config.networkId, accountId);\n\n    const timestamp = Date.now();\n\n    const { signature: Uint8Signature } = keyPair.sign(new TextEncoder().encode(String(timestamp))); // TODO: Polyfill TextEncoder?\n\n    const signature: number[] = Array.from(Uint8Signature);\n\n    return {\n      accountId,\n      timestamp,\n      signature,\n    }\n  }\n\n  private containsUnicode(token: string) {\n    return token !== encodeURIComponent(token);\n  }\n}\n\nconst tokenProvider = new TokenProvider();\n\nconst onErrorRetry: PublicConfiguration<any, any, any>['onErrorRetry'] = async (error, key, config, revalidate, { retryCount }) => {\n  if (error.message.startsWith('HTTP-Code: 401') && retryCount <= 3) {\n    await tokenProvider.refreshToken();\n\n    revalidate({ retryCount });\n  }\n};\n\nconst apiConfig = client.createConfiguration({\n  ...serverConfig,\n  authMethods: { bearer: { tokenProvider } }\n});\n\nexport const usersApiClient = new client.UsersApi(apiConfig);\n\nexport function useUser(): SWRResponse<client.User> {\n  const { auth } = useRoketoContext();\n\n  const swr = useSWR(\n    auth.accountId ? 'user' : null,\n    () => usersApiClient.findOne(auth.accountId),\n    { onErrorRetry },\n  );\n\n  return swr;\n}\n\nexport const { User } = client;\n\nexport const notificationsApiClient = new client.NotificationsApi(apiConfig);\n\nexport function useNotifications(): SWRResponse<client.Notification[]> {\n  const { auth } = useRoketoContext();\n\n  const swr = useSWR(\n    auth.accountId ? 'notifications' : null,\n    () => notificationsApiClient.findAll(),\n    { onErrorRetry },\n  );\n\n  return swr;\n}\n\nexport type NotificationType = client.NotificationTypeEnum;\n\nexport type Notification = client.Notification;\n","import React from 'react';\n\ntype Props = {\n  width?: number,\n  height?: number,\n  className?: string,\n}\n\nconst DEFAULT_WIDTH = 8;\nconst DEFAULT_HEIGHT = 6;\n\nexport const ArrowDown = ({width = DEFAULT_WIDTH, height = DEFAULT_HEIGHT, className}: Props) => (\n  <div className={className}>\n    <svg width={width} height={height} viewBox=\"0 0 8 6\" fill=\"none\">\n      <path d=\"M7.06 0.726562L4 3.7799L0.94 0.726562L0 1.66656L4 5.66656L8 1.66656L7.06 0.726562Z\" fill=\"currentColor\" />\n    </svg>\n  </div>\n);\n","import React from 'react';\nimport cn from 'classnames';\n\nimport {ArrowDown} from '@ui/icons/ArrowDown';\n\nimport styles from './styles.module.scss';\n\ntype DropdownOpenerProps = {\n  opened?: boolean;\n  className?: string;\n  children: React.ReactNode;\n  onChange: (state: boolean) => void;\n  testId?: string;\n};\n\nexport function DropdownOpener({\n  opened,\n  className,\n  children,\n  onChange,\n  testId,\n  ...rest\n}: DropdownOpenerProps) {\n  const arrowClassName = cn(styles.arrow, {\n      [styles.rotate]: opened,\n    });\n\n  return (\n    <button\n      type=\"button\"\n      onClick={() => onChange(!opened)}\n      className={cn(styles.root, className)}\n      data-testid={testId}\n      {...rest}\n    >\n      {children}\n\n      <ArrowDown className={arrowClassName}/>\n    </button>\n  );\n}\n","import React from 'react';\n\nexport const useOutsideClick = (ref: React.RefObject<HTMLElement>, callback: () => void) => {\n  const handleClick = ({ target }: DocumentEventMap[\"click\"]) => {\n    if (ref.current && target instanceof HTMLElement && !ref.current.contains(target)) {\n      callback();\n    }\n  };\n\n  React.useEffect(() => {\n    document.addEventListener('click', handleClick);\n\n    return () => {\n      document.removeEventListener('click', handleClick);\n    };\n  });\n};\n","import React from 'react';\nimport classNames from 'classnames';\nimport { useOutsideClick } from 'shared/hooks/useOutsideClick';\n\nimport styles from './styles.module.scss';\n\ntype DropdownMenuProps = {\n  opened: boolean;\n  children: React.ReactNode;\n  className?: string;\n  onClose: () => void;\n};\n\nexport function DropdownMenu({\n  opened,\n  children,\n  className,\n  onClose\n}: DropdownMenuProps) {\n  const ref = React.useRef<HTMLInputElement | null>(null);\n\n  useOutsideClick(ref, () => {\n    if (opened) {\n      onClose();\n    }\n  });\n\n  return (\n    <div\n      ref={ref}\n      className={classNames(\n        styles.menu,\n        {[styles.hidden]: !opened},\n        className,\n      )}\n    >\n      {children}\n    </div>\n  );\n}\n\ntype DropdownMenuItemProps = {\n  children: React.ReactNode;\n  className?: string;\n};\n\nexport function DropdownMenuItem({ children, className, ...rest }: DropdownMenuItemProps) {\n  return (\n    <div className={className} {...rest}>\n      {children}\n    </div>\n  );\n}\n\nexport function DropdownMenuDivider() {\n  return <div className={styles.menuDivider} />;\n}\n","import React from 'react';\nimport {Link} from 'react-router-dom';\nimport cn from 'classnames';\n\nimport styles from './styles.module.scss';\n\nexport enum ButtonType {\n  button = 'button',\n  submit = 'submit',\n}\n\nexport enum DisplayMode {\n  primary = 'primary',\n  simple = 'simple',\n  action = 'action',\n  invisible = 'invisible',\n}\n\ntype Props = {\n  type?: ButtonType\n  displayMode?: DisplayMode,\n  disabled?: boolean,\n  link?: string,\n  className?: string,\n  children?: React.ReactNode;\n  onClick?: (event: any) => void;\n  testId?: string;\n}\n\nexport const Button = ({\n  type = ButtonType.button,\n  displayMode = DisplayMode.action,\n  disabled = false,\n  link,\n  children,\n  className,\n  onClick,\n  testId,\n  ...restTooltipProps\n}: Props) => {\n  const buttonClassName = cn(\n    styles.root,\n    {\n      [styles.primary]: displayMode === DisplayMode.primary,\n      [styles.action]: displayMode === DisplayMode.action,\n      [styles.simple]: displayMode === DisplayMode.simple,\n    },\n    className\n  );\n\n  const button = (\n    <button\n      // eslint-disable-next-line react/button-has-type\n      type={type}\n      className={buttonClassName}\n      onClick={onClick}\n      disabled={disabled}\n      {...restTooltipProps}\n      data-testid={testId}\n    >\n      {children}\n    </button>\n  );\n\n  if (link) {\n    return (\n      <Link to={link}>\n        {button}\n      </Link>\n    );\n  }\n\n  return button;\n};\n","import React, {FC, InputHTMLAttributes} from 'react';\nimport cn from 'classnames'\n\nimport styles from './styles.module.scss';\n\ninterface InputProps extends InputHTMLAttributes<HTMLInputElement> {\n  hasError?: boolean,\n  className?: string,\n}\n\nexport const Input: FC<InputProps> = ({\n  className,\n  hasError = false,\n  ...rest\n}) => (\n  <input className={cn(styles.input, {[styles.error]: hasError}, className)}  {...rest} />\n);\n","import React, { useCallback, useEffect, useRef, useState } from 'react';\nimport classNames from 'classnames';\n\nimport { useRoketoContext } from 'app/roketo-context';\nimport { usersApiClient, useUser, User } from 'shared/api/roketo-web';\n\nimport { Button, ButtonType } from '@ui/components/Button';\nimport { Input } from '@ui/components/Input';\n\nimport styles from './index.module.scss';\n\nconst NAME_INPUT = \"nameInput\";\nconst EMAIL_INPUT = \"emailInput\";\n\nexport function ProfileForm() {\n  const { auth } = useRoketoContext();\n\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [isMutating, setIsMutating] = useState(false);\n\n  const userSWR = useUser();\n\n  useEffect(() => {\n    setName(userSWR.data?.name ?? '');\n    setEmail(userSWR.data?.email ?? '');\n  }, [userSWR.data]);\n\n  const formRef = useRef<HTMLFormElement | null>(null);\n\n  const updateUser = useCallback(async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!userSWR.data) {\n      return;\n    }\n\n    setIsMutating(true);\n\n    const newName = formRef.current?.[NAME_INPUT].value;\n    const newEmail = formRef.current?.[EMAIL_INPUT].value;\n\n    const cachedUser = userSWR.data;\n\n    await userSWR.mutate(\n      async () => {\n        try {\n          const updateUserDto = {\n            name: newName,\n            email: newEmail,\n          };\n\n          await usersApiClient.update(auth.accountId, updateUserDto);\n\n          return Object.assign(new User(), cachedUser, updateUserDto);\n        } catch (error) {\n          return cachedUser;\n        }\n      },\n      { revalidate: false, optimisticData: { ...userSWR.data, name: newName }, rollbackOnError: true }\n    );\n\n    setIsMutating(false);\n  }, [auth.accountId, userSWR]);\n\n  const busy = userSWR.isValidating || isMutating;\n\n  return (\n    <form\n      className={classNames(styles.profileForm, busy && styles.busy)}\n      onSubmit={updateUser}\n      ref={formRef}\n    >\n      <label className={styles.label}>\n        <span className={styles.inputName}>Name</span>\n        <Input\n          placeholder=\"Name\"\n          name={NAME_INPUT}\n          value={name}\n          onChange={(e) => setName(e.target.value)}\n          disabled={busy}\n        />\n      </label>\n      <label className={styles.label}>\n        <span className={styles.inputName}>Email</span>\n        <Input\n          placeholder=\"Email\"\n          name={EMAIL_INPUT}\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n          disabled={busy}\n        />\n      </label>\n      <Button\n        type={ButtonType.submit}\n        disabled={busy}\n      >\n        Save\n      </Button>\n    </form>\n  );\n}\n","import React from 'react';\n\ntype Props = {\n  className?: string,\n}\n\nexport const LogoutIcon = ({className}: Props) => (\n  <svg className={className} width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\">\n    <path d=\"M7.09 12.59L8.5 14L13.5 9L8.5 4L7.09 5.41L9.67 8H0V10H9.67L7.09 12.59ZM16 0H2C0.89 0 0 0.9 0 2V6H2V2H16V16H2V12H0V16C0 17.1 0.89 18 2 18H16C17.1 18 18 17.1 18 16V2C18 0.9 17.1 0 16 0Z\" fill=\"currentColor\"/>\n  </svg>\n);\n","import { RoketoStream } from 'shared/api/roketo/interfaces/entities';\nimport { useRoketoContext } from 'app/roketo-context';\n\nexport const STREAM_DIRECTION = {\n  IN: 'in',\n  OUT: 'out',\n};\n\ntype StreamDirectionKeyType = keyof typeof STREAM_DIRECTION;\n\nexport function useGetStreamDirection(stream: RoketoStream): typeof STREAM_DIRECTION[StreamDirectionKeyType] | null {\n  const { auth } = useRoketoContext();\n\n  if (stream.receiver_id === auth.accountId) {\n    return STREAM_DIRECTION.IN;\n  }\n\n  if (stream.owner_id === auth.accountId) {\n    return STREAM_DIRECTION.OUT;\n  }\n\n  return null;\n}\n","import { useEffect, useState } from 'react';\nimport BigNumber from 'bignumber.js';\nimport useSWR, { SWRResponse } from 'swr';\nimport { formatDuration, intervalToDuration } from 'date-fns';\n\nimport { getAvailableToWithdraw, isDead } from 'shared/api/roketo/helpers';\nimport { STREAM_STATUS } from 'shared/api/roketo/constants';\nimport { useRoketoContext } from 'app/roketo-context';\nimport type { RoketoStream } from 'shared/api/roketo/interfaces/entities';\nimport { SECONDS_IN_YEAR } from 'shared/constants';\nimport { shortEnLocale } from 'shared/helpers/date';\n\nfunction useExtrapolation({ swr, revalidationPeriod, isEnabled = true }: {\n  swr: SWRResponse,\n  revalidationPeriod: number,\n  isEnabled?: boolean,\n}) {\n  const [secondsTillRevalidation, setSecondsTillRevalidation] = useState(revalidationPeriod);\n\n  useEffect(() => {\n    if (!isEnabled) {\n      return;\n    }\n\n    const id = setTimeout(() => {\n      if (secondsTillRevalidation <= 0) {\n        setSecondsTillRevalidation(revalidationPeriod);\n        swr.mutate();\n      } else {\n        setSecondsTillRevalidation((secondsLeft) => secondsLeft - 1);\n      }\n    }, 1000);\n    return () => clearTimeout(id);\n  }, [swr, secondsTillRevalidation, revalidationPeriod, isEnabled]);\n}\n\nexport function useStreams() {\n  const { auth, roketo } = useRoketoContext();\n\n  const swr = useSWR(\n    ['streams', auth.accountId, roketo.account.last_created_stream],\n    async () => {\n      const inputs = await roketo.api.getAccountIncomingStreams({ from: 0, limit: 100 });\n      const outputs = await roketo.api.getAccountOutgoingStreams({ from: 0, limit: 100 });\n\n      return {\n        inputs,\n        outputs\n      };\n    },\n  );\n\n  useExtrapolation({ swr, revalidationPeriod: 30 });\n\n  return swr;\n}\n\nexport function useSingleStream(streamId: string) {\n  const { roketo } = useRoketoContext();\n\n  const swr = useSWR<RoketoStream>(\n    () => {\n      const key = roketo.account\n        ? ['stream', streamId, roketo.account.last_created_stream]\n        : false;\n      return key;\n    },\n    async () => {\n      const stream = await roketo.api.getStream({ streamId });\n\n      return stream;\n    },\n    {\n      errorRetryInterval: 2000,\n      errorRetryCount: 3,\n    },\n  );\n\n  useExtrapolation({ swr, revalidationPeriod: 10, isEnabled: swr.data?.status === STREAM_STATUS.Active });\n\n  return swr;\n}\n\nexport function streamViewData(stream: RoketoStream, withExtrapolation: boolean = true) {\n  const MAX_SEC = SECONDS_IN_YEAR * 1000;\n\n  const availableToWithdraw = withExtrapolation ? getAvailableToWithdraw(stream) : new BigNumber(0);\n\n  const secondsLeft = BigNumber.minimum(\n    MAX_SEC,\n    new BigNumber(stream.balance)\n      .minus(availableToWithdraw)\n      .dividedBy(stream.tokens_per_sec)\n      .toFixed()\n  ).toNumber();\n\n  const duration = intervalToDuration({ start: 0, end: secondsLeft * 1000 });\n\n  if (duration.days || duration.weeks || duration.months || duration.years) {\n    duration.seconds = 0;\n  }\n\n  const timeLeft = formatDuration(duration, { locale: shortEnLocale });\n\n  // progress bar calculations\n  const full = new BigNumber(stream.balance).plus(stream.tokens_total_withdrawn);\n  const withdrawn = new BigNumber(stream.tokens_total_withdrawn);\n  const streamed = withdrawn.plus(availableToWithdraw);\n\n  const left = full.minus(streamed);\n  const progresses = [\n    withdrawn.dividedBy(full).toNumber(),\n    streamed.dividedBy(full).toNumber()\n  ];\n\n  const percentages = {\n    left: full.minus(streamed).dividedBy(full).toNumber(),\n    streamed: streamed.dividedBy(full).toNumber(),\n    withdrawn: withdrawn.dividedBy(full).toNumber(),\n    available: availableToWithdraw.dividedBy(full).toNumber(),\n  };\n\n  return {\n    progresses,\n    isDead: isDead(stream),\n    percentages,\n    timeLeft,\n    progress: {\n      full: full.toFixed(),\n      withdrawn: withdrawn.toFixed(),\n      streamed: streamed.toFixed(),\n      left: left.toFixed(),\n      available: availableToWithdraw.toFixed(),\n    },\n  };\n}\n","type BellIconProps = {\n  className?: string;\n  withBadge: boolean;\n};\n\nexport function BellIcon({ className, withBadge }: BellIconProps) {\n  return (\n    <svg\n      className={className}\n      width=\"24\"\n      height=\"24\"\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n    >\n      <path\n        d=\"M15.375 17.5556H8.625M15.375 17.5556H21L19.4194 15.9944C19.2071 15.7848 19.0387 15.5358 18.9239 15.2619C18.809 14.9879 18.75 14.6943 18.75 14.3978V10.8889C18.7502 9.50993 18.3175 8.16482 17.5116 7.03876C16.7057 5.91271 15.5662 5.06107 14.25 4.60111V4.22222C14.25 3.63285 14.0129 3.06762 13.591 2.65087C13.169 2.23413 12.5967 2 12 2C11.4033 2 10.831 2.23413 10.409 2.65087C9.98705 3.06762 9.75 3.63285 9.75 4.22222V4.60111C7.12875 5.51667 5.25 7.98667 5.25 10.8889V14.3989C5.25 14.9967 5.00925 15.5711 4.58063 15.9944L3 17.5556H8.625H15.375ZM15.375 17.5556V18.6667C15.375 19.5507 15.0194 20.3986 14.3865 21.0237C13.7536 21.6488 12.8951 22 12 22C11.1049 22 10.2464 21.6488 9.61351 21.0237C8.98058 20.3986 8.625 19.5507 8.625 18.6667V17.5556H15.375Z\"\n        stroke={withBadge ? '#3E65F2' : '#2B313B'}\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n      {withBadge && <circle cx=\"19\" cy=\"5\" r=\"5\" fill=\"#D80A1F\" stroke=\"white\" strokeWidth=\"2\" />}\n    </svg>\n  );\n}\n\n","export function FinishIcon({ className }: { className: string }) {\n  return (\n    <svg className={className} width=\"44\" height=\"44\" viewBox=\"0 0 44 44\" fill=\"none\">\n      <rect width=\"44\" height=\"44\" rx=\"22\" fill=\"#F1F6FE\"/>\n      <path d=\"M22 14.9167V19.5M14.5 29.5V26.1667V29.5ZM14.5 26.1667V16.1667C14.5 15.7246 14.6756 15.3007 14.9882 14.9882C15.3007 14.6756 15.7246 14.5 16.1667 14.5H21.5833L22.4167 15.3333H29.5L27 20.3333L29.5 25.3333H22.4167L21.5833 24.5H16.1667C15.7246 24.5 15.3007 24.6756 14.9882 24.9882C14.6756 25.3007 14.5 25.7246 14.5 26.1667V26.1667Z\" stroke=\"#3E65F2\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    </svg>\n  );\n}\n","export function StartIcon({ className }: { className: string }) {\n  return (\n    <svg className={className} width=\"44\" height=\"44\" viewBox=\"0 0 44 44\" fill=\"none\">\n      <rect width=\"44\" height=\"44\" rx=\"22\" fill=\"#F2FCF5\"/>\n      <path\n        d=\"M28.3128 19.7147L20.9824 15.0357C20.6368 14.815 20.235 14.6883 19.82 14.6692C19.405 14.6501 18.9923 14.7393 18.6262 14.9273C18.26 15.1153 17.9541 15.3949 17.7411 15.7364C17.5281 16.0779 17.4161 16.4683 17.417 16.866V26.2217C17.4169 26.6191 17.5296 27.0089 17.7429 27.3498C17.9562 27.6906 18.2622 27.9697 18.6282 28.1571C18.9942 28.3446 19.4065 28.4334 19.8211 28.4141C20.2358 28.3948 20.6371 28.2682 20.9824 28.0477L28.3128 23.3687C28.6268 23.1683 28.8843 22.8968 29.0624 22.5783C29.2405 22.2597 29.3337 21.904 29.3337 21.5428C29.3337 21.1815 29.2405 20.8258 29.0624 20.5073C28.8843 20.1888 28.6268 19.9173 28.3128 19.7169V19.7147Z\"\n        stroke=\"#1EBA52\" strokeWidth=\"2.75\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    </svg>\n  );\n}\n","export function PauseIcon({ className }: { className: string }) {\n  return (\n    <svg className={className} width=\"44\" height=\"44\" viewBox=\"0 0 44 44\" fill=\"none\">\n      <rect width=\"44\" height=\"44\" rx=\"22\" fill=\"#FFF7EE\"/>\n      <path d=\"M18.333 16.5V27.5M25.6663 16.5V27.5\" stroke=\"#FF8C19\" strokeWidth=\"3.66667\" strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"/>\n    </svg>\n  );\n}\n","import React, { useCallback, useState } from 'react';\nimport classNames from 'classnames';\nimport { isToday, isYesterday, differenceInDays, format } from 'date-fns';\nimport { generatePath, Link } from 'react-router-dom';\n\nimport { ROUTES_MAP } from 'shared/helpers/routing';\nimport { notificationsApiClient, useNotifications, NotificationType, Notification } from 'shared/api/roketo-web';\nimport { DropdownOpener } from 'shared/kit/DropdownOpener';\nimport { DropdownMenu } from 'shared/kit/DropdownMenu';\nimport { STREAM_DIRECTION, useGetStreamDirection } from 'shared/hooks/useGetStreamDirection';\nimport { useRoketoContext } from 'app/roketo-context';\nimport { streamViewData } from 'features/roketo-resource';\nimport { testIds } from 'shared/constants';\n\nimport styles from './styles.module.scss';\n\nimport { BellIcon } from './BellIcon';\nimport { FinishIcon } from './FinishIcon';\nimport { StartIcon } from './StartIcon';\nimport { PauseIcon } from './PauseIcon';\n\nfunction NotificationIcon({ type }: { type: NotificationType }) {\n  const IconComponent = (() => {\n    switch (type) {\n      case 'StreamStarted': return StartIcon;\n      case 'StreamPaused': return PauseIcon;\n      case 'StreamFinished': return FinishIcon;\n      case 'StreamIsDue': return FinishIcon;\n      case 'StreamContinued': return StartIcon;\n      default: throw new Error('This should never happen');\n    }\n  })();\n\n  return <IconComponent className={styles.icon} />;\n}\n\nconst WITHOUT_EXTRAPOLATION = false;\n\nfunction PrimaryText({ children }: { children: React.ReactNode }) {\n  return (\n    <div className={styles.primaryText} data-testid={testIds.notificationPrimaryCaption}>{children}</div>\n  );\n}\n\nfunction SecondaryText({ children }: { children: React.ReactNode }) {\n  return (\n    <div className={styles.secondaryText} data-testid={testIds.notificationSecondaryCaption}>{children}</div>\n  );\n}\n\nfunction NotificationBody({ notification: { type, payload: stream } }: { notification: Notification }) {\n  const { tokens } = useRoketoContext();\n  const direction = useGetStreamDirection(stream);\n  const { progress: { full, streamed, left }, timeLeft } = streamViewData(stream, WITHOUT_EXTRAPOLATION);\n\n  const { meta: { symbol }, formatter } = tokens[stream.token_account_id];\n\n  switch (type) {\n    case 'StreamStarted': return (\n      <div className={styles.notificationBody}>\n        <PrimaryText>\n          {\n            direction === STREAM_DIRECTION.IN\n              ? <>{stream.owner_id} <strong>started</strong> a stream for you to receive.</>\n              : <>You’ve successfully <strong>started</strong> a stream to {stream.receiver_id}.</>\n          }\n        </PrimaryText>\n        <SecondaryText>Total streaming amount: <strong>{formatter.amount(full)} {symbol}</strong></SecondaryText>\n        <SecondaryText>Stream duration: <strong>{timeLeft}</strong></SecondaryText>\n      </div>\n    );\n    case 'StreamPaused': return (\n      <div className={styles.notificationBody}>\n        <PrimaryText>The stream {direction === STREAM_DIRECTION.IN ? `from ${stream.owner_id}` : `to ${stream.receiver_id}`} is <strong>paused</strong>.</PrimaryText>\n\n        <SecondaryText>Already streamed: <strong>{formatter.amount(streamed)} {symbol}</strong></SecondaryText>\n        <SecondaryText>Amount left: <strong>{formatter.amount(left)} {symbol}</strong></SecondaryText>\n      </div>\n    );\n    case 'StreamFinished': return (\n      <div className={styles.notificationBody}>\n        <PrimaryText>The stream {direction === STREAM_DIRECTION.IN ? `from ${stream.owner_id}` : `to ${stream.receiver_id}`} has <strong>ended</strong>.</PrimaryText>\n        <SecondaryText>Total amount streamed: <strong>{formatter.amount(full)} {symbol}</strong></SecondaryText>\n      </div>\n    );\n    case 'StreamIsDue': return (\n      <div className={styles.notificationBody}>\n        <PrimaryText>The stream from {stream.owner_id} is <strong>due</strong>.</PrimaryText>\n        <SecondaryText>Available for withdrawal: <strong>{formatter.amount(left)} {symbol}</strong></SecondaryText>\n      </div>\n    );\n    case 'StreamContinued': return (\n      <div className={styles.notificationBody}>\n        <PrimaryText>\n          {\n            direction === STREAM_DIRECTION.IN\n              ? <>{stream.owner_id} has <strong>continued</strong> the stream.</>\n              : <>The stream to {stream.receiver_id} was <strong>continued</strong>.</>\n          }\n        </PrimaryText>\n        <SecondaryText>Amount left: <strong>{formatter.amount(left)} {symbol}</strong></SecondaryText>\n        <SecondaryText>Time left: <strong>{timeLeft}</strong></SecondaryText>\n      </div>\n    );\n    default: throw new Error('This should never happen');\n  }\n}\n\nexport function Notifications() {\n  const [isDropdownOpened, setIsDropdownOpened] = useState(false);\n  const notificationsSWR = useNotifications();\n\n  const closeDropdown = useCallback(() => {\n    setIsDropdownOpened(false);\n\n    if (!notificationsSWR.data) {\n      return;\n    }\n\n    notificationsSWR.mutate(\n      async (notifications) => {\n        await notificationsApiClient.markAllRead();\n\n        return notifications?.map((notification) => notification.isRead ? notification : { ...notification, isRead: true });\n      }\n    );\n  }, [notificationsSWR]);\n\n  const hasUnreadNotifications = notificationsSWR.data?.some(({ isRead }) => !isRead) ?? false;\n\n  return (\n    <div className={styles.root}>\n      <DropdownOpener\n        onChange={setIsDropdownOpened}\n        className={styles.dropdownOpener}\n        opened={isDropdownOpened}\n        testId={testIds.openNotificationsButton}\n      >\n        <BellIcon withBadge={hasUnreadNotifications} />\n      </DropdownOpener>\n\n      <DropdownMenu\n        opened={isDropdownOpened}\n        onClose={closeDropdown}\n        className={styles.dropdownMenu}\n      >\n        <div className={styles.container}>\n          <header className={styles.header} >\n            Notifications\n          </header>\n          {!notificationsSWR.data &&\n            <h3 className=\"text-3xl text-center my-12 mx-auto\">\n              Loading...\n            </h3>\n          }\n\n          {notificationsSWR.data?.length === 0 &&\n            <h3 className=\"text-3xl text-center my-12 mx-auto\">\n              Your notifications will be displayed here.\n            </h3>\n          }\n\n          {notificationsSWR.data?.map((notification, index, notifications) => (\n            <>\n              {index !== 0 && <div className={styles.divider} key={`${notification.id}-divider`} />}\n              {(index === 0 || differenceInDays(notifications[index - 1].createdAt, notification.createdAt)) > 0 &&\n                <div className={styles.date} key={String(notification.createdAt)}>\n                  {isToday(notification.createdAt)\n                    ? 'Today'\n                    : isYesterday(notification.createdAt)\n                      ? 'Yesterday'\n                      : format(notification.createdAt, 'PP')\n                  }\n                </div>\n              }\n              <Link\n                to={generatePath(ROUTES_MAP.stream.path, { id: notification.payload.id })}\n                key={notification.id}\n                className={classNames(\n                  styles.notification,\n                  !notification.isRead && styles.unread\n                )}\n                onClick={closeDropdown}\n                data-testid={testIds.notificationElement}\n              >\n                <NotificationIcon type={notification.type} />\n                <NotificationBody notification={notification} />\n                <div className={styles.time}>{format(new Date(notification.createdAt), 'HH:mm')}</div>\n              </Link>\n            </>\n          ))}\n        </div>\n      </DropdownMenu>\n    </div>\n  );\n}\n","import React, { useState } from 'react';\n\nimport {useRoketoContext} from 'app/roketo-context';\nimport {useUser} from 'shared/api/roketo-web';\nimport { DropdownOpener } from 'shared/kit/DropdownOpener';\nimport { DropdownMenu } from 'shared/kit/DropdownMenu';\nimport { ProfileForm } from 'widgets/profile-form';\n\nimport { Button } from '@ui/components/Button';\nimport {LogoutIcon} from '@ui/icons/LogOut';\n\nimport {env} from 'shared/config';\nimport { testIds } from 'shared/constants';\n\nimport styles from './index.module.scss';\nimport { Notifications } from './Notifications';\n\nexport const Authorization = () => {\n  const [isDropdownOpened, setIsDropdownOpened] = useState(false);\n  const {auth} = useRoketoContext();\n  const userSWR = useUser();\n\n  const {name, email} = userSWR.data ?? {};\n  const {accountId} = auth;\n  const {login, logout, signedIn} = auth;\n\n  if (!signedIn) {\n    return (\n      <Button onClick={login} className={styles.root} testId={testIds.signInButton}>\n        <span className={styles.name}>Sign in with NEAR Wallet</span>\n        <LogoutIcon />\n      </Button>\n    )\n  }\n\n  return (\n    <div className={styles.root}>\n      <div className={styles.profile}>\n        <DropdownOpener\n          onChange={setIsDropdownOpened}\n          className={styles.dropdownOpener}\n          opened={isDropdownOpened}\n        >\n          <span className={styles.name}>\n            {name || accountId}\n          </span>\n\n          <img\n            className={styles.avatar}\n            src={`${env.WEB_API_URL}/users/${accountId}/avatar?email=${email}`}\n            alt=\"\"\n          />\n        </DropdownOpener>\n\n        <DropdownMenu\n          opened={isDropdownOpened}\n          onClose={() => setIsDropdownOpened(false)}\n          className={styles.dropdownMenu}\n        >\n          <ProfileForm />\n        </DropdownMenu>\n      </div>\n\n      <Notifications />\n\n      <button type='button' onClick={logout} className={styles.logoutButton}>\n        <LogoutIcon />\n      </button>\n    </div>\n  );\n};\n\n","import { useRoketoContext } from 'app/roketo-context';\nimport { isWNearTokenId } from 'shared/helpers/isWNearTokenId';\nimport { useToken } from 'shared/hooks/useToken';\n\nexport enum DisplayMode {\n  USD = 'USD',\n  CRYPTO = 'CRYPTO',\n  BOTH = 'BOTH',\n}\n\ntype BalanceProps = {\n  tokenAccountId: string,\n  className?: string,\n  // Display balance in USD or in Crypto currency\n  mode?: DisplayMode,\n}\n\nexport function Balance({ tokenAccountId, className, mode = DisplayMode.CRYPTO }: BalanceProps) {\n  const { auth, priceOracle } = useRoketoContext()\n  const { balance, formatter, meta } = useToken(tokenAccountId);\n\n  const actualCryptoBalance = isWNearTokenId(tokenAccountId)\n    ? auth.balance?.available || '0'\n    : balance;\n  const displayedCryptoAmount = formatter.amount(actualCryptoBalance);\n\n  const showInUSD = mode === DisplayMode.USD;\n\n  const amount = showInUSD\n    ? priceOracle.getPriceInUsd(tokenAccountId, displayedCryptoAmount)\n    : displayedCryptoAmount;\n  const currencySymbol = showInUSD ? '$' : meta.symbol;\n\n  return (\n    <span className={className}>\n      {`Balance: ${amount} ${currencySymbol}`}\n    </span>\n  );\n}\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\n\ntype Props = {\n  children?: React.ReactNode,\n  className?: string,\n\n  onClick?: () => void;\n  to: string,\n}\n\nconst NavigationLink = (props: Props) => {\n  const {\n    to,\n    className,\n    children,\n    onClick,\n  } = props;\n\n  return (\n    <Link\n      to={to}\n      className={className}\n      onClick={onClick}\n    >\n      {children}\n    </Link>\n  );\n};\n\nexport default NavigationLink;\n","import React from 'react';\n\nimport {Route} from \"shared/helpers/routing\";\n\nimport NavigationLink from \"shared/components/NavigationLink\";\n\nimport styles from './styles.module.scss';\n\ntype PageListProps = {\n  pageRoutes: Route[],\n}\n\nexport const PageList = (props: PageListProps) => {\n  const {pageRoutes = []} = props;\n\n  if (pageRoutes.length === 0) {\n    return null;\n  }\n\n  return (\n    <ul className={styles.root}>\n      {pageRoutes.map(route => (\n        <li className={styles.pageLink} key={route.path}>\n          <NavigationLink\n            to={route.path}\n          >\n            {route.title}\n          </NavigationLink>\n        </li>\n      ))}\n    </ul>\n  );\n};\n","import React from 'react';\n\ntype Props = {\n  width?: number,\n  height?: number,\n  className?: string,\n}\n\nconst DEFAULT_WIDTH = 17;\nconst DEFAULT_HEIGHT = 16;\n\nexport const WalletIcon = ({width = DEFAULT_WIDTH, height = DEFAULT_HEIGHT, className}: Props) => (\n    <div className={className}>\n      <svg width={width} height={height} viewBox=\"0 0 17 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"M15.5 4.06667V2.16667C15.5 1.25 14.75 0.5 13.8333 0.5H2.16667C1.24167 0.5 0.5 1.25 0.5 2.16667V13.8333C0.5 14.75 1.24167 15.5 2.16667 15.5H13.8333C14.75 15.5 15.5 14.75 15.5 13.8333V11.9333C15.9917 11.6417 16.3333 11.1167 16.3333 10.5V5.5C16.3333 4.88333 15.9917 4.35833 15.5 4.06667ZM14.6667 5.5V10.5H8.83333V5.5H14.6667ZM2.16667 13.8333V2.16667H13.8333V3.83333H8.83333C7.91667 3.83333 7.16667 4.58333 7.16667 5.5V10.5C7.16667 11.4167 7.91667 12.1667 8.83333 12.1667H13.8333V13.8333H2.16667Z\" fill=\"#626F84\"/>\n      </svg>\n    </div>\n  );\n","import React from 'react';\n\ntype Props = {\n  width?: number,\n  height?: number,\n  className?: string,\n}\n\nconst DEFAULT_WIDTH = 20;\nconst DEFAULT_HEIGHT = 16;\n\nexport const IncomeIcon = ({width = DEFAULT_WIDTH, height = DEFAULT_HEIGHT, className}: Props) => (\n  <div className={className}>\n    <svg width={width} height={height} viewBox=\"0 0 20 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path d=\"M17.5 0.508362H2.49998C1.58331 0.508362 0.833313 1.25836 0.833313 2.17503V5.50003H2.49998V2.15836H17.5V13.85H2.49998V10.5H0.833313V13.8417C0.833313 14.7584 1.58331 15.4917 2.49998 15.4917H17.5C18.4166 15.4917 19.1666 14.7584 19.1666 13.8417V2.17503C19.1666 1.25003 18.4166 0.508362 17.5 0.508362ZM9.16665 11.3334L12.5 8.00003L9.16665 4.6667V7.1667H0.833313V8.83336H9.16665V11.3334ZM17.5 0.508362H2.49998C1.58331 0.508362 0.833313 1.25836 0.833313 2.17503V5.50003H2.49998V2.15836H17.5V13.85H2.49998V10.5H0.833313V13.8417C0.833313 14.7584 1.58331 15.4917 2.49998 15.4917H17.5C18.4166 15.4917 19.1666 14.7584 19.1666 13.8417V2.17503C19.1666 1.25003 18.4166 0.508362 17.5 0.508362ZM9.16665 11.3334L12.5 8.00003L9.16665 4.6667V7.1667H0.833313V8.83336H9.16665V11.3334Z\" fill=\"#626F84\"/>\n    </svg>\n  </div>\n);\n","import React from 'react';\n\ntype Props = {\n  width?: number,\n  height?: number,\n  className?: string,\n}\n\nconst DEFAULT_WIDTH = 17;\nconst DEFAULT_HEIGHT = 16;\n\nexport const OutcomeIcon = ({width = DEFAULT_WIDTH, height = DEFAULT_HEIGHT, className}: Props) => (\n  <div className={className}>\n    <svg width={width} height={height} viewBox=\"0 0 17 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path d=\"M12.1667 12.1666L16.3333 7.99998L12.1667 3.83331L10.9917 5.00831L13.1417 7.16665H5.5V8.83331H13.1417L10.9917 10.9916L12.1667 12.1666Z\" fill=\"#626F84\"/>\n      <path d=\"M13.8333 13.8333H2.16667V2.16667H13.8333V3.83333H15.5V2.16667C15.5 1.25 14.7583 0.5 13.8333 0.5H2.16667C1.25 0.5 0.5 1.25 0.5 2.16667V13.8333C0.5 14.75 1.25 15.5 2.16667 15.5H13.8333C14.7583 15.5 15.5 14.75 15.5 13.8333V12.1667H13.8333V13.8333Z\" fill=\"#626F84\"/>\n    </svg>\n  </div>\n);\n","import { useRoketoContext } from 'app/roketo-context';\nimport { isWNearTokenId } from 'shared/helpers/isWNearTokenId';\n\nexport function useToken(tokenAccountId: string) {\n  const { tokens } = useRoketoContext();\n\n  if (isWNearTokenId(tokenAccountId)) {\n    tokens[tokenAccountId].meta.symbol = 'NEAR';\n  }\n\n  return tokens[tokenAccountId];\n}\n","import BigNumber from 'bignumber.js';\n\nimport {\n  SECONDS_IN_DAY, SECONDS_IN_HOUR, SECONDS_IN_MINUTE,\n  TimePeriod,\n} from 'shared/constants';\n\nexport const getBalancePerDesiredPeriod = (balancePerSecond: string, period: TimePeriod) => {\n  const balanceSpeedPerSecond = new BigNumber(balancePerSecond);\n\n  switch (period) {\n    case TimePeriod.Minute:\n      return balanceSpeedPerSecond.multipliedBy(SECONDS_IN_MINUTE);\n    case TimePeriod.Hour:\n      return balanceSpeedPerSecond.multipliedBy(SECONDS_IN_HOUR);\n    case TimePeriod.Day:\n      return balanceSpeedPerSecond.multipliedBy(SECONDS_IN_DAY);\n    default:\n      return balanceSpeedPerSecond;\n  }\n};\n","import React from 'react';\n\nimport {useRoketoContext} from 'app/roketo-context';\nimport {getBalancePerDesiredPeriod} from 'shared/helpers/speed';\n\nimport {TIME_PERIOD_SIGNS, TimePeriod} from 'shared/constants';\n\nexport enum StreamType {\n  income = 'total_incoming',\n  outcome = 'total_outgoing',\n}\n\ntype Props = {\n  type: StreamType,\n  period: TimePeriod,\n\n  className?: string,\n}\n\nexport const TokenAmountSpeed = ({type, period, className}: Props) => {\n  const {roketo, priceOracle, tokens} = useRoketoContext();\n\n  const tokensBalanceMap = roketo.account[type];\n  const tokenAccountIds = Object.keys(tokensBalanceMap);\n\n  const totalAmountInUSD = tokenAccountIds.reduce((total, tokenAccountId) => {\n    const {formatter} = tokens[tokenAccountId];\n\n    const balancePerSec = tokensBalanceMap[tokenAccountId];\n\n    const balancePerDesiredPeriod = getBalancePerDesiredPeriod(balancePerSec, period).toFixed();\n    const formattedBalance = formatter.toHumanReadableValue(balancePerDesiredPeriod, 3);\n\n    const usdAmount = priceOracle.getPriceInUsd(tokenAccountId, formattedBalance);\n\n    return total + Number(usdAmount);\n  }, 0);\n\n  return (\n    <div className={className}>\n      {`${totalAmountInUSD} $ ${TIME_PERIOD_SIGNS[period]}`}\n    </div>\n  );\n};\n","import React from 'react';\n\nimport {env} from 'shared/config';\nimport {TimePeriod} from 'shared/constants';\n\nimport {WalletIcon} from '@ui/icons/Wallet';\nimport {IncomeIcon} from '@ui/icons/Income';\nimport {OutcomeIcon} from '@ui/icons/Outcome';\nimport {Balance, DisplayMode} from 'shared/components/Balance';\n\nimport {StreamType, TokenAmountSpeed} from '../TokenAmountSpeed';\n\nimport styles from './styles.module.scss';\n\nexport const FinancialActivity = () => (\n    <div className={styles.root}>\n      {/* Total Outcome Speed */}\n      <div className={styles.wrapper}>\n        <OutcomeIcon />\n        <TokenAmountSpeed\n          className={styles.balance}\n          type={StreamType.outcome}\n          period={TimePeriod.Hour}\n        />\n      </div>\n\n      {/* Total Income Speed */}\n      <div className={styles.wrapper}>\n        <IncomeIcon />\n        <TokenAmountSpeed\n          className={styles.balance}\n          type={StreamType.income}\n          period={TimePeriod.Hour}\n        />\n      </div>\n\n      {/* Balance */}\n      <div className={styles.wrapper}>\n        <WalletIcon />\n        <Balance\n          className={styles.balance}\n          tokenAccountId={env.WNEAR_ID}\n          mode={DisplayMode.USD}\n        />\n      </div>\n    </div>\n  );\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport {DarkLogo} from '@ui/icons/Logo';\nimport {Layout} from '@ui/components/Layout';\nimport {Authorization} from 'features/authorization';\nimport { useRoketoContext } from 'app/roketo-context';\n\nimport {ROUTES_MAP} from 'shared/helpers/routing';\n\nimport {PageList} from './ui/PagesList';\nimport {FinancialActivity} from './ui/FinancialActivity';\n\nimport styles from './styles.module.scss';\n\nconst ROUTES_TO_DISPLAY = [ROUTES_MAP.streams];\n\nexport const Header = () => {\n  const { auth } = useRoketoContext();\n\n  return (\n    <div className={styles.wrapper}>\n      <Layout className={styles.root}>\n\n        <div className={styles.left}>\n          <Link to=\"/\">\n            <DarkLogo className={styles.logo}/>\n          </Link>\n          {auth.signedIn && <PageList pageRoutes={ROUTES_TO_DISPLAY} />}\n        </div>\n\n        <div className={styles.right}>\n          {auth.signedIn && <FinancialActivity />}\n          <Authorization />\n        </div>\n      </Layout>\n    </div>\n  );\n};\n","import React from 'react';\nimport classNames from 'classnames';\nimport { useRouteMatch } from 'react-router-dom';\n\nimport { ROUTES_MAP } from 'shared/helpers/routing';\nimport {DarkLogo} from '@ui/icons/Logo';\nimport { Header as FullHeader } from 'widgets/header/Header';\n\nfunction MinifiedHeader() {\n  return (\n    <div\n      className={classNames(\n        'py-4 px-6',\n        'absolute w-full pt-8',\n        'flex justify-center',\n      )}\n    >\n      <DarkLogo />\n    </div>\n  );\n}\n\nexport function Header() {\n  const onAuthorizePage = useRouteMatch(ROUTES_MAP.authorize.path);\n\n  if (onAuthorizePage) {\n    return <MinifiedHeader />;\n  }\n\n  return <FullHeader />;\n}\n","import { Route } from 'react-router-dom';\n\n// A wrapper for <Route> that redirects to the login\n// screen if you're not yet authenticated.\n\ntype PrivateRouteProps = {\n  children: React.ReactNode;\n  allowed: boolean;\n  redirect: React.ReactNode;\n  path: string;\n  exact: boolean;\n}\n\nexport function PrivateRoute({\n  children,\n  allowed,\n  redirect,\n  path,\n  exact = false\n}: PrivateRouteProps) {\n  return (\n    <Route\n      exact={exact}\n      path={path}\n      render={() => (allowed ? children : redirect)}\n    />\n  );\n}\n","import React from 'react';\nimport ReactModal from 'react-modal';\n\nimport styles from './styles.module.scss';\n\ntype Props = {\n  isOpen: boolean,\n  children?: React.ReactNode,\n\n  title?: string,\n  onCloseModal?: () => void,\n};\n\n// eslint-disable-next-line react/prefer-stateless-function\nexport const Modal = (props: Props) => {\n  const {\n    title,\n    children,\n    isOpen = true,\n    onCloseModal,\n  } = props;\n\n\n  return (\n    <ReactModal\n      isOpen={isOpen}\n      onRequestClose={onCloseModal}\n      className={styles.content}\n      overlayClassName={styles.overlay}\n      bodyOpenClassName={styles.bodyOverflowHidden}\n    >\n      <div>\n        {/* eslint-disable-next-line jsx-a11y/click-events-have-key-events,jsx-a11y/no-static-element-interactions */}\n        <span className={styles.close} onClick={onCloseModal}/>\n\n        <h2 className={styles.title}>{title}</h2>\n\n        <div className={styles.contentContainer}>\n          {children}\n        </div>\n      </div>\n    </ReactModal>\n  );\n};\n","import React from 'react';\nimport RCTooltip from 'rc-tooltip';\nimport cn from 'classnames';\nimport type { TooltipProps as RCTooltipProps } from 'rc-tooltip/lib/Tooltip';\nimport 'rc-tooltip/assets/bootstrap_white.css';\n\nimport styles from './styles.module.scss';\n\ntype TooltipProps = {\n  placement?: RCTooltipProps[\"placement\"];\n  children?: React.ReactElement;\n  overlay: RCTooltipProps[\"overlay\"];\n  align?: RCTooltipProps[\"align\"];\n  overlayClassName?: RCTooltipProps[\"overlayClassName\"];\n};\n\nexport function Tooltip({\n  placement = 'top',\n  children,\n  overlay,\n  align,\n  overlayClassName\n}: TooltipProps) {\n  return (\n    <RCTooltip\n      align={align}\n      placement={placement}\n      overlay={overlay}\n      overlayClassName={cn(styles.defaultOverlay, overlayClassName)}\n    >\n      {children || <span className={styles.defaultIcon}>?</span>}\n    </RCTooltip>\n  );\n}\n","import React from 'react';\nimport { useRoketoContext } from 'app/roketo-context';\n\ntype NearTokenImageProps = {\n  className?: string;\n};\n\nfunction NearTokenImage(props: NearTokenImageProps) {\n  return (\n    <svg\n      version=\"1.0\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"20pt\"\n      height=\"20pt\"\n      viewBox=\"0 0 864.000000 864.000000\"\n      preserveAspectRatio=\"xMidYMid meet\"\n      {...props}\n    >\n      <g\n        transform=\"translate(0.000000,864.000000) scale(0.100000,-0.100000)\"\n        fill=\"#FFFFFF\"\n        stroke=\"none\"\n      >\n        <path d=\"M2490 6461 c-164 -53 -265 -156 -314 -320 -14 -49 -16 -226 -16 -1821 0 -1595 2 -1772 16 -1821 25 -85 62 -148 118 -205 179 -178 476 -178 650 0 30 30 249 347 519 749 518 772 502 742 438 799 -21 19 -42 28 -66 28 -40 0 -6 28 -555 -449 -283 -246 -411 -351 -425 -349 -20 3 -20 11 -20 1238 l0 1235 21 3 c16 2 286 -315 1376 -1621 746 -892 1372 -1637 1392 -1654 94 -83 187 -113 351 -113 169 0 275 39 371 134 56 57 93 120 118 205 14 49 16 226 16 1821 0 1595 -2 1772 -16 1821 -25 85 -62 148 -118 205 -179 178 -476 178 -650 0 -30 -30 -249 -347 -519 -749 -518 -772 -502 -742 -438 -799 21 -19 42 -28 66 -28 40 0 6 -28 555 449 283 246 411 351 425 349 20 -3 20 -11 20 -1238 l0 -1235 -21 -3 c-16 -2 -286 315 -1376 1621 -746 892 -1372 1637 -1392 1654 -95 85 -187 113 -356 112 -82 0 -131 -5 -170 -18z\" />\n      </g>\n    </svg>\n  );\n}\n\ntype FallbackTokenImageProps = {\n  className?: string;\n};\n\nfunction FallbackTokenImage(props: FallbackTokenImageProps) {\n  return (\n    <svg\n      version=\"1.0\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"20pt\"\n      height=\"20pt\"\n      viewBox=\"0 0 864.000000 864.000000\"\n      preserveAspectRatio=\"xMidYMid meet\"\n      {...props}\n    >\n      <g\n        transform=\"translate(0.000000,864.000000) scale(0.100000,-0.100000)\"\n        fill=\"#FFFFFF\"\n        stroke=\"none\"\n      >\n        <path d=\"M2490 6461 c-164 -53 -265 -156 -314 -320 -14 -49 -16 -226 -16 -1821 0 -1595 2 -1772 16 -1821 25 -85 62 -148 118 -205 179 -178 476 -178 650 0 30 30 249 347 519 749 518 772 502 742 438 799 -21 19 -42 28 -66 28 -40 0 -6 28 -555 -449 -283 -246 -411 -351 -425 -349 -20 3 -20 11 -20 1238 l0 1235 21 3 c16 2 286 -315 1376 -1621 746 -892 1372 -1637 1392 -1654 94 -83 187 -113 351 -113 169 0 275 39 371 134 56 57 93 120 118 205 14 49 16 226 16 1821 0 1595 -2 1772 -16 1821 -25 85 -62 148 -118 205 -179 178 -476 178 -650 0 -30 -30 -249 -347 -519 -749 -518 -772 -502 -742 -438 -799 21 -19 42 -28 66 -28 40 0 6 -28 555 449 283 246 411 351 425 349 20 -3 20 -11 20 -1238 l0 -1235 -21 -3 c-16 -2 -286 315 -1376 1621 -746 892 -1372 1637 -1392 1654 -95 85 -187 113 -356 112 -82 0 -131 -5 -170 -18z\" />\n      </g>\n    </svg>\n  );\n}\n\nconst currentTokens = {\n  'wrap.testnet': NearTokenImage,\n  'wrap.near': NearTokenImage,\n};\n\nfunction isValidTokenName(tokenName: string): tokenName is keyof typeof currentTokens {\n  return tokenName in currentTokens;\n}\n\ntype TokenIconProps = {\n  tokenAccountId: string;\n  className?: string;\n};\n\nexport function TokenIcon({ tokenAccountId, className, ...rest }: TokenIconProps) {\n  const { tokens } = useRoketoContext();\n  const image = tokens[tokenAccountId]?.meta?.icon;\n\n  if (image) {\n    return (\n      <img src={image} alt={tokenAccountId} className={className} {...rest} />\n    );\n  }\n\n  const Component = isValidTokenName(tokenAccountId) ? currentTokens[tokenAccountId] : FallbackTokenImage;\n\n  return <Component className={className} {...rest} />;\n}\n","import React from 'react';\nimport classNames from 'classnames';\nimport { TokenIcon } from 'shared/icons/Tokens';\n\ntype TokenImageProps = {\n  tokenAccountId: string;\n  size?: number;\n  className?: string;\n};\n\nexport function TokenImage({\n  tokenAccountId,\n  size = 8,\n  className,\n}: TokenImageProps) {\n  return (\n    <div\n      className={classNames(\n        'p-1 flex-shrink-0 rounded-full bg-black inline-flex items-center justify-center',\n        `w-${size} h-${size}`,\n        className,\n      )}\n    >\n      <TokenIcon className=\"w-full h-full rounded-full\" tokenAccountId={tokenAccountId} />\n    </div>\n  );\n}\n","import React from 'react';\nimport BigNumber from 'bignumber.js';\n\nimport {Button} from '@ui/components/Button';\n\nimport { Tooltip } from 'shared/kit/Tooltip';\nimport { useRoketoContext } from 'app/roketo-context';\nimport { useStreams } from 'features/roketo-resource';\nimport { TokenImage } from 'shared/kit/TokenImage';\nimport { testIds } from 'shared/constants';\n\nimport { getAvailableToWithdraw, isActiveStream } from 'shared/api/roketo/helpers';\n\nimport styles from './styles.module.scss';\n\nexport function WithdrawAllButton({ children }: { children: React.ReactNode}) {\n  const { tokens, roketo } = useRoketoContext();\n  const streamsSWR = useStreams();\n\n  const streams = streamsSWR.data;\n  const { inputs = [] } = streams || {};\n\n  const activeInputs = inputs.filter(isActiveStream);\n\n  type TmpData = {\n    available: BigNumber;\n    tokenAccountId: string;\n  }\n\n  const tokensData = {} as {[tokenAccountId: string]: TmpData };\n  const tmpResult = [] as TmpData[];\n  const streamIds = [] as string[];\n\n  // eslint-disable-next-line no-restricted-syntax\n  for (const stream of activeInputs) {\n    const tokenAccountId = stream.token_account_id;\n    const available = getAvailableToWithdraw(stream);\n\n    if (available.toFixed() !== '0') {\n      streamIds.push(stream.id);\n    }\n\n    if (!tokensData[tokenAccountId]) {\n      const value = {\n        available,\n        tokenAccountId,\n      }\n\n      tmpResult.push(value);\n      tokensData[tokenAccountId] = value;\n    } else {\n      tokensData[tokenAccountId].available = tokensData[tokenAccountId].available.plus(available);\n    }\n  }\n\n  const preparedTokenData = tmpResult.map((value: TmpData) => {\n    const { formatter, meta: { symbol } } = tokens[value.tokenAccountId];\n    const amount = formatter.amount(value.available.toFixed());\n\n    return {\n      tokenAccountId: value.tokenAccountId,\n      amount,\n      symbol\n    }\n  });\n\n  const handleWithdraw = () => {\n    if (streamIds.length > 0) {\n      roketo.api.withdraw({ streamIds })\n    }\n  }\n\n  return (\n    <Tooltip\n      placement=\"bottom\"\n      align={{ offset: [0, 20] }}\n      overlay={(\n        <div className={styles.root}>\n          <p className={styles.description}>\n            Move all received tokens to your wallet.\n          </p>\n\n          <div className={styles.preparedTokensWrapper}>\n            {preparedTokenData.length !== 0 && preparedTokenData.map((data) => \n              <div\n                key={data.tokenAccountId}\n                className={styles.preparedToken}\n              >\n                <TokenImage tokenAccountId={data.tokenAccountId} />\n\n                <div className={styles.info}>\n                  <span className={styles.amount}>{data.amount}</span>\n                  <span className={styles.symbol}>{data.symbol}</span>\n                </div>\n              </div>\n            )}\n\n            {preparedTokenData.length === 0 &&\n              <p className={styles.description}>\n                You have nothing to withdraw\n              </p>\n            }\n          </div>\n        </div>\n      )}\n    >\n      <Button\n        onClick={handleWithdraw}\n        testId={testIds.withdrawAllButton}\n      >\n        {children}\n      </Button>\n    </Tooltip>\n  );\n}\n","import React from 'react';\nimport cn from 'classnames';\n\nimport styles from './styles.module.scss';\n\nexport enum OrderType {\n  asc = 'ascending',\n  desc = 'descending',\n}\n\ntype Props = {\n  type?: OrderType,\n  width?: number,\n  height?: number,\n  className?: string,\n}\n\nconst DEFAULT_WIDTH = 24;\nconst DEFAULT_HEIGHT = 24;\n\nexport const SortIcon = ({\n  width = DEFAULT_WIDTH,\n  height = DEFAULT_HEIGHT,\n  type = OrderType.desc,\n  className,\n}: Props) => (\n  <div className={cn({[styles.rotate]: type === OrderType.asc}, className)}>\n    <svg width={width} height={height} viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path d=\"M3 18H9V16H3V18ZM3 6V8H21V6H3ZM3 13H15V11H3V13Z\" fill=\"#2B313B\"/>\n    </svg>\n  </div>\n);\n","import React from 'react';\nimport classNames from 'classnames';\n\nimport styles from './styles.module.scss';\n\ntype RadioButtonProps<T> = {\n  active: boolean;\n  label: React.ReactNode;\n  value: T;\n  onChange: (value: T) => void;\n};\n\nexport function RadioButton<T>({\n  active, label, value, onChange,\n}: RadioButtonProps<T>) {\n  return (\n    <label className={styles.root}>\n      <input\n        type=\"radio\"\n        className=\"invisible w-0 h-0 absolute\"\n        checked={active}\n        onChange={() => onChange(value)}\n      />\n      <div\n        className={classNames(styles.radio, {[styles.radioActive]: active})}\n      />\n\n      <div className={styles.text}>\n        {label}\n      </div>\n    </label>\n  );\n}\n","import React, {useState} from 'react';\nimport classNames from 'classnames';\nimport {RadioButton} from '../RadioButton';\nimport {DropdownOpener} from '../DropdownOpener';\nimport {DropdownMenu} from '../DropdownMenu';\n\nimport styles from './styles.module.scss';\n\ntype FilterOptionWithCounterProps = {\n  count: React.ReactNode;\n  option: React.ReactNode;\n};\n\nexport function FilterOptionWithCounter({count, option}: FilterOptionWithCounterProps) {\n  return (\n    <span>\n      {option}\n      {' '}\n      <span className=\"text-gray font-normal\">{count}</span>\n    </span>\n  );\n}\n\ntype FilterOption = {\n  label?: string;\n  fn: (a: any, b: any) => number;\n};\n\ntype FilterProps<T> = {\n  label: string;\n  options: T[];\n  renderOption: (option: T, active: boolean) => React.ReactNode;\n  renderActive?: (option: T) => React.ReactNode;\n  active: T;\n  onChange: (option: T) => void;\n  className?: string;\n};\n\nexport function Filter<T extends string | FilterOption>({\n  label,\n  options,\n  renderOption,\n  renderActive,\n  active,\n  onChange,\n  className,\n}: FilterProps<T>) {\n  const [opened, setOpened] = useState(false);\n\n  return (\n    <div className={classNames(styles.root, className)}>\n      {label &&\n        <div className=\"text-gray mr-2\">{label}</div>\n      }\n\n      <div className={styles.dropdownWrapper}>\n        <DropdownOpener opened={opened} onChange={setOpened}>\n          {renderActive ? renderActive(active) : active}\n        </DropdownOpener>\n\n        <DropdownMenu\n          opened={opened}\n          className={styles.dropdownMenu}\n          onClose={() => {\n            setOpened(false);\n          }}\n        >\n          {options.map((option) => (\n            <RadioButton\n              label={renderOption ? renderOption(option, active === option) : option}\n              active={active === option}\n              value={option}\n              onChange={onChange}\n            />\n          ))}\n        </DropdownMenu>\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport cn from 'classnames';\n\nimport {Button} from '@ui/components/Button';\n\nimport styles from './styles.module.scss';\n\ntype Props = {\n  directions: string[],\n  activeDirection: string,\n\n  onDirectionClick: (direction: string) => void,\n};\n\nexport const DirectionSorts = ({directions, activeDirection, onDirectionClick}: Props) => (\n  <div className={styles.root}>\n    {directions.map(direction => (\n      <Button\n        key={direction}\n        className={cn(styles.sort, {[styles.active]: direction === activeDirection})}\n        onClick={() => onDirectionClick(direction)}\n      >\n        {direction}\n      </Button>\n    ))}\n  </div>\n);\n","import { useState, useEffect, useMemo } from 'react';\n\nimport { RoketoStream } from 'shared/api/roketo/interfaces/entities';\n\ntype FilterFn = (stream: RoketoStream) => boolean;\n\ntype Option = string | FilterFn;\n\ntype Filter<T> = {\n  option: string;\n  selectOption: (option: string) => void;\n  options: Record<string, T>;\n  optionsArray: string[];\n  currentFilterFunction: T;\n};\n\nexport function useFilter<T extends Option>({ options }: { options: Record<string, T>}): Filter<T> {\n  const keys = useMemo(() => Object.keys(options), [options]);\n\n  const [option, selectOption] = useState(keys[0]);\n\n  const filter = useMemo(\n    () => {\n      const currentFilterFunction = options[option];\n\n      return {\n        option,\n        selectOption,\n        options,\n        optionsArray: keys,\n        currentFilterFunction,\n      };\n    },\n    [options, option, keys],\n  );\n\n  return filter;\n}\n\nexport function useFilters({ items, filters }: { items: (RoketoStream[] | undefined), filters: Filter<FilterFn>[] }) {\n  const [filteredItems, setFilteredItems] = useState<RoketoStream[] | undefined>(undefined);\n  const [filterCounts, setFilterCounts] = useState<Record<string, number>[]>([]);\n\n  useEffect(() => {\n    let filteredItemsValue = items;\n    const filterCountsValue: Record<string, number>[] = [];\n\n    filters.forEach((filter) => {\n      const filterRunResult: Record<string, RoketoStream[] | undefined> = {};\n\n      // run filter for every possible function\n      Object.keys(filter.options).forEach((option) => {\n        filterRunResult[option] = filteredItemsValue?.filter(filter.options[option]);\n      });\n\n      // calc counts for every option in filter\n      const currentFilterCount: Record<string, number> = {};\n      Object.keys(filterRunResult).forEach(\n        (option) => { currentFilterCount[option] = (filterRunResult[option] || []).length; },\n      );\n\n      filterCountsValue.push(currentFilterCount);\n      // set items to selected filter\n      filteredItemsValue = filterRunResult[filter.option];\n    });\n\n    setFilterCounts(filterCountsValue);\n    setFilteredItems(filteredItemsValue);\n  }, [items, filters]);\n\n  return {\n    filterCounts,\n    filteredItems,\n  };\n}\n","import { useRoketoContext } from 'app/roketo-context';\nimport { useMemo } from 'react';\n\nimport { STREAM_STATUS } from 'shared/api/roketo/constants';\nimport type { RoketoStream } from 'shared/api/roketo/interfaces/entities';\n\nimport { useFilter, useFilters } from './lib';\n\nconst STREAM_TYPE_FILTER = {\n  ALL: 'All',\n  INCOMING: 'Incoming',\n  OUTGOING: 'Outgoing',\n};\n\nconst STREAM_STATUS_FILTER = {\n  ALL: 'All',\n  [STREAM_STATUS.Initialized]: 'Initialized',\n  [STREAM_STATUS.Active]: 'Active',\n  [STREAM_STATUS.Paused]: 'Paused',\n};\n\nexport function useStreamFilters(streams: RoketoStream[] | undefined) {\n  const { auth } = useRoketoContext();\n\n  const statusOptions = useMemo(\n    () => ({\n      [STREAM_STATUS_FILTER.ALL]: () => true,\n      [STREAM_STATUS_FILTER[STREAM_STATUS.Initialized]]: (stream: RoketoStream) => stream.status === STREAM_STATUS.Initialized,\n      [STREAM_STATUS_FILTER[STREAM_STATUS.Active]]: (stream: RoketoStream) => stream.status === STREAM_STATUS.Active,\n      [STREAM_STATUS_FILTER[STREAM_STATUS.Paused]]: (stream: RoketoStream) => stream.status === STREAM_STATUS.Paused,\n    }),\n    [],\n  );\n  const directionOptions = useMemo(\n    () => ({\n      [STREAM_TYPE_FILTER.ALL]: () => true,\n      [STREAM_TYPE_FILTER.INCOMING]: (stream: RoketoStream) => auth.accountId === stream.receiver_id,\n      [STREAM_TYPE_FILTER.OUTGOING]: (stream: RoketoStream) => auth.accountId === stream.owner_id,\n    }),\n    [auth.accountId],\n  );\n\n  const statusFilter = useFilter({\n    options: statusOptions,\n  });\n\n  const directionFilter = useFilter({\n    options: directionOptions,\n  });\n\n  const combinedFilters = useMemo(\n    () => [directionFilter, statusFilter],\n    [directionFilter, statusFilter],\n  );\n\n  const result = useFilters({\n    items: streams,\n    filters: combinedFilters,\n  });\n\n  return {\n    statusFilter,\n    directionFilter,\n    result,\n  };\n}\n","import React, { useEffect, useState } from 'react';\nimport classNames from 'classnames';\n\nimport {SortIcon, OrderType} from '@ui/icons/Sort';\n\nimport { Filter, FilterOptionWithCounter } from 'shared/kit/Filter';\nimport type { RoketoStream } from 'shared/api/roketo/interfaces/entities';\n\nimport {DirectionSorts} from '../DirectionSorts';\nimport { useStreamFilters } from '../useStreamFilters';\n\nimport styles from './styles.module.scss';\n\nfunction compareBy(a: RoketoStream, b: RoketoStream, key: keyof RoketoStream) {\n  return Number(b[key]) - Number(a[key]);\n}\n\nconst sorts = {\n  bigBalanceFirst: {\n    label: 'With big balances',\n    order: OrderType.desc,\n    fn: (a: RoketoStream, b: RoketoStream) => compareBy(a, b, 'balance'),\n  },\n  highSpeedFirst: {\n    label: 'With high speed',\n    order: OrderType.desc,\n    fn: (a: RoketoStream, b: RoketoStream) => compareBy(a, b, 'tokens_per_sec'),\n  },\n  highSpeedLast: {\n    label: 'With low speed',\n    order: OrderType.asc,\n    fn: (a: RoketoStream, b: RoketoStream) => compareBy(a, b, 'tokens_per_sec') * -1,\n  },\n  mostRecent: {\n    label: 'Most recent',\n    order: OrderType.desc,\n    fn: (a: RoketoStream, b: RoketoStream) => compareBy(a, b, 'timestamp_created'),\n  },\n};\n\ntype StreamFiltersProps = {\n  items: RoketoStream[] | undefined;\n  onFilterDone: (result: RoketoStream[] | undefined) => void;\n  className?: string;\n};\n\nexport function StreamFilters({ items, onFilterDone, className }: StreamFiltersProps) {\n  const filter = useStreamFilters(items);\n  const {filteredItems} = filter.result;\n\n  const [sorting, setSorting] = useState(sorts.mostRecent);\n  const sortOptions = Object.values(sorts);\n\n  useEffect(() => {\n    if (!filteredItems) {\n      onFilterDone(filteredItems);\n\n      return;\n    }\n\n    const sortedStreams = [...filteredItems];\n\n    sortedStreams.sort(sorting.fn);\n\n    onFilterDone(sortedStreams);\n  }, [filteredItems, onFilterDone, sorting.fn]);\n\n  return (\n    <div className={classNames('md:flex', className)}>\n      <DirectionSorts\n        directions={filter.directionFilter.optionsArray}\n        activeDirection={filter.directionFilter.option}\n        onDirectionClick={filter.directionFilter.selectOption}\n      />\n\n      <div className=\"flex-grow\" />\n\n      <div className={styles.filtersWrapper}>\n        <Filter\n          options={filter.statusFilter.optionsArray}\n          label=\"Status:\"\n          active={filter.statusFilter.option}\n          onChange={filter.statusFilter.selectOption}\n          renderOption={(option) => {\n            const counts = filter.result.filterCounts[1];\n            return (\n              <FilterOptionWithCounter\n                option={option}\n                count={counts ? counts[option] : ''}\n              />\n            );\n          }}\n        />\n\n        <Filter\n          options={sortOptions}\n          label=\"Show first:\"\n          active={sorting}\n          onChange={setSorting}\n          renderOption={(option) => <span>{option.label}</span>}\n          renderActive={(option) => (\n            <div className={styles.sortWithOrder}>\n              {option.order && <SortIcon type={option.order} />}\n              <span>{option.label}</span>\n            </div>\n          )}\n        />\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\n\ntype Props = {\n  width?: number,\n  height?: number,\n  className?: string,\n}\n\nconst DEFAULT_WIDTH = 20;\nconst DEFAULT_HEIGHT = 20;\n\nexport const ErrorSign = ({width = DEFAULT_WIDTH, height = DEFAULT_HEIGHT, className}: Props) => (\n  <div className={className}>\n    <svg width={width} height={height} viewBox=\"0 0 20 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path d=\"M10 0C4.48 0 0 4.48 0 10C0 15.52 4.48 20 10 20C15.52 20 20 15.52 20 10C20 4.48 15.52 0 10 0ZM11 15H9V13H11V15ZM11 11H9V5H11V11Z\" fill=\"#D80A1F\"/>\n    </svg>\n  </div>\n);\n","import React from 'react';\nimport cn from 'classnames';\n\nimport styles from './styles.module.scss';\n\ntype FormFieldProps = {\n  children: React.ReactNode;\n\n  label?: React.ReactNode;\n  description?: React.ReactNode,\n\n  isRequired?: boolean,\n  error?: any;\n\n  className?: string;\n};\n\nexport const FormField = ({\n  children, isRequired = false, label, description, error, className, ...rest\n}: FormFieldProps) => (\n    <div className={cn(styles.root, className)} {...rest}>\n      {label &&\n        <label className={cn(styles.label, {[styles.required]: isRequired})}>{label}</label>\n      }\n\n      {children}\n\n      {description &&\n        <div className={styles.description}>{description}</div>\n      }\n\n      {error &&\n        <div className={styles.error}>{error}</div>\n      }\n    </div>\n  )\n","import React from 'react';\n\nimport {FieldInputProps, FormikState} from 'formik';\n\nimport {FormField} from '@ui/components/FormField';\nimport {Input} from '@ui/components/Input';\n\ntype InputProps = {\n  placeholder: string,\n\n  field: FieldInputProps<any>,\n  form: FormikState<any>,\n\n  label?: React.ReactNode,\n  description?: React.ReactNode,\n\n  isRequired?: boolean,\n  className?: string;\n};\n\nexport const FormikInput = (props: InputProps) => {\n  const {\n    placeholder,\n    description,\n    isRequired,\n    className,\n    field,\n    form,\n    label,\n    ...rest\n  } = props;\n\n  const error = form.errors[field.name];\n\n  return (\n    <FormField\n      isRequired={isRequired}\n      className={className}\n      description={description}\n      label={label}\n      error={error}\n    >\n      <Input\n        required={isRequired}\n        hasError={Boolean(error)}\n        placeholder={placeholder}\n        {...field}\n        {...rest}\n      />\n    </FormField>\n  );\n}\n","import React, {FC, InputHTMLAttributes} from 'react';\nimport cn from 'classnames';\n\nimport styles from './styles.module.scss';\n\ninterface CheckboxProps extends InputHTMLAttributes<HTMLInputElement> {\n  description?: string,\n  hasError?: boolean,\n  className?: string,\n}\n\nexport const Checkbox: FC<CheckboxProps> = ({\n  description,\n  className,\n  hasError = false,\n  ...rest\n}) => (\n  <label className={cn(styles.root, className)}>\n    <input\n      type=\"checkbox\"\n      className={cn(styles.checkbox, {[styles.error]: hasError})}\n      {...rest}\n    />\n    {description &&\n      <span className={styles.description}>{description}</span>\n    }\n  </label>\n);\n","import React from 'react';\n\nimport {FieldInputProps, FormikState} from 'formik';\n\nimport {FormField} from '@ui/components/FormField';\nimport {Checkbox} from '@ui/components/Checkbox';\n\ntype CheckboxProps = {\n  field: FieldInputProps<any>,\n  form: FormikState<any>,\n\n  label?: React.ReactNode,\n  description?: string,\n  isRequired?: boolean,\n  className?: string;\n};\n\nexport const FormikCheckbox = (props: CheckboxProps) => {\n  const {\n    description,\n    isRequired,\n    className,\n    label,\n    field,\n    form,\n    ...rest\n  } = props;\n\n  const error = form.errors[field.name];\n\n  return (\n    <FormField\n      isRequired={isRequired}\n      className={className}\n      label={label}\n      error={error}\n    >\n      <Checkbox\n        description={description}\n        required={isRequired}\n        hasError={Boolean(error)}\n        {...field}\n        {...rest}\n      />\n    </FormField>\n  );\n}\n","const NUMBER_PATTERN = /^[0-9]+$/;\n\nexport const isLikeNumber = (stringLikeNumber: string) => NUMBER_PATTERN.test(stringLikeNumber);\n","import * as Yup from 'yup';\nimport type {Near} from 'near-api-js';\nimport BigNumber from 'bignumber.js';\nimport {addMonths, differenceInDays} from 'date-fns';\n\nimport {SECONDS_IN_DAY, SECONDS_IN_HOUR, SECONDS_IN_MINUTE} from 'shared/constants';\n\nimport type {RichToken} from 'shared/api/ft';\n\nexport const getFormValidationSchema = (near: Near, accountId: string) => Yup.object().shape({\n  receiver: Yup.string()\n    .required('Receiver is a required')\n    .test(\n      'receiver-not-equal-owner',\n      'Receiver can not be the same as owner',\n      (value) => value !== accountId,\n    )\n    .test(\n      'receiver-is-valida-address',\n      'Address does not exists',\n      async (value) => {\n        try {\n          return Boolean(value && await near.connection.provider.query({\n            request_type: 'view_account',\n            finality: 'final',\n            account_id: value,\n          }));\n        } catch (error) {\n          return false;\n        }\n      },\n    ),\n  streamName: Yup.string().max(100, 'Stream name must be less or equal 100 symbols'),\n  token: Yup.string().required(),\n  deposit: Yup.number()\n    .required()\n    .moreThan(0, 'Deposit should be more than 0'),\n  speed: Yup.number().required().moreThan(0, 'Choose stream duration'),\n  autoStart: Yup.boolean(),\n  comment: Yup.string().max(255),\n});\n\nexport const getDurationInSeconds = (months: number, days: number, hours: number, minutes: number) => {\n  const daysInMonths = differenceInDays(addMonths(new Date(), months), new Date());\n\n  const durationInSeconds = (daysInMonths + days) * SECONDS_IN_DAY\n    + minutes * SECONDS_IN_MINUTE\n    + hours * SECONDS_IN_HOUR;\n\n  return durationInSeconds;\n};\n\nexport const getTokensPerSecondCount = (depositInYocto: string, durationInSeconds: number) => {\n  const value = new BigNumber(depositInYocto)\n    .dividedToIntegerBy(durationInSeconds)\n    .toFixed();\n\n  return value !== 'Infinity' && value !== 'NaN' ? value : '0';\n};\n\nexport const getStreamingSpeed = (speedInSeconds: number, token: RichToken): string => {\n  if (speedInSeconds <= 0) {\n    return 'none';\n  }\n\n  const {formatter, meta} = token;\n  const {formattedValue, unit} = formatter.tokensPerMeaningfulPeriod(speedInSeconds);\n\n  return `${formattedValue} ${meta.symbol} / ${unit}`;\n};\n","import React, {ChangeEvent, Dispatch, SetStateAction, useEffect, useState} from 'react';\nimport cn from 'classnames';\nimport {FieldInputProps, FormikState} from 'formik';\n\nimport {useRoketoContext} from 'app/roketo-context';\n\nimport {FormField} from '@ui/components/FormField';\nimport {Input} from '@ui/components/Input';\n\nimport {usePrev} from 'shared/hooks/usePrev';\nimport {isLikeNumber} from 'shared/helpers/validation';\nimport { testIds } from 'shared/constants';\n\nimport {getTokensPerSecondCount, getDurationInSeconds, getStreamingSpeed} from '../lib';\n\nimport styles from './styles.module.scss';\n\ntype SpeedInputProps = {\n  label: string;\n  value: number;\n  onChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\n  className?: string;\n  testId: string;\n};\n\nconst SpeedInput = ({className, value, onChange, label, testId}: SpeedInputProps) => (\n  <div className={cn(styles.speedInput, className)}>\n    <Input\n      placeholder=\"0\"\n      value={value}\n      onChange={onChange}\n      className={styles.input}\n      data-testid={testId}\n    />\n    <label className={styles.label}>{label}</label>\n  </div>\n);\n\ntype StreamSpeedCalcFieldProps = {\n  deposit: number,\n  tokenAccountId: string,\n  onSpeedChange: (speed: string) => void,\n\n  field: FieldInputProps<any>,\n  form: FormikState<any>,\n\n  label?: React.ReactNode,\n  description?: React.ReactNode,\n\n  isRequired?: boolean,\n  className?: string;\n};\n\nexport const StreamSpeedCalcField = (props: StreamSpeedCalcFieldProps) => {\n  const {\n    form,\n    field,\n    label,\n    deposit,\n    className,\n    isRequired,\n    description,\n    onSpeedChange,\n    tokenAccountId,\n  } = props;\n\n  const {tokens} = useRoketoContext();\n  const token = tokens[tokenAccountId];\n  const {formatter} = token;\n\n  const error = form.errors[field.name];\n  const {value: currentStreamingSpeed} = field;\n\n  const [months, setMonths] = useState(0);\n  const [days, setDays] = useState(0);\n  const [minutes, setMinutes] = useState(0);\n  const [hours, setHours] = useState(0);\n\n  const depositInYocto = formatter.toYocto(deposit);\n  const durationInSeconds = getDurationInSeconds(months, days, hours, minutes);\n  const tokensPerSec = getTokensPerSecondCount(depositInYocto, durationInSeconds);\n  const prevSpeed = usePrev(tokensPerSec);\n\n  useEffect(() => {\n    if (prevSpeed !== tokensPerSec) {\n      onSpeedChange(tokensPerSec);\n    }\n  }, [tokensPerSec, onSpeedChange, prevSpeed]);\n\n  const handleInputChangeFactory = (\n    setValue: Dispatch<SetStateAction<number>>\n  ) => (event: ChangeEvent<HTMLInputElement>) => {\n    const {value} = event.target;\n\n    const safeValue = value || '0';\n\n    if (isLikeNumber(safeValue)) {\n      setValue(Number(safeValue));\n    }\n  };\n\n  const meaningfulSpeed = getStreamingSpeed(currentStreamingSpeed, token);\n  const labelWithStreamingSpeed = (\n    <div className={styles.formLabel}>\n      {label}\n      <span className={cn(styles.speed, styles.label)}>\n        {`Streaming speed: ${meaningfulSpeed}`}\n      </span>\n    </div>\n  );\n\n  return (\n    <FormField\n      isRequired={isRequired}\n      className={className}\n      description={description}\n      label={labelWithStreamingSpeed}\n      error={error}\n    >\n      <div className={styles.wrapper}>\n        <SpeedInput\n          value={months}\n          onChange={handleInputChangeFactory(setMonths)}\n          label=\"Months\"\n          testId={testIds.createStreamMonthsInput}\n        />\n        <SpeedInput\n          value={days}\n          onChange={handleInputChangeFactory(setDays)}\n          label=\"Days\"\n          testId={testIds.createStreamDaysInput}\n        />\n        <SpeedInput\n          value={hours}\n          onChange={handleInputChangeFactory(setHours)}\n          label=\"Hours\"\n          testId={testIds.createStreamHoursInput}\n        />\n        <SpeedInput\n          value={minutes}\n          onChange={handleInputChangeFactory(setMinutes)}\n          label=\"Minutes\"\n          testId={testIds.createStreamMinutesInput}\n        />\n      </div>\n    </FormField>\n  );\n};\n","import { useRef, useEffect } from 'react';\n\nexport function usePrev<T extends any>(value: T) {\n  const ref = useRef<null | T>(null);\n  useEffect(() => {\n    ref.current = value;\n  }, [value]);\n  return ref.current;\n}\n","import React, {useState} from 'react';\nimport {FieldInputProps, FormikState} from 'formik';\nimport cn from 'classnames';\n\nimport {FormField} from '@ui/components/FormField';\n\nimport type {RichToken} from 'shared/api/ft';\n\nimport {DropdownOpener} from 'shared/kit/DropdownOpener';\nimport {DropdownMenu} from 'shared/kit/DropdownMenu';\nimport {TokenImage} from 'shared/kit/TokenImage';\n\nimport {useRoketoContext} from 'app/roketo-context';\n\nimport styles from './styles.module.scss';\n\ntype TokenSelectorProps = {\n  activeTokenAccountId: string,\n  onTokenChoose: (tokenAccountId: string) => void,\n\n  label?: React.ReactNode,\n  description?: React.ReactNode,\n\n  field: FieldInputProps<any>,\n  form: FormikState<any>,\n\n  isRequired?: boolean,\n  className?: string;\n};\n\nconst TokenOption = ({\n  token,\n  onClick,\n  className,\n}: {token: RichToken, className?: string, onClick?: () => void}) => {\n  const classNames = cn(styles.tokenOption, className);\n\n  const content = (\n    <>\n      <TokenImage\n        tokenAccountId={token.roketoMeta.account_id}\n      />\n      <span>{`${token.meta.name}, ${token.meta.symbol}`}</span>\n    </>\n  );\n\n  if (onClick) {\n    return (\n      <button type='button' className={classNames} onClick={onClick}>\n        {content}\n      </button>\n    );\n  }\n\n  return (\n    <div className={classNames}>\n      {content}\n    </div>\n  );\n};\n\nexport const TokenSelector = (props: TokenSelectorProps) => {\n  const {\n    form,\n    label,\n    field,\n    className,\n    isRequired,\n    description,\n    onTokenChoose,\n    activeTokenAccountId,\n  } = props;\n\n  const {tokens} = useRoketoContext();\n\n  const [isDropdownOpened, setIsDropdownOpened] = useState(false);\n\n  const allAvailableTokens = Object.values(tokens);\n  const activeToken = tokens[activeTokenAccountId];\n\n  const handleChooseTokenOptions = (token: RichToken) => {\n    setIsDropdownOpened(false);\n\n    onTokenChoose(token.roketoMeta.account_id);\n  };\n\n  const error = form.errors[field.name];\n\n  return (\n    <FormField\n      isRequired={isRequired}\n      className={className}\n      description={description}\n      label={label}\n      error={error}\n    >\n      <div className={styles.dropdownWrapper}>\n        <DropdownOpener\n          onChange={setIsDropdownOpened}\n          className={styles.dropdownOpener}\n          opened={isDropdownOpened}\n        >\n          <TokenOption token={activeToken} />\n        </DropdownOpener>\n\n        <DropdownMenu\n          opened={isDropdownOpened}\n          onClose={() => setIsDropdownOpened(false)}\n          className={styles.dropdownMenu}\n        >\n          {allAvailableTokens.map(token => (\n            <TokenOption\n              token={token}\n              onClick={() => handleChooseTokenOptions(token)}\n              className={styles.withHover}\n            />\n          ))}\n        </DropdownMenu>\n      </div>\n    </FormField>\n  );\n};\n","import React from 'react';\n\nimport {useRoketoContext} from 'app/roketo-context';\n\ntype Props = {\n  tokenAccountId: string,\n\n  className?: string,\n}\n\nexport const FeeDisclaimer = ({tokenAccountId, className}: Props) => {\n  const {tokens} = useRoketoContext();\n\n  const token = tokens[tokenAccountId];\n  const {meta: tokenMeta, formatter, roketoMeta} = token;\n\n  return (tokenMeta &&\n    <div className={className}>\n      {`You will be charged \n        ${formatter.amount(roketoMeta.commission_on_create)} \n        ${tokenMeta.symbol} fee for that stream`\n      }\n    </div>\n  );\n};\n","import {env} from 'shared/config';\n\nexport const INITIAL_FORM_VALUES = {\n  receiver: '',\n  streamName: '',\n  token: env.WNEAR_ID,\n  speed: 0,\n  deposit: 0,\n  autoStart: true,\n  comment: '',\n};\n","import React, {useState} from 'react';\nimport cn from 'classnames';\nimport {Field, Formik} from 'formik';\n\nimport {useRoketoContext} from 'app/roketo-context';\n\nimport {Button, ButtonType, DisplayMode as ButtonDisplayMode} from '@ui/components/Button';\nimport {ErrorSign} from '@ui/icons/ErrorSign';\n\nimport {FormikInput} from 'shared/components/FormikInput';\nimport {FormikCheckbox} from 'shared/components/FormikCheckbox';\nimport {Balance, DisplayMode} from 'shared/components/Balance';\nimport { testIds } from 'shared/constants';\n\nimport {env} from 'shared/config';\n\nimport {StreamSpeedCalcField} from '../StreamSpeedCalcField';\nimport {TokenSelector} from '../TokenSelector';\nimport {FeeDisclaimer} from '../FeeDisclaimer'\n\nimport {INITIAL_FORM_VALUES} from '../constants';\n\nimport {getFormValidationSchema} from '../lib';\n\nimport styles from './styles.module.scss';\n\nconst Row = ({\n  children,\n  className,\n}: {children: React.ReactNode, className?: string}) => (\n  <div className={cn(styles.row, className)}>{children}</div>\n);\n\nconst StreamCreationError = ({error}: {error: string}) => (\n  <div className={styles.submitError}>\n    <ErrorSign />\n    <span>{error}</span>\n  </div>\n);\n\nexport type FormValues = {\n  receiver: string;\n  streamName: string;\n  autoStart: boolean;\n  comment: string;\n  deposit: number;\n  speed: number;\n  token: string;\n}\n\ntype CreateStreamProps = {\n  onFormSubmit: (values: FormValues) => Promise<void>;\n  onFormCancel: () => void;\n}\n\nexport const CreateStream = ({onFormCancel, onFormSubmit}: CreateStreamProps) => {\n  const {near, auth} = useRoketoContext();\n\n  const [submitError, setError] = useState<Error | null>(null);\n\n  const validationSchema = getFormValidationSchema(near, auth.accountId);\n\n  const handleFormSubmit = (formValues: FormValues) => {\n    onFormSubmit(formValues)\n      .catch(error => setError(error));\n  }\n\n  return (\n    <div className={styles.root}>\n      <h2 className={styles.title}>Create Stream</h2>\n      <p className={styles.description}>Stream your tokens to the receiver directly</p>\n\n      <Formik\n        initialValues={INITIAL_FORM_VALUES}\n        onSubmit={handleFormSubmit}\n\n        validationSchema={validationSchema}\n        validateOnBlur={false}\n        validateOnChange={false}\n        validateOnMount={false}\n      >\n        {({\n          values,\n          handleSubmit,\n          setFieldValue,\n          setFieldTouched,\n        }) => {\n          const activeTokenAccountId = values.token;\n\n          return (\n            <form onSubmit={handleSubmit} className={styles.form}>\n\n              <Row>\n                <Field\n                  isRequired\n                  name=\"receiver\"\n                  label=\"Receiver:\"\n                  component={FormikInput}\n                  placeholder={`receiver.${env.ACCOUNT_SUFFIX}`}\n                  className={styles.rowItem}\n                  data-testid={testIds.createStreamReceiverInput}\n                />\n              </Row>\n\n              <Row>\n                <Field\n                  isRequired\n                  name=\"deposit\"\n                  label=\"Amount to stream:\"\n                  component={FormikInput}\n                  placeholder='Amount to stream'\n                  className={styles.rowItem}\n                  description={(<Balance tokenAccountId={activeTokenAccountId} mode={DisplayMode.CRYPTO} />)}\n                  data-testid={testIds.createStreamAmountInput}\n                />\n\n                <Field\n                  isRequired\n                  name=\"token\"\n                  label=\"Token\"\n                  activeTokenAccountId={values.token}\n                  onTokenChoose={(tokenAccountId: string) => {\n                    setFieldValue('token', tokenAccountId, false);\n                    setFieldTouched('token', true, false);\n                  }}\n                  component={TokenSelector}\n                  className={styles.rowItem}\n                />\n              </Row>\n\n              <Row>\n                <Field\n                  tokenAccountId={activeTokenAccountId}\n                  isRequired\n                  name=\"speed\"\n                  label=\"Stream duration:\"\n                  deposit={values.deposit}\n                  component={StreamSpeedCalcField}\n                  onSpeedChange={(speed: number) => {\n                    setFieldValue('speed', speed, false);\n                    setFieldTouched('speed', true, false);\n                  }}\n                  className={styles.rowItem}\n                />\n              </Row>\n\n              <Row>\n                <Field\n                  name=\"autoStart\"\n                  description=\"Start stream immediately\"\n                  type=\"checkbox\"\n                  component={FormikCheckbox}\n                  className={styles.rowItem}\n                  data-testid={testIds.createStreamAutostartCheckbox}\n                />\n              </Row>\n\n              <Row>\n                <FeeDisclaimer tokenAccountId={activeTokenAccountId} className={styles.feeDisclaimer} />\n              </Row>\n\n              <div className={styles.actionButtonsWrapper}>\n                {submitError &&\n                  <StreamCreationError error={submitError.message} />\n                }\n\n                <Button\n                  displayMode={ButtonDisplayMode.simple}\n                  onClick={onFormCancel}\n                  testId={testIds.createStreamCancelButton}\n                >\n                  Cancel\n                </Button>\n\n                <Button\n                  type={ButtonType.submit}\n                  displayMode={ButtonDisplayMode.action}\n                  testId={testIds.createStreamSubmitButton}\n                >\n                  Create\n                </Button>\n              </div>\n            </form>\n          );\n        }}\n      </Formik>\n    </div>\n  );\n};\n","import BigNumber from 'bignumber.js';\n\nconst PERCENTAGE_MULTIPLIER = 100;\n\n// Retrieves a percentage ratio from A/B\nconst getExactPercentageRatio = (a: string | number, b: string | number): BigNumber => {\n  const aBN = new BigNumber(a);\n  const bBN = new BigNumber(b);\n\n  if (aBN.isEqualTo(0) || bBN.isEqualTo(0)) {\n    return new BigNumber(0);\n  }\n\n  const ratio = aBN.dividedBy(bBN);\n\n  return ratio.multipliedBy(PERCENTAGE_MULTIPLIER);\n};\n\n// Retrieves a percentage ratio from A/B rounded to an integer\nexport const getRoundedPercentageRatio = (a: string | number, b: string | number, roundRatio: number = 0): BigNumber => (\n  getExactPercentageRatio(a, b).dp(roundRatio)\n);\n","import React from 'react';\nimport cn from 'classnames';\n\nimport {getRoundedPercentageRatio} from 'shared/helpers/math';\n\nimport styles from './styles.module.scss';\n\ntype Props = {\n  total: number,\n  streamed: number,\n  withdrawn: number,\n\n  className?: string,\n};\n\nexport const ProgressBar = ({total, streamed, withdrawn, className}: Props) => {\n  const streamedToTotalPercentageRatio = getRoundedPercentageRatio(streamed, total);\n  const withdrawnToStreamedPercentageRatio = getRoundedPercentageRatio(withdrawn, streamed);\n\n  return (\n    <div className={cn(styles.progressBar, className)}>\n      <div className={cn(styles.progress, styles.streamed)} style={{width: `${streamedToTotalPercentageRatio}%`}}>\n        <div className={cn(styles.progress, styles.withdrawn)} style={{width: `${withdrawnToStreamedPercentageRatio}%`}} />\n      </div>\n    </div>\n  );\n};\n","import React from 'react';\n\nimport {ProgressBar} from 'shared/ui/components/ProgressBar';\n\nimport styles from './styles.module.scss';\n\ntype FinancialInfoProps = {\n  title: string,\n  total: number,\n  streamed?: number,\n  withdrawn?: number,\n  withProgressBar?: boolean,\n  testId?: string;\n};\n\nexport const FinancialInfo = ({title, total, streamed , withdrawn, withProgressBar = true, testId}: FinancialInfoProps) => {\n  const financialContent = streamed ? `$ ${streamed} of ${total}` : `${total} $`;\n\n  return (\n    <div className={styles.card}>\n      <h3 className={styles.title}>{title}</h3>\n\n      <span className={styles.finance} data-testid={testId}>{financialContent}</span>\n\n      {withProgressBar &&\n        <ProgressBar total={total} streamed={streamed || 0} withdrawn={withdrawn || 0} />\n      }\n    </div>\n  );\n};\n","import BigNumber from 'bignumber.js';\n\nimport {RichTokens} from 'shared/api/ft';\nimport {PriceOracle} from 'shared/api/price-oracle';\nimport {RoketoStream} from 'shared/api/roketo/interfaces/entities';\nimport {getAvailableToWithdraw} from 'shared/api/roketo/helpers';\nimport {streamViewData} from 'features/roketo-resource';\n\nconst INITIAL_VALUE = new BigNumber(0);\nconst MANTISSA = 3;\n\nexport const countTotalUSDWithdrawal = (\n  streams: RoketoStream[],\n  tokens: RichTokens,\n  priceOracle: PriceOracle\n) => {\n  const availableForWithdrawal = streams.reduce((withdrawalSum, inputStream) => {\n    const tokenAccountId = inputStream.token_account_id;\n    const {formatter} = tokens[tokenAccountId];\n\n    const withdrawal = getAvailableToWithdraw(inputStream).toFixed();\n    const amountForDisplay = formatter.toHumanReadableValue(withdrawal, MANTISSA);\n\n    const amountInUSD = priceOracle.getPriceInUsd(tokenAccountId, amountForDisplay);\n\n    return withdrawalSum.plus(amountInUSD);\n  }, INITIAL_VALUE);\n\n  return Number(availableForWithdrawal.toFixed(0));\n};\n\nexport const collectTotalFinancialAmountInfo = (\n  streams: RoketoStream[],\n  tokens: RichTokens,\n  priceOracle: PriceOracle\n) => {\n  const initialInfo = {total: INITIAL_VALUE, streamed: INITIAL_VALUE, withdrawn: INITIAL_VALUE};\n\n  const totalFinancialInfo = streams.reduce((financialInfoAccumulator, stream) => {\n    const tokenAccountId = stream.token_account_id;\n    const {formatter} = tokens[tokenAccountId];\n\n    const {progress} = streamViewData(stream);\n\n    const streamedAmountForDisplay = formatter.toHumanReadableValue(progress.streamed, MANTISSA);\n    const streamedUSD = priceOracle.getPriceInUsd(tokenAccountId, streamedAmountForDisplay);\n\n    const fullAmountForDisplay = formatter.toHumanReadableValue(progress.full, MANTISSA);\n    const fullUSD = priceOracle.getPriceInUsd(tokenAccountId, fullAmountForDisplay);\n\n    const withdrawnAmountForDisplay = formatter.toHumanReadableValue(progress.withdrawn, MANTISSA);\n    const withdrawnUSD = priceOracle.getPriceInUsd(tokenAccountId, withdrawnAmountForDisplay);\n\n    return {\n      total: financialInfoAccumulator.total.plus(fullUSD),\n      streamed: financialInfoAccumulator.streamed.plus(streamedUSD),\n      withdrawn: financialInfoAccumulator.withdrawn.plus(withdrawnUSD),\n    };\n  }, initialInfo);\n\n  return {\n    total: Number(totalFinancialInfo.total.toFixed(0)),\n    streamed: Number(totalFinancialInfo.streamed.toFixed(0)),\n    withdrawn: Number(totalFinancialInfo.withdrawn.toFixed(0)),\n  };\n};\n","import React from 'react';\nimport cn from 'classnames';\n\nimport {useRoketoContext} from 'app/roketo-context';\nimport {useStreams} from 'features/roketo-resource';\nimport {isActiveStream} from 'shared/api/roketo/helpers';\nimport { testIds } from 'shared/constants';\n\nimport {FinancialInfo} from '../FinancialInfo';\n\nimport {collectTotalFinancialAmountInfo, countTotalUSDWithdrawal} from '../../lib';\nimport styles from './styles.module.scss';\n\ntype FinancialStatusProps = {\n  className?: string,\n}\nexport const FinancialStatus = ({className}: FinancialStatusProps) => {\n  const {tokens, priceOracle} = useRoketoContext();\n  const {data: streams} = useStreams();\n\n  const {inputs = [], outputs = []} = streams || {};\n\n  const activeInputStreams = inputs.filter(isActiveStream);\n  const activeOutputStreams = outputs.filter(isActiveStream);\n\n  const outcomeAmountInfo = collectTotalFinancialAmountInfo(\n    activeOutputStreams,\n    tokens,\n    priceOracle\n  );\n\n  const incomeAmountInfo = collectTotalFinancialAmountInfo(\n    activeInputStreams,\n    tokens,\n    priceOracle\n  );\n\n  const availableForWithdrawal = countTotalUSDWithdrawal(\n    activeInputStreams,\n    tokens,\n    priceOracle\n  );\n\n  return (\n    <section className={cn(styles.root, className)}>\n      <FinancialInfo\n        title=\"Sending\"\n        total={outcomeAmountInfo.total}\n        streamed={outcomeAmountInfo.streamed}\n        withdrawn={outcomeAmountInfo.withdrawn}\n      />\n\n      <FinancialInfo\n        title=\"Receiving\"\n        total={incomeAmountInfo.total}\n        streamed={incomeAmountInfo.streamed}\n        withdrawn={incomeAmountInfo.withdrawn}\n      />\n\n      <FinancialInfo\n        title=\"Available for withdrawal\"\n        total={availableForWithdrawal}\n        withProgressBar={false}\n        testId={testIds.availableForWithdrawalCaption}\n      />\n    </section>\n  );\n};\n","import React from 'react';\n\nimport styles from './styles.module.scss';\n\nexport const Name = ({name, label}: {name: string, label?: string | undefined}) => (\n  <div className={styles.flexCenter}>\n    <span className={styles.name}>{name}</span>\n\n    {label &&\n      <span className={styles.nameLabel}>{label}</span>\n    }\n  </div>\n);\n","export function ClockIcon({ className }: { className?: string }) {\n  return (\n    <svg width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\" className={className}>\n      <path\n        d=\"M8.99169 0.666504C4.39169 0.666504 0.666687 4.39984 0.666687 8.99984C0.666687 13.5998 4.39169 17.3332 8.99169 17.3332C13.6 17.3332 17.3334 13.5998 17.3334 8.99984C17.3334 4.39984 13.6 0.666504 8.99169 0.666504ZM9.00002 15.6665C5.31669 15.6665 2.33335 12.6832 2.33335 8.99984C2.33335 5.3165 5.31669 2.33317 9.00002 2.33317C12.6834 2.33317 15.6667 5.3165 15.6667 8.99984C15.6667 12.6832 12.6834 15.6665 9.00002 15.6665ZM9.41669 4.83317H8.16669V9.83317L12.5417 12.4582L13.1667 11.4332L9.41669 9.20817V4.83317Z\"\n        fill=\"black\"/>\n    </svg>\n  );\n}\n","import React from 'react';\nimport cn from 'classnames';\nimport RCTooltip from 'rc-tooltip';\n\nimport {ProgressBar} from 'shared/ui/components/ProgressBar';\nimport {ClockIcon} from 'shared/icons/Clock';\n\nimport {getRoundedPercentageRatio} from 'shared/helpers/math';\n\nimport {TokenFormatter} from 'shared/api/ft/token-formatter';\nimport {useToken} from 'shared/hooks/useToken';\nimport {streamViewData} from 'features/roketo-resource';\nimport {RoketoStream} from 'shared/api/roketo/interfaces/entities';\n\nimport styles from './styles.module.scss';\n\nconst TOOLTIP_ALIGN = {\n  points: ['tl', 'bc'],\n  offset: [-24, 10],\n};\n\ntype StreamStatusProps = {\n  stream: RoketoStream;\n  className?: string;\n};\n\nexport const StreamProgress = ({stream, className}: StreamStatusProps) => {\n  const {token_account_id: tokenId, tokens_per_sec: tokensPerSec} = stream;\n\n  const {progress, timeLeft} = streamViewData(stream);\n\n  const {formatter, meta: {symbol}} = useToken(tokenId);\n\n  const streamed = Number(formatter.toHumanReadableValue(progress.streamed, 3));\n  const withdrawn = Number(formatter.toHumanReadableValue(progress.withdrawn, 3));\n  const total = Number(formatter.toHumanReadableValue(progress.full, 3));\n\n  const streamedText = TokenFormatter.formatSmartly(streamed);\n  const withdrawnText = TokenFormatter.formatSmartly(withdrawn);\n\n  const streamedPercentage = getRoundedPercentageRatio(streamed, total, 1);\n  const withdrawnPercentage = getRoundedPercentageRatio(withdrawn, streamed, 1);\n\n  const progressText = `${streamedText} of ${total} `;\n\n  const {formattedValue: speedFormattedValue, unit: speedUnit} = formatter.tokensPerMeaningfulPeriod(tokensPerSec);\n\n  return (\n    <RCTooltip\n      overlayClassName={styles.overlay}\n      destroyTooltipOnHide\n      align={TOOLTIP_ALIGN}\n      placement=\"bottom\"\n      overlay={\n        <div className={cn(styles.tooltip, styles.text)}>\n          <div className={styles.innerStatus}>\n            {progressText}\n            <span className={cn(styles.grey, styles.smaller)}>{symbol}</span>\n          </div>\n\n          <ProgressBar\n            total={total}\n            streamed={streamed}\n            withdrawn={withdrawn}\n          />\n\n          <div className={cn(styles.status, styles.speed)}>\n            {speedFormattedValue}{' '}\n            <span className={cn(styles.grey, styles.smaller)}>{symbol} / {speedUnit}</span>\n          </div>\n\n          {timeLeft && (\n            <div className={styles.remained}>\n              <ClockIcon className={styles.clock}/>\n              {timeLeft}\n            </div>\n          )}\n\n          <div className={cn(styles.progress, styles.streamed)}>\n            Streamed: {streamedText}{' '}\n            <span className={cn(styles.grey, styles.smaller)}>\n               {`${streamedPercentage}%`}\n            </span>\n          </div>\n\n          <div className={cn(styles.progress, styles.withdrawn)}>\n            Streamed: {withdrawnText}{' '}\n            <span className={cn(styles.grey, styles.smaller)}>\n               {`${withdrawnPercentage}%`}\n            </span>\n          </div>\n        </div>\n      }\n    >\n      <div className={cn(styles.root, styles.text, className)}>\n        <div className={styles.status}>\n          {progressText}\n          <span className={styles.grey}>{symbol}</span>\n        </div>\n\n        <ProgressBar\n          total={total}\n          streamed={streamed}\n          withdrawn={withdrawn}\n        />\n      </div>\n    </RCTooltip>\n  );\n};\n","import React from 'react';\n\ntype Props = {\n  width?: number,\n  height?: number,\n  className?: string,\n}\n\nconst DEFAULT_WIDTH = 10;\nconst DEFAULT_HEIGHT = 20;\n\nexport const LinkIcon = ({width = DEFAULT_WIDTH, height = DEFAULT_HEIGHT, className}: Props) => (\n  <svg className={className} width={width} height={height} viewBox=\"0 0 10 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M10 15L10 11L8 11L8 15C8 16.65 6.65 18 5 18C3.35 18 2 16.65 2 15L2 11L-4.80825e-07 11L-6.55671e-07 15C-7.76314e-07 17.76 2.24 20 5 20C7.76 20 10 17.76 10 15ZM2 9L2 5C2 3.35 3.35 2 5 2C6.65 2 8 3.35 8 5L8 9L10 9L10 5C10 2.24 7.76 -9.79135e-08 5 -2.18557e-07C2.24 -3.392e-07 -9.79135e-08 2.24 -2.18557e-07 5L-3.93402e-07 9L2 9ZM6 6L6 14L4 14L4 6L6 6Z\" fill=\"currentColor\"/>\n  </svg>\n);\n","import React from 'react';\n\nimport {Button, ButtonType, DisplayMode} from '@ui/components/Button';\nimport {useRoketoContext} from 'app/roketo-context';\nimport {RoketoStream} from 'shared/api/roketo/interfaces/entities';\n\nimport {getAvailableToWithdraw} from 'shared/api/roketo/helpers';\nimport { testIds } from 'shared/constants';\n\ntype WithdrawButtonProps = {\n  stream: RoketoStream;\n};\n\nexport function WithdrawButton({ stream }: WithdrawButtonProps) {\n  const { tokens, roketo } = useRoketoContext();\n  const available = getAvailableToWithdraw(stream);\n  const tokenAccountId = stream.token_account_id;\n  const { formatter } = tokens[tokenAccountId];\n  const amount = formatter.amount(available.toFixed());\n\n  const handleWithdraw = (e: React.SyntheticEvent) => {\n    e.preventDefault();\n\n    roketo.api.withdraw({ streamIds: [ stream.id ] });\n  }\n\n  return (\n    <Button\n      disabled={Number(amount) === 0}\n      type={ButtonType.button}\n      displayMode={DisplayMode.primary}\n      onClick={handleWithdraw}\n      testId={testIds.withdrawButton}\n    >\n      Withdraw\n    </Button>\n  );\n}\n","import React from 'react';\n\nexport type BooleanControl = {\n  on: boolean;\n  off: boolean;\n  toggle: () => void,\n  turnOff: () => void,\n  turnOn: () => void,\n  setOn: (state: boolean) => void,\n};\n\nexport function useBool(initial: boolean): BooleanControl {\n  const [on, setOn] = React.useState(initial);\n\n  return {\n    on,\n    off: !on,\n    toggle: () => setOn(!on),\n    turnOff: () => setOn(false),\n    turnOn: () => setOn(true),\n    setOn,\n  };\n}\n","import classNames from 'classnames';\n\nimport { STREAM_STATUS } from 'shared/api/roketo/constants';\nimport type { RoketoStream } from 'shared/api/roketo/interfaces/entities';\n\nconst bindings = {\n  [STREAM_STATUS.Initialized]: {\n    label: 'Initialized',\n  },\n  [STREAM_STATUS.Active]: {\n    label: 'Active',\n  },\n  [STREAM_STATUS.Paused]: {\n    label: 'Paused',\n  },\n  [STREAM_STATUS.Finished]: {\n    label: 'Finished',\n  },\n} as const;\n\ntype StreamStatusProps = {\n  stream: RoketoStream;\n  className?: string;\n};\n\nexport function StreamStatus({ stream, className }: StreamStatusProps) {\n  const binding = typeof stream.status === 'string'\n    ? bindings[stream.status]\n    : bindings[STREAM_STATUS.Finished];\n\n  return (\n    <div className={classNames(className)}>\n      {binding.label}\n    </div>\n  );\n}\n","export function StartIcon() {\n  return (\n    <svg width=\"8\" height=\"10\" viewBox=\"0 0 8 10\" fill=\"none\">\n      <path d=\"M1.66634 2.76016L5.17968 5.00016L1.66634 7.24016V2.76016ZM0.333008 0.333496V9.66683L7.66634 5.00016L0.333008 0.333496Z\" fill=\"currentColor\" />\n    </svg>\n  );\n}\n","export function PauseIcon() {\n  return (\n    <svg width=\"8\" height=\"10\" viewBox=\"0 0 8 10\" fill=\"none\">\n      <path d=\"M0 9.66659H2.66667V0.333252H0V9.66659ZM5.33333 0.333252V9.66659H8V0.333252H5.33333Z\" fill=\"currentColor\"/>\n    </svg>\n  );\n}\n","export function StopIcon() {\n  return (\n    <svg width=\"8\" height=\"8\" viewBox=\"0 0 8 8\" fill=\"none\">\n      <path d=\"M6.66667 1.33333V6.66667H1.33333V1.33333H6.66667ZM8 0H0V8H8V0Z\" fill=\"currentColor\"/>\n    </svg>\n  );\n}\n","import React, { useState } from 'react';\nimport classNames from 'classnames';\nimport Modal from 'react-modal';\n\nimport { DropdownOpener } from 'shared/kit/DropdownOpener';\nimport { DropdownMenu, DropdownMenuDivider, DropdownMenuItem } from 'shared/kit/DropdownMenu';\nimport { useBool, BooleanControl } from 'shared/hooks/useBool';\nimport { useRoketoContext } from 'app/roketo-context';\nimport type { RoketoStream } from 'shared/api/roketo/interfaces/entities';\nimport {isActiveStream, isDead, isPausedStream} from 'shared/api/roketo/helpers';\n\nimport { STREAM_STATUS } from 'shared/api/roketo/constants';\nimport { testIds } from 'shared/constants';\n\nimport { StreamStatus } from '../StreamStatus';\n\nimport styles from './styles.module.scss';\nimport { StartIcon } from './StartIcon';\nimport { PauseIcon } from './PauseIcon';\nimport { StopIcon } from './StopIcon';\n\ntype ConfirmModalProps = {\n  modalControl: BooleanControl;\n  onConfirm: () => void;\n};\n\nfunction PauseConfirmModal({ modalControl, onConfirm }: ConfirmModalProps) {\n  return (\n    <Modal\n      isOpen={modalControl.on}\n      onRequestClose={modalControl.turnOff}\n      className={styles.modalContent}\n      overlayClassName={styles.modalOverlay}\n    >\n      <h2 className={styles.modalHeader}>Are you sure?</h2>\n      <p>\n        As a stream receiver, you will not be able to resume stream. Only stream\n        owners can resume streams.\n      </p>\n      <div className={styles.modalButtons}>\n        <button\n          type=\"button\"\n          onClick={modalControl.turnOff}\n          className={classNames(styles.modalButton, styles.modalSecondary)}\n        >\n          Cancel\n        </button>\n        <button\n          type=\"button\"\n          onClick={() => {\n            modalControl.turnOff();\n            onConfirm();\n          }}\n          className={classNames(styles.modalButton, styles.modalWarning)}\n        >\n          Pause\n        </button>\n      </div>\n    </Modal>\n  );\n}\n\nfunction StopConfirmModal({ modalControl, onConfirm }: ConfirmModalProps) {\n  return (\n    <Modal\n      isOpen={modalControl.on}\n      onRequestClose={modalControl.turnOff}\n      className={styles.modalContent}\n      overlayClassName={styles.modalOverlay}\n    >\n      <h2 className={styles.modalHeader}>Stop stream</h2>\n      <p>\n        This action will completely shut down the stream. After that, it can't be turned on.\n      </p>\n      <div className={styles.modalButtons}>\n        <button\n          type=\"button\"\n          onClick={modalControl.turnOff}\n          className={classNames(styles.modalButton, styles.modalSecondary)}\n        >\n          Cancel\n        </button>\n        <button\n          type=\"button\"\n          onClick={() => {\n            modalControl.turnOff();\n            onConfirm();\n          }}\n          className={classNames(styles.modalButton, styles.modalDanger)}\n        >\n          Stop\n        </button>\n      </div>\n    </Modal>\n  );\n}\n\ntype StreamControlsProps = {\n  stream: RoketoStream;\n  className?: string;\n};\n\nexport function StreamControls({ stream, className }: StreamControlsProps) {\n  const { auth, roketo } = useRoketoContext();\n  const pauseModalControl = useBool(false);\n  const stopModalControl = useBool(false);\n  const [loading, setLoading] = useState(false);\n  const [menuOpened, setMenuOpened] = useState(false);\n\n  const isOutgoing = auth.accountId === stream.owner_id;\n  const isIncoming = auth.accountId === stream.receiver_id;\n  const isExternalStream = !isOutgoing && !isIncoming;\n\n  const handlePause = async () => {\n    setLoading(true);\n    await roketo.api.pauseStream({ streamId: stream.id });\n    setLoading(false);\n  }\n\n  const handleStart = async () => {\n    setLoading(true);\n    await roketo.api.startStream({ streamId: stream.id });\n    setLoading(false);\n  }\n\n  const handleStop = async () => {\n    setLoading(true);\n    await roketo.api.stopStream({ streamId: stream.id });\n    setLoading(false);\n  }\n\n  if (isDead(stream) || isExternalStream) {\n    return (\n      <StreamStatus\n        className={className}\n        stream={stream}\n      />\n    );\n  }\n\n  const onClickPause = () => {\n    setMenuOpened(false);\n    if (isIncoming) {\n      pauseModalControl.turnOn();\n    } else {\n      handlePause();\n    }\n  }\n\n  const onClickStop = () => {\n    setMenuOpened(false);\n    stopModalControl.turnOn();\n  }\n\n  const opened = menuOpened && !loading;\n\n  const shouldShowStartButton = stream.status !== STREAM_STATUS.Active && isOutgoing;\n  const shouldShowPauseButton = stream.status === STREAM_STATUS.Active;\n\n  const statusClassName = {\n    [styles.active]: isActiveStream(stream),\n    [styles.pause]: isPausedStream(stream),\n    [styles.stop]: isDead(stream),\n  };\n\n  return (\n    <div className={classNames(styles.relative, className)}>\n      <PauseConfirmModal\n        modalControl={pauseModalControl}\n        onConfirm={handlePause}\n      />\n\n      <StopConfirmModal\n        modalControl={stopModalControl}\n        onConfirm={handleStop}\n      />\n\n      <DropdownOpener\n        opened={opened}\n        onChange={setMenuOpened}\n        className={classNames(styles.dropdownOpener, statusClassName)}\n        testId={testIds.streamControlsDropdown}\n      >\n        {loading ? 'Loading...' : <StreamStatus stream={stream} className={styles.statusPadded} />}\n      </DropdownOpener>\n\n      <DropdownMenu\n        onClose={() => setMenuOpened(false)}\n        opened={opened}\n        className={styles.controlsMenu}\n      >\n        {shouldShowStartButton && (\n          <DropdownMenuItem>\n            <button\n              type=\"button\"\n              onClick={handleStart}\n              className={classNames(styles.controlButton, styles.start)}\n              data-testid={testIds.streamStartButton}\n            >\n              <StartIcon />\n              <span>Start</span>\n              {' '}\n            </button>\n          </DropdownMenuItem>\n        )}\n\n        {shouldShowPauseButton && (\n          <DropdownMenuItem>\n            <button\n              type=\"button\"\n              onClick={onClickPause}\n              className={classNames(styles.controlButton, styles.pause)}\n              data-testid={testIds.streamPauseButton}\n            >\n              <PauseIcon />\n              <span>Pause</span>\n            </button>\n          </DropdownMenuItem>\n        )}\n\n        {(shouldShowStartButton || shouldShowPauseButton) &&\n          <DropdownMenuDivider />\n        }\n        <DropdownMenuItem>\n          <button\n            type=\"button\"\n            onClick={onClickStop}\n            className={classNames(styles.controlButton, styles.stop)}\n            data-testid={testIds.streamStopButton}\n          >\n            <StopIcon />\n            <span>Stop</span>\n          </button>\n        </DropdownMenuItem>\n      </DropdownMenu>\n    </div>\n  );\n}\n","import React, {useCallback} from 'react';\nimport cn from 'classnames';\nimport copy from 'clipboard-copy';\n\nimport {LinkIcon} from '@ui/icons/Link';\n\nimport {WithdrawButton} from 'features/stream-control/WithdrawButton';\nimport { StreamControls } from 'features/stream-control/StreamControls';\n\nimport {getStreamLink} from 'shared/helpers/routing';\nimport {isActiveStream} from 'shared/api/roketo/helpers';\nimport {RoketoStream} from 'shared/api/roketo/interfaces/entities';\n\nimport {STREAM_DIRECTION, useGetStreamDirection} from 'shared/hooks/useGetStreamDirection';\nimport styles from './styles.module.scss';\n\nconst StreamLinkButton = ({onCLick}: { onCLick: (event: React.SyntheticEvent) => void }) => (\n  <button className={styles.linkButton} type=\"button\" onClick={onCLick}>\n    <LinkIcon/>\n  </button>\n);\n\ntype Props = {\n  stream: RoketoStream,\n  className?: string,\n}\n\nexport const Controls = ({className, stream}: Props) => {\n  const {id: streamId} = stream;\n\n  const handleLinkClick = useCallback((event: React.SyntheticEvent) => {\n    event.preventDefault();\n\n    const streamLink = getStreamLink(streamId);\n\n    copy(streamLink);\n  }, [streamId]);\n\n  const direction = useGetStreamDirection(stream);\n  const showWithdraw = direction === STREAM_DIRECTION.IN && isActiveStream(stream);\n\n  return (\n    <div className={cn(styles.root, className)}>\n      {showWithdraw &&\n        <WithdrawButton stream={stream} />\n      }\n\n      <StreamControls stream={stream} />\n\n      <StreamLinkButton onCLick={handleLinkClick}/>\n    </div>\n  );\n};\n","import React from 'react';\nimport cn from 'classnames';\nimport {generatePath, Link} from 'react-router-dom';\n\nimport {RoketoStream} from 'shared/api/roketo/interfaces/entities';\nimport {ROUTES_MAP} from 'shared/helpers/routing';\nimport {STREAM_DIRECTION, useGetStreamDirection} from 'shared/hooks/useGetStreamDirection';\n\nimport {Name} from '../Name';\nimport {StreamProgress} from '../StreamProgress';\n\nimport {Controls} from '../Controls';\nimport styles from './styles.module.scss';\n\ntype StreamCardProps = {\n  stream: RoketoStream,\n  className?: string,\n}\n\nexport const StreamCard = ({stream, className}: StreamCardProps) => {\n  const {\n    id,\n    description,\n  } = stream;\n\n  const isIncomingStream = useGetStreamDirection(stream) === STREAM_DIRECTION.IN;\n\n  const name = isIncomingStream ? stream.owner_id : stream.receiver_id;\n  const label = isIncomingStream ? undefined : 'Send';\n\n  const streamPageLink = generatePath(ROUTES_MAP.stream.path, {id});\n\n  return (\n    <div className={cn(styles.root, styles.flexCenter, className)}>\n\n      <Link to={streamPageLink}>\n        <Name name={name} label={label}/>\n      </Link>\n\n      <StreamProgress stream={stream} className={styles.withMarginRight} />\n\n      <Link to={streamPageLink} className='col-span-2 grow-0'>\n        <p className={styles.description}>\n          {description}\n        </p>\n      </Link>\n\n\n      <Controls\n        stream={stream}\n        className={cn(styles.controls, 'col-span-2 grow-0')}\n      />\n    </div>\n  );\n};\n","import React from 'react';\nimport cn from 'classnames';\n\nimport {RoketoStream} from 'shared/api/roketo/interfaces/entities';\n\nimport {Button} from '@ui/components/Button';\n\nimport {useStreams} from 'features/roketo-resource';\n\nimport {StreamCard} from '../StreamCard';\nimport styles from './styles.module.scss';\n\ntype Props = {\n  displayingStreams: RoketoStream[] | undefined,\n\n  onCreateStreamClick: () => void,\n\n  className?: string,\n}\n\nconst EmptyState = ({children}: {children: React.ReactNode}) => <div className={styles.emptyState}>{children}</div>\n\nexport const StreamsList = (props: Props) => {\n  const {\n    className,\n    displayingStreams,\n    onCreateStreamClick,\n  } = props;\n\n  const {data: streams} = useStreams();\n  const {inputs = [], outputs = []} = streams || {};\n\n  const allStreams = [...inputs, ...outputs];\n  const allStreamsLength = allStreams.length;\n\n  const displayingStreamsLength = displayingStreams?.length;\n\n  return (\n    <section className={cn(styles.flexColumn, className)}>\n      <div className={cn(styles.withPaddings, 'grid grid-cols-6 gap-x-10')}>\n        <h3 className={styles.title}>Name</h3>\n        <h3 className={styles.title}>Amount to stream</h3>\n        <h3 className={styles.title}>Comment</h3>\n      </div>\n\n      {!streams &&\n        <EmptyState>\n          <div>Loading...</div>\n        </EmptyState>\n      }\n\n      {streams && allStreamsLength === 0 &&\n        <EmptyState>\n          <div>\n            You dont have any streams yet.\n          </div>\n          <Button onClick={onCreateStreamClick}>Create First Stream</Button>\n        </EmptyState>\n\n      }\n\n      {streams && allStreamsLength !== 0 && displayingStreamsLength === 0 &&\n        <EmptyState>\n          <div>No streams matching your filters. Try selecting different ones</div>\n        </EmptyState>\n      }\n\n      {displayingStreams?.map(stream => (\n        <StreamCard\n          stream={stream}\n          key={stream.id}\n          className={cn(styles.withPaddings, 'grid grid-cols-6 gap-x-10')}\n        />\n      ))}\n    </section>\n  );\n}\n","import React, {useMemo, useState, useCallback} from 'react';\nimport {generatePath} from 'react-router-dom';\nimport cn from 'classnames';\n\nimport {Layout} from '@ui/components/Layout';\nimport {Button} from '@ui/components/Button';\n\nimport {Modal} from 'shared/components/Modal';\n\nimport {useRoketoContext} from 'app/roketo-context';\n\nimport {WithdrawAllButton} from 'features/stream-control/WithdrawAllButton';\nimport {useStreams} from 'features/roketo-resource';\nimport {StreamFilters} from 'features/filtering/StreamFilters';\nimport {CreateStream, type FormValues} from 'features/create-stream/CreateStream';\nimport {FinancialStatus} from 'widgets/financialStatus';\nimport {StreamsList} from 'widgets/streamsList';\n\nimport {RoketoStream} from 'shared/api/roketo/interfaces/entities';\nimport {ROUTES_MAP} from 'shared/helpers/routing';\nimport { testIds } from 'shared/constants';\n\nimport styles from './styles.module.scss';\n\nconst redirectUrl = generatePath(ROUTES_MAP.streams.path);\nconst returnPath = `${window.location.origin}/#${redirectUrl}`;\n\nexport const StreamsPage = () => {\n  const {roketo, tokens} = useRoketoContext();\n\n  const {data: streams} = useStreams();\n  const {inputs, outputs} = streams || {};\n  const allStreams = useMemo<RoketoStream[] | undefined>(\n    () => ((inputs || outputs) && [...(inputs || []), ...(outputs || [])]),\n    [inputs, outputs]\n  );\n\n  const [filteredItems, setFiltered] = useState<RoketoStream[] | undefined>([]);\n  const [isModalOpened, setIsModalOpened] = useState<boolean>(false);\n  const toggleModal = useCallback(\n    () => setIsModalOpened(!isModalOpened),\n    [setIsModalOpened, isModalOpened]\n  );\n\n  const handleCreateStream = async (values: FormValues) => {\n    const {\n      receiver,\n      autoStart,\n      comment,\n      deposit,\n      speed,\n      token,\n    } = values;\n\n    const {formatter, api, roketoMeta} = tokens[token];\n\n    await roketo.api.createStream({\n      deposit: formatter.toYocto(deposit),\n      description: comment,\n      receiverId: receiver,\n      tokenAccountId: token,\n      commissionOnCreate: roketoMeta.commission_on_create,\n      tokensPerSec: speed,\n      isAutoStart: autoStart,\n      callbackUrl: returnPath,\n      handleTransferStream: api.transfer,\n    });\n  };\n\n  return (\n    <div className={styles.root}>\n      <Layout>\n        <section className={cn(styles.flex, styles.spaceBetween)}>\n          <h1 className={styles.title}>Streams</h1>\n\n          <div className={cn(styles.flex, styles.buttonsWrapper)}>\n            <WithdrawAllButton>Withdraw tokens</WithdrawAllButton>\n\n            <Button\n              onClick={toggleModal}\n              testId={testIds.createStreamButton}\n            >\n              Create stream\n            </Button>\n            <Modal isOpen={isModalOpened} onCloseModal={toggleModal}>\n              <CreateStream onFormCancel={toggleModal} onFormSubmit={handleCreateStream}/>\n            </Modal>\n          </div>\n        </section>\n\n        <FinancialStatus className={styles.section}/>\n\n        <StreamFilters\n          items={allStreams}\n          onFilterDone={setFiltered}\n        />\n\n        <StreamsList\n          displayingStreams={filteredItems}\n          className={styles.section}\n          onCreateStreamClick={toggleModal}\n        />\n\n      </Layout>\n    </div>\n  );\n};\n","import React from 'react';\nimport classNames from 'classnames';\n\nimport {Authorization} from 'features/authorization';\n\nimport styles from './styles.module.scss';\n\nexport function AuthorizePage() {\n  return (\n    <div className=\"flex h-screen mx-3\">\n      <div\n        className={classNames('lg:m-auto mx-auto my-auto lg:w-2/5 bg-gray-90 rounded-3xl p-5', styles.block)}\n      >\n        <div className={classNames('my-24', styles.content)}>\n          <h1 className=\"text-3xl mb-4 font-semibold\">\n            {' '}\n            Login via NEAR Network\n            {' '}\n          </h1>\n          <p className={classNames('mb-4', styles.hint)}>\n            Click button below to login or create new account\n          </p>\n          <Authorization />\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport classNames from 'classnames';\nimport { Link } from 'react-router-dom';\nimport './Button.scss';\n\nconst variants = {\n  main: 'main',\n  filled: 'filled',\n  outlined: 'outlined',\n};\n\ntype CommonButtonProps = {\n  icon?: never;\n  children?: React.ReactNode;\n  className?: string;\n  size?: 'normal' | 'big';\n  loading?: boolean;\n  disabled?: boolean;\n  loadingText?: string;\n  color?: string;\n  variant?: string;\n};\n\ntype SpecificLinkProps = {\n  link: true;\n  to: string;\n};\n\ntype SpecificButtonProps = {\n  link?: false;\n  type: 'submit' | 'button';\n  onClick?: (e: React.SyntheticEvent) => void;\n};\n\ntype ButtonProps = CommonButtonProps & (SpecificLinkProps | SpecificButtonProps);\n\nexport function Button({\n  icon,\n  children,\n  className,\n  size,\n  loading,\n  disabled,\n  loadingText,\n  color = 'light',\n  variant = 'outlined',\n  ...restProps\n}: ButtonProps) {\n  let variantStyles = '';\n  let sizeStyles = '';\n  let colorStyles = '';\n\n  if (variant === variants.main) {\n    variantStyles = 'Button--main';\n    sizeStyles = size === 'normal'\n      ? 'px-5 py-4  rounded-2xl font-semibold'\n      : size === 'big'\n        ? 'px-12 py-6 rounded-3xl font-bold'\n        : '';\n  } else if (variant === variants.outlined) {\n    variantStyles = 'border-solid border font-semibold rounded-lg ';\n    colorStyles = color === 'light'\n      ? 'border-blue hover:bg-blue'\n      : color === 'dark'\n        ? 'border-border hover:bg-hover hover:border-hover'\n        : '';\n  } else if (variant === variants.filled) {\n    variantStyles = 'bg-dark hover:bg-hover font-semibold rounded-lg active:bg-transparent';\n  }\n\n  const commonProps = {\n    disabled: loading || disabled,\n    className: classNames(\n      'inline-flex items-center justify-center p-3  whitespace-nowrap',\n      variantStyles,\n      sizeStyles,\n      colorStyles,\n      disabled ? 'Button--disabled' : '',\n      'transition-all',\n      className\n    ),\n  };\n\n  const content = loading ? (\n    loadingText\n  ) : (\n    <>\n      {icon ? <div className=\"mr-2\">{icon}</div> : null}\n      {children}\n    </>\n  );\n\n  return restProps.link ? (\n    <Link {...commonProps} {...restProps}>{content}</Link>\n  ) : (\n    <button\n      {...commonProps}\n      {...restProps}\n      type={restProps.type === 'button' ? 'button' : 'submit'}\n    >\n      {content}\n    </button>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/RUSSIANS_HACK.83d68466.gif\";","export default __webpack_public_path__ + \"static/media/crab.3fbdb8f2.gif\";","import classNames from 'classnames';\nimport React from 'react';\nimport { Button } from 'shared/kit/Button';\nimport hackImage from 'shared/images/RUSSIANS_HACK.gif';\nimport crabImage from 'shared/images/crab.gif';\n\ntype PageErrorProps = {\n  message?: React.ReactNode;\n  onRetry: () => void;\n  className: string;\n};\n\nexport function PageError({\n  message,\n  onRetry,\n  className,\n}: PageErrorProps) {\n  const rand = React.useRef(Math.random());\n\n  return (\n    <div className={classNames('text-center', className)}>\n      {rand.current > 0.5 ? (\n        <img\n          src={hackImage}\n          className=\"mx-auto\"\n          alt=\"funny hackers gif with bird dancing around\"\n        />\n      ) : (\n        <img\n          src={crabImage}\n          className=\"mx-auto\"\n          alt=\"crab with a knife tries to hurt people\"\n        />\n      )}\n\n      <h1 className=\"text-4xl font-semibold mb-6 mt-10\">\n        Something is broken.\n      </h1>\n      <p className=\"text-gray mb-4\">Finally we have something to fix</p>\n      {message && (\n        <code className=\"p-4 border-special-inactive border block text-special-inactive text-xs mb-4\">\n          {message}\n        </code>\n      )}\n      <Button\n        variant=\"outlined\"\n        color=\"dark\"\n        className=\"mt-10\"\n        onClick={onRetry}\n        type=\"button\"\n      >\n        Try again\n      </Button>\n      <p className=\"text-xs text-gray mt-2\">(that probably wont help)</p>\n    </div>\n  );\n}\n","export function BreadcrumbIcon({ className }: { className?: string }) {\n  return (\n    <svg className={className} width=\"8\" height=\"12\" viewBox=\"0 0 8 12\" fill=\"none\">\n      <path\n        d=\"M0.895051 11.6285C0.745051 11.6285 0.603384 11.5702 0.495051 11.4535C0.295051 11.2285 0.311718 10.8869 0.528384 10.6869L5.836 5.90328L0.495028 1.27828C0.270028 1.07828 0.261695 0.736613 0.461695 0.511613C0.661695 0.294947 1.00336 0.27828 1.22836 0.47828L6.97766 5.46995C7.23599 5.70328 7.23599 6.10328 6.97766 6.33662L1.26172 11.4869C1.15338 11.5869 1.02838 11.6285 0.895051 11.6285Z\"\n        fill=\"currentColor\"/>\n    </svg>\n  );\n}\n","import React from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport copy from 'clipboard-copy';\nimport classNames from 'classnames';\nimport { format } from 'date-fns';\n\nimport { streamViewData, useSingleStream } from 'features/roketo-resource';\nimport { LinkIcon } from '@ui/icons/Link';\nimport { getStreamLink, ROUTES_MAP } from 'shared/helpers/routing';\nimport { PageError } from 'shared/components/PageError';\nimport { Layout } from '@ui/components/Layout';\nimport type { RoketoStream } from 'shared/api/roketo/interfaces/entities';\nimport { getStreamingSpeed } from 'features/create-stream/lib';\nimport { useRoketoContext } from 'app/roketo-context';\nimport { ProgressBar } from '@ui/components/ProgressBar';\nimport { StreamControls } from 'features/stream-control/StreamControls';\nimport { STREAM_DIRECTION, useGetStreamDirection } from 'shared/hooks/useGetStreamDirection';\nimport { STREAM_STATUS } from 'shared/api/roketo/constants';\nimport { WithdrawButton } from 'features/stream-control/WithdrawButton';\nimport { TokenImage } from 'shared/kit/TokenImage';\nimport { getRoundedPercentageRatio } from 'shared/helpers/math';\nimport { getAvailableToWithdraw } from 'shared/api/roketo/helpers';\n\nimport styles from './styles.module.scss';\nimport { BreadcrumbIcon } from './BreadcrumbIcon';\n\nfunction StreamProgress({ stream }: { stream: RoketoStream }) {\n  const { tokens } = useRoketoContext();\n\n  const { meta, formatter } = tokens[stream.token_account_id];\n  const { progress: { streamed, withdrawn, full } } = streamViewData(stream);\n\n  return (\n    <div>\n      <div className={styles.numericProgress}>\n        <TokenImage\n          tokenAccountId={stream.token_account_id}\n          className={styles.tokenIcon}\n        />\n        <span>{`${meta.symbol} ${formatter.amount(streamed)} of ${formatter.amount(full)}`}</span>\n      </div>\n      <ProgressBar\n        total={Number(full)}\n        streamed={Number(streamed)}\n        withdrawn={Number(withdrawn)}\n      />\n    </div>\n  );\n}\n\nfunction StreamButtons({ stream }: { stream: RoketoStream }) {\n  const { isDead } = streamViewData(stream);\n  const direction = useGetStreamDirection(stream);\n\n  if (isDead) {\n    return null;\n  }\n\n  return (\n    <div className={styles.buttons}>\n      <StreamControls stream={stream} />\n\n      {direction === STREAM_DIRECTION.IN && stream.status === STREAM_STATUS.Active &&\n        <WithdrawButton stream={stream} />\n      }\n    </div>\n  );\n}\n\nfunction StreamSpeed({ stream }: { stream: RoketoStream }) {\n  const { tokens } = useRoketoContext();\n\n  return (\n    <div>\n      <span className={styles.blockTitle}>Speed</span>\n      <div className={styles.speed}>\n        {getStreamingSpeed(Number(stream.tokens_per_sec), tokens[stream.token_account_id])}\n      </div>\n    </div>\n  );\n}\n\nfunction StreamComment({ stream }: { stream: RoketoStream }) {\n  if (!stream.description) {\n    return null;\n  }\n\n  return (\n    <div>\n      <span className={styles.blockTitle}>Comment</span>\n      <div className={styles.commentBody}>\n        {stream.description}\n      </div>\n    </div>\n  );\n}\n\nfunction CopyButton({ stringToCopy }: { stringToCopy: string }) {\n  return (\n    <button\n      type=\"button\"\n      className={styles.copyButton}\n      onClick={() => copy(stringToCopy)}\n    >\n      <LinkIcon className={styles.linkIcon} />\n    </button>\n  );\n}\n\nfunction StreamCopyUrlBlock({ stream }: { stream: RoketoStream }) {\n  const link = getStreamLink(stream.id);\n\n  return (\n    <div>\n      <div className={classNames(styles.blockTitle, styles.copyTitle)}>\n        Public link to view the stream\n        <CopyButton stringToCopy={link} />\n      </div>\n      <div className={styles.link}>{link}</div>\n    </div>\n  );\n}\n\nfunction InfoRow({ title, children }: { title: string, children: React.ReactNode }) {\n  return (\n    <div className={styles.infoRow}>\n      <span className={styles.infoTitle}>{title}</span>\n      {children}\n    </div>\n  );\n}\n\n\n\nfunction StreamData({ stream }: { stream: RoketoStream }) {\n  const direction = useGetStreamDirection(stream);\n  const { tokens } = useRoketoContext();\n  const { progress: { streamed, left, full } } = streamViewData(stream);\n\n  const streamedToTotalPercentageRatio = getRoundedPercentageRatio(streamed, full).toNumber();\n  const leftToTotalPercentageRatio = getRoundedPercentageRatio(left, full).toNumber();\n  const available = getAvailableToWithdraw(stream).toNumber();\n\n  const { meta, formatter } = tokens[stream.token_account_id];\n\n  return (\n    <div className={classNames(styles.tile, styles.infoTile)}>\n      <div className={styles.bigHeader}>\n        Stream info\n      </div>\n      <InfoRow title=\"Sender\">\n        <span className={styles.font16}>\n          {direction === STREAM_DIRECTION.OUT ? 'You' : stream.owner_id}\n        </span>\n      </InfoRow>\n      <InfoRow title=\"Receiver\">\n        <span className={styles.font16}>\n          {direction === STREAM_DIRECTION.IN ? 'You' : stream.receiver_id}\n        </span>\n      </InfoRow>\n      <div className={styles.divider} />\n      <InfoRow title=\"Total\">\n          <span className={styles.font14}>\n            {formatter.amount(full)}\n            <span className={styles.font12}> {meta.symbol}</span>\n          </span>\n      </InfoRow>\n      <InfoRow title=\"Token\">\n          <span className={styles.font14}>\n            {meta.name},\n            <span className={styles.font12}> {meta.symbol}</span>\n          </span>\n      </InfoRow>\n      <InfoRow title=\"Tokens Transferred\">\n          <span className={styles.font14}>\n            {formatter.amount(streamed)}\n            <span className={styles.font12}> {meta.symbol} <span className={styles.grey}>({streamedToTotalPercentageRatio}%)</span></span>\n          </span>\n      </InfoRow>\n      <InfoRow title=\"Tokens Left\">\n          <span className={styles.font14}>\n            {formatter.amount(left)}\n            <span className={styles.font12}> {meta.symbol} <span className={styles.grey}>({leftToTotalPercentageRatio}%)</span></span>\n          </span>\n      </InfoRow>\n      <InfoRow title=\"Tokens Available\">\n          <span className={styles.font14}>\n            {formatter.amount(available)}\n            <span className={styles.font12}> {meta.symbol}</span>\n          </span>\n      </InfoRow>\n    </div>\n  );\n}\n\nfunction OtherInfo({ stream }: { stream: RoketoStream }) {\n  const { timeLeft } = streamViewData(stream);\n\n  return (\n    <div className={classNames(styles.tile, styles.infoTile)}>\n      <div className={styles.bigHeader}>\n        Other info\n      </div>\n      <InfoRow title=\"Stream ID\">\n        <span className={classNames(styles.font14, styles.centeredFlex)}>\n          {stream.id}\n          <CopyButton stringToCopy={stream.id} />\n        </span>\n      </InfoRow>\n      <InfoRow title=\"Stream Created\">\n        <span className={styles.font14}>\n          {format(new Date(Number(stream.timestamp_created) / 1000000), 'PP \\'at\\' p')}\n        </span>\n      </InfoRow>\n      <InfoRow title=\"Remaining\">\n        <span className={styles.font14}>\n          {timeLeft || 'Finished'}\n        </span>\n      </InfoRow>\n      {stream.timestamp_created !== stream.last_action &&\n        <InfoRow title=\"Latest Withdrawal\">\n        <span className={styles.font14}>\n          {format(new Date(Number(stream.last_action) / 1000000), 'PP \\'at\\' p')}\n        </span>\n        </InfoRow>\n      }\n    </div>\n  );\n}\n\nexport function StreamPage() {\n  const { id } = useParams() as { id: string };\n  const streamSWR = useSingleStream(id);\n\n  const stream = streamSWR.data;\n  const pageError = streamSWR.error;\n\n  return (\n    <div className={styles.root}>\n      <Layout>\n        <div className={styles.breadbrumbs}>\n          <Link\n            to={ROUTES_MAP.streams.path}\n            className={styles.streamsLink}\n          >\n            Streams\n          </Link>\n          <BreadcrumbIcon className={styles.breadbrumb} />\n          {id}\n        </div>\n        {pageError &&\n          <PageError\n            className=\"max-w-2xl mx-auto py-32\"\n            message={pageError.message}\n            onRetry={() => {\n              streamSWR.mutate();\n            }}\n          />\n        }\n        {!pageError && !stream &&\n          <div className=\"py-32 text-center text-gray text-2xl\">Loading...</div>\n        }\n\n        {!pageError && stream &&\n          <main className={styles.stream}>\n            <div className={styles.left}>\n              <div className={classNames(styles.tile, styles.remaining)}>\n                <span className={styles.blockTitle}>\n                  Remaining\n                </span>\n                <span>\n                  {streamViewData(stream).timeLeft || 'Finished'}\n                </span>\n              </div>\n              <div className={classNames(styles.tile, styles.main)}>\n                <StreamProgress stream={stream} />\n                <StreamButtons stream={stream} />\n                <StreamSpeed stream={stream} />\n                <div className={styles.divider} />\n                <StreamComment stream={stream} />\n                <StreamCopyUrlBlock stream={stream} />\n              </div>\n            </div>\n            <div className={styles.right}>\n              <StreamData stream={stream} />\n              <OtherInfo stream={stream} />\n            </div>\n          </main>\n        }\n      </Layout>\n    </div>\n  );\n}\n","import { Button, DisplayMode as ButtonDisplayMode } from '@ui/components/Button';\n\nimport styles from './styles.module.scss';\n\nexport function NotFoundPage() {\n  return (\n    <div className={styles.root}>\n      <div className={styles.big404}>4<span className={styles.big0}>0</span>4</div>\n      <div className={styles.pageNotFound}>Page not found</div>\n      <div className={styles.weAreSorry}>\n        We're sorry the page<br />you requested was not found.\n      </div>\n      <Button\n        className={styles.backButton}\n        displayMode={ButtonDisplayMode.action}\n        onClick={() => window.history.back()}\n      >\n        Back\n      </Button>\n    </div>\n  );\n}\n","import React, { useEffect } from 'react';\n\nimport {\n  HashRouter as Router,\n  Route,\n  Switch,\n  Redirect,\n} from 'react-router-dom';\n\nimport { Header } from 'shared/components/Header';\nimport { PrivateRoute } from 'shared/components/PrivateRoute';\nimport { useRoketoContext } from 'app/roketo-context';\n\nimport { env } from 'shared/config';\nimport { ROUTES_MAP } from 'shared/helpers/routing';\n\nimport { StreamsPage } from './streams';\nimport { AuthorizePage } from './authorize';\nimport { StreamPage } from './stream';\nimport { NotFoundPage } from './not-found';\n\nconst TRASH_QUERY_PARAMS = ['transactionHashes', 'errorCode', 'errorMessage'];\n\nexport function Routing() {\n  useEffect(() => {\n    // Remove unused search params\n    const url = new URL(window.location.href);\n\n    TRASH_QUERY_PARAMS.forEach((param) => {\n      if (url.searchParams.has(param)) {\n        url.searchParams.delete(param);\n      }\n    });\n\n    window.history.replaceState(null, '', url);\n  });\n\n  const { auth } = useRoketoContext();\n\n  const {\n    root,\n    stream,\n    streams,\n    authorize,\n  } = ROUTES_MAP;\n\n  return (\n    <Router basename={env.PUBLIC_URL}>\n      <Header />\n\n      <Switch>\n        <PrivateRoute\n          exact\n          redirect={<Redirect to={streams.path} />}\n          allowed={!auth.signedIn}\n          path={root.path}\n        >\n          <Redirect to={authorize.path} />\n        </PrivateRoute>\n\n        <PrivateRoute\n          exact\n          redirect={<Redirect to={streams.path} />}\n          allowed={!auth.signedIn}\n          path={authorize.path}\n        >\n          <AuthorizePage />\n        </PrivateRoute>\n\n        <Route exact path={stream.path}>\n          <StreamPage />\n        </Route>\n\n        <PrivateRoute\n          exact\n          redirect={<Redirect to={authorize.path} />}\n          allowed={auth.signedIn}\n          path={streams.path}\n        >\n          <StreamsPage />\n        </PrivateRoute>\n\n        <Route render={NotFoundPage} />\n      </Switch>\n    </Router>\n  );\n}\n","import React from 'react';\nimport 'error-polyfill';\n\nimport { Routing } from 'pages';\n\nimport { RoketoContextProvider } from './roketo-context';\nimport './index.scss';\n\nfunction App() {\n  return (\n    <RoketoContextProvider>\n      <Routing />\n    </RoketoContextProvider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Modal from 'react-modal';\nimport App from './app';\n\nconst rootEl = document.getElementById('root')!;\n\nModal.setAppElement(rootEl);\nReactDOM.render(<App />, rootEl);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"styles_root__2_gZI\",\"description\":\"styles_description__9SwXr\",\"preparedTokensWrapper\":\"styles_preparedTokensWrapper__1n7o-\",\"preparedToken\":\"styles_preparedToken__3wMsS\",\"info\":\"styles_info__OjsX3\",\"amount\":\"styles_amount__2Pqv4\",\"symbol\":\"styles_symbol__HcQ7S\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"styles_root__2UE9y\",\"section\":\"styles_section__2YjD4\",\"flex\":\"styles_flex__5E-Gn\",\"spaceBetween\":\"styles_spaceBetween__9X4EG\",\"buttonsWrapper\":\"styles_buttonsWrapper__KUQAt\",\"title\":\"styles_title__1SNWA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"styles_root__3Kyti\",\"wrapper\":\"styles_wrapper__P7W3S\",\"balance\":\"styles_balance__o5yA-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"styles_wrapper__TAkqw\",\"speedInput\":\"styles_speedInput__pndxz\",\"input\":\"styles_input__2-TTa\",\"label\":\"styles_label__1NoFr\",\"formLabel\":\"styles_formLabel__2w0iu\",\"speed\":\"styles_speed__M079a\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"flexColumn\":\"styles_flexColumn__vggyT\",\"withPaddings\":\"styles_withPaddings__3K5aA\",\"title\":\"styles_title__284Zv\",\"emptyState\":\"styles_emptyState__3rrQX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profileForm\":\"profile-form_profileForm__1jUM6\",\"busy\":\"profile-form_busy__vD8Fs\",\"label\":\"profile-form_label__3g60-\",\"inputName\":\"profile-form_inputName__2sp66\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"styles_overlay__2aFDm\",\"bodyOverflowHidden\":\"styles_bodyOverflowHidden__1QZAq\",\"content\":\"styles_content__2Cjkl\",\"title\":\"styles_title__1w-yg\",\"close\":\"styles_close__1xZ3p\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"layout\":\"styles_layout__1Zp8q\",\"root\":\"styles_root__17WVD\",\"big404\":\"styles_big404__1ZrOC\",\"big0\":\"styles_big0__1G3uC\",\"pageNotFound\":\"styles_pageNotFound__2_Tlm\",\"weAreSorry\":\"styles_weAreSorry__-XpXJ\",\"backButton\":\"styles_backButton__2uRdQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"layout\":\"styles_layout__3dfSX\",\"wrapper\":\"styles_wrapper__2vwX1\",\"root\":\"styles_root__3L49I\",\"logo\":\"styles_logo__1dFWz\",\"left\":\"styles_left__fS0Yp\",\"right\":\"styles_right__19YK4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"styles_root__37pAo\",\"label\":\"styles_label__1Z1u2\",\"description\":\"styles_description__3HMUq\",\"error\":\"styles_error__iK_dp\",\"required\":\"styles_required__eL5Iv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dropdownWrapper\":\"styles_dropdownWrapper__1mfn5\",\"dropdownOpener\":\"styles_dropdownOpener__xnUU_\",\"tokenOption\":\"styles_tokenOption__2nenl\",\"withHover\":\"styles_withHover__17YXX\",\"dropdownMenu\":\"styles_dropdownMenu__1M_bV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"progressBar\":\"styles_progressBar__WfqVp\",\"streamed\":\"styles_streamed__2JSLG\",\"progress\":\"styles_progress__1Vfwm\",\"withdrawn\":\"styles_withdrawn__2eocI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"styles_root__1Ickw\",\"controls\":\"styles_controls__35vzk\",\"flexCenter\":\"styles_flexCenter__3vowm\",\"description\":\"styles_description__3Jnep\",\"withMarginRight\":\"styles_withMarginRight__20A25\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"styles_root__1apvt\",\"centeredFlex\":\"styles_centeredFlex__1HZSf\",\"infoRow\":\"styles_infoRow__2vMrz\",\"numericProgress\":\"styles_numericProgress__2AuoP\",\"breadbrumbs\":\"styles_breadbrumbs__BUT8d\",\"streamsLink\":\"styles_streamsLink__L0U7w\",\"breadbrumb\":\"styles_breadbrumb__NNWx2\",\"stream\":\"styles_stream__3Fr_5\",\"left\":\"styles_left__1kdhS\",\"right\":\"styles_right__vZBRd\",\"tile\":\"styles_tile__2fhhc\",\"remaining\":\"styles_remaining__2iHJj\",\"blockTitle\":\"styles_blockTitle__TMhpt\",\"main\":\"styles_main__18lFE\",\"tokenIcon\":\"styles_tokenIcon__2BgHM\",\"buttons\":\"styles_buttons__kZcO7\",\"divider\":\"styles_divider__hCiPy\",\"speed\":\"styles_speed__3klLg\",\"commentBody\":\"styles_commentBody__1ywdK\",\"copyTitle\":\"styles_copyTitle__2hQ0e\",\"copyButton\":\"styles_copyButton__10iJH\",\"linkIcon\":\"styles_linkIcon__1XYWy\",\"link\":\"styles_link__24b3y\",\"infoTile\":\"styles_infoTile__2Te2a\",\"bigHeader\":\"styles_bigHeader__24zbe\",\"infoTitle\":\"styles_infoTitle__wuj-6\",\"font16\":\"styles_font16__3CMGR\",\"font14\":\"styles_font14__2T9bM\",\"font12\":\"styles_font12__eO0Tl\",\"grey\":\"styles_grey__3NsWF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"styles_root__2eQAJ\",\"primary\":\"styles_primary__F4Fip\",\"action\":\"styles_action__ZCYgS\",\"simple\":\"styles_simple__2Db_y\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"styles_root__1_66R\",\"radio\":\"styles_radio__3I1ek\",\"radioActive\":\"styles_radioActive__2fx8l\",\"text\":\"styles_text__21Txd\"};"],"sourceRoot":""}